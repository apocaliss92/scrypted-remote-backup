/*! For license information please see main.nodejs.js.LICENSE.txt */
(()=>{var e={1687:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.sdk=t.MixinDeviceBase=t.ScryptedDeviceBase=void 0,i(r(8281),t);const o=r(8281);class s extends o.DeviceBase{constructor(e){super(),this.nativeId=e}get storage(){return this._storage||(this._storage=deviceManager.getDeviceStorage(this.nativeId)),this._storage}get log(){return this._log||(this._log=deviceManager.getDeviceLogger(this.nativeId)),this._log}get console(){return this._console||(this._console=deviceManager.getDeviceConsole(this.nativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.nativeId)}_lazyLoadDeviceState(){this._deviceState||(this.nativeId?this._deviceState=deviceManager.getDeviceState(this.nativeId):this._deviceState=deviceManager.getDeviceState())}onDeviceEvent(e,t){return deviceManager.onDeviceEvent(this.nativeId,e,t)}}t.ScryptedDeviceBase=s;class a extends o.DeviceBase{constructor(e){super(),this._listeners=new Set,this.mixinDevice=e.mixinDevice,this.mixinDeviceInterfaces=e.mixinDeviceInterfaces,this.mixinStorageSuffix=e.mixinStorageSuffix,this._deviceState=e.mixinDeviceState,this.nativeId=systemManager.getDeviceById(this.id).nativeId,this.mixinProviderNativeId=e.mixinProviderNativeId,this._deviceState.__rpcproxy_traps_all_properties&&"string"==typeof this._deviceState.id&&(this._deviceState=deviceManager.createDeviceState(this._deviceState.id,this._deviceState.setState))}get storage(){if(!this._storage){const e=this.mixinStorageSuffix,t=this.id+(e?":"+e:"");this._storage=deviceManager.getMixinStorage(t,this.mixinProviderNativeId)}return this._storage}get console(){return this._console||(deviceManager.getMixinConsole?this._console=deviceManager.getMixinConsole(this.id,this.mixinProviderNativeId):this._console=deviceManager.getDeviceConsole(this.mixinProviderNativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.mixinProviderNativeId)}onDeviceEvent(e,t){return deviceManager.onMixinEvent(this.id,this,e,t)}_lazyLoadDeviceState(){}manageListener(e){this._listeners.add(e)}release(){for(const e of this._listeners)e.removeListener()}}t.MixinDeviceBase=a,function(){function e(e){return function(){return this._lazyLoadDeviceState(),this._deviceState?.[e]}}function t(e){return function(t){this._lazyLoadDeviceState(),this._deviceState?this._deviceState[e]=t:console.warn("device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.")}}for(const r of Object.values(o.ScryptedInterfaceProperty))r!==o.ScryptedInterfaceProperty.nativeId&&(Object.defineProperty(s.prototype,r,{set:t(r),get:e(r)}),Object.defineProperty(a.prototype,r,{set:t(r),get:e(r)}))}(),t.sdk={};try{let e;try{e=pluginRuntimeAPI}catch(e){}Object.assign(t.sdk,{log:deviceManager.getDeviceLogger(void 0),deviceManager,endpointManager,mediaManager,systemManager,pluginHostAPI,...e});try{systemManager.setScryptedInterfaceDescriptors?.(o.TYPES_VERSION,o.ScryptedInterfaceDescriptors)?.catch((()=>{}))}catch(e){}}catch(e){console.error("sdk initialization error, import @scrypted/types or use @scrypted/client instead",e)}t.default=t.sdk},5798:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageSettings=void 0;const s=o(r(1687)),{systemManager:a}=s.default;t.StorageSettings=class{constructor(e,t){this.device=e,this.settings=t,this.values={},this.hasValue={};for(const e of Object.keys(t)){const r=t[e],n=()=>this.getItem(e);let i;i="clippath"!==r.type?n:()=>{try{return JSON.parse(n())}catch(e){}},Object.defineProperty(this.values,e,{get:i,set:t=>this.putSetting(e,t),enumerable:!0}),Object.defineProperty(this.hasValue,e,{get:()=>null!=this.device.storage.getItem(e),enumerable:!0})}}get keys(){const e={};for(const t of Object.keys(this.settings))e[t]=t;return e}async getSettings(){const e=await(this.options?.onGet?.()),t=[];for(const[r,n]of Object.entries(this.settings)){let i=Object.assign({},n);e?.[r]&&(i=Object.assign(i,e[r])),i.onGet&&(i=Object.assign(i,await i.onGet())),i.hide||await(this.options?.hide?.[r]?.())||(i.key=r,i.value=this.getItemInternal(r,i,!0),t.push(i),delete i.onPut,delete i.onGet,delete i.mapPut,delete i.mapGet)}return t}async putSetting(e,t){const r=this.settings[e];let n;return r&&(n=this.getItemInternal(e,r)),this.putSettingInternal(r,n,e,t)}putSettingInternal(e,t,r,n){e?.noStore||(e?.mapPut&&(n=e.mapPut(t,n)),null==n?this.device.storage.removeItem(r):"object"==typeof n?this.device.storage.setItem(r,JSON.stringify(n)):this.device.storage.setItem(r,n?.toString())),e?.onPut?.(t,n),e?.hide||this.device.onDeviceEvent(s.ScryptedInterface.Settings,void 0)}getItemInternal(e,t,r){if(!t)return this.device.storage.getItem(e);const n=function(e,t,r,n){if(null==e)return r();const i=t.multiple?"array":t.type;if("boolean"===i)return"true"===e||"false"!==e&&(r()||!1);if("number"===i){const t=parseFloat(e);return isNaN(t)?r()||0:t}if("integer"===i){const t=parseInt(e);return isNaN(t)?r()||0:t}if("array"===i){if(!e)return r()||[];try{return JSON.parse(e)}catch(e){return r()||[]}}if("device"===i)return n?e:a.getDeviceById(e)||a.getDeviceById(r());if(e&&t.json)try{return JSON.parse(e)}catch(e){return r()}return e||r()}(this.device.storage.getItem(e),t,(()=>null!=t.persistedDefaultValue?(this.putSettingInternal(t,void 0,e,t.persistedDefaultValue),t.persistedDefaultValue):t.defaultValue),r);return t.mapGet?t.mapGet(n):n}getItem(e){return this.getItemInternal(e,this.settings[e])}}},8281:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.AirPurifierMode=t.AirPurifierStatus=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.3.59";var r,n,i,o,s,a,c,l,u,h,d,f,p,g,_,m,y,b;t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.scryptedRuntimeArguments="scryptedRuntimeArguments",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.audioVolumes="audioVolumes",e.recordingActive="recordingActive",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.converters="converters",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.airPurifierState="airPurifierState",e.filterChangeIndication="filterChangeIndication",e.filterLifeLevel="filterLifeLevel",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo",e.systemDevice="systemDevice"}(r||(t.ScryptedInterfaceProperty=r={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.setAudioVolumes="setAudioVolumes",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getPrivacyMasks="getPrivacyMasks",e.setPrivacyMasks="setPrivacyMasks",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.deleteRecordingStream="deleteRecordingStream",e.setRecordingActive="setRecordingActive",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClipThumbnail="getVideoClipThumbnail",e.getVideoClips="getVideoClips",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.reboot="reboot",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.convertMedia="convertMedia",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.setAirPurifierState="setAirPurifierState",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames",e.connectStream="connectStream",e.getTTYSettings="getTTYSettings"}(n||(t.ScryptedInterfaceMethod=n={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},ScryptedPluginRuntime:{name:"ScryptedPluginRuntime",methods:[],properties:["scryptedRuntimeArguments"]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature"],properties:["temperatureSetting"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},AudioVolumeControl:{name:"AudioVolumeControl",methods:["setAudioVolumes"],properties:["audioVolumes"]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoCameraMask:{name:"VideoCameraMask",methods:["getPrivacyMasks","setPrivacyMasks"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:["recordingActive"]},VideoRecorderManagement:{name:"VideoRecorderManagement",methods:["deleteRecordingStream","setRecordingActive"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Reboot:{name:"Reboot",methods:["reboot"],properties:[]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},MediaConverter:{name:"MediaConverter",methods:["convertMedia"],properties:["converters"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},AirPurifier:{name:"AirPurifier",methods:["setAirPurifierState"],properties:["airPurifierState"]},FilterMaintenance:{name:"FilterMaintenance",methods:[],properties:["filterChangeIndication","filterLifeLevel"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},ObjectDetectionPreview:{name:"ObjectDetectionPreview",methods:[],properties:[]},ObjectDetectionGenerator:{name:"ObjectDetectionGenerator",methods:[],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]},StreamService:{name:"StreamService",methods:["connectStream"],properties:[]},TTY:{name:"TTY",methods:[],properties:[]},TTYSettings:{name:"TTYSettings",methods:["getTTYSettings"],properties:[]},ScryptedSystemDevice:{name:"ScryptedSystemDevice",methods:[],properties:["systemDevice"]},ScryptedDeviceCreator:{name:"ScryptedDeviceCreator",methods:[],properties:[]},ScryptedSettings:{name:"ScryptedSettings",methods:[],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.AirPurifier="AirPurifier",e.Unknown="Unknown"}(i||(t.ScryptedDeviceType=i={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(o||(t.HumidityMode=o={})),function(e){e.Auto="Auto",e.Manual="Manual"}(s||(t.FanMode=s={})),function(e){e.C="C",e.F="F"}(a||(t.TemperatureUnit=a={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(c||(t.ThermostatMode=c={})),function(e){e.Absolute="Absolute",e.Relative="Relative",e.Continuous="Continuous",e.Preset="Preset",e.Home="Home"}(l||(t.PanTiltZoomMovement=l={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(u||(t.LockState=u={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(h||(t.ChargeState=h={})),function(e){e.Inactive="Inactive",e.Idle="Idle",e.Active="Active",e.ActiveNightMode="ActiveNightMode"}(d||(t.AirPurifierStatus=d={})),function(e){e.Manual="Manual",e.Automatic="Automatic"}(f||(t.AirPurifierMode=f={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(p||(t.AirQuality=p={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(g||(t.SecuritySystemMode=g={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(_||(t.SecuritySystemObstruction=_={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(m||(t.MediaPlayerState=m={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.ScryptedPluginRuntime="ScryptedPluginRuntime",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.AudioVolumeControl="AudioVolumeControl",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoCameraMask="VideoCameraMask",e.VideoRecorder="VideoRecorder",e.VideoRecorderManagement="VideoRecorderManagement",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Reboot="Reboot",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.MediaConverter="MediaConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.AirPurifier="AirPurifier",e.FilterMaintenance="FilterMaintenance",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.ObjectDetectionPreview="ObjectDetectionPreview",e.ObjectDetectionGenerator="ObjectDetectionGenerator",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator",e.StreamService="StreamService",e.TTY="TTY",e.TTYSettings="TTYSettings",e.ScryptedSystemDevice="ScryptedSystemDevice",e.ScryptedDeviceCreator="ScryptedDeviceCreator",e.ScryptedSettings="ScryptedSettings"}(y||(t.ScryptedInterface=y={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.ServerId="text/x-server-id",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(b||(t.ScryptedMimeTypes=b={}))},581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5825);class i extends n.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){const e=o.get(this);if("boolean"!=typeof e)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return e}}n.defineEventAttribute(i.prototype,"abort");const o=new WeakMap;Object.defineProperties(i.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(i.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class s{constructor(){a.set(this,function(){const e=Object.create(i.prototype);return n.EventTarget.call(e),o.set(e,!1),e}())}get signal(){return c(this)}abort(){var e;e=c(this),!1===o.get(e)&&(o.set(e,!0),e.dispatchEvent({type:"abort"}))}}const a=new WeakMap;function c(e){const t=a.get(e);if(null==t)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===e?"null":typeof e));return t}Object.defineProperties(s.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(s.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=s,t.AbortSignal=i,t.default=s,e.exports=s,e.exports.AbortController=e.exports.default=s,e.exports.AbortSignal=i},1922:(e,t,r)=>{"use strict";const{Buffer:n}=r(181),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},o.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},o.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);const o=!!e,s=this._offset(r),a=i-r;let c=a,l=o&&t||0,u=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,l),l+=this._bufs[t].length;return e}if(c<=this._bufs[s[0]].length-u)return o?this._bufs[s[0]].copy(e,t,u,u+c):this._bufs[s[0]].slice(u,u+c);o||(e=n.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){const r=this._bufs[t].length-u;if(!(c>r)){this._bufs[t].copy(e,l,u,u+c),l+=r;break}this._bufs[t].copy(e,l,u),l+=r,c-=r,u&&(u=0)}return e.length>l?e.slice(0,l):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=n.from([e]):"string"==typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;s<t.length;){if(t.length-s>=e.length){const r=t.indexOf(e,s);if(-1!==r)return this._reverseOffset([o,r]);s=t.length-e.length+1}else{const t=this._reverseOffset([o,s]);if(this._match(t,e))return t;s++}}s=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},e.exports=o},4298:(e,t,r)=>{"use strict";const n=r(6045).Duplex,i=r(5198),o=r(1922);function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),n.call(this)}i(s,n),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=o},8990:(e,t,r)=>{"use strict";const{SymbolDispose:n}=r(4861),{AbortError:i,codes:o}=r(3954),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:c}=r(2276),l=r(5209),{ERR_INVALID_ARG_TYPE:u}=o;let h;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!s(r)&&!a(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=s(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[c](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{h=h||r(9837).addAbortListener;const i=h(e,o);l(t,i[n])}return t}},9390:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:s}=r(4861),{Buffer:a}=r(181),{inspect:c}=r(9837);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);const t=a.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}t+=o,e-=o.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){const t=a.allocUnsafe(e),r=e;let n=this.head,i=0;do{const a=n.data;if(!(e>a.length)){e===a.length?(o(t,a,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),r-e),this.head=n,n.data=a.slice(e));break}o(t,a,r-e),e-=a.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},3677:(e,t,r)=>{"use strict";const{pipeline:n}=r(2379),i=r(1331),{destroyer:o}=r(4227),{isNodeStream:s,isReadable:a,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:h,isReadableStream:d}=r(2276),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(3954),_=r(5209);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let r=0;r<e.length;++r)if(s(e[r])||l(e[r])){if(r<e.length-1&&!(a(e[r])||d(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be readable");if(r>0&&!(c(e[r])||h(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be writable")}let r,m,y,b,w;const A=e[0],v=n(e,(function(e){const t=b;b=null,t?t(e):e?w.destroy(e):S||E||w.destroy()})),E=!!(c(A)||h(A)||u(A)),S=!!(a(v)||d(v)||u(v));if(w=new i({writableObjectMode:!(null==A||!A.writableObjectMode),readableObjectMode:!(null==v||!v.readableObjectMode),writable:E,readable:S}),E){if(s(A))w._write=function(e,t,n){A.write(e,t)?n():r=n},w._final=function(e){A.end(),m=e},A.on("drain",(function(){if(r){const e=r;r=null,e()}}));else if(l(A)){const e=(u(A)?A.writable:A).getWriter();w._write=async function(t,r,n){try{await e.ready,e.write(t).catch((()=>{})),n()}catch(e){n(e)}},w._final=async function(t){try{await e.ready,e.close().catch((()=>{})),m=t}catch(e){t(e)}}}const e=u(v)?v.readable:v;_(e,(()=>{if(m){const e=m;m=null,e()}}))}if(S)if(s(v))v.on("readable",(function(){if(y){const e=y;y=null,e()}})),v.on("end",(function(){w.push(null)})),w._read=function(){for(;;){const e=v.read();if(null===e)return void(y=w._read);if(!w.push(e))return}};else if(l(v)){const e=(u(v)?v.readable:v).getReader();w._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!w.push(t))return;if(r)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===b||(e=new f),y=null,r=null,m=null,null===b?t(e):(b=t,s(v)&&o(v,e))},w}},4227:(e,t,r)=>{"use strict";const n=r(7097),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=r(3954),{Symbol:a}=r(4861),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:h}=r(2276),d=a("kDestroy"),f=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,s=e._writableState;p(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(_,e,t):n.nextTick(m,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function _(e,t){y(e,t),m(e)}function m(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function b(e,t,r){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(y,e,t):y(e,t))}function w(e){let t=!1;function r(r){if(t)return void b(e,null!=r?r:new o);t=!0;const i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(d,r):r?b(e,r,!0):n.nextTick(A,e)}try{e._construct((e=>{n.nextTick(r,e)}))}catch(e){n.nextTick(r,e)}}function A(e){e.emit(f)}function v(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function E(e){e.emit("close")}function S(e,t){e.emit("error",t),n.nextTick(E,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||n.nextTick(w,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new s),h(e)?(e.socket=null,e.destroy(t)):v(e)?e.abort():v(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(S,e,t):n.nextTick(E,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(d,(function(r){g(this,i(r,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},1331:(e,t,r)=>{"use strict";const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:s}=r(4861);e.exports=l;const a=r(6017),c=r(9617);s(l.prototype,a.prototype),s(l,a);{const e=o(c.prototype);for(let t=0;t<e.length;t++){const r=e[t];l.prototype[r]||(l.prototype[r]=c.prototype[r])}}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,h;function d(){return void 0===u&&(u={}),u}n(l.prototype,{writable:{__proto__:null,...i(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(c.prototype,"writableLength")},writableFinished:{__proto__:null,...i(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return d().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return d().newReadableWritablePairFromDuplex(e)},l.from=function(e){return h||(h=r(5057)),h(e,"body")}},5057:(e,t,r)=>{const n=r(7097),i=r(181),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:f}=r(2276),p=r(5209),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:_,ERR_INVALID_RETURN_VALUE:m}}=r(3954),{destroyer:y}=r(4227),b=r(1331),w=r(6017),A=r(9617),{createDeferredPromise:v}=r(9837),E=r(4769),S=globalThis.Blob||i.Blob,I="undefined"!=typeof S?function(e){return e instanceof S}:function(e){return!1},k=globalThis.AbortController||r(581).AbortController,{FunctionPrototypeCall:C}=r(4861);class R extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(e){const t=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,r=e.writable;let n,i,a,c,l,u=!!o(t),h=!!s(r);function d(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new R({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:u,writable:h}),h&&(p(r,(e=>{h=!1,e&&y(t,e),d(e)})),l._write=function(e,t,i){r.write(e,t)?i():n=i},l._final=function(e){r.end(),i=e},r.on("drain",(function(){if(n){const e=n;n=null,e()}})),r.on("finish",(function(){if(i){const e=i;i=null,e()}}))),u&&(p(t,(e=>{u=!1,e&&y(t,e),d(e)})),t.on("readable",(function(){if(a){const e=a;a=null,e()}})),t.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const e=t.read();if(null===e)return void(a=l._read);if(!l.push(e))return}}),l._destroy=function(e,o){e||null===c||(e=new g),a=null,n=null,i=null,null===c?o(e):(c=o,y(r,e),y(t,e))},l}e.exports=function e(t,r){if(h(t))return t;if(l(t))return T({readable:t});if(u(t))return T({writable:t});if(c(t))return T({writable:!1,readable:!1});if(d(t))return T({readable:w.fromWeb(t)});if(f(t))return T({writable:A.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:r}=v();const i=new k,o=i.signal,s=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:s,cb:a}=await e;if(n.nextTick(a),s)return;if(o.aborted)throw new g(void 0,{cause:o.reason});({promise:t,resolve:r}=v()),yield i}}(),{signal:o});return{value:s,write(e,t,n){const i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return E(R,e,{objectMode:!0,write:i,final:o,destroy:s});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const r=C(c,e,(e=>{if(null!=e)throw new m("nully","body",e)}),(e=>{y(t,e)}));return t=new R({objectMode:!0,readable:!1,write:i,final(e){o((async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}}))},destroy:s})}throw new m("Iterable, AsyncIterable or AsyncFunction",r,e)}if(I(t))return e(t.arrayBuffer());if(a(t))return E(R,t,{objectMode:!0,writable:!1});if(d(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return R.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return T({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return C(i,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{y(e,t)})),e=new R({objectMode:!0,writable:!1,read(){}})}throw new _(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},5209:(e,t,r)=>{const n=r(7097),{AbortError:i,codes:o}=r(3954),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=o,{kEmptyObject:c,once:l}=r(9837),{validateAbortSignal:u,validateFunction:h,validateObject:d,validateBoolean:f}=r(5156),{Promise:p,PromisePrototypeThen:g,SymbolDispose:_}=r(4861),{isClosed:m,isReadable:y,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:A,isReadableErrored:v,isWritable:E,isWritableNodeStream:S,isWritableStream:I,isWritableFinished:k,isWritableErrored:C,isNodeStream:R,willEmitClose:T,kIsClosedPromise:B}=r(2276);let O;const P=()=>{};function N(e,t,o){var f,p;if(2===arguments.length?(o=t,t=c):null==t?t=c:d(t,"options"),h(o,"callback"),u(t.signal,"options.signal"),o=l(o),w(e)||I(e))return function(e,t,o){let s=!1,a=P;if(t.signal)if(a=()=>{s=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(a);else{O=O||r(9837).addAbortListener;const n=O(t.signal,a),i=o;o=l(((...t)=>{n[_](),i.apply(e,t)}))}const c=(...t)=>{s||n.nextTick((()=>o.apply(e,t)))};return g(e[B].promise,c,c),P}(e,t,o);if(!R(e))throw new s("stream",["ReadableStream","WritableStream","Stream"],e);const N=null!==(f=t.readable)&&void 0!==f?f:b(e),x=null!==(p=t.writable)&&void 0!==p?p:S(e),L=e._writableState,M=e._readableState,D=()=>{e.writable||j()};let U=T(e)&&b(e)===N&&S(e)===x,F=k(e,!1);const j=()=>{F=!0,e.destroyed&&(U=!1),(!U||e.readable&&!N)&&(N&&!H||o.call(e))};let H=A(e,!1);const W=()=>{H=!0,e.destroyed&&(U=!1),(!U||e.writable&&!x)&&(x&&!F||o.call(e))},$=t=>{o.call(e,t)};let Q=m(e);const K=()=>{Q=!0;const t=C(e)||v(e);return t&&"boolean"!=typeof t?o.call(e,t):N&&!H&&b(e,!0)&&!A(e,!1)?o.call(e,new a):!x||F||k(e,!1)?void o.call(e):o.call(e,new a)},q=()=>{Q=!0;const t=C(e)||v(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},G=()=>{e.req.on("finish",j)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?x&&!L&&(e.on("end",D),e.on("close",D)):(e.on("complete",j),U||e.on("abort",K),e.req?G():e.on("request",G)),U||"boolean"!=typeof e.aborted||e.on("aborted",K),e.on("end",W),e.on("finish",j),!1!==t.error&&e.on("error",$),e.on("close",K),Q?n.nextTick(K):null!=L&&L.errorEmitted||null!=M&&M.errorEmitted?U||n.nextTick(q):(N||U&&!y(e)||!F&&!1!==E(e))&&(x||U&&!E(e)||!H&&!1!==y(e))?M&&e.req&&e.aborted&&n.nextTick(q):n.nextTick(q);const V=()=>{o=P,e.removeListener("aborted",K),e.removeListener("complete",j),e.removeListener("abort",K),e.removeListener("request",G),e.req&&e.req.removeListener("finish",j),e.removeListener("end",D),e.removeListener("close",D),e.removeListener("finish",j),e.removeListener("end",W),e.removeListener("error",$),e.removeListener("close",K)};if(t.signal&&!Q){const s=()=>{const r=o;V(),r.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(s);else{O=O||r(9837).addAbortListener;const n=O(t.signal,s),i=o;o=l(((...t)=>{n[_](),i.apply(e,t)}))}}return V}e.exports=N,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=c),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),n=t.cleanup),new p(((r,i)=>{const o=N(e,t,(e=>{n&&o(),e?i(e):r()}))}))}},4769:(e,t,r)=>{"use strict";const n=r(7097),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:s}=r(4861),{Buffer:a}=r(181),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=r(3954).codes;e.exports=function(e,t,r){let u,h;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])h=!0,u=t[o]();else{if(!t||!t[s])throw new c("iterable",["Iterable"],t);h=!1,u=t[s]()}const d=new e({objectMode:!0,highWaterMark:1,...r});let f=!1;return d._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=h?await u.next():u.next();if(t)d.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(d.push(t))continue;f=!1}}catch(e){d.destroy(e)}break}}())},d._destroy=function(e,t){i(async function(e){const t=null!=e,r="function"==typeof u.throw;if(t&&r){const{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),(()=>n.nextTick(t,e)),(r=>n.nextTick(t,r||e)))},d}},8194:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(4861),{EventEmitter:o}=r(4434);function s(e){o.call(this,e)}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(s.prototype,o.prototype),i(s,o),s.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",c),r.on("close",l));let s=!1;function c(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){h(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function h(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",c),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return a(r,"error",u),a(e,"error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e},e.exports={Stream:s,prependListener:a}},6968:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(581).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:c}=r(3954),{validateAbortSignal:l,validateInteger:u,validateObject:h}=r(5156),d=r(4861).Symbol("kWeak"),f=r(4861).Symbol("kResistStopPropagation"),{finished:p}=r(5209),g=r(3677),{addAbortSignalNoValidate:_}=r(8990),{isWritable:m,isNodeStream:y}=r(2276),{deprecate:b}=r(9837),{ArrayPrototypePush:w,Boolean:A,MathFloor:v,Number:E,NumberIsNaN:S,Promise:I,PromiseReject:k,PromiseResolve:C,PromisePrototypeThen:R,Symbol:T}=r(4861),B=T("kEmpty"),O=T("kEof");function P(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let n=1;null!=(null==t?void 0:t.concurrency)&&(n=v(t.concurrency));let i=n-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=v(t.highWaterMark)),u(n,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=n,async function*(){const o=r(9837).AbortSignalAny([null==t?void 0:t.signal].filter(A)),s=this,a=[],l={signal:o};let u,h,d=!1,f=0;function p(){d=!0,g()}function g(){f-=1,_()}function _(){h&&!d&&f<n&&a.length<i&&(h(),h=null)}!async function(){try{for await(let t of s){if(d)return;if(o.aborted)throw new c;try{if(t=e(t,l),t===B)continue;t=C(t)}catch(e){t=k(e)}f+=1,R(t,g,p),a.push(t),u&&(u(),u=null),!d&&(a.length>=i||f>=n)&&await new I((e=>{h=e}))}a.push(O)}catch(e){const t=k(e);R(t,g,p),a.push(t)}finally{d=!0,u&&(u(),u=null)}}();try{for(;;){for(;a.length>0;){const e=await a[0];if(e===O)return;if(o.aborted)throw new c;e!==B&&(yield e),a.shift(),_()}await new I((e=>{u=e}))}}finally{d=!0,h&&(h(),h=null)}}.call(this)}async function N(e,t=void 0){for await(const r of x.call(this,e,t))return!0;return!1}function x(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return P.call(this,(async function(t,r){return await e(t,r)?t:B}),t)}class L extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function M(e){if(e=E(e),S(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b((function(e=void 0){return null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c({cause:e.signal.reason});yield[t++,n]}}.call(this)}),"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;e--<=0&&(yield r)}}.call(this)},filter:x,flatMap:function(e,t){const r=P.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:P,take:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;if(e-- >0&&(yield r),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),y(e)&&!m(e))throw new i("stream",e,"must be writable");const r=g(this,e);return null!=t&&t.signal&&_(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await N.call(this,(async(...t)=>!await e(...t)),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const r of P.call(this,(async function(t,r){return await e(t,r),B}),t));},reduce:async function(e,t,r){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&h(r,"options"),null!=(null==r?void 0:r.signal)&&l(r.signal,"options.signal");let s=arguments.length>1;if(null!=r&&null!==(i=r.signal)&&void 0!==i&&i.aborted){const e=new c(void 0,{cause:r.signal.reason});throw this.once("error",(()=>{})),await p(this.destroy(e)),e}const a=new n,u=a.signal;if(null!=r&&r.signal){const e={once:!0,[d]:this,[f]:!0};r.signal.addEventListener("abort",(()=>a.abort()),e)}let g=!1;try{for await(const n of this){var _;if(g=!0,null!=r&&null!==(_=r.signal)&&void 0!==_&&_.aborted)throw new c;s?t=await e(t,n,{signal:u}):(t=n,s=!0)}if(!g&&!s)throw new L}finally{a.abort()}return t},toArray:async function(e){null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c(void 0,{cause:e.signal.reason});w(t,n)}return t},some:N,find:async function(e,t){for await(const r of x.call(this,e,t))return r}}},8111:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n}=r(4861);e.exports=o;const i=r(7541);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},2379:(e,t,r)=>{const n=r(7097),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:s,SymbolDispose:a}=r(4861),c=r(5209),{once:l}=r(9837),u=r(4227),h=r(1331),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:g,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:y}=r(3954),{validateFunction:b,validateAbortSignal:w}=r(5156),{isIterable:A,isReadable:v,isReadableNodeStream:E,isNodeStream:S,isTransformStream:I,isWebStream:k,isReadableStream:C,isReadableFinished:R}=r(2276),T=globalThis.AbortController||r(581).AbortController;let B,O,P;function N(e,t,r){let n=!1;e.on("close",(()=>{n=!0}));return{destroy:t=>{n||(n=!0,u.destroyer(e,t||new _("pipe")))},cleanup:c(e,{readable:t,writable:r},(e=>{n=!e}))}}function x(e){if(A(e))return e;if(E(e))return async function*(e){O||(O=r(6017));yield*O.prototype[s].call(e)}(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function L(e,t,r,{end:n}){let i,s=null;const a=e=>{if(e&&(i=e),s){const e=s;s=null,e()}},l=()=>new o(((e,t)=>{i?t(i):s=()=>{i?t(i):e()}}));t.on("drain",a);const u=c(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const r of e)t.write(r)||await l();n&&(t.end(),await l()),r()}catch(e){r(i!==e?d(i,e):e)}finally{u(),t.off("drain",a)}}async function M(e,t,r,{end:n}){I(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch((()=>{}));await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function D(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new g("streams");const s=new T,c=s.signal,l=null==o?void 0:o.signal,u=[];function d(){j(new y)}let _,m,b;w(l,"options.signal"),P=P||r(9837).addAbortListener,l&&(_=P(l,d));const R=[];let O,D=0;function F(e){j(e,0==--D)}function j(e,r){var i;if(!e||m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code||(m=e),m||r){for(;R.length;)R.shift()(m);null===(i=_)||void 0===i||i[a](),s.abort(),r&&(m||u.forEach((e=>e())),n.nextTick(t,m,b))}}for(let Q=0;Q<e.length;Q++){const K=e[Q],q=Q<e.length-1,G=Q>0,V=q||!1!==(null==o?void 0:o.end),Y=Q===e.length-1;if(S(K)){if(V){const{destroy:z,cleanup:X}=N(K,q,G);R.push(z),v(K)&&Y&&u.push(X)}function H(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&F(e)}K.on("error",H),v(K)&&Y&&u.push((()=>{K.removeListener("error",H)}))}if(0===Q)if("function"==typeof K){if(O=K({signal:c}),!A(O))throw new p("Iterable, AsyncIterable or Stream","source",O)}else O=A(K)||E(K)||I(K)?K:h.from(K);else if("function"==typeof K){var W;if(I(O))O=x(null===(W=O)||void 0===W?void 0:W.readable);else O=x(O);if(O=K(O,{signal:c}),q){if(!A(O,!0))throw new p("AsyncIterable",`transform[${Q-1}]`,O)}else{var $;B||(B=r(8111));const J=new B({objectMode:!0}),Z=null===($=O)||void 0===$?void 0:$.then;if("function"==typeof Z)D++,Z.call(O,(e=>{b=e,null!=e&&J.write(e),V&&J.end(),n.nextTick(F)}),(e=>{J.destroy(e),n.nextTick(F,e)}));else if(A(O,!0))D++,L(O,J,F,{end:V});else{if(!C(O)&&!I(O))throw new p("AsyncIterable or Promise","destination",O);{const re=O.readable||O;D++,L(re,J,F,{end:V})}}O=J;const{destroy:ee,cleanup:te}=N(O,!1,!0);R.push(ee),Y&&u.push(te)}}else if(S(K)){if(E(O)){D+=2;const ne=U(O,K,F,{end:V});v(K)&&Y&&u.push(ne)}else if(I(O)||C(O)){const ie=O.readable||O;D++,L(ie,K,F,{end:V})}else{if(!A(O))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],O);D++,L(O,K,F,{end:V})}O=K}else if(k(K)){if(E(O))D++,M(x(O),K,F,{end:V});else if(C(O)||A(O))D++,M(O,K,F,{end:V});else{if(!I(O))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],O);D++,M(O.readable,K,F,{end:V})}O=K}else O=h.from(K)}return(null!=c&&c.aborted||null!=l&&l.aborted)&&n.nextTick(d),O}function U(e,t,r,{end:i}){let o=!1;if(t.on("close",(()=>{o||r(new m)})),e.pipe(t,{end:!1}),i){function s(){o=!0,t.end()}R(e)?n.nextTick(s):e.once("end",s)}else r();return c(e,{readable:!0,writable:!1},(t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)})),c(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:D,pipeline:function(...e){return D(e,l(function(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},6017:(e,t,r)=>{const n=r(7097),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:h,SafeSet:d,SymbolAsyncDispose:f,SymbolAsyncIterator:p,Symbol:g}=r(4861);e.exports=G,G.ReadableState=q;const{EventEmitter:_}=r(4434),{Stream:m,prependListener:y}=r(8194),{Buffer:b}=r(181),{addAbortSignal:w}=r(8990),A=r(5209);let v=r(9837).debuglog("stream",(e=>{v=e}));const E=r(9390),S=r(4227),{getHighWaterMark:I,getDefaultHighWaterMark:k}=r(924),{aggregateTwoErrors:C,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:B,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:P},AbortError:N}=r(3954),{validateObject:x}=r(5156),L=g("kPaused"),{StringDecoder:M}=r(3193),D=r(4769);u(G.prototype,m.prototype),u(G,m);const U=()=>{},{errorOrDestroy:F}=S,j=1,H=16,W=32,$=2048,Q=4096;function K(e){return{enumerable:!1,get(){return!!(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function q(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(1331)),this.state=$|Q|H|W,e&&e.objectMode&&(this.state|=j),n&&e&&e.readableObjectMode&&(this.state|=j),this.highWaterMark=e?I(this,e,"readableHighWaterMark",n):k(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,e&&!1===e.emitClose&&(this.state&=~$),e&&!1===e.autoDestroy&&(this.state&=~Q),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new M(e.encoding),this.encoding=e.encoding)}function G(e){if(!(this instanceof G))return new G(e);const t=this instanceof r(1331);this._readableState=new q(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),m.call(this,e),S.construct(this,(()=>{this._readableState.needReadable&&Z(this,this._readableState)}))}function V(e,t,r,n){v("readableAddChunk",t);const i=e._readableState;let o;if(i.state&j||("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=b.from(t,r).toString(i.encoding):(t=b.from(t,r),r=""))):t instanceof b?r="":m._isUint8Array(t)?(t=m._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new R("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)i.state&=-9,function(e,t){if(v("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?X(e):(t.needReadable=!1,t.emittedReadable=!0,J(e))}(e,i);else if(i.state&j||t&&t.length>0)if(n)if(4&i.state)F(e,new P);else{if(i.destroyed||i.errored)return!1;Y(e,i,t,!0)}else if(i.ended)F(e,new O);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?Y(e,i,t,!1):Z(e,i)):Y(e,i,t,!1)}else n||(i.state&=-9,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Y(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&X(e)),Z(e,t)}c(q.prototype,{objectMode:K(j),ended:K(2),endEmitted:K(4),reading:K(8),constructed:K(H),sync:K(W),needReadable:K(64),emittedReadable:K(128),readableListening:K(256),resumeScheduled:K(512),errorEmitted:K(1024),emitClose:K($),autoDestroy:K(Q),destroyed:K(8192),closed:K(16384),closeEmitted:K(32768),multiAwaitDrain:K(65536),readingMore:K(1<<17),dataEmitted:K(1<<18)}),G.prototype.destroy=S.destroy,G.prototype._undestroy=S.undestroy,G.prototype._destroy=function(e,t){t(e)},G.prototype[_.captureRejectionSymbol]=function(e){this.destroy(e)},G.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new N,this.destroy(e)),new h(((t,r)=>A(this,(n=>n&&n!==e?r(n):t(null)))))},G.prototype.push=function(e,t){return V(this,e,t,!1)},G.prototype.unshift=function(e,t){return V(this,e,t,!0)},G.prototype.isPaused=function(){const e=this._readableState;return!0===e[L]||!1===e.flowing},G.prototype.setEncoding=function(e){const t=new M(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function z(e,t){return e<=0||0===t.length&&t.ended?0:t.state&j?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function X(e){const t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(J,e))}function J(e){const t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function re(e){v("readable nexttick read 0"),e.read(0)}function ne(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=G.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=U;function i(t){this===e?(n(),n=U):n=t}e.on("readable",i);const o=A(e,{writable:!1},(e=>{r=e?C(r,e):null,n(),n=U}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new h(i)}}}catch(e){throw r=C(r,e),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):S.destroyer(e,null)}}(e,t);return r.stream=e,r}function se(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ae(e){const t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(ce,t,e))}function ce(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(le,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function le(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function he(){return void 0===ue&&(ue={}),ue}G.prototype.read=function(e){v("read",e),void 0===e?e=NaN:o(e)||(e=a(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new B("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ae(this):X(this),null;if(0===(e=z(e,t))&&t.ended)return 0===t.length&&ae(this),null;let n,i=!!(64&t.state);if(v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,v("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,v("reading, ended or constructing",i);else if(i){v("do read"),t.state|=8|W,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){F(this,e)}t.state&=~W,t.reading||(e=z(r,t))}return n=e>0?se(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ae(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},G.prototype._read=function(e){throw new T("_read()")},G.prototype.pipe=function(e,t){const r=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new d(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),v("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?a:_;function s(t,n){v("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){v("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),c&&e.removeListener("drain",c);e.removeListener("error",f),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",_),r.removeListener("data",h),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}())}function a(){v("onend"),e.end()}let c;i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",s);let l=!1;function u(){l||(1===i.pipes.length&&i.pipes[0]===e?(v("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(v("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),c||(c=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(v("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(v("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",c))}function h(t){v("ondata");const r=e.write(t);v("dest.write",r),!1===r&&u()}function f(t){if(v("onerror",t),_(),e.removeListener("error",f),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?F(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),_()}function g(){v("onfinish"),e.removeListener("close",p),_()}function _(){v("unpipe"),r.unpipe(e)}return r.on("data",h),y(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),!0===e.writableNeedDrain?u():i.flowing||(v("pipe resume"),r.resume()),e},G.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},G.prototype.on=function(e,t){const r=m.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,v("on readable",i.length,i.reading),i.length?X(this):i.reading||n.nextTick(re,this))),r},G.prototype.addListener=G.prototype.on,G.prototype.removeListener=function(e,t){const r=m.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(te,this),r},G.prototype.off=G.prototype.removeListener,G.prototype.removeAllListeners=function(e){const t=m.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(te,this),t},G.prototype.resume=function(){const e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(ne,e,t))}(this,e)),e[L]=!1,this},G.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},G.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{F(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=l(e);for(let t=1;t<r.length;t++){const n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},G.prototype[p]=function(){return oe(this)},G.prototype.iterator=function(e){return void 0!==e&&x(e,"options"),oe(this,e)},c(G.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),G._fromList=se,G.from=function(e,t){return D(G,e,t)},G.fromWeb=function(e,t){return he().newStreamReadableFromReadableStream(e,t)},G.toWeb=function(e,t){return he().newReadableStreamFromStreamReadable(e,t)},G.wrap=function(e,t){var r,n;return new G({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){S.destroyer(e,t),r(t)}}).wrap(e)}},924:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(4861),{validateInteger:o}=r(5156),{ERR_INVALID_ARG_VALUE:s}=r(3954).codes;let a=16384,c=16;function l(e){return e?c:a}e.exports={getHighWaterMark:function(e,t,r,o){const a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=a){if(!i(a)||a<0){throw new s(o?`options.${r}`:"options.highWaterMark",a)}return n(a)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?c=t:a=t}}},7541:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n,Symbol:i}=r(4861);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:o}=r(3954).codes,s=r(1331),{getHighWaterMark:a}=r(924);n(l.prototype,s.prototype),n(l,s);const c=i("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function h(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,r){throw new o("_transform()")},l.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[c]=r)}))},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},2276:(e,t,r)=>{"use strict";const{SymbolAsyncIterator:n,SymbolIterator:i,SymbolFor:o}=r(4861),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),c=o("nodejs.stream.readable"),l=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),h=o("nodejs.webstream.isClosedPromise"),d=o("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function _(e){return!(!e||g(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function m(e){return!(!e||g(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||g(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[s]||null!=n&&n.destroyed)}function w(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function A(e,t){if(!f(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function v(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&(f(e)&&e.readable&&!A(e))}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&(p(e)&&e.writable&&!w(e))}function S(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&S(e)}e.exports={isDestroyed:b,kIsDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,o,s,c,l,u,h;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(c=e._readableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==n?n:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(h=e._writableState)||void 0===h?void 0:h.errored))},kIsErrored:a,isReadable:v,kIsReadable:c,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:l,isClosed:function(e){if(!g(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&S(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return g(e)?!!b(e)||(!1===(null==t?void 0:t.readable)||!v(e))&&(!1===(null==t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[i]:"function"==typeof e[n]||"function"==typeof e[i])},isReadableNodeStream:f,isReadableStream:_,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:A,isReadableErrored:function(e){var t,r;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return _(e)||m(e)||y(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:m,isWritableEnded:w,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&I(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},9617:(e,t,r)=>{const n=r(7097),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:d}=r(4861);e.exports=x,x.WritableState=P;const{EventEmitter:f}=r(4434),p=r(8194).Stream,{Buffer:g}=r(181),_=r(4227),{addAbortSignal:m}=r(8990),{getHighWaterMark:y,getDefaultHighWaterMark:b}=r(924),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:C,ERR_UNKNOWN_ENCODING:R}=r(3954).codes,{errorOrDestroy:T}=_;function B(){}l(x.prototype,p.prototype),l(x,p);const O=h("kOnFinished");function P(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(1331)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",n):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,N(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function N(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function x(e){const t=this instanceof r(1331);if(!t&&!s(x,this))return new x(e);this._writableState=new P(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&m(e.signal,this)),p.call(this,e),_.construct(this,(()=>{const e=this._writableState;e.writing||W(this,e),K(this,e)}))}function L(e,t,r,i){const o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new R(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=B)}if(null===t)throw new k;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else{if(!p._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),r="buffer"}let s;return o.ending?s=new C:o.destroyed&&(s=new S("write")),s?(n.nextTick(i,s),T(e,s,!0),s):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const s=t.length<t.highWaterMark;s||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==B&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return s&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function M(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function D(e,t,r,n){--t.pendingcb,n(r),H(t),T(e,r)}function U(e,t){const r=e._writableState,i=r.sync,o=r.writecb;"function"==typeof o?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(D,e,r,t,o):D(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&W(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(F,r.afterWriteTickInfo)):j(e,r,1,o))):T(e,new v)}function F({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,j(e,t,r,n)}function j(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&H(t),K(e,t)}function H(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:n,callback:i}=e.buffered[r],o=e.objectMode?1:n.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}const r=e[O].splice(0);for(let t=0;t<r.length;t++){var n;r[t](null!==(n=e.errored)&&void 0!==n?n:new S("end"))}N(e)}function W(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:o}=t,s=r.length-n;if(!s)return;let a=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;const n=t.allNoop?B:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===a?r:i(r,a);o.allBuffers=t.allBuffers,M(e,t,!0,t.length,o,"",n),N(t)}else{do{const{chunk:n,encoding:i,callback:s}=r[a];r[a++]=null;M(e,t,!1,o?1:n.length,n,i,s)}while(a<r.length&&!t.writing);a===r.length?N(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function Q(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function i(i){if(r)T(e,null!=i?i:v());else if(r=!0,t.pendingcb--,i){const r=t[O].splice(0);for(let e=0;e<r.length;e++)r[e](i);T(e,i,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function K(e,t,r){$(t)&&(Q(e,t),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick(((e,t)=>{$(t)?q(e,t):t.pendingcb--}),e,t)):$(t)&&(t.pendingcb++,q(e,t))))}function q(e,t){t.pendingcb--,t.finished=!0;const r=t[O].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}P.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},a(P.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(x,d,{__proto__:null,value:function(e){return!!s(this,e)||this===x&&(e&&e._writableState instanceof P)}}),x.prototype.pipe=function(){T(this,new E)},x.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||W(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!g.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},x.prototype._write=function(e,t,r){if(!this._writev)throw new A("_write()");this._writev([{chunk:e,encoding:t}],r)},x.prototype._writev=null,x.prototype.end=function(e,t,r){const i=this._writableState;let s;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){const r=L(this,e,t);r instanceof o&&(s=r)}return i.corked&&(i.corked=1,this.uncork()),s||(i.errored||i.ending?i.finished?s=new I("end"):i.destroyed&&(s=new S("end")):(i.ending=!0,K(this,i,!0),i.ended=!0)),"function"==typeof r&&(s||i.finished?n.nextTick(r,s):i[O].push(r)),this},c(x.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=_.destroy;let V;function Y(){return void 0===V&&(V={}),V}x.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[O].length)&&n.nextTick(H,r),G.call(this,e,t),this},x.prototype._undestroy=_.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},x.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},x.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}},5156:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:_}=r(4861),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:v}}=r(3954),{normalizeEncoding:E}=r(9837),{isAsyncFunction:S,isArrayBufferView:I}=r(9837).types,k={};const C=/^[0-7]+$/;const R=m(((e,t,r=u,n=l)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);if(e<r||e>n)throw new A(t,`>= ${r} && <= ${n}`,e)})),T=m(((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);if(e<r||e>n)throw new A(t,`>= ${r} && <= ${n}`,e)})),B=m(((e,t,r=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new A(t,`>= ${n} && <= ${i}`,e)}));function O(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const P=m(((e,t,r)=>{if(!i(r,e)){const n=o(s(r,(e=>"string"==typeof e?`'${e}'`:p(e))),", ");throw new w(t,e,"must be one of: "+n)}}));function N(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function x(e,t,r){return null!=e&&d(e,t)?e[t]:r}const L=m(((e,t,r=null)=>{const i=x(r,"allowArray",!1),o=x(r,"allowFunction",!1);if(!x(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)})),M=m(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)})),D=m(((e,t,r=0)=>{if(!n(e))throw new b(t,"Array",e);if(e.length<r){throw new w(t,e,`must be longer than ${r}`)}}));const U=m(((e,t="buffer")=>{if(!I(e))throw new b(t,["Buffer","TypedArray","DataView"],e)}));const F=m(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)})),j=m(((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)})),H=m(((e,t)=>{if("function"!=typeof e||S(e))throw new b(t,"Function",e)})),W=m(((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)}));const $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Q(e,t){if("undefined"==typeof e||!f($,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if("undefined"==typeof e&&(e=r),"string"==typeof e){if(null===f(C,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=h(e,8)}return B(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)O(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++){const n=e[r],i=`${t}[${r}]`;if(null==n)throw new b(i,"AbortSignal",n);F(n,i)}},validateBoolean:N,validateBuffer:U,validateDictionary:M,validateEncoding:function(e,t){const r=E(t),n=e.length;if("hex"===r&&n%2!=0)throw new w("encoding",t,`is invalid for data of length ${n}`)},validateFunction:j,validateInt32:T,validateInteger:R,validateNumber:function(e,t,r=void 0,n){if("number"!=typeof e)throw new b(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&c(e))throw new A(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:L,validateOneOf:P,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===_(e).length||+e!=+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(O(e,t),void 0===k[e]){if(void 0!==k[g(e)])throw new v(e+" (signals must use all capital letters)");throw new v(e)}},validateString:O,validateUint32:B,validateUndefined:W,validateUnion:function(e,t,r){if(!i(r,e))throw new b(t,`('${o(r,"|")}')`,e)},validateAbortSignal:F,validateLinkHeaderValue:function(e){if("string"==typeof e)return Q(e,"hints"),e;if(n(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const i=e[n];Q(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},3954:(e,t,r)=>{"use strict";const{format:n,inspect:i,AggregateError:o}=r(9837),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function h(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function d(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class i extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return h(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const i=(t.match(/%[dfijoOs]/g)||[]).length;return h(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length?t:n(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,u[e]=i}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,r)=>{h("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],s=[],a=[];for(const e of t)h("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?o.push(e.toLowerCase()):l.test(e)?s.push(e):(h("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();n+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),f("ERR_INVALID_ARG_VALUE",((e,t,r="is invalid")=>{let n=i(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),f("ERR_MISSING_ARGS",((...e)=>{let t;h(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return h(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=d(String(r)):"bigint"==typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=d(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new s([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:p,codes:u}},6045:(e,t,r)=>{"use strict";const n=r(2203);if(n&&"disable"===process.env.READABLE_STREAM){const t=n.promises;e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>t}),e.exports.Stream=n.Stream}else{const t=r(6261),n=r(4254),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>n}),e.exports.Stream=t.Stream}e.exports.default=e.exports},4861:e=>{"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},9837:(e,t,r)=>{"use strict";const n=r(181),{kResistStopPropagation:i,SymbolDispose:o}=r(4861),s=globalThis.AbortSignal||r(581).AbortSignal,a=globalThis.AbortController||r(581).AbortController,c=Object.getPrototypeOf((async function(){})).constructor,l=globalThis.Blob||n.Blob,u="undefined"!=typeof l?function(e){return e instanceof l}:function(e){return!1},h=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)};class d extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:d,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e(((e,...n)=>e?r(e):t(...n)))})),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,r]){const n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"===r&&"object"==typeof n){return`${n.constructor!==Object?n.constructor.name:""} {}`.trim()}return n.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof c,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:u,deprecate:(e,t)=>e,addAbortListener:r(4434).addAbortListener||function(e,t){if(void 0===e)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);let r;return h(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new ERR_INVALID_ARG_TYPE(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[i]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[o](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:s.any||function(e){if(1===e.length)return e[0];const t=new a,r=()=>t.abort();return e.forEach((e=>{h(e,"signals"),e.addEventListener("abort",r,{once:!0})})),t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",r)))}),{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},6261:(e,t,r)=>{const{Buffer:n}=r(181),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:s}=r(4861),{promisify:{custom:a}}=r(9837),{streamReturningOperators:c,promiseReturningOperators:l}=r(6968),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(3954),h=r(3677),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=r(924),{pipeline:p}=r(2379),{destroyer:g}=r(4227),_=r(5209),m=r(4254),y=r(2276),b=e.exports=r(8194).Stream;b.isDestroyed=y.isDestroyed,b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.isWritable=y.isWritable,b.Readable=r(6017);for(const v of o(c)){const E=c[v];function w(...e){if(new.target)throw u();return b.Readable.from(s(E,this,e))}i(w,"name",{__proto__:null,value:E.name}),i(w,"length",{__proto__:null,value:E.length}),i(b.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(l)){const I=l[S];function w(...e){if(new.target)throw u();return s(I,this,e)}i(w,"name",{__proto__:null,value:I.name}),i(w,"length",{__proto__:null,value:I.length}),i(b.Readable.prototype,S,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}b.Writable=r(9617),b.Duplex=r(1331),b.Transform=r(7541),b.PassThrough=r(8111),b.pipeline=p;const{addAbortSignal:A}=r(8990);b.addAbortSignal=A,b.finished=_,b.destroy=g,b.compose=h,b.setDefaultHighWaterMark=d,b.getDefaultHighWaterMark=f,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>m}),i(p,a,{__proto__:null,enumerable:!0,get:()=>m.pipeline}),i(_,a,{__proto__:null,enumerable:!0,get:()=>m.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},4254:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(4861),{isIterable:o,isNodeStream:s,isWebStream:a}=r(2276),{pipelineImpl:c}=r(2379),{finished:l}=r(5209);r(6261),e.exports={finished:l,pipeline:function(...e){return new i(((t,r)=>{let i,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!s(u)&&!o(u)&&!a(u)){const t=n(e);i=t.signal,l=t.end}c(e,((e,n)=>{e?r(e):t(n)}),{signal:i,end:l})}))}}},5998:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(5329)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},5329:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+("undefined"==typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(4808),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8766:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(5998):e.exports=r(6356)},6356:(e,t,r)=>{const n=r(2018),i=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(9930);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(5329)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},5825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new WeakMap,n=new WeakMap;function i(e){const t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function o(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function s(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(t);for(let e=0;e<n.length;++e){const t=n[e];t in this||Object.defineProperty(this,t,a(t))}}function a(e){return{get(){return i(this).event[e]},set(t){i(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e){return{value(){const t=i(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function l(e){if(null==e||e===Object.prototype)return s;let t=n.get(e);return null==t&&(t=function(e,t){const r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){const o=r[i];if(!(o in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,o).value;Object.defineProperty(n.prototype,o,e?c(o):a(o))}}return n}(l(Object.getPrototypeOf(e)),e),n.set(e,t)),t}function u(e){return i(e).immediateStopped}function h(e,t){i(e).passiveListener=t}s.prototype={get type(){return i(this).event.type},get target(){return i(this).eventTarget},get currentTarget(){return i(this).currentTarget},composedPath(){const e=i(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return i(this).eventPhase},stopPropagation(){const e=i(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=i(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(i(this).event.bubbles)},get cancelable(){return Boolean(i(this).event.cancelable)},preventDefault(){o(i(this))},get defaultPrevented(){return i(this).canceled},get composed(){return Boolean(i(this).event.composed)},get timeStamp(){return i(this).timeStamp},get srcElement(){return i(this).eventTarget},get cancelBubble(){return i(this).stopped},set cancelBubble(e){if(!e)return;const t=i(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!i(this).canceled},set returnValue(e){e||o(i(this))},initEvent(){}},Object.defineProperty(s.prototype,"constructor",{value:s,configurable:!0,writable:!0}),"undefined"!=typeof window&&"undefined"!=typeof window.Event&&(Object.setPrototypeOf(s.prototype,window.Event.prototype),n.set(window.Event.prototype,s));const d=new WeakMap;function f(e){return null!==e&&"object"==typeof e}function p(e){const t=d.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function g(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=p(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||f(t)||(t=null);const r=p(this);let n=null,i=r.get(e);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(e,i.next):r.delete(e):n=i,i=i.next;if(null!==t){const i={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(e,i):n.next=i}},configurable:!0,enumerable:!0}}(t))}function _(e){function t(){m.call(this)}t.prototype=Object.create(m.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)g(t.prototype,e[r]);return t}function m(){if(!(this instanceof m)){if(1===arguments.length&&Array.isArray(arguments[0]))return _(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return _(e)}throw new TypeError("Cannot call a class as a function")}d.set(this,new Map)}m.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!f(t))throw new TypeError("'listener' should be a function or an object.");const n=p(this),i=f(r),o=(i?Boolean(r.capture):Boolean(r))?1:2,s={listener:t,listenerType:o,passive:i&&Boolean(r.passive),once:i&&Boolean(r.once),next:null};let a=n.get(e);if(void 0===a)return void n.set(e,s);let c=null;for(;null!=a;){if(a.listener===t&&a.listenerType===o)return;c=a,a=a.next}c.next=s},removeEventListener(e,t,r){if(null==t)return;const n=p(this),i=(f(r)?Boolean(r.capture):Boolean(r))?1:2;let o=null,s=n.get(e);for(;null!=s;){if(s.listener===t&&s.listenerType===i)return void(null!==o?o.next=s.next:null!==s.next?n.set(e,s.next):n.delete(e));o=s,s=s.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=p(this),r=e.type;let n=t.get(r);if(null==n)return!0;const o=function(e,t){return new(l(Object.getPrototypeOf(t)))(e,t)}(this,e);let s=null;for(;null!=n;){if(n.once?null!==s?s.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):s=n,h(o,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,o)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(o);if(u(o))break;n=n.next}return h(o,null),function(e,t){i(e).eventPhase=t}(o,0),function(e,t){i(e).currentTarget=t}(o,null),!o.defaultPrevented}},Object.defineProperty(m.prototype,"constructor",{value:m,configurable:!0,writable:!0}),"undefined"!=typeof window&&"undefined"!=typeof window.EventTarget&&Object.setPrototypeOf(m.prototype,window.EventTarget.prototype),t.defineEventAttribute=g,t.EventTarget=m,t.default=m,e.exports=m,e.exports.EventTarget=e.exports.default=m,e.exports.defineEventAttribute=g},4629:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)}},5198:(e,t,r)=>{try{var n=r(9023);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(6029)}},6029:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3089:(e,t,r)=>{"use strict";r.d(t,{CD:()=>S});var n,i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(){function e(e,t){this.ee=1,this.u=void 0,this.p=void 0,this.K=void 0,this.N=void 0,this.rr=void 0,this.u=e,this.p=t}return e.prototype.L=function(){var e=this;if(1===e.ee&&e.rr.rr===e)e=e.N;else if(e.K)for(e=e.K;e.N;)e=e.N;else{for(var t=e.rr;t.K===e;)t=(e=t).rr;e=t}return e},e.prototype.m=function(){var e=this;if(e.N){for(e=e.N;e.K;)e=e.K;return e}for(var t=e.rr;t.N===e;)t=(e=t).rr;return e.N!==t?t:e},e.prototype.ne=function(){var e=this.rr,t=this.N,r=t.K;return e.rr===this?e.rr=t:e.K===this?e.K=t:e.N=t,t.rr=e,t.K=this,this.rr=t,this.N=r,r&&(r.rr=this),t},e.prototype.te=function(){var e=this.rr,t=this.K,r=t.N;return e.rr===this?e.rr=t:e.K===this?e.K=t:e.N=t,t.rr=e,t.N=this,this.rr=t,this.K=r,r&&(r.rr=this),t},e}(),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tr=1,t}return i(t,e),t.prototype.ne=function(){var t=e.prototype.ne.call(this);return this.ie(),t.ie(),t},t.prototype.te=function(){var t=e.prototype.te.call(this);return this.ie(),t.ie(),t},t.prototype.ie=function(){this.tr=1,this.K&&(this.tr+=this.K.tr),this.N&&(this.tr+=this.N.tr)},t}(o),a=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(){function e(e){void 0===e&&(e=0),this.iteratorType=e}return e.prototype.equals=function(e){return this.o===e.o},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(function(){function e(){this.M=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this.M},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this.M},e.prototype.empty=function(){return 0===this.M},e}());function u(){throw new RangeError("Iterator access denied!")}var h=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=function(e){function t(t,r){void 0===t&&(t=function(e,t){return e<t?-1:e>t?1:0}),void 0===r&&(r=!1);var n=e.call(this)||this;return n.W=void 0,n.$=t,r?(n.re=s,n.v=function(e,t,r){var n=this.se(e,t,r);if(n){for(var i=n.rr;i!==this.h;)i.tr+=1,i=i.rr;var o=this.fe(n);if(o){var s=o,a=s.parentNode,c=s.grandParent,l=s.curNode;a.ie(),c.ie(),l.ie()}}return this.M},n.G=function(e){for(var t=this.he(e);t!==this.h;)t.tr-=1,t=t.rr}):(n.re=o,n.v=function(e,t,r){var n=this.se(e,t,r);return n&&this.fe(n),this.M},n.G=n.he),n.h=new n.re,n}return h(t,e),t.prototype.U=function(e,t){for(var r=this.h;e;){var n=this.$(e.u,t);if(n<0)e=e.N;else{if(!(n>0))return e;r=e,e=e.K}}return r},t.prototype.X=function(e,t){for(var r=this.h;e;){this.$(e.u,t)<=0?e=e.N:(r=e,e=e.K)}return r},t.prototype.Y=function(e,t){for(var r=this.h;e;){var n=this.$(e.u,t);if(n<0)r=e,e=e.N;else{if(!(n>0))return e;e=e.K}}return r},t.prototype.Z=function(e,t){for(var r=this.h;e;){this.$(e.u,t)<0?(r=e,e=e.N):e=e.K}return r},t.prototype.ue=function(e){for(;;){var t,r=e.rr;if(r===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===r.K)if(1===(t=r.N).ee)t.ee=0,r.ee=1,r===this.W?this.W=r.ne():r.ne();else{if(t.N&&1===t.N.ee)return t.ee=r.ee,r.ee=0,t.N.ee=0,void(r===this.W?this.W=r.ne():r.ne());t.K&&1===t.K.ee?(t.ee=1,t.K.ee=0,t.te()):(t.ee=1,e=r)}else if(1===(t=r.K).ee)t.ee=0,r.ee=1,r===this.W?this.W=r.te():r.te();else{if(t.K&&1===t.K.ee)return t.ee=r.ee,r.ee=0,t.K.ee=0,void(r===this.W?this.W=r.te():r.te());t.N&&1===t.N.ee?(t.ee=1,t.N.ee=0,t.ne()):(t.ee=1,e=r)}}},t.prototype.he=function(e){var t,r;if(1===this.M)return this.clear(),this.h;for(var n=e;n.K||n.N;){if(n.N)for(n=n.N;n.K;)n=n.K;else n=n.K;t=d([n.u,e.u],2),e.u=t[0],n.u=t[1],r=d([n.p,e.p],2),e.p=r[0],n.p=r[1],e=n}this.h.K===n?this.h.K=n.rr:this.h.N===n&&(this.h.N=n.rr),this.ue(n);var i=n.rr;return n===i.K?i.K=void 0:i.N=void 0,this.M-=1,this.W.ee=0,i},t.prototype.ae=function(e,t){return void 0!==e&&(!!this.ae(e.K,t)||(!!t(e)||this.ae(e.N,t)))},t.prototype.fe=function(e){for(;;){var t=e.rr;if(0===t.ee)return;var r=t.rr;if(t===r.K){if((n=r.N)&&1===n.ee){if(n.ee=t.ee=0,r===this.W)return;r.ee=1,e=r;continue}if(e===t.N){if(e.ee=0,e.K&&(e.K.rr=t),e.N&&(e.N.rr=r),t.N=e.K,r.K=e.N,e.K=t,e.N=r,r===this.W)this.W=e,this.h.rr=e;else(i=r.rr).K===r?i.K=e:i.N=e;return e.rr=r.rr,t.rr=e,r.rr=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.W?this.W=r.te():r.te(),r.ee=1}else{var n;if((n=r.K)&&1===n.ee){if(n.ee=t.ee=0,r===this.W)return;r.ee=1,e=r;continue}if(e===t.K){var i;if(e.ee=0,e.K&&(e.K.rr=r),e.N&&(e.N.rr=t),r.N=e.K,t.K=e.N,e.K=r,e.N=t,r===this.W)this.W=e,this.h.rr=e;else(i=r.rr).K===r?i.K=e:i.N=e;return e.rr=r.rr,t.rr=e,r.rr=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.W?this.W=r.ne():r.ne(),r.ee=1}return}},t.prototype.se=function(e,t,r){if(void 0===this.W)return this.M+=1,this.W=new this.re(e,t),this.W.ee=0,this.W.rr=this.h,this.h.rr=this.W,this.h.K=this.W,void(this.h.N=this.W);var n,i=this.h.K,o=this.$(i.u,e);if(0!==o){if(o>0)i.K=new this.re(e,t),i.K.rr=i,n=i.K,this.h.K=n;else{var s=this.h.N,a=this.$(s.u,e);if(0===a)return void(s.p=t);if(a<0)s.N=new this.re(e,t),s.N.rr=s,n=s.N,this.h.N=n;else{if(void 0!==r){var c=r.o;if(c!==this.h){var l=this.$(c.u,e);if(0===l)return void(c.p=t);if(l>0){var u=c.L(),h=this.$(u.u,e);if(0===h)return void(u.p=t);h<0&&(n=new this.re(e,t),void 0===u.N?(u.N=n,n.rr=u):(c.K=n,n.rr=c))}}}if(void 0===n)for(n=this.W;;){var d=this.$(n.u,e);if(d>0){if(void 0===n.K){n.K=new this.re(e,t),n.K.rr=n,n=n.K;break}n=n.K}else{if(!(d<0))return void(n.p=t);if(void 0===n.N){n.N=new this.re(e,t),n.N.rr=n,n=n.N;break}n=n.N}}}}return this.M+=1,n}i.p=t},t.prototype.g=function(e,t){for(;e;){var r=this.$(e.u,t);if(r<0)e=e.N;else{if(!(r>0))return e;e=e.K}}return e||this.h},t.prototype.clear=function(){this.M=0,this.W=void 0,this.h.rr=void 0,this.h.K=this.h.N=void 0},t.prototype.updateKeyByIterator=function(e,t){var r=e.o;if(r===this.h&&u(),1===this.M)return r.u=t,!0;if(r===this.h.K)return this.$(r.m().u,t)>0&&(r.u=t,!0);if(r===this.h.N)return this.$(r.L().u,t)<0&&(r.u=t,!0);var n=r.L().u;if(this.$(n,t)>=0)return!1;var i=r.m().u;return!(this.$(i,t)<=0)&&(r.u=t,!0)},t.prototype.eraseElementByPos=function(e){if(e<0||e>this.M-1)throw new RangeError;var t=0,r=this;return this.ae(this.W,(function(n){return e===t?(r.G(n),!0):(t+=1,!1)})),this.M},t.prototype.eraseElementByKey=function(e){if(0===this.M)return!1;var t=this.g(this.W,e);return t!==this.h&&(this.G(t),!0)},t.prototype.eraseElementByIterator=function(e){var t=e.o;t===this.h&&u();var r=void 0===t.N;return 0===e.iteratorType?r&&e.next():r&&void 0!==t.K||e.next(),this.G(t),e},t.prototype.forEach=function(e){var t,r,n=0;try{for(var i=f(this),o=i.next();!o.done;o=i.next()){e(o.value,n++,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.getElementByPos=function(e){var t,r,n;if(e<0||e>this.M-1)throw new RangeError;var i=0;try{for(var o=f(this),s=o.next();!s.done;s=o.next()){var a=s.value;if(i===e){n=a;break}i+=1}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},t.prototype.getHeight=function(){if(0===this.M)return 0;var e=function(t){return t?Math.max(e(t.K),e(t.N))+1:0};return e(this.W)},t}(l);const g=p;var _=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m=function(e){function t(t,r,n){var i=e.call(this,n)||this;return i.o=t,i.h=r,0===i.iteratorType?(i.pre=function(){return this.o===this.h.K&&u(),this.o=this.o.L(),this},i.next=function(){return this.o===this.h&&u(),this.o=this.o.m(),this}):(i.pre=function(){return this.o===this.h.N&&u(),this.o=this.o.m(),this},i.next=function(){return this.o===this.h&&u(),this.o=this.o.L(),this}),i}return _(t,e),Object.defineProperty(t.prototype,"index",{get:function(){var e=this.o,t=this.h.rr;if(e===this.h)return t?t.tr-1:0;var r=0;for(e.K&&(r+=e.K.tr);e!==t;){var n=e.rr;e===n.N&&(r+=1,n.K&&(r+=n.K.tr)),e=n}return r},enumerable:!1,configurable:!0}),t}(c);const y=m;var b=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},A=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},v=function(e){function t(t,r,n,i){var o=e.call(this,t,r,i)||this;return o.container=n,o}return b(t,e),Object.defineProperty(t.prototype,"pointer",{get:function(){return this.o===this.h&&u(),this.o.u},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t(this.o,this.h,this.container,this.iteratorType)},t}(y),E=function(e){function t(t,r,n){void 0===t&&(t=[]);var i=e.call(this,r,n)||this,o=i;return t.forEach((function(e){o.insert(e)})),i}return b(t,e),t.prototype.P=function(e){return w(this,(function(t){switch(t.label){case 0:return void 0===e?[2]:[5,A(this.P(e.K))];case 1:return t.sent(),[4,e.u];case 2:return t.sent(),[5,A(this.P(e.N))];case 3:return t.sent(),[2]}}))},t.prototype.begin=function(){return new v(this.h.K||this.h,this.h,this)},t.prototype.end=function(){return new v(this.h,this.h,this)},t.prototype.rBegin=function(){return new v(this.h.N||this.h,this.h,this,1)},t.prototype.rEnd=function(){return new v(this.h,this.h,this,1)},t.prototype.front=function(){return this.h.K?this.h.K.u:void 0},t.prototype.back=function(){return this.h.N?this.h.N.u:void 0},t.prototype.insert=function(e,t){return this.v(e,void 0,t)},t.prototype.find=function(e){var t=this.g(this.W,e);return new v(t,this.h,this)},t.prototype.lowerBound=function(e){var t=this.U(this.W,e);return new v(t,this.h,this)},t.prototype.upperBound=function(e){var t=this.X(this.W,e);return new v(t,this.h,this)},t.prototype.reverseLowerBound=function(e){var t=this.Y(this.W,e);return new v(t,this.h,this)},t.prototype.reverseUpperBound=function(e){var t=this.Z(this.W,e);return new v(t,this.h,this)},t.prototype.union=function(e){var t=this;return e.forEach((function(e){t.insert(e)})),this.M},t.prototype[Symbol.iterator]=function(){return this.P(this.W)},t}(g);const S=E},7060:(e,t,r)=>{const n=e.exports,{Buffer:i}=r(181);n.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},n.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},n.requiredHeaderFlagsErrors={};for(const e in n.requiredHeaderFlags){const t=n.requiredHeaderFlags[e];n.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+n.types[e]+" packet"}n.codes={};for(const e in n.types){const t=n.types[e];n.codes[t]=e}n.CMD_SHIFT=4,n.CMD_MASK=240,n.DUP_MASK=8,n.QOS_MASK=3,n.QOS_SHIFT=1,n.RETAIN_MASK=1,n.VARBYTEINT_MASK=127,n.VARBYTEINT_FIN_MASK=128,n.VARBYTEINT_MAX=268435455,n.SESSIONPRESENT_MASK=1,n.SESSIONPRESENT_HEADER=i.from([n.SESSIONPRESENT_MASK]),n.CONNACK_HEADER=i.from([n.codes.connack<<n.CMD_SHIFT]),n.USERNAME_MASK=128,n.PASSWORD_MASK=64,n.WILL_RETAIN_MASK=32,n.WILL_QOS_MASK=24,n.WILL_QOS_SHIFT=3,n.WILL_FLAG_MASK=4,n.CLEAN_SESSION_MASK=2,n.CONNECT_HEADER=i.from([n.codes.connect<<n.CMD_SHIFT]),n.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},n.propertiesCodes={};for(const e in n.properties){const t=n.properties[e];n.propertiesCodes[t]=e}function o(e){return[0,1,2].map((t=>[0,1].map((r=>[0,1].map((o=>{const s=i.alloc(1);return s.writeUInt8(n.codes[e]<<n.CMD_SHIFT|(r?n.DUP_MASK:0)|t<<n.QOS_SHIFT|o,0,!0),s}))))))}n.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},n.PUBLISH_HEADER=o("publish"),n.SUBSCRIBE_HEADER=o("subscribe"),n.SUBSCRIBE_OPTIONS_QOS_MASK=3,n.SUBSCRIBE_OPTIONS_NL_MASK=1,n.SUBSCRIBE_OPTIONS_NL_SHIFT=2,n.SUBSCRIBE_OPTIONS_RAP_MASK=1,n.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,n.SUBSCRIBE_OPTIONS_RH_MASK=3,n.SUBSCRIBE_OPTIONS_RH_SHIFT=4,n.SUBSCRIBE_OPTIONS_RH=[0,16,32],n.SUBSCRIBE_OPTIONS_NL=4,n.SUBSCRIBE_OPTIONS_RAP=8,n.SUBSCRIBE_OPTIONS_QOS=[0,1,2],n.UNSUBSCRIBE_HEADER=o("unsubscribe"),n.ACKS={unsuback:o("unsuback"),puback:o("puback"),pubcomp:o("pubcomp"),pubrel:o("pubrel"),pubrec:o("pubrec")},n.SUBACK_HEADER=i.from([n.codes.suback<<n.CMD_SHIFT]),n.VERSION3=i.from([3]),n.VERSION4=i.from([4]),n.VERSION5=i.from([5]),n.VERSION131=i.from([131]),n.VERSION132=i.from([132]),n.QOS=[0,1,2].map((e=>i.from([e]))),n.EMPTY={pingreq:i.from([n.codes.pingreq<<4,0]),pingresp:i.from([n.codes.pingresp<<4,0]),disconnect:i.from([n.codes.disconnect<<4,0])},n.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},n.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},n.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},n.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},n.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},n.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}},6962:(e,t,r)=>{const n=r(2695),{EventEmitter:i}=r(4434),{Buffer:o}=r(181);class s extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=new Array(this._array.length),r=this._array;let n,i=0;for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?t[n]=r[n].length:t[n]=o.byteLength(r[n]),e+=t[n];const s=o.allocUnsafe(e);for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?(r[n].copy(s,i),i+=t[n]):(s.write(r[n],i),i+=t[n]);return s}destroy(e){e&&this.emit("error",e)}}e.exports=function(e,t){const r=new s;return n(e,r,t),r.concat()}},3916:(e,t,r)=>{t.parser=r(770).parser,t.generate=r(6962),t.writeToStream=r(2695)},9815:(e,t,r)=>{const{Buffer:n}=r(181),i={},o=n.isBuffer(n.from([1,2]).subarray(0,1));function s(e){const t=n.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}e.exports={cache:i,generateCache:function(){for(let e=0;e<65536;e++)i[e]=s(e)},generateNumber:s,genBufVariableByteInt:function(e){let t=0,r=0;const i=n.allocUnsafe(4);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),i.writeUInt8(t,r++)}while(e>0&&r<4);return e>0&&(r=0),o?i.subarray(0,r):i.slice(0,r)},generate4ByteBuffer:function(e){const t=n.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}},409:e=>{e.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},770:(e,t,r)=>{const n=r(4298),{EventEmitter:i}=r(4434),o=r(409),s=r(7060),a=r(8766)("mqtt-packet:parser");class c extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof c?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new c).parser(e)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=n(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0),t=e>>s.CMD_SHIFT;this.packet.cmd=s.types[t];const r=15&e,n=s.requiredHeaderFlags[t];return null!=n&&r!==n?this._emitError(new Error(s.requiredHeaderFlagsErrors[t])):(this.packet.retain=!!(e&s.RETAIN_MASK),this.packet.qos=e>>s.QOS_SHIFT&s.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=!!(e&s.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),a("_parseLength %d",e.value),!!e}_parsePayload(){a("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return a("_parsePayload complete result: %s",e),e}_parseConnect(){let e,t,r,n;a("_parseConnect");const i={},o=this.packet,c=this._parseString();if(null===c)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==c&&"MQIsdp"!==c)return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=c,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),o.protocolVersion>=128&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),3!==o.protocolVersion&&4!==o.protocolVersion&&5!==o.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));i.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,i.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,i.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK;const l=!!(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT;if(i.will)o.will={},o.will.retain=l,o.will.qos=u;else{if(l)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(o.clean=!!(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK),this._pos++,o.keepalive=this._parseNum(),-1===o.keepalive)return this._emitError(new Error("Packet too short"));if(5===o.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(o.properties=e)}const h=this._parseString();if(null===h)return this._emitError(new Error("Packet too short"));if(o.clientId=h,a("_parseConnect: packet.clientId: %s",o.clientId),i.will){if(5===o.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(o.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=e,a("_parseConnect: packet.will.topic: %s",o.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));o.will.payload=t,a("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(i.username){if(n=this._parseString(),null===n)return this._emitError(new Error("Cannot parse username"));o.username=n,a("_parseConnect: packet.username: %s",o.username)}if(i.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));o.password=r}return this.settings=o,a("_parseConnect: complete"),o}_parseConnack(){a("_parseConnack");const e=this.packet;if(this._list.length<1)return null;const t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&s.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),a("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){a("_parseSubscribe");const e=this.packet;let t,r,n,i,o,c,l;if(e.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<e.length;){if(t=this._parseString(),null===t)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(r=this._parseByte(),5===this.settings.protocolVersion){if(192&r)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&r)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(n=r&s.SUBSCRIBE_OPTIONS_QOS_MASK,n>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(c=!!(r>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK),o=!!(r>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK),i=r>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,i>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:t,qos:n},5===this.settings.protocolVersion?(l.nl=c,l.rap=o,l.rh=i):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",l),e.subscriptions.push(l)}}}_parseSuback(){a("_parseSuback");const e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){const e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!s.MQTT5_SUBACK_CODES[e])return this._emitError(new Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){a("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){const t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){a("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){const e=this._list.readUInt8(this._pos++);if(!s.MQTT5_UNSUBACK_CODES[e])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!s.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!s.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}a("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){const e=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),s.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!s.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),a("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;const n=this._list.toString("utf8",this._pos,r);return this._pos+=t,a("_parseString: result: %s",n),n}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;const r=this._list.slice(this._pos,t);return this._pos+=e,a("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){a("_parseVarByteNum");let t,r=0,n=1,i=0,o=!1;const c=this._pos?this._pos:0;for(;r<4&&c+r<this._list.length;){if(t=this._list.readUInt8(c+r++),i+=n*(t&s.VARBYTEINT_MASK),n*=128,!(t&s.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=r)break}return!o&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),c&&(this._pos+=r),o=!!o&&(e?{bytes:r,value:i}:i),a("_parseVarByteNum: result: %o",o),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",e),e}_parseByType(e){switch(a("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");const e=this._parseVarByteNum(),t=this._pos+e,r={};for(;this._pos<t;){const e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;const t=s.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==t)r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(this._parseByType(s.propertiesTypes[t]))):r[t]=this._parseByType(s.propertiesTypes[t]);else{r[t]||(r[t]=Object.create(null));const e=this._parseByType(s.propertiesTypes[t]);if(r[t][e.name])if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{const n=r[t][e.name];r[t][e.name]=[n],r[t][e.name].push(e.value)}else r[t][e.name]=e.value}}return r}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(e){a("_emitError",e),this.error=e,this.emit("error",e)}}e.exports=c},2695:(e,t,r)=>{const n=r(7060),{Buffer:i}=r(181),o=i.allocUnsafe(0),s=i.from([0]),a=r(9815),c=r(3628).nextTick,l=r(8766)("mqtt-packet:writeToStream"),u=a.cache,h=a.generateNumber,d=a.generateCache,f=a.genBufVariableByteInt,p=a.generate4ByteBuffer;let g=E,_=!0;function m(e,t,r){switch(l("generate called"),t.cork&&(t.cork(),c(y,t)),_&&(_=!1,d()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){const r=e||{},o=r.protocolId||"MQTT";let s=r.protocolVersion||4;const a=r.will;let c=r.clean;const l=r.keepalive||0,u=r.clientId||"",h=r.username,d=r.password,f=r.properties;void 0===c&&(c=!0);let p,_,m=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return t.destroy(new Error("Invalid protocolId")),!1;m+=o.length+2;if(3!==s&&4!==s&&5!==s)return t.destroy(new Error("Invalid protocol version")),!1;m+=1;if(("string"==typeof u||i.isBuffer(u))&&(u||s>=4)&&(u||c))m+=i.byteLength(u)+2;else{if(s<4)return t.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return t.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof l||l<0||l>65535||l%1!=0)return t.destroy(new Error("Invalid keepalive")),!1;m+=2;if(m+=1,5===s){if(p=k(t,f),!p)return!1;m+=p.length}if(a){if("object"!=typeof a)return t.destroy(new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.destroy(new Error("Invalid will topic")),!1;if(m+=i.byteLength(a.topic)+2,m+=2,a.payload){if(!(a.payload.length>=0))return t.destroy(new Error("Invalid will payload")),!1;"string"==typeof a.payload?m+=i.byteLength(a.payload):m+=a.payload.length}if(_={},5===s){if(_=k(t,a.properties),!_)return!1;m+=_.length}}let y=!1;if(null!=h){if(!O(h))return t.destroy(new Error("Invalid username")),!1;y=!0,m+=i.byteLength(h)+2}if(null!=d){if(!y)return t.destroy(new Error("Username is required to use password")),!1;if(!O(d))return t.destroy(new Error("Invalid password")),!1;m+=B(d)+2}t.write(n.CONNECT_HEADER),w(t,m),I(t,o),r.bridgeMode&&(s+=128);t.write(131===s?n.VERSION131:132===s?n.VERSION132:4===s?n.VERSION4:5===s?n.VERSION5:n.VERSION3);let b=0;b|=null!=h?n.USERNAME_MASK:0,b|=null!=d?n.PASSWORD_MASK:0,b|=a&&a.retain?n.WILL_RETAIN_MASK:0,b|=a&&a.qos?a.qos<<n.WILL_QOS_SHIFT:0,b|=a?n.WILL_FLAG_MASK:0,b|=c?n.CLEAN_SESSION_MASK:0,t.write(i.from([b])),g(t,l),5===s&&p.write();I(t,u),a&&(5===s&&_.write(),A(t,a.topic),I(t,a.payload));null!=h&&I(t,h);null!=d&&I(t,d);return!0}(e,t);case"connack":return function(e,t,r){const o=r?r.protocolVersion:4,a=e||{},c=5===o?a.reasonCode:a.returnCode,l=a.properties;let u=2;if("number"!=typeof c)return t.destroy(new Error("Invalid return code")),!1;let h=null;if(5===o){if(h=k(t,l),!h)return!1;u+=h.length}t.write(n.CONNACK_HEADER),w(t,u),t.write(a.sessionPresent?n.SESSIONPRESENT_HEADER:s),t.write(i.from([c])),null!=h&&h.write();return!0}(e,t,r);case"publish":return function(e,t,r){l("publish: packet: %o",e);const s=r?r.protocolVersion:4,a=e||{},c=a.qos||0,u=a.retain?n.RETAIN_MASK:0,h=a.topic,d=a.payload||o,f=a.messageId,p=a.properties;let _=0;if("string"==typeof h)_+=i.byteLength(h)+2;else{if(!i.isBuffer(h))return t.destroy(new Error("Invalid topic")),!1;_+=h.length+2}i.isBuffer(d)?_+=d.length:_+=i.byteLength(d);if(c&&"number"!=typeof f)return t.destroy(new Error("Invalid messageId")),!1;c&&(_+=2);let m=null;if(5===s){if(m=k(t,p),!m)return!1;_+=m.length}t.write(n.PUBLISH_HEADER[c][a.dup?1:0][u?1:0]),w(t,_),g(t,B(h)),t.write(h),c>0&&g(t,f);null!=m&&m.write();return l("publish: payload: %o",d),t.write(d)}(e,t,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.cmd||"puback",c=s.messageId,l=s.dup&&"pubrel"===a?n.DUP_MASK:0;let u=0;const h=s.reasonCode,d=s.properties;let f=5===o?3:2;"pubrel"===a&&(u=1);if("number"!=typeof c)return t.destroy(new Error("Invalid messageId")),!1;let p=null;if(5===o&&"object"==typeof d){if(p=C(t,d,r,f),!p)return!1;f+=p.length}t.write(n.ACKS[a][u][l][0]),3===f&&(f+=0!==h?1:-1);w(t,f),g(t,c),5===o&&2!==f&&t.write(i.from([h]));null!==p?p.write():4===f&&t.write(i.from([0]));return!0}(e,t,r);case"subscribe":return function(e,t,r){l("subscribe: packet: ");const o=r?r.protocolVersion:4,s=e||{},a=s.dup?n.DUP_MASK:0,c=s.messageId,u=s.subscriptions,h=s.properties;let d=0;if("number"!=typeof c)return t.destroy(new Error("Invalid messageId")),!1;d+=2;let f=null;if(5===o){if(f=k(t,h),!f)return!1;d+=f.length}if("object"!=typeof u||!u.length)return t.destroy(new Error("Invalid subscriptions")),!1;for(let e=0;e<u.length;e+=1){const r=u[e].topic,n=u[e].qos;if("string"!=typeof r)return t.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof n)return t.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(u[e].nl||!1))return t.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(u[e].rap||!1))return t.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;const r=u[e].rh||0;if("number"!=typeof r||r>2)return t.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=i.byteLength(r)+2+1}l("subscribe: writing to stream: %o",n.SUBSCRIBE_HEADER),t.write(n.SUBSCRIBE_HEADER[1][a?1:0][0]),w(t,d),g(t,c),null!==f&&f.write();let p=!0;for(const e of u){const r=e.topic,s=e.qos,a=+e.nl,c=+e.rap,l=e.rh;let u;A(t,r),u=n.SUBSCRIBE_OPTIONS_QOS[s],5===o&&(u|=a?n.SUBSCRIBE_OPTIONS_NL:0,u|=c?n.SUBSCRIBE_OPTIONS_RAP:0,u|=l?n.SUBSCRIBE_OPTIONS_RH[l]:0),p=t.write(i.from([u]))}return p}(e,t,r);case"suback":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.messageId,c=s.granted,l=s.properties;let u=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;u+=2;if("object"!=typeof c||!c.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<c.length;e+=1){if("number"!=typeof c[e])return t.destroy(new Error("Invalid qos vector")),!1;u+=1}let h=null;if(5===o){if(h=C(t,l,r,u),!h)return!1;u+=h.length}t.write(n.SUBACK_HEADER),w(t,u),g(t,a),null!==h&&h.write();return t.write(i.from(c))}(e,t,r);case"unsubscribe":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.messageId,c=s.dup?n.DUP_MASK:0,l=s.unsubscriptions,u=s.properties;let h=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;h+=2;if("object"!=typeof l||!l.length)return t.destroy(new Error("Invalid unsubscriptions")),!1;for(let e=0;e<l.length;e+=1){if("string"!=typeof l[e])return t.destroy(new Error("Invalid unsubscriptions")),!1;h+=i.byteLength(l[e])+2}let d=null;if(5===o){if(d=k(t,u),!d)return!1;h+=d.length}t.write(n.UNSUBSCRIBE_HEADER[1][c?1:0][0]),w(t,h),g(t,a),null!==d&&d.write();let f=!0;for(let e=0;e<l.length;e++)f=A(t,l[e]);return f}(e,t,r);case"unsuback":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.messageId,c=s.dup?n.DUP_MASK:0,l=s.granted,u=s.properties,h=s.cmd,d=0;let f=2;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof l||!l.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.destroy(new Error("Invalid qos vector")),!1;f+=1}}let p=null;if(5===o){if(p=C(t,u,r,f),!p)return!1;f+=p.length}t.write(n.ACKS[h][d][c][0]),w(t,f),g(t,a),null!==p&&p.write();5===o&&t.write(i.from(l));return!0}(e,t,r);case"pingreq":case"pingresp":return function(e,t){return t.write(n.EMPTY[e.cmd])}(e,t);case"disconnect":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.reasonCode,c=s.properties;let l=5===o?1:0,u=null;if(5===o){if(u=C(t,c,r,l),!u)return!1;l+=u.length}t.write(i.from([n.codes.disconnect<<4])),w(t,l),5===o&&t.write(i.from([a]));null!==u&&u.write();return!0}(e,t,r);case"auth":return function(e,t,r){const o=r?r.protocolVersion:4,s=e||{},a=s.reasonCode,c=s.properties;let l=5===o?1:0;5!==o&&t.destroy(new Error("Invalid mqtt version for auth packet"));const u=C(t,c,r,l);if(!u)return!1;l+=u.length,t.write(i.from([n.codes.auth<<4])),w(t,l),t.write(i.from([a])),null!==u&&u.write();return!0}(e,t,r);default:return t.destroy(new Error("Unknown command")),!1}}function y(e){e.uncork()}Object.defineProperty(m,"cacheNumbers",{get:()=>g===E,set(e){e?(u&&0!==Object.keys(u).length||(_=!0),g=E):(_=!1,g=S)}});const b={};function w(e,t){if(t>n.VARBYTEINT_MAX)return e.destroy(new Error(`Invalid variable byte integer: ${t}`)),!1;let r=b[t];return r||(r=f(t),t<16384&&(b[t]=r)),l("writeVarByteInt: writing to stream: %o",r),e.write(r)}function A(e,t){const r=i.byteLength(t);return g(e,r),l("writeString: %s",t),e.write(t,"utf8")}function v(e,t,r){A(e,t),A(e,r)}function E(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",u[t]),e.write(u[t])}function S(e,t){const r=h(t);return l("writeNumberGenerated: %o",r),e.write(r)}function I(e,t){"string"==typeof t?A(e,t):t?(g(e,t.length),e.write(t)):g(e,0)}function k(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){T(e,{},0)}};let r=0;function o(t,r){let o=0;switch(n.propertiesTypes[t]){case"byte":if("boolean"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=2;break;case"int8":if("number"!=typeof r||r<0||r>255)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=2;break;case"binary":if(r&&null===r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=1+i.byteLength(r)+2;break;case"int16":if("number"!=typeof r||r<0||r>65535)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=3;break;case"int32":if("number"!=typeof r||r<0||r>4294967295)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=5;break;case"var":if("number"!=typeof r||r<0||r>268435455)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=1+i.byteLength(f(r));break;case"string":if("string"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=3+i.byteLength(r.toString());break;case"pair":if("object"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;o+=Object.getOwnPropertyNames(r).reduce(((e,t)=>{const n=r[t];return Array.isArray(n)?e+=n.reduce(((e,r)=>e+=3+i.byteLength(t.toString())+2+i.byteLength(r.toString())),0):e+=3+i.byteLength(t.toString())+2+i.byteLength(r[t].toString()),e}),0);break;default:return e.destroy(new Error(`Invalid property ${t}: ${r}`)),!1}return o}if(t)for(const e in t){let n=0,i=0;const s=t[e];if(Array.isArray(s))for(let t=0;t<s.length;t++){if(i=o(e,s[t]),!i)return!1;n+=i}else{if(i=o(e,s),!i)return!1;n=i}if(!n)return!1;r+=n}return{length:i.byteLength(f(r))+r,write(){T(e,t,r)}}}function C(e,t,r,n){const i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let s=k(e,t);if(o)for(;n+s.length>o;){const r=i.shift();if(!r||!t[r])return!1;delete t[r],s=k(e,t)}return s}function R(e,t,r){switch(n.propertiesTypes[t]){case"byte":e.write(i.from([n.properties[t]])),e.write(i.from([+r]));break;case"int8":e.write(i.from([n.properties[t]])),e.write(i.from([r]));break;case"binary":e.write(i.from([n.properties[t]])),I(e,r);break;case"int16":e.write(i.from([n.properties[t]])),g(e,r);break;case"int32":e.write(i.from([n.properties[t]])),function(e,t){const r=p(t);l("write4ByteNumber: %o",r),e.write(r)}(e,r);break;case"var":e.write(i.from([n.properties[t]])),w(e,r);break;case"string":e.write(i.from([n.properties[t]])),A(e,r);break;case"pair":Object.getOwnPropertyNames(r).forEach((o=>{const s=r[o];Array.isArray(s)?s.forEach((r=>{e.write(i.from([n.properties[t]])),v(e,o.toString(),r.toString())})):(e.write(i.from([n.properties[t]])),v(e,o.toString(),s.toString()))}));break;default:return e.destroy(new Error(`Invalid property ${t} value: ${r}`)),!1}}function T(e,t,r){w(e,r);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!==t[r]){const n=t[r];if(Array.isArray(n))for(let t=0;t<n.length;t++)R(e,r,n[t]);else R(e,r,n)}}function B(e){return e?e instanceof i?e.length:i.byteLength(e):0}function O(e){return"string"==typeof e||e instanceof i}e.exports=m},9913:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(1091));t.default=a,s(r(1091),t)},4232:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedDuplex=t.writev=void 0;const n=r(8057),i=r(181);function o(e,t){const r=new Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?r[t]=i.Buffer.from(e[t].chunk,"utf8"):r[t]=e[t].chunk;this._write(i.Buffer.concat(r),"binary",t)}t.writev=o;class s extends n.Duplex{constructor(e,t,r){super({objectMode:!0}),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=o.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",(e=>{this.destroyed||this.push(e)}))}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){const{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}}t.BufferedDuplex=s},2444:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(3969));t.default=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){this.destroyed=!1,this.client=e,this.timer="object"==typeof t&&"set"in t&&"clear"in t?t:(0,i.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;const e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set((()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())}),this._intervalEvery)}}},8399:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;const i=n(r(4434)),o=r(1364);class s{}t.TypedEventEmitter=s,(0,o.applyMixin)(s,i.default)},1786:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(1516)),c=s(r(3916)),l=s(r(2574)),u=r(8057),h=s(r(9388)),d=o(r(617)),f=s(r(8766)),p=s(r(6344)),g=s(r(6039)),_=r(1364),m=r(8399),y=s(r(2444)),b=o(r(8032)),w=globalThis.setImmediate||((...e)=>{const t=e.shift();(0,_.nextTick)((()=>{t(...e)}))}),A={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"};class v extends m.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(e,t){super(),this.options=t||{};for(const e in A)"undefined"==typeof this.options[e]?this.options[e]=A[e]:this.options[e]=t[e];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",v.VERSION),b.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",b.default?"browser":"node"),this.log("MqttClient :: options.protocol",t.protocol),this.log("MqttClient :: options.protocolVersion",t.protocolVersion),this.log("MqttClient :: options.username",t.username),this.log("MqttClient :: options.keepalive",t.keepalive),this.log("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",t.properties?t.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof t.clientId?t.clientId:v.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:(...e)=>{e[3](null,0)},this.options.writeCache||(c.default.writeToStream.cacheNumbers=!1),this.streamBuilder=e,this.messageIdProvider="undefined"==typeof this.options.messageIdProvider?new l.default:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new p.default,this.incomingStore=t.incomingStore||new p.default,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,t.properties&&t.properties.topicAliasMaximum>0&&(t.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new a.default(t.properties.topicAliasMaximum)),this.on("connect",(()=>{const{queue:e}=this,t=()=>{const r=e.shift();this.log("deliver :: entry %o",r);let n=null;if(!r)return void this._resubscribe();n=r.packet,this.log("deliver :: call _sendPacket for %o",n);let i=!0;n.messageId&&0!==n.messageId&&(this.messageIdProvider.register(n.messageId)||(i=!1)),i?this._sendPacket(n,(e=>{r.cb&&r.cb(e),t()})):(this.log("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())};this.log("connect :: sending queued packets"),t()})),this.on("close",(()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()})),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;const t=new u.Writable,r=c.default.parser(this.options);let n=null;const i=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",(e=>{this.log("parser :: on packet push to packets array."),i.push(e)}));const o=()=>{this.log("work :: getting next packet in queue");const e=i.shift();if(e)this.log("work :: packet pulled from queue"),(0,g.default)(this,e,s);else{this.log("work :: no packets in queue");const e=n;n=null,this.log("work :: done flag is %s",!!e),e&&e()}},s=()=>{if(i.length)(0,_.nextTick)(o);else{const e=n;n=null,e()}};t._write=(e,t,i)=>{n=i,this.log("writable stream :: parsing buffer"),r.parse(e),o()};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",(e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)})),this.stream.on("close",(()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")})),this.log("connect: sending packet `connect`");const a={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(a.will=Object.assign(Object.assign({},this.options.will),{payload:null===(e=this.options.will)||void 0===e?void 0:e.payload})),this.topicAliasRecv&&(a.properties||(a.properties={}),this.topicAliasRecv&&(a.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(a),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){const e=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)}),this.options.connectTimeout),this}publish(e,t,r,n){this.log("publish :: message `%s` to topic `%s`",t,e);const{options:i}=this;"function"==typeof r&&(n=r,r=null),r=r||{};r=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),r);const{qos:o,retain:s,dup:a,properties:c,cbStorePut:l}=r;if(this._checkDisconnecting(n))return this;const u=()=>{let r=0;if((1===o||2===o)&&(r=this._nextId(),null===r))return this.log("No messageId left"),!1;const u={cmd:"publish",topic:e,payload:t,qos:o,retain:s,messageId:r,dup:a};switch(5===i.protocolVersion&&(u.properties=c),this.log("publish :: qos",o),o){case 1:case 2:this.outgoing[u.messageId]={volatile:!1,cb:n||this.noop},this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,void 0,l);break;default:this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,n,l)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!u())&&this._storeProcessingQueue.push({invoke:u,cbStorePut:r.cbStorePut,callback:n}),this}publishAsync(e,t,r){return new Promise(((n,i)=>{this.publish(e,t,r,((e,t)=>{e?i(e):n(t)}))}))}subscribe(e,t,r){const n=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let i=!1,o=[];"string"==typeof e?o=e=[e]:Array.isArray(e)?o=e:"object"==typeof e&&(i=e.resubscribe,delete e.resubscribe,o=Object.keys(e));const s=d.validateTopics(o);if(null!==s)return w(r,new Error(`Invalid topic ${s}`)),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;const a={qos:0};5===n&&(a.nl=!1,a.rap=!1,a.rh=0);const c=(t=Object.assign(Object.assign({},a),t)).properties,l=[],u=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||i){const t={topic:e,qos:r.qos};5===n&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=c),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),l.push(t)}};if(Array.isArray(e)?e.forEach((e=>{this.log("subscribe: array topic %s",e),u(e)})):Object.keys(e).forEach((t=>{this.log("subscribe: object topic %s, %o",t,e[t]),u(t,e[t])})),!l.length)return r(null,[]),this;const h=()=>{const e=this._nextId();if(null===e)return this.log("No messageId left"),!1;const t={cmd:"subscribe",subscriptions:l,messageId:e};if(c&&(t.properties=c),this.options.resubscribe){this.log("subscribe :: resubscribe true");const e=[];l.forEach((t=>{if(this.options.reconnectPeriod>0){const r={qos:t.qos};5===n&&(r.nl=t.nl||!1,r.rap=t.rap||!1,r.rh=t.rh||0,r.properties=t.properties),this._resubscribeTopics[t.topic]=r,e.push(t.topic)}})),this.messageIdToTopic[t.messageId]=e}return this.outgoing[t.messageId]={volatile:!0,cb(e,t){if(!e){const{granted:e}=t;for(let t=0;t<e.length;t+=1)l[t].qos=e[t]}r(e,l,t)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(t),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,callback:r}),this}subscribeAsync(e,t){return new Promise(((r,n)=>{this.subscribe(e,t,((e,t)=>{e?n(e):r(t)}))}))}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;const n=d.validateTopics(e);if(null!==n)return w(r,new Error(`Invalid topic ${n}`)),this;if(this._checkDisconnecting(r))return this;const i=()=>{const n=this._nextId();if(null===n)return this.log("No messageId left"),!1;const i={cmd:"unsubscribe",messageId:n,unsubscriptions:[]};return"string"==typeof e?i.unsubscriptions=[e]:Array.isArray(e)&&(i.unsubscriptions=e),this.options.resubscribe&&i.unsubscriptions.forEach((e=>{delete this._resubscribeTopics[e]})),"object"==typeof t&&t.properties&&(i.properties=t.properties),this.outgoing[i.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(i),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!i())&&this._storeProcessingQueue.push({invoke:i,callback:r}),this}unsubscribeAsync(e,t){return new Promise(((r,n)=>{this.unsubscribe(e,t,((e,t)=>{e?n(e):r(t)}))}))}end(e,t,r){this.log("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),r&&"function"==typeof r||(r=this.noop);const n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close((e=>{this.outgoingStore.close((t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){const n=e||t;this.log("end :: closeStores: invoking callback with args"),r(n)}}))})),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},i=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,(()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,_.nextTick)(n)}),t)};return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),i()),this)}endAsync(e,t){return new Promise(((r,n)=>{this.end(e,t,(e=>{e?n(e):r()}))}))}removeOutgoingMessage(e){if(this.outgoing[e]){const{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,(()=>{t(new Error("Message removed"))}))}return this}reconnect(e){this.log("client reconnect");const t=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new p.default,this.outgoingStore=this.options.outgoingStore||new p.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach((e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])})))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach((e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])})))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if("undefined"==typeof t)return new Error("Unregistered Topic Alias");if(r=this.topicAliasSend.getTopicByAlias(t),"undefined"==typeof r)return new Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end((()=>{this.connect()})),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval((()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()}),this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t,r={}){if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const e=Object.assign({cmd:"disconnect"},r);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,(()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),w((()=>{this.stream.end((()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)}))}))}))}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let n,i=e;if("publish"===i.cmd&&(i=(0,h.default)(e),n=this._removeTopicAliasAndRecoverTopicName(i),n))return t&&t(n);this.outgoingStore.put(i,(n=>{if(n)return t&&t(n);r(),this._writePacket(e,t)}))}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);const r=e.topic.toString();if(this.topicAliasSend)if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r),t?(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t))):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r),t&&(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t))));else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");const r=c.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,n){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;const i=this._applyTopicAlias(e);if(i)t(i);else{if(!this.connected)return"auth"===e.cmd?void this._writePacket(e,t):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));if(n)this._writePacket(e,t);else{switch(e.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(e,t,r);default:return void this._writePacket(e,t)}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let n=e;if("publish"===n.cmd){n=(0,h.default)(e);const r=this._removeTopicAliasAndRecoverTopicName(n);if(r)return t&&t(r)}const i=n.qos||0;0===i&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):i>0?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,(e=>{if(e)return t&&t(e);r()}))):t&&t(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new y.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");const e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){const r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected)return void this.emit("connect",e);this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;const t=()=>{let r=this.outgoingStore.createStream();const n=()=>{r.destroy(),r=null,this._flushStoreProcessingQueue(),i()},i=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),r.on("error",(e=>{i(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",e)}));const o=()=>{if(!r)return;const e=r.read(1);let t;e?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[e.messageId]?o():this.disconnecting||this.reconnectTimer?r.destroy&&r.destroy():(t=this.outgoing[e.messageId]?this.outgoing[e.messageId].cb:null,this.outgoing[e.messageId]={volatile:!1,cb(e,r){t&&t(e,r),o()}},this._packetIdsDuringStoreProcessing[e.messageId]=!0,this.messageIdProvider.register(e.messageId)?this._sendPacket(e,void 0,void 0,!0):this.log("messageId: %d has already used.",e.messageId))):r.once("readable",o)};r.on("end",(()=>{let r=!0;for(const e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){r=!1;break}this.removeListener("close",n),r?(i(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):t()})),o()};t()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){const e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},((r,n)=>{t(r,n),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()}))}}v.VERSION=_.MQTTJS_VERSION,t.default=v},5208:(e,t,r)=>{"use strict";const n=r(181),i=r(8057),o=r(4232);let s,a,c,l=!1;t.A=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);const u=function(e,t){const r="alis"===e.protocol?"wss":"ws";let n=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(n=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(t,e);return s=t.my,s.connectSocket({url:u,protocols:r}),a=function(){const e=new i.Transform;return e._write=(e,t,r)=>{s.sendSocketMessage({data:e.buffer,success(){r()},fail(){r(new Error)}})},e._flush=e=>{s.closeSocket({success(){e()}})},e}(),c=new o.BufferedDuplex(t,a,s),l||(l=!0,s.onSocketOpen((()=>{c.socketReady()})),s.onSocketMessage((e=>{if("string"==typeof e.data){const t=n.Buffer.from(e.data,"base64");a.push(t)}else{const t=new FileReader;t.addEventListener("load",(()=>{let e=t.result;e=e instanceof ArrayBuffer?n.Buffer.from(e):n.Buffer.from(e,"utf8"),a.push(e)})),t.readAsArrayBuffer(e.data)}})),s.onSocketClose((()=>{c.end(),c.destroy()})),s.onSocketError((e=>{c.destroy(e)}))),c}},1784:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectAsync=void 0;const i=n(r(8766)),o=n(r(7016)),s=n(r(1786)),a=n(r(8032));"function"!=typeof(null===process||void 0===process?void 0:process.nextTick)&&(process.nextTick=setImmediate);const c=(0,i.default)("mqttjs");let l=null;function u(e,t){var n,i,u,h;if(c("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=""),t=t||{},e&&"string"==typeof e){const r=o.default.parse(e,!0),i={};if(null!=r.port&&(i.port=Number(r.port)),i.host=r.hostname,i.query=r.query,i.auth=r.auth,i.protocol=r.protocol,i.path=r.path,i.protocol=null===(n=i.protocol)||void 0===n?void 0:n.replace(/:$/,""),!(t=Object.assign(Object.assign({},i),t)).protocol)throw new Error("Missing protocol")}if(t.unixSocket=t.unixSocket||(null===(i=t.protocol)||void 0===i?void 0:i.includes("+unix")),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):(null===(u=t.protocol)||void 0===u?void 0:u.startsWith("ws"))||(null===(h=t.protocol)||void 0===h?void 0:h.startsWith("wx"))||delete t.path,function(e){let t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}if(l||(l={},a.default||t.forceNativeWebSocket?(l.ws=r(6844).browserStreamBuilder,l.wss=r(6844).browserStreamBuilder,l.wx=r(5293).A,l.wxs=r(5293).A,l.ali=r(5208).A,l.alis=r(5208).A):(l.ws=r(6844).streamBuilder,l.wss=r(6844).streamBuilder,l.mqtt=r(3924).default,l.tcp=r(3924).default,l.ssl=r(6141).default,l.tls=l.ssl,l.mqtts=r(6141).default)),!l[t.protocol]){const e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(((t,r)=>(!e||r%2!=0)&&"function"==typeof l[t]))[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);const d=new s.default((function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),c("calling streambuilder for",t.protocol),l[t.protocol](e,t)}),t);return d.on("error",(()=>{})),d}t.connectAsync=function(e,t,r=!0){return new Promise(((n,i)=>{const o=u(e,t),s={connect:e=>{a(),n(o)},end:()=>{a(),n(o)},error:e=>{a(),o.end(),i(e)}};function a(){Object.keys(s).forEach((e=>{o.off(e,s[e])}))}!1===r&&(s.close=()=>{s.error(new Error("Couldn't connect to server"))}),Object.keys(s).forEach((e=>{o.on(e,s[e])}))}))},t.default=u},3924:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(9278)),o=(0,n(r(8766)).default)("mqttjs:tcp");t.default=(e,t)=>{t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";const{port:r,path:n}=t,s=t.hostname;return o("port %d and host %s",r,s),i.default.createConnection({port:r,host:s,path:n})}},6141:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(4756)),o=n(r(9278)),s=(0,n(r(8766)).default)("mqttjs:tls");t.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===o.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,s("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=i.default.connect(t);function n(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}return r.on("secureConnect",(()=>{t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)})),r.on("error",n),r}},6844:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamBuilder=t.browserStreamBuilder=void 0;const i=r(181),o=n(r(2256)),s=n(r(8766)),a=r(8057),c=n(r(8032)),l=r(4232),u=(0,s.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(e,t){let r=`${e.protocol}://${e.hostname}:${e.port}${e.path}`;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function f(e){const t=e;return e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),c.default||e.forceNativeWebSocket||"wss"!==e.protocol||h.forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])})),t}t.streamBuilder=(e,t)=>{u("streamBuilder");const r=f(t);r.hostname=r.hostname||r.host||"localhost";const n=d(r,e),i=function(e,t,r){u("createWebSocket"),u(`protocol: ${r.protocolId} ${r.protocolVersion}`);const n="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";let i;return u(`creating new Websocket for url: ${t} and protocol: ${n}`),i=r.createWebsocket?r.createWebsocket(t,[n],r):new o.default(t,[n],r.wsOptions),i}(0,n,r),s=o.default.createWebSocketStream(i,r.wsOptions);return s.url=n,i.on("close",(()=>{s.destroy()})),s};t.browserStreamBuilder=(e,t)=>{let r;u("browserStreamBuilder");const n=function(e){const t=f(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t),o=n.browserBufferSize||524288,s=t.browserBufferTimeout||1e3,c=!t.objectMode,h=function(e,t){const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=d(t,e);let i;return i=t.createWebsocket?t.createWebsocket(n,[r],t):new WebSocket(n,[r]),i.binaryType="arraybuffer",i}(e,t),p=function(e,t,r){const n=new a.Transform({objectMode:e.objectMode});return n._write=t,n._flush=r,n}(t,(function e(t,r,n){if(h.bufferedAmount>o)return void setTimeout(e,s,t,r,n);c&&"string"==typeof t&&(t=i.Buffer.from(t,"utf8"));try{h.send(t)}catch(e){return n(e)}n()}),(function(e){h.close(),e()}));t.objectMode||(p._writev=l.writev.bind(p)),p.on("close",(()=>{h.close()}));const g="undefined"!=typeof h.addEventListener;function _(){u("WebSocket onOpen"),r instanceof l.BufferedDuplex&&r.socketReady()}function m(e){u("WebSocket onClose",e),r.end(),r.destroy()}function y(e){u("WebSocket onError",e);const t=new Error("WebSocket error");t.event=e,r.destroy(t)}async function b(e){let{data:t}=e;t=t instanceof ArrayBuffer?i.Buffer.from(t):t instanceof Blob?i.Buffer.from(await new Response(t).arrayBuffer()):i.Buffer.from(t,"utf8"),p&&!p.destroyed&&p.push(t)}return h.readyState===h.OPEN?(r=p,r.socket=h):(r=new l.BufferedDuplex(t,p,h),g?h.addEventListener("open",_):h.onopen=_),g?(h.addEventListener("close",m),h.addEventListener("error",y),h.addEventListener("message",b)):(h.onclose=m,h.onerror=y,h.onmessage=b),r}},5293:(e,t,r)=>{"use strict";const n=r(181),i=r(8057),o=r(4232);let s,a,c;t.A=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);const l=function(e,t){const r="wxs"===e.protocol?"wss":"ws";let n=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(n=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(t,e);s=wx.connectSocket({url:l,protocols:[r]}),a=function(){const e=new i.Transform;return e._write=(e,t,r)=>{s.send({data:e.buffer,success(){r()},fail(e){r(new Error(e))}})},e._flush=e=>{s.close({success(){e()}})},e}(),c=new o.BufferedDuplex(t,a,s),c._destroy=(e,t)=>{s.close({success(){t&&t(e)}})};const u=c.destroy;return c.destroy=(e,t)=>(c.destroy=u,setTimeout((()=>{s.close({fail(){c._destroy(e,t)}})}),0),c),s.onOpen((()=>{c.socketReady()})),s.onMessage((e=>{let{data:t}=e;t=t instanceof ArrayBuffer?n.Buffer.from(t):n.Buffer.from(t,"utf8"),a.push(t)})),s.onClose((()=>{c.emit("close"),c.end(),c.destroy()})),s.onError((e=>{const t=new Error(e.errMsg);c.destroy(t)})),c}},2574:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){const e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}}},3969:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(8032)),a=r(4904),c={set:a.setInterval,clear:a.clearInterval},l={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};t.default=e=>{switch(e){case"native":return l;case"worker":return c;default:return!s.default||s.isWebWorker||s.isReactNativeBrowser?l:c}}},9086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=void 0;const n=r(1364);t.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};t.default=(e,r)=>{const{messageId:i}=r,o=r.cmd;let s=null;const a=e.outgoing[i]?e.outgoing[i].cb:null;let c=null;if(a){switch(e.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{const o=r.reasonCode;o&&o>0&&16!==o?(c=new n.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[o]}`,o),e._removeOutgoingAndStoreMessage(i,(()=>{a(c,r)}))):e._removeOutgoingAndStoreMessage(i,a);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:i};const o=r.reasonCode;o&&o>0&&16!==o?(c=new n.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[o]}`,o),e._removeOutgoingAndStoreMessage(i,(()=>{a(c,r)}))):e._sendPacket(s);break}case"suback":{delete e.outgoing[i],e.messageIdProvider.deallocate(i);const n=r.granted;for(let r=0;r<n.length;r++){const o=n[r];if(128&o){c=new Error(`Subscribe error: ${t.ReasonCodes[o]}`),c.code=o;const r=e.messageIdToTopic[i];r&&r.forEach((t=>{delete e._resubscribeTopics[t]}))}}delete e.messageIdToTopic[i],e._invokeStoreProcessingQueue(),a(c,r);break}case"unsuback":delete e.outgoing[i],e.messageIdProvider.deallocate(i),e._invokeStoreProcessingQueue(),a(null,r);break;default:e.emit("error",new Error("unrecognized packet type"))}e.disconnecting&&0===Object.keys(e.outgoing).length&&e.emit("outgoingEmpty")}else e.log("_handleAck :: Server sent an ack in error. Ignoring.")}},541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1364),i=r(9086);t.default=(e,t)=>{const{options:r}=e,o=r.protocolVersion,s=5===o?t.reasonCode:t.returnCode;if(5===o)e.handleAuth(t,((t,r)=>{if(t)e.emit("error",t);else if(24===s)e.reconnecting=!1,e._sendPacket(r);else{const t=new n.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[s]}`,s);e.emit("error",t)}}));else{const t=new n.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,s);e.emit("error",t)}}},8284:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9086),o=n(r(6766)),s=r(1364);t.default=(e,t)=>{e.log("_handleConnack");const{options:r}=e,n=5===r.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void e.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new o.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===n)e.reconnecting=!1,e._onConnect(t);else if(n>0){const t=new s.ErrorWithReasonCode(`Connection refused: ${i.ReasonCodes[n]}`,n);e.emit("error",t)}}},6039:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(6756)),o=n(r(541)),s=n(r(8284)),a=n(r(9086)),c=n(r(7925));t.default=(e,t,r)=>{const{options:n}=e;if(5===n.protocolVersion&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<t.length)return e.emit("error",new Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,i.default)(e,t,r);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,a.default)(e,t),r();break;case"pubrel":e.reschedulePing(),(0,c.default)(e,t,r);break;case"connack":(0,s.default)(e,t),r();break;case"auth":e.reschedulePing(),(0,o.default)(e,t),r();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),r();break;case"disconnect":e.emit("disconnect",t),r();break;default:e.log("_handlePacket :: unknown command"),r()}}},6756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[0,16,128,131,135,144,145,151,153];t.default=(e,t,n)=>{e.log("handlePublish: packet %o",t),n="undefined"!=typeof n?n:e.noop;let i=t.topic.toString();const o=t.payload,{qos:s}=t,{messageId:a}=t,{options:c}=e;if(5===e.options.protocolVersion){let r;if(t.properties&&(r=t.properties.topicAlias),"undefined"!=typeof r)if(0===i.length){if(!(r>0&&r<=65535))return e.log("handlePublish :: topic alias out of range. alias: %d",r),void e.emit("error",new Error("Received Topic Alias is out of range"));{const t=e.topicAliasRecv.getTopicByAlias(r);if(!t)return e.log("handlePublish :: unregistered topic alias. alias: %d",r),void e.emit("error",new Error("Received unregistered Topic Alias"));i=t,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,r)}}else{if(!e.topicAliasRecv.put(i,r))return e.log("handlePublish :: topic alias out of range. alias: %d",r),void e.emit("error",new Error("Received Topic Alias is out of range"));e.log("handlePublish :: registered topic: %s - alias: %d",i,r)}}switch(e.log("handlePublish: qos %d",s),s){case 2:c.customHandleAcks(i,o,t,((i,o)=>("number"==typeof i&&(o=i,i=null),i?e.emit("error",i):-1===r.indexOf(o)?e.emit("error",new Error("Wrong reason code for pubrec")):void(o?e._sendPacket({cmd:"pubrec",messageId:a,reasonCode:o},n):e.incomingStore.put(t,(()=>{e._sendPacket({cmd:"pubrec",messageId:a},n)}))))));break;case 1:c.customHandleAcks(i,o,t,((s,c)=>("number"==typeof s&&(c=s,s=null),s?e.emit("error",s):-1===r.indexOf(c)?e.emit("error",new Error("Wrong reason code for puback")):(c||e.emit("message",i,o,t),void e.handleMessage(t,(t=>{if(t)return n&&n(t);e._sendPacket({cmd:"puback",messageId:a,reasonCode:c},n)}))))));break;case 0:e.emit("message",i,o,t),e.handleMessage(t,n);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}},7925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=(e,t,r)=>{e.log("handling pubrel packet");const n="undefined"!=typeof r?r:e.noop,{messageId:i}=t,o={cmd:"pubcomp",messageId:i};e.incomingStore.get(t,((t,r)=>{t?e._sendPacket(o,n):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,(t=>{if(t)return n(t);e.incomingStore.del(r,e.noop),e._sendPacket(o,n)})))}))}},8032:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeBrowser=t.isWebWorker=void 0;const r=()=>{var e,t;return Boolean("object"==typeof self&&(null===(t=null===(e=null===self||void 0===self?void 0:self.constructor)||void 0===e?void 0:e.name)||void 0===t?void 0:t.includes("WorkerGlobalScope")))},n=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,i=(()=>{var e;if("undefined"!=typeof window){if("undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase().indexOf(" electron/"))>-1&&(null===process||void 0===process?void 0:process.versions)){return!Object.prototype.hasOwnProperty.call(process.versions,"electron")}return"undefined"!=typeof window.document}return!1})()||r()||n();t.isWebWorker=r(),t.isReactNativeBrowser=n(),t.default=i},1364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTJS_VERSION=t.nextTick=t.applyMixin=t.ErrorWithReasonCode=void 0;class n extends Error{constructor(e,t){super(e),this.code=t,Object.setPrototypeOf(this,n.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}}t.ErrorWithReasonCode=n,t.applyMixin=function(e,t,r=!1){var n;const i=[t];for(;;){const e=i[0],t=Object.getPrototypeOf(e);if(!(null==t?void 0:t.prototype))break;i.unshift(t)}for(const t of i)for(const i of Object.getOwnPropertyNames(t.prototype))(r||"constructor"!==i)&&Object.defineProperty(e.prototype,i,null!==(n=Object.getOwnPropertyDescriptor(t.prototype,i))&&void 0!==n?n:Object.create(null))},t.nextTick="function"==typeof(null===process||void 0===process?void 0:process.nextTick)?process.nextTick:e=>{setTimeout(e,0)},t.MQTTJS_VERSION=r(6845).version},6344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8057),i={objectMode:!0},o={clean:!0};t.default=class{constructor(e){this.options=e||{},this.options=Object.assign(Object.assign({},o),e),this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){const e=new n.Readable(i),t=[];let r=!1,o=0;return this._inflights.forEach(((e,r)=>{t.push(e)})),e._read=()=>{!r&&o<t.length?e.push(t[o++]):e.push(null)},e.destroy=t=>{if(!r)return r=!0,setTimeout((()=>{e.emit("close")}),0),e},e}del(e,t){const r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){const r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}}},1516:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.aliasToTopic={},this.max=e}put(e,t){return!(0===t||t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}}},6766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7265),i=r(6282);t.default=class{constructor(e){e>0&&(this.aliasToTopic=new n.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new i.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;const r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){const t=this.topicToAlias[e];return"undefined"!=typeof t&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){const e=this.numberAllocator.firstVacant();return e||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}},1956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6282);t.default=class{constructor(){this.numberAllocator=new n.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}}},617:(e,t)=>{"use strict";function r(e){const t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.validateTopics=t.validateTopic=void 0,t.validateTopic=r,t.validateTopics=function(e){if(0===e.length)return"empty_topic_list";for(let t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}},1091:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=t.KeepaliveManager=t.UniqueMessageIdProvider=t.DefaultMessageIdProvider=t.Store=t.MqttClient=t.connectAsync=t.connect=t.Client=void 0;const c=a(r(1786));t.MqttClient=c.default;const l=a(r(2574));t.DefaultMessageIdProvider=l.default;const u=a(r(1956));t.UniqueMessageIdProvider=u.default;const h=a(r(6344));t.Store=h.default;const d=o(r(1784));t.connect=d.default,Object.defineProperty(t,"connectAsync",{enumerable:!0,get:function(){return d.connectAsync}});const f=a(r(2444));t.KeepaliveManager=f.default,t.Client=c.default,s(r(1786),t),s(r(1364),t);var p=r(9086);Object.defineProperty(t,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})},4970:(e,t,r)=>{"use strict";const{SymbolDispose:n}=r(2753),{AbortError:i,codes:o}=r(9438),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:c}=r(312),l=r(5813),{ERR_INVALID_ARG_TYPE:u}=o;let h;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!s(r)&&!a(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=s(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[c](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{h=h||r(4433).addAbortListener;const i=h(e,o);l(t,i[n])}return t}},2914:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:s}=r(2753),{Buffer:a}=r(181),{inspect:c}=r(4433);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);const t=a.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}t+=o,e-=o.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){const t=a.allocUnsafe(e),r=e;let n=this.head,i=0;do{const a=n.data;if(!(e>a.length)){e===a.length?(o(t,a,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),r-e),this.head=n,n.data=a.slice(e));break}o(t,a,r-e),e-=a.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},7721:(e,t,r)=>{"use strict";const{pipeline:n}=r(2719),i=r(1543),{destroyer:o}=r(2575),{isNodeStream:s,isReadable:a,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:h,isReadableStream:d}=r(312),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(9438),_=r(5813);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let r=0;r<e.length;++r)if(s(e[r])||l(e[r])){if(r<e.length-1&&!(a(e[r])||d(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be readable");if(r>0&&!(c(e[r])||h(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be writable")}let r,m,y,b,w;const A=e[0],v=n(e,(function(e){const t=b;b=null,t?t(e):e?w.destroy(e):S||E||w.destroy()})),E=!!(c(A)||h(A)||u(A)),S=!!(a(v)||d(v)||u(v));if(w=new i({writableObjectMode:!(null==A||!A.writableObjectMode),readableObjectMode:!(null==v||!v.readableObjectMode),writable:E,readable:S}),E){if(s(A))w._write=function(e,t,n){A.write(e,t)?n():r=n},w._final=function(e){A.end(),m=e},A.on("drain",(function(){if(r){const e=r;r=null,e()}}));else if(l(A)){const e=(u(A)?A.writable:A).getWriter();w._write=async function(t,r,n){try{await e.ready,e.write(t).catch((()=>{})),n()}catch(e){n(e)}},w._final=async function(t){try{await e.ready,e.close().catch((()=>{})),m=t}catch(e){t(e)}}}const e=u(v)?v.readable:v;_(e,(()=>{if(m){const e=m;m=null,e()}}))}if(S)if(s(v))v.on("readable",(function(){if(y){const e=y;y=null,e()}})),v.on("end",(function(){w.push(null)})),w._read=function(){for(;;){const e=v.read();if(null===e)return void(y=w._read);if(!w.push(e))return}};else if(l(v)){const e=(u(v)?v.readable:v).getReader();w._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!w.push(t))return;if(r)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===b||(e=new f),y=null,r=null,m=null,null===b?t(e):(b=t,s(v)&&o(v,e))},w}},2575:(e,t,r)=>{"use strict";const n=r(7097),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=r(9438),{Symbol:a}=r(2753),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:h}=r(312),d=a("kDestroy"),f=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,s=e._writableState;p(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(_,e,t):n.nextTick(m,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function _(e,t){y(e,t),m(e)}function m(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function b(e,t,r){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(y,e,t):y(e,t))}function w(e){let t=!1;function r(r){if(t)return void b(e,null!=r?r:new o);t=!0;const i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(d,r):r?b(e,r,!0):n.nextTick(A,e)}try{e._construct((e=>{n.nextTick(r,e)}))}catch(e){n.nextTick(r,e)}}function A(e){e.emit(f)}function v(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function E(e){e.emit("close")}function S(e,t){e.emit("error",t),n.nextTick(E,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),e.listenerCount(f)>1||n.nextTick(w,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new s),h(e)?(e.socket=null,e.destroy(t)):v(e)?e.abort():v(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(S,e,t):n.nextTick(E,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(d,(function(r){g(this,i(r,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},1543:(e,t,r)=>{"use strict";const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:s}=r(2753);e.exports=l;const a=r(4949),c=r(2757);s(l.prototype,a.prototype),s(l,a);{const e=o(c.prototype);for(let t=0;t<e.length;t++){const r=e[t];l.prototype[r]||(l.prototype[r]=c.prototype[r])}}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,h;function d(){return void 0===u&&(u={}),u}n(l.prototype,{writable:{__proto__:null,...i(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(c.prototype,"writableLength")},writableFinished:{__proto__:null,...i(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return d().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return d().newReadableWritablePairFromDuplex(e)},l.from=function(e){return h||(h=r(5749)),h(e,"body")}},5749:(e,t,r)=>{const n=r(7097),i=r(181),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:f}=r(312),p=r(5813),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:_,ERR_INVALID_RETURN_VALUE:m}}=r(9438),{destroyer:y}=r(2575),b=r(1543),w=r(4949),A=r(2757),{createDeferredPromise:v}=r(4433),E=r(5149),S=globalThis.Blob||i.Blob,I="undefined"!=typeof S?function(e){return e instanceof S}:function(e){return!1},k=globalThis.AbortController||r(581).AbortController,{FunctionPrototypeCall:C}=r(2753);class R extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(e){const t=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,r=e.writable;let n,i,a,c,l,u=!!o(t),h=!!s(r);function d(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new R({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:u,writable:h}),h&&(p(r,(e=>{h=!1,e&&y(t,e),d(e)})),l._write=function(e,t,i){r.write(e,t)?i():n=i},l._final=function(e){r.end(),i=e},r.on("drain",(function(){if(n){const e=n;n=null,e()}})),r.on("finish",(function(){if(i){const e=i;i=null,e()}}))),u&&(p(t,(e=>{u=!1,e&&y(t,e),d(e)})),t.on("readable",(function(){if(a){const e=a;a=null,e()}})),t.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const e=t.read();if(null===e)return void(a=l._read);if(!l.push(e))return}}),l._destroy=function(e,o){e||null===c||(e=new g),a=null,n=null,i=null,null===c?o(e):(c=o,y(r,e),y(t,e))},l}e.exports=function e(t,r){if(h(t))return t;if(l(t))return T({readable:t});if(u(t))return T({writable:t});if(c(t))return T({writable:!1,readable:!1});if(d(t))return T({readable:w.fromWeb(t)});if(f(t))return T({writable:A.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:r}=v();const i=new k,o=i.signal,s=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:s,cb:a}=await e;if(n.nextTick(a),s)return;if(o.aborted)throw new g(void 0,{cause:o.reason});({promise:t,resolve:r}=v()),yield i}}(),{signal:o});return{value:s,write(e,t,n){const i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return E(R,e,{objectMode:!0,write:i,final:o,destroy:s});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const r=C(c,e,(e=>{if(null!=e)throw new m("nully","body",e)}),(e=>{y(t,e)}));return t=new R({objectMode:!0,readable:!1,write:i,final(e){o((async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}}))},destroy:s})}throw new m("Iterable, AsyncIterable or AsyncFunction",r,e)}if(I(t))return e(t.arrayBuffer());if(a(t))return E(R,t,{objectMode:!0,writable:!1});if(d(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return R.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return T({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return C(i,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{y(e,t)})),e=new R({objectMode:!0,writable:!1,read(){}})}throw new _(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},5813:(e,t,r)=>{const n=r(7097),{AbortError:i,codes:o}=r(9438),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=o,{kEmptyObject:c,once:l}=r(4433),{validateAbortSignal:u,validateFunction:h,validateObject:d,validateBoolean:f}=r(8288),{Promise:p,PromisePrototypeThen:g,SymbolDispose:_}=r(2753),{isClosed:m,isReadable:y,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:A,isReadableErrored:v,isWritable:E,isWritableNodeStream:S,isWritableStream:I,isWritableFinished:k,isWritableErrored:C,isNodeStream:R,willEmitClose:T,kIsClosedPromise:B}=r(312);let O;const P=()=>{};function N(e,t,o){var f,p;if(2===arguments.length?(o=t,t=c):null==t?t=c:d(t,"options"),h(o,"callback"),u(t.signal,"options.signal"),o=l(o),w(e)||I(e))return function(e,t,o){let s=!1,a=P;if(t.signal)if(a=()=>{s=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(a);else{O=O||r(4433).addAbortListener;const n=O(t.signal,a),i=o;o=l(((...t)=>{n[_](),i.apply(e,t)}))}const c=(...t)=>{s||n.nextTick((()=>o.apply(e,t)))};return g(e[B].promise,c,c),P}(e,t,o);if(!R(e))throw new s("stream",["ReadableStream","WritableStream","Stream"],e);const N=null!==(f=t.readable)&&void 0!==f?f:b(e),x=null!==(p=t.writable)&&void 0!==p?p:S(e),L=e._writableState,M=e._readableState,D=()=>{e.writable||j()};let U=T(e)&&b(e)===N&&S(e)===x,F=k(e,!1);const j=()=>{F=!0,e.destroyed&&(U=!1),(!U||e.readable&&!N)&&(N&&!H||o.call(e))};let H=A(e,!1);const W=()=>{H=!0,e.destroyed&&(U=!1),(!U||e.writable&&!x)&&(x&&!F||o.call(e))},$=t=>{o.call(e,t)};let Q=m(e);const K=()=>{Q=!0;const t=C(e)||v(e);return t&&"boolean"!=typeof t?o.call(e,t):N&&!H&&b(e,!0)&&!A(e,!1)?o.call(e,new a):!x||F||k(e,!1)?void o.call(e):o.call(e,new a)},q=()=>{Q=!0;const t=C(e)||v(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},G=()=>{e.req.on("finish",j)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?x&&!L&&(e.on("end",D),e.on("close",D)):(e.on("complete",j),U||e.on("abort",K),e.req?G():e.on("request",G)),U||"boolean"!=typeof e.aborted||e.on("aborted",K),e.on("end",W),e.on("finish",j),!1!==t.error&&e.on("error",$),e.on("close",K),Q?n.nextTick(K):null!=L&&L.errorEmitted||null!=M&&M.errorEmitted?U||n.nextTick(q):(N||U&&!y(e)||!F&&!1!==E(e))&&(x||U&&!E(e)||!H&&!1!==y(e))?M&&e.req&&e.aborted&&n.nextTick(q):n.nextTick(q);const V=()=>{o=P,e.removeListener("aborted",K),e.removeListener("complete",j),e.removeListener("abort",K),e.removeListener("request",G),e.req&&e.req.removeListener("finish",j),e.removeListener("end",D),e.removeListener("close",D),e.removeListener("finish",j),e.removeListener("end",W),e.removeListener("error",$),e.removeListener("close",K)};if(t.signal&&!Q){const s=()=>{const r=o;V(),r.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(s);else{O=O||r(4433).addAbortListener;const n=O(t.signal,s),i=o;o=l(((...t)=>{n[_](),i.apply(e,t)}))}}return V}e.exports=N,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=c),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),n=t.cleanup),new p(((r,i)=>{const o=N(e,t,(e=>{n&&o(),e?i(e):r()}))}))}},5149:(e,t,r)=>{"use strict";const n=r(7097),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:s}=r(2753),{Buffer:a}=r(181),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=r(9438).codes;e.exports=function(e,t,r){let u,h;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])h=!0,u=t[o]();else{if(!t||!t[s])throw new c("iterable",["Iterable"],t);h=!1,u=t[s]()}const d=new e({objectMode:!0,highWaterMark:1,...r});let f=!1;return d._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=h?await u.next():u.next();if(t)d.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(d.push(t))continue;f=!1}}catch(e){d.destroy(e)}break}}())},d._destroy=function(e,t){i(async function(e){const t=null!=e,r="function"==typeof u.throw;if(t&&r){const{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),(()=>n.nextTick(t,e)),(r=>n.nextTick(t,r||e)))},d}},5582:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(2753),{EventEmitter:o}=r(4434);function s(e){o.call(this,e)}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(s.prototype,o.prototype),i(s,o),s.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",c),r.on("close",l));let s=!1;function c(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){h(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function h(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",c),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return a(r,"error",u),a(e,"error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e},e.exports={Stream:s,prependListener:a}},3764:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(581).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:c}=r(9438),{validateAbortSignal:l,validateInteger:u,validateObject:h}=r(8288),d=r(2753).Symbol("kWeak"),f=r(2753).Symbol("kResistStopPropagation"),{finished:p}=r(5813),g=r(7721),{addAbortSignalNoValidate:_}=r(4970),{isWritable:m,isNodeStream:y}=r(312),{deprecate:b}=r(4433),{ArrayPrototypePush:w,Boolean:A,MathFloor:v,Number:E,NumberIsNaN:S,Promise:I,PromiseReject:k,PromiseResolve:C,PromisePrototypeThen:R,Symbol:T}=r(2753),B=T("kEmpty"),O=T("kEof");function P(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let n=1;null!=(null==t?void 0:t.concurrency)&&(n=v(t.concurrency));let i=n-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=v(t.highWaterMark)),u(n,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=n,async function*(){const o=r(4433).AbortSignalAny([null==t?void 0:t.signal].filter(A)),s=this,a=[],l={signal:o};let u,h,d=!1,f=0;function p(){d=!0,g()}function g(){f-=1,_()}function _(){h&&!d&&f<n&&a.length<i&&(h(),h=null)}!async function(){try{for await(let t of s){if(d)return;if(o.aborted)throw new c;try{if(t=e(t,l),t===B)continue;t=C(t)}catch(e){t=k(e)}f+=1,R(t,g,p),a.push(t),u&&(u(),u=null),!d&&(a.length>=i||f>=n)&&await new I((e=>{h=e}))}a.push(O)}catch(e){const t=k(e);R(t,g,p),a.push(t)}finally{d=!0,u&&(u(),u=null)}}();try{for(;;){for(;a.length>0;){const e=await a[0];if(e===O)return;if(o.aborted)throw new c;e!==B&&(yield e),a.shift(),_()}await new I((e=>{u=e}))}}finally{d=!0,h&&(h(),h=null)}}.call(this)}async function N(e,t=void 0){for await(const r of x.call(this,e,t))return!0;return!1}function x(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return P.call(this,(async function(t,r){return await e(t,r)?t:B}),t)}class L extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function M(e){if(e=E(e),S(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b((function(e=void 0){return null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c({cause:e.signal.reason});yield[t++,n]}}.call(this)}),"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;e--<=0&&(yield r)}}.call(this)},filter:x,flatMap:function(e,t){const r=P.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:P,take:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new c;if(e-- >0&&(yield r),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),y(e)&&!m(e))throw new i("stream",e,"must be writable");const r=g(this,e);return null!=t&&t.signal&&_(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await N.call(this,(async(...t)=>!await e(...t)),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const r of P.call(this,(async function(t,r){return await e(t,r),B}),t));},reduce:async function(e,t,r){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&h(r,"options"),null!=(null==r?void 0:r.signal)&&l(r.signal,"options.signal");let s=arguments.length>1;if(null!=r&&null!==(i=r.signal)&&void 0!==i&&i.aborted){const e=new c(void 0,{cause:r.signal.reason});throw this.once("error",(()=>{})),await p(this.destroy(e)),e}const a=new n,u=a.signal;if(null!=r&&r.signal){const e={once:!0,[d]:this,[f]:!0};r.signal.addEventListener("abort",(()=>a.abort()),e)}let g=!1;try{for await(const n of this){var _;if(g=!0,null!=r&&null!==(_=r.signal)&&void 0!==_&&_.aborted)throw new c;s?t=await e(t,n,{signal:u}):(t=n,s=!0)}if(!g&&!s)throw new L}finally{a.abort()}return t},toArray:async function(e){null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c(void 0,{cause:e.signal.reason});w(t,n)}return t},some:N,find:async function(e,t){for await(const r of x.call(this,e,t))return r}}},3643:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n}=r(2753);e.exports=o;const i=r(8553);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},2719:(e,t,r)=>{const n=r(7097),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:s,SymbolDispose:a}=r(2753),c=r(5813),{once:l}=r(4433),u=r(2575),h=r(1543),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:g,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:y}=r(9438),{validateFunction:b,validateAbortSignal:w}=r(8288),{isIterable:A,isReadable:v,isReadableNodeStream:E,isNodeStream:S,isTransformStream:I,isWebStream:k,isReadableStream:C,isReadableFinished:R}=r(312),T=globalThis.AbortController||r(581).AbortController;let B,O,P;function N(e,t,r){let n=!1;e.on("close",(()=>{n=!0}));return{destroy:t=>{n||(n=!0,u.destroyer(e,t||new _("pipe")))},cleanup:c(e,{readable:t,writable:r},(e=>{n=!e}))}}function x(e){if(A(e))return e;if(E(e))return async function*(e){O||(O=r(4949));yield*O.prototype[s].call(e)}(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function L(e,t,r,{end:n}){let i,s=null;const a=e=>{if(e&&(i=e),s){const e=s;s=null,e()}},l=()=>new o(((e,t)=>{i?t(i):s=()=>{i?t(i):e()}}));t.on("drain",a);const u=c(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const r of e)t.write(r)||await l();n&&(t.end(),await l()),r()}catch(e){r(i!==e?d(i,e):e)}finally{u(),t.off("drain",a)}}async function M(e,t,r,{end:n}){I(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch((()=>{}));await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function D(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new g("streams");const s=new T,c=s.signal,l=null==o?void 0:o.signal,u=[];function d(){j(new y)}let _,m,b;w(l,"options.signal"),P=P||r(4433).addAbortListener,l&&(_=P(l,d));const R=[];let O,D=0;function F(e){j(e,0==--D)}function j(e,r){var i;if(!e||m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code||(m=e),m||r){for(;R.length;)R.shift()(m);null===(i=_)||void 0===i||i[a](),s.abort(),r&&(m||u.forEach((e=>e())),n.nextTick(t,m,b))}}for(let Q=0;Q<e.length;Q++){const K=e[Q],q=Q<e.length-1,G=Q>0,V=q||!1!==(null==o?void 0:o.end),Y=Q===e.length-1;if(S(K)){if(V){const{destroy:z,cleanup:X}=N(K,q,G);R.push(z),v(K)&&Y&&u.push(X)}function H(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&F(e)}K.on("error",H),v(K)&&Y&&u.push((()=>{K.removeListener("error",H)}))}if(0===Q)if("function"==typeof K){if(O=K({signal:c}),!A(O))throw new p("Iterable, AsyncIterable or Stream","source",O)}else O=A(K)||E(K)||I(K)?K:h.from(K);else if("function"==typeof K){var W;if(I(O))O=x(null===(W=O)||void 0===W?void 0:W.readable);else O=x(O);if(O=K(O,{signal:c}),q){if(!A(O,!0))throw new p("AsyncIterable",`transform[${Q-1}]`,O)}else{var $;B||(B=r(3643));const J=new B({objectMode:!0}),Z=null===($=O)||void 0===$?void 0:$.then;if("function"==typeof Z)D++,Z.call(O,(e=>{b=e,null!=e&&J.write(e),V&&J.end(),n.nextTick(F)}),(e=>{J.destroy(e),n.nextTick(F,e)}));else if(A(O,!0))D++,L(O,J,F,{end:V});else{if(!C(O)&&!I(O))throw new p("AsyncIterable or Promise","destination",O);{const re=O.readable||O;D++,L(re,J,F,{end:V})}}O=J;const{destroy:ee,cleanup:te}=N(O,!1,!0);R.push(ee),Y&&u.push(te)}}else if(S(K)){if(E(O)){D+=2;const ne=U(O,K,F,{end:V});v(K)&&Y&&u.push(ne)}else if(I(O)||C(O)){const ie=O.readable||O;D++,L(ie,K,F,{end:V})}else{if(!A(O))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],O);D++,L(O,K,F,{end:V})}O=K}else if(k(K)){if(E(O))D++,M(x(O),K,F,{end:V});else if(C(O)||A(O))D++,M(O,K,F,{end:V});else{if(!I(O))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],O);D++,M(O.readable,K,F,{end:V})}O=K}else O=h.from(K)}return(null!=c&&c.aborted||null!=l&&l.aborted)&&n.nextTick(d),O}function U(e,t,r,{end:i}){let o=!1;if(t.on("close",(()=>{o||r(new m)})),e.pipe(t,{end:!1}),i){function s(){o=!0,t.end()}R(e)?n.nextTick(s):e.once("end",s)}else r();return c(e,{readable:!0,writable:!1},(t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)})),c(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:D,pipeline:function(...e){return D(e,l(function(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},4949:(e,t,r)=>{const n=r(7097),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:h,SafeSet:d,SymbolAsyncDispose:f,SymbolAsyncIterator:p,Symbol:g}=r(2753);e.exports=G,G.ReadableState=q;const{EventEmitter:_}=r(4434),{Stream:m,prependListener:y}=r(5582),{Buffer:b}=r(181),{addAbortSignal:w}=r(4970),A=r(5813);let v=r(4433).debuglog("stream",(e=>{v=e}));const E=r(2914),S=r(2575),{getHighWaterMark:I,getDefaultHighWaterMark:k}=r(6432),{aggregateTwoErrors:C,codes:{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:B,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:P},AbortError:N}=r(9438),{validateObject:x}=r(8288),L=g("kPaused"),{StringDecoder:M}=r(3193),D=r(5149);u(G.prototype,m.prototype),u(G,m);const U=()=>{},{errorOrDestroy:F}=S,j=1,H=16,W=32,$=2048,Q=4096;function K(e){return{enumerable:!1,get(){return!!(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function q(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(1543)),this.state=$|Q|H|W,e&&e.objectMode&&(this.state|=j),n&&e&&e.readableObjectMode&&(this.state|=j),this.highWaterMark=e?I(this,e,"readableHighWaterMark",n):k(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,e&&!1===e.emitClose&&(this.state&=~$),e&&!1===e.autoDestroy&&(this.state&=~Q),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new M(e.encoding),this.encoding=e.encoding)}function G(e){if(!(this instanceof G))return new G(e);const t=this instanceof r(1543);this._readableState=new q(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),m.call(this,e),S.construct(this,(()=>{this._readableState.needReadable&&Z(this,this._readableState)}))}function V(e,t,r,n){v("readableAddChunk",t);const i=e._readableState;let o;if(i.state&j||("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=b.from(t,r).toString(i.encoding):(t=b.from(t,r),r=""))):t instanceof b?r="":m._isUint8Array(t)?(t=m._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new R("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)i.state&=-9,function(e,t){if(v("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?X(e):(t.needReadable=!1,t.emittedReadable=!0,J(e))}(e,i);else if(i.state&j||t&&t.length>0)if(n)if(4&i.state)F(e,new P);else{if(i.destroyed||i.errored)return!1;Y(e,i,t,!0)}else if(i.ended)F(e,new O);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?Y(e,i,t,!1):Z(e,i)):Y(e,i,t,!1)}else n||(i.state&=-9,Z(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Y(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&X(e)),Z(e,t)}c(q.prototype,{objectMode:K(j),ended:K(2),endEmitted:K(4),reading:K(8),constructed:K(H),sync:K(W),needReadable:K(64),emittedReadable:K(128),readableListening:K(256),resumeScheduled:K(512),errorEmitted:K(1024),emitClose:K($),autoDestroy:K(Q),destroyed:K(8192),closed:K(16384),closeEmitted:K(32768),multiAwaitDrain:K(65536),readingMore:K(1<<17),dataEmitted:K(1<<18)}),G.prototype.destroy=S.destroy,G.prototype._undestroy=S.undestroy,G.prototype._destroy=function(e,t){t(e)},G.prototype[_.captureRejectionSymbol]=function(e){this.destroy(e)},G.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new N,this.destroy(e)),new h(((t,r)=>A(this,(n=>n&&n!==e?r(n):t(null)))))},G.prototype.push=function(e,t){return V(this,e,t,!1)},G.prototype.unshift=function(e,t){return V(this,e,t,!0)},G.prototype.isPaused=function(){const e=this._readableState;return!0===e[L]||!1===e.flowing},G.prototype.setEncoding=function(e){const t=new M(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function z(e,t){return e<=0||0===t.length&&t.ended?0:t.state&j?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function X(e){const t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(J,e))}function J(e){const t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function re(e){v("readable nexttick read 0"),e.read(0)}function ne(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=G.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=U;function i(t){this===e?(n(),n=U):n=t}e.on("readable",i);const o=A(e,{writable:!1},(e=>{r=e?C(r,e):null,n(),n=U}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new h(i)}}}catch(e){throw r=C(r,e),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):S.destroyer(e,null)}}(e,t);return r.stream=e,r}function se(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ae(e){const t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(ce,t,e))}function ce(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(le,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function le(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function he(){return void 0===ue&&(ue={}),ue}G.prototype.read=function(e){v("read",e),void 0===e?e=NaN:o(e)||(e=a(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new B("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ae(this):X(this),null;if(0===(e=z(e,t))&&t.ended)return 0===t.length&&ae(this),null;let n,i=!!(64&t.state);if(v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,v("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,v("reading, ended or constructing",i);else if(i){v("do read"),t.state|=8|W,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){F(this,e)}t.state&=~W,t.reading||(e=z(r,t))}return n=e>0?se(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ae(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},G.prototype._read=function(e){throw new T("_read()")},G.prototype.pipe=function(e,t){const r=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new d(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),v("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?a:_;function s(t,n){v("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,function(){v("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),c&&e.removeListener("drain",c);e.removeListener("error",f),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",_),r.removeListener("data",h),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}())}function a(){v("onend"),e.end()}let c;i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",s);let l=!1;function u(){l||(1===i.pipes.length&&i.pipes[0]===e?(v("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(v("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),c||(c=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(v("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(v("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",c))}function h(t){v("ondata");const r=e.write(t);v("dest.write",r),!1===r&&u()}function f(t){if(v("onerror",t),_(),e.removeListener("error",f),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?F(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),_()}function g(){v("onfinish"),e.removeListener("close",p),_()}function _(){v("unpipe"),r.unpipe(e)}return r.on("data",h),y(e,"error",f),e.once("close",p),e.once("finish",g),e.emit("pipe",r),!0===e.writableNeedDrain?u():i.flowing||(v("pipe resume"),r.resume()),e},G.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},G.prototype.on=function(e,t){const r=m.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,v("on readable",i.length,i.reading),i.length?X(this):i.reading||n.nextTick(re,this))),r},G.prototype.addListener=G.prototype.on,G.prototype.removeListener=function(e,t){const r=m.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(te,this),r},G.prototype.off=G.prototype.removeListener,G.prototype.removeAllListeners=function(e){const t=m.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(te,this),t},G.prototype.resume=function(){const e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(ne,e,t))}(this,e)),e[L]=!1,this},G.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},G.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{F(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=l(e);for(let t=1;t<r.length;t++){const n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},G.prototype[p]=function(){return oe(this)},G.prototype.iterator=function(e){return void 0!==e&&x(e,"options"),oe(this,e)},c(G.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),G._fromList=se,G.from=function(e,t){return D(G,e,t)},G.fromWeb=function(e,t){return he().newStreamReadableFromReadableStream(e,t)},G.toWeb=function(e,t){return he().newReadableStreamFromStreamReadable(e,t)},G.wrap=function(e,t){var r,n;return new G({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){S.destroyer(e,t),r(t)}}).wrap(e)}},6432:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(2753),{validateInteger:o}=r(8288),{ERR_INVALID_ARG_VALUE:s}=r(9438).codes;let a=16384,c=16;function l(e){return e?c:a}e.exports={getHighWaterMark:function(e,t,r,o){const a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=a){if(!i(a)||a<0){throw new s(o?`options.${r}`:"options.highWaterMark",a)}return n(a)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?c=t:a=t}}},8553:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:n,Symbol:i}=r(2753);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:o}=r(9438).codes,s=r(1543),{getHighWaterMark:a}=r(6432);n(l.prototype,s.prototype),n(l,s);const c=i("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function h(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,r){throw new o("_transform()")},l.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[c]=r)}))},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},312:(e,t,r)=>{"use strict";const{SymbolAsyncIterator:n,SymbolIterator:i,SymbolFor:o}=r(2753),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),c=o("nodejs.stream.readable"),l=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),h=o("nodejs.webstream.isClosedPromise"),d=o("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function _(e){return!(!e||g(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function m(e){return!(!e||g(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||g(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[s]||null!=n&&n.destroyed)}function w(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function A(e,t){if(!f(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function v(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&(f(e)&&e.readable&&!A(e))}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&(p(e)&&e.writable&&!w(e))}function S(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&S(e)}e.exports={isDestroyed:b,kIsDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,o,s,c,l,u,h;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(c=e._readableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==n?n:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(h=e._writableState)||void 0===h?void 0:h.errored))},kIsErrored:a,isReadable:v,kIsReadable:c,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:l,isClosed:function(e){if(!g(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&S(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return g(e)?!!b(e)||(!1===(null==t?void 0:t.readable)||!v(e))&&(!1===(null==t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[i]:"function"==typeof e[n]||"function"==typeof e[i])},isReadableNodeStream:f,isReadableStream:_,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:A,isReadableErrored:function(e){var t,r;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return _(e)||m(e)||y(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:m,isWritableEnded:w,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&I(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},2757:(e,t,r)=>{const n=r(7097),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:d}=r(2753);e.exports=x,x.WritableState=P;const{EventEmitter:f}=r(4434),p=r(5582).Stream,{Buffer:g}=r(181),_=r(2575),{addAbortSignal:m}=r(4970),{getHighWaterMark:y,getDefaultHighWaterMark:b}=r(6432),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:C,ERR_UNKNOWN_ENCODING:R}=r(9438).codes,{errorOrDestroy:T}=_;function B(){}l(x.prototype,p.prototype),l(x,p);const O=h("kOnFinished");function P(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(1543)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",n):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,N(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function N(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function x(e){const t=this instanceof r(1543);if(!t&&!s(x,this))return new x(e);this._writableState=new P(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&m(e.signal,this)),p.call(this,e),_.construct(this,(()=>{const e=this._writableState;e.writing||W(this,e),K(this,e)}))}function L(e,t,r,i){const o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new R(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=B)}if(null===t)throw new k;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else{if(!p._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),r="buffer"}let s;return o.ending?s=new C:o.destroyed&&(s=new S("write")),s?(n.nextTick(i,s),T(e,s,!0),s):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const s=t.length<t.highWaterMark;s||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==B&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return s&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function M(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function D(e,t,r,n){--t.pendingcb,n(r),H(t),T(e,r)}function U(e,t){const r=e._writableState,i=r.sync,o=r.writecb;"function"==typeof o?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(D,e,r,t,o):D(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&W(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(F,r.afterWriteTickInfo)):j(e,r,1,o))):T(e,new v)}function F({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,j(e,t,r,n)}function j(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&H(t),K(e,t)}function H(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:n,callback:i}=e.buffered[r],o=e.objectMode?1:n.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}const r=e[O].splice(0);for(let t=0;t<r.length;t++){var n;r[t](null!==(n=e.errored)&&void 0!==n?n:new S("end"))}N(e)}function W(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:n,objectMode:o}=t,s=r.length-n;if(!s)return;let a=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;const n=t.allNoop?B:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===a?r:i(r,a);o.allBuffers=t.allBuffers,M(e,t,!0,t.length,o,"",n),N(t)}else{do{const{chunk:n,encoding:i,callback:s}=r[a];r[a++]=null;M(e,t,!1,o?1:n.length,n,i,s)}while(a<r.length&&!t.writing);a===r.length?N(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function Q(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function i(i){if(r)T(e,null!=i?i:v());else if(r=!0,t.pendingcb--,i){const r=t[O].splice(0);for(let e=0;e<r.length;e++)r[e](i);T(e,i,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function K(e,t,r){$(t)&&(Q(e,t),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick(((e,t)=>{$(t)?q(e,t):t.pendingcb--}),e,t)):$(t)&&(t.pendingcb++,q(e,t))))}function q(e,t){t.pendingcb--,t.finished=!0;const r=t[O].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}P.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},a(P.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(x,d,{__proto__:null,value:function(e){return!!s(this,e)||this===x&&(e&&e._writableState instanceof P)}}),x.prototype.pipe=function(){T(this,new E)},x.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||W(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!g.isEncoding(e))throw new R(e);return this._writableState.defaultEncoding=e,this},x.prototype._write=function(e,t,r){if(!this._writev)throw new A("_write()");this._writev([{chunk:e,encoding:t}],r)},x.prototype._writev=null,x.prototype.end=function(e,t,r){const i=this._writableState;let s;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){const r=L(this,e,t);r instanceof o&&(s=r)}return i.corked&&(i.corked=1,this.uncork()),s||(i.errored||i.ending?i.finished?s=new I("end"):i.destroyed&&(s=new S("end")):(i.ending=!0,K(this,i,!0),i.ended=!0)),"function"==typeof r&&(s||i.finished?n.nextTick(r,s):i[O].push(r)),this},c(x.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=_.destroy;let V;function Y(){return void 0===V&&(V={}),V}x.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[O].length)&&n.nextTick(H,r),G.call(this,e,t),this},x.prototype._undestroy=_.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},x.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},x.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}},8288:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:_}=r(2753),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:v}}=r(9438),{normalizeEncoding:E}=r(4433),{isAsyncFunction:S,isArrayBufferView:I}=r(4433).types,k={};const C=/^[0-7]+$/;const R=m(((e,t,r=u,n=l)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);if(e<r||e>n)throw new A(t,`>= ${r} && <= ${n}`,e)})),T=m(((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);if(e<r||e>n)throw new A(t,`>= ${r} && <= ${n}`,e)})),B=m(((e,t,r=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new A(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new A(t,`>= ${n} && <= ${i}`,e)}));function O(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const P=m(((e,t,r)=>{if(!i(r,e)){const n=o(s(r,(e=>"string"==typeof e?`'${e}'`:p(e))),", ");throw new w(t,e,"must be one of: "+n)}}));function N(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function x(e,t,r){return null!=e&&d(e,t)?e[t]:r}const L=m(((e,t,r=null)=>{const i=x(r,"allowArray",!1),o=x(r,"allowFunction",!1);if(!x(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)})),M=m(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)})),D=m(((e,t,r=0)=>{if(!n(e))throw new b(t,"Array",e);if(e.length<r){throw new w(t,e,`must be longer than ${r}`)}}));const U=m(((e,t="buffer")=>{if(!I(e))throw new b(t,["Buffer","TypedArray","DataView"],e)}));const F=m(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)})),j=m(((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)})),H=m(((e,t)=>{if("function"!=typeof e||S(e))throw new b(t,"Function",e)})),W=m(((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)}));const $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Q(e,t){if("undefined"==typeof e||!f($,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if("undefined"==typeof e&&(e=r),"string"==typeof e){if(null===f(C,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=h(e,8)}return B(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)O(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++){const n=e[r],i=`${t}[${r}]`;if(null==n)throw new b(i,"AbortSignal",n);F(n,i)}},validateBoolean:N,validateBuffer:U,validateDictionary:M,validateEncoding:function(e,t){const r=E(t),n=e.length;if("hex"===r&&n%2!=0)throw new w("encoding",t,`is invalid for data of length ${n}`)},validateFunction:j,validateInt32:T,validateInteger:R,validateNumber:function(e,t,r=void 0,n){if("number"!=typeof e)throw new b(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&c(e))throw new A(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:L,validateOneOf:P,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===_(e).length||+e!=+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(O(e,t),void 0===k[e]){if(void 0!==k[g(e)])throw new v(e+" (signals must use all capital letters)");throw new v(e)}},validateString:O,validateUint32:B,validateUndefined:W,validateUnion:function(e,t,r){if(!i(r,e))throw new b(t,`('${o(r,"|")}')`,e)},validateAbortSignal:F,validateLinkHeaderValue:function(e){if("string"==typeof e)return Q(e,"hints"),e;if(n(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const i=e[n];Q(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},9438:(e,t,r)=>{"use strict";const{format:n,inspect:i,AggregateError:o}=r(4433),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function h(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function d(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class i extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return h(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const i=(t.match(/%[dfijoOs]/g)||[]).length;return h(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length?t:n(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,u[e]=i}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,r)=>{h("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],s=[],a=[];for(const e of t)h("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?o.push(e.toLowerCase()):l.test(e)?s.push(e):(h("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();n+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),f("ERR_INVALID_ARG_VALUE",((e,t,r="is invalid")=>{let n=i(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),f("ERR_MISSING_ARGS",((...e)=>{let t;h(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return h(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=d(String(r)):"bigint"==typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=d(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new s([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:p,codes:u}},8057:(e,t,r)=>{"use strict";const n=r(2203);if(n&&"disable"===process.env.READABLE_STREAM){const t=n.promises;e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>t}),e.exports.Stream=n.Stream}else{const t=r(873),n=r(7162),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>n}),e.exports.Stream=t.Stream}e.exports.default=e.exports},2753:e=>{"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},4433:(e,t,r)=>{"use strict";const n=r(181),{kResistStopPropagation:i,SymbolDispose:o}=r(2753),s=globalThis.AbortSignal||r(581).AbortSignal,a=globalThis.AbortController||r(581).AbortController,c=Object.getPrototypeOf((async function(){})).constructor,l=globalThis.Blob||n.Blob,u="undefined"!=typeof l?function(e){return e instanceof l}:function(e){return!1},h=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)};class d extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:d,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e(((e,...n)=>e?r(e):t(...n)))})),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,r]){const n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"===r&&"object"==typeof n){return`${n.constructor!==Object?n.constructor.name:""} {}`.trim()}return n.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof c,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:u,deprecate:(e,t)=>e,addAbortListener:r(4434).addAbortListener||function(e,t){if(void 0===e)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);let r;return h(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new ERR_INVALID_ARG_TYPE(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[i]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[o](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:s.any||function(e){if(1===e.length)return e[0];const t=new a,r=()=>t.abort();return e.forEach((e=>{h(e,"signals"),e.addEventListener("abort",r,{once:!0})})),t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",r)))}),{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},873:(e,t,r)=>{const{Buffer:n}=r(181),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:s}=r(2753),{promisify:{custom:a}}=r(4433),{streamReturningOperators:c,promiseReturningOperators:l}=r(3764),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(9438),h=r(7721),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=r(6432),{pipeline:p}=r(2719),{destroyer:g}=r(2575),_=r(5813),m=r(7162),y=r(312),b=e.exports=r(5582).Stream;b.isDestroyed=y.isDestroyed,b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.isWritable=y.isWritable,b.Readable=r(4949);for(const v of o(c)){const E=c[v];function w(...e){if(new.target)throw u();return b.Readable.from(s(E,this,e))}i(w,"name",{__proto__:null,value:E.name}),i(w,"length",{__proto__:null,value:E.length}),i(b.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const S of o(l)){const I=l[S];function w(...e){if(new.target)throw u();return s(I,this,e)}i(w,"name",{__proto__:null,value:I.name}),i(w,"length",{__proto__:null,value:I.length}),i(b.Readable.prototype,S,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}b.Writable=r(2757),b.Duplex=r(1543),b.Transform=r(8553),b.PassThrough=r(3643),b.pipeline=p;const{addAbortSignal:A}=r(4970);b.addAbortSignal=A,b.finished=_,b.destroy=g,b.compose=h,b.setDefaultHighWaterMark=d,b.getDefaultHighWaterMark=f,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>m}),i(p,a,{__proto__:null,enumerable:!0,get:()=>m.pipeline}),i(_,a,{__proto__:null,enumerable:!0,get:()=>m.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},7162:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(2753),{isIterable:o,isNodeStream:s,isWebStream:a}=r(312),{pipelineImpl:c}=r(2719),{finished:l}=r(5813);r(873),e.exports={finished:l,pipeline:function(...e){return new i(((t,r)=>{let i,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!s(u)&&!o(u)&&!a(u)){const t=n(e);i=t.signal,l=t.end}c(e,((e,n)=>{e?r(e):t(n)}),{signal:i,end:l})}))}}},2256:(e,t,r)=>{"use strict";const n=r(6107);n.createWebSocketStream=r(9506),n.Server=r(2319),n.Receiver=r(3595),n.Sender=r(2407),n.WebSocket=n,n.WebSocketServer=n.Server,e.exports=n},285:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(5969),i=Buffer[Symbol.species];function o(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,o),o+=n.length}return o<t?new i(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new i(t):ArrayBuffer.isView(t)?r=new i(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,r,n,i,s){s<48?o(e,r,n,i,s):t.mask(e,r,n,i,s)},e.exports.unmask=function(e,r){e.length<32?s(e,r):t.unmask(e,r)}}catch(e){}},5969:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},80:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:i}=r(5969),o=Symbol("kCode"),s=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),h=Symbol("kType"),d=Symbol("kWasClean");class f{constructor(e){this[u]=null,this[h]=e}get target(){return this[u]}get type(){return this[h]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[l]}get wasClean(){return this[d]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class g extends f{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(g.prototype,"error",{enumerable:!0}),Object.defineProperty(g.prototype,"message",{enumerable:!0});class _ extends f{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}}Object.defineProperty(_.prototype,"data",{enumerable:!0});const m={addEventListener(e,t,r={}){for(const o of this.listeners(e))if(!r[n]&&o[i]===t&&!o[n])return;let o;if("message"===e)o=function(e,r){const n=new _("message",{data:r?e:e.toString()});n[u]=this,y(t,this,n)};else if("close"===e)o=function(e,r){const n=new p("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[u]=this,y(t,this,n)};else if("error"===e)o=function(e){const r=new g("error",{error:e,message:e.message});r[u]=this,y(t,this,r)};else{if("open"!==e)return;o=function(){const e=new f("open");e[u]=this,y(t,this,e)}}o[n]=!!r[n],o[i]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}};function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:p,ErrorEvent:g,Event:f,EventTarget:m,MessageEvent:_}},2089:(e,t,r)=>{"use strict";const{tokenChars:n}=r(7289);function i(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,o,s=Object.create(null),a=!1,c=!1,l=!1,u=-1,h=-1,d=-1,f=0;for(;f<e.length;f++)if(h=e.charCodeAt(f),void 0===r)if(-1===d&&1===n[h])-1===u&&(u=f);else if(0===f||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);const n=e.slice(u,d);44===h?(i(t,n,s),s=Object.create(null)):r=n,u=d=-1}}else-1===d&&-1!==u&&(d=f);else if(void 0===o)if(-1===d&&1===n[h])-1===u&&(u=f);else if(32===h||9===h)-1===d&&-1!==u&&(d=f);else if(59===h||44===h){if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),i(s,e.slice(u,d),!0),44===h&&(i(t,r,s),s=Object.create(null),r=void 0),u=d=-1}else{if(61!==h||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${f}`);o=e.slice(u,f),u=d=-1}else if(c){if(1!==n[h])throw new SyntaxError(`Unexpected character at index ${f}`);-1===u?u=f:a||(a=!0),c=!1}else if(l)if(1===n[h])-1===u&&(u=f);else if(34===h&&-1!==u)l=!1,d=f;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===h&&61===e.charCodeAt(f-1))l=!0;else if(-1===d&&1===n[h])-1===u&&(u=f);else if(-1===u||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let n=e.slice(u,d);a&&(n=n.replace(/\\/g,""),a=!1),i(s,o,n),44===h&&(i(t,r,s),s=Object.create(null),r=void 0),o=void 0,u=d=-1}}else-1===d&&(d=f);if(-1===u||l||32===h||9===h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=f);const p=e.slice(u,d);return void 0===r?i(t,p,s):(void 0===o?i(s,p,!0):i(s,o,a?p.replace(/\\/g,""):p),i(t,r,s)),t}}},6996:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5138:(e,t,r)=>{"use strict";const n=r(3106),i=r(285),o=r(6996),{kStatusCode:s}=r(5969),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),h=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error");let p;function g(e){this[d].push(e),this[u]+=e.length}function _(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[d].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][s]=1009,this.removeListener("data",_),this.reset())}function m(e){this[l]._inflate=null,e[s]=1007,this[h](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){p.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){p.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[d]=[],this._inflate.on("error",m),this._inflate.on("data",_)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=i.concat(this._inflate[d],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[d]=[],this._deflate.on("data",g)}this._deflate[h]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=i.concat(this._deflate[d],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[u]=0,this._deflate[d]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},3595:(e,t,r)=>{"use strict";const{Writable:n}=r(2203),i=r(5138),{BINARY_TYPES:o,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(5969),{concat:l,toArrayBuffer:u,unmask:h}=r(285),{isValidStatusCode:d,isValidUTF8:f}=r(7289),p=Buffer[Symbol.species];e.exports=class extends n{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e),new p(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new p(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0]){return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}const r=!(64&~t[0]);if(!r||this._extensions[i.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11)){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked){return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else{e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);if(r>Math.pow(2,21)-1){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}else this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}else this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&h(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)}))}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?u(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!0),this._state=0,this.startLoop(e)})))}else{const n=l(r,t);if(!this._skipUTF8Validation&&!f(n)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=0):(this._state=6,setImmediate((()=>{this.emit("message",n,!1),this._state=0,this.startLoop(e)})))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate((()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)})));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,s),this.end();else{const r=e.readUInt16BE(0);if(!d(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const n=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(n)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,n),this.end()}this._state=0}}createError(e,t,r,n,i){this._loop=!1,this._errored=!0;const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=i,o[a]=n,o}}},2407:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203),{randomFillSync:i}=r(6982),o=r(5138),{EMPTY_BUFFER:s,kWebSocket:a,NOOP:c}=r(5969),{isBlob:l,isValidStatusCode:u}=r(7289),{mask:h,toBuffer:d}=r(285),f=Symbol("kByteLength"),p=Buffer.alloc(4),g=8192;let _,m=g;class y{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let r,n,o=!1,s=2,a=!1;t.mask&&(r=t.maskBuffer||p,t.generateMask?t.generateMask(r):(m===g&&(void 0===_&&(_=Buffer.alloc(g)),i(_,0,g),m=0),r[0]=_[m++],r[1]=_[m++],r[2]=_[m++],r[3]=_[m++]),a=!(r[0]|r[1]|r[2]|r[3]),s=6),"string"==typeof e?n=t.mask&&!a||void 0===t[f]?(e=Buffer.from(e)).length:t[f]:(n=e.length,o=t.mask&&t.readOnly&&!a);let c=n;n>=65536?(s+=8,c=127):n>125&&(s+=2,c=126);const l=Buffer.allocUnsafe(o?n+s:s);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(n,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(n,4,6)),t.mask?(l[1]|=128,l[s-4]=r[0],l[s-3]=r[1],l[s-2]=r[2],l[s-1]=r[3],a?[l,e]:o?(h(e,r,l,s,n),[l]):(h(e,r,e,0,n),[l,e])):[l,e]}close(e,t,r,n){let i;if(void 0===e)i=s;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0)}const o={[f]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(y.frame(i,o),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):l(e)?(n=e.size,i=!1):(n=(e=d(e)).length,i=d.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):l(e)?(n=e.size,i=!1):(n=(e=d(e)).length,i=d.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[f]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}send(e,t,r){const n=this._extensions[o.extensionName];let i,s,a=t.binary?2:1,c=t.compress;"string"==typeof e?(i=Buffer.byteLength(e),s=!1):l(e)?(i=e.size,s=!1):(i=(e=d(e)).length,s=d.readOnly),this._firstFragment?(this._firstFragment=!1,c&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=i>=n._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[f]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,t,r,n){this._bufferedBytes+=r[f],this._state=2,e.arrayBuffer().then((e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(b,this,e,n)}this._bufferedBytes-=r[f];const i=d(e);t?this.dispatch(i,t,r,n):(this._state=0,this.sendFrame(y.frame(i,r),n),this.dequeue())})).catch((e=>{process.nextTick(w,this,e,n)}))}dispatch(e,t,r,n){if(!t)return void this.sendFrame(y.frame(e,r),n);const i=this._extensions[o.extensionName];this._bufferedBytes+=r[f],this._state=1,i.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){b(this,new Error("The socket was closed while data was being compressed"),n)}else this._bufferedBytes-=r[f],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),n),this.dequeue()}))}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][f],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function b(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const n=e._queue[r],i=n[n.length-1];"function"==typeof i&&i(t)}}function w(e,t,r){b(e,t,r),e.onerror(t)}e.exports=y},9506:(e,t,r)=>{"use strict";const{Duplex:n}=r(2203);function i(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()})),e.once("error",(function(e){a.destroyed||(r=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(i,a);let o=!1;e.once("error",(function(e){o=!0,n(e)})),e.once("close",(function(){o||n(t),process.nextTick(i,a)})),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){a._write(t,r,n)}))},a.on("end",o),a.on("error",s),a}},722:(e,t,r)=>{"use strict";const{tokenChars:n}=r(7289);e.exports={parse:function(e){const t=new Set;let r=-1,i=-1,o=0;for(;o<e.length;o++){const s=e.charCodeAt(o);if(-1===i&&1===n[s])-1===r&&(r=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const n=e.slice(r,i);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=i=-1}}else-1===i&&-1!==r&&(i=o)}if(-1===r||-1!==i)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}}},7289:(e,t,r)=>{"use strict";const{isUtf8:n}=r(181),{hasBlob:i}=r(5969);function o(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return i&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)e.exports.isValidUTF8=function(e){return e.length<24?o(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?o(e):t(e)}}catch(e){}},2319:(e,t,r)=>{"use strict";const n=r(4434),i=r(8611),{Duplex:o}=r(2203),{createHash:s}=r(6982),a=r(2089),c=r(5138),l=r(722),u=r(6107),{GUID:h,kWebSocket:d}=r(5969),f=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function g(){this.destroy()}function _(e,t,r,n){r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function m(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,m),e.emit("wsClientError",n,r,t)}else _(r,n,i)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{p(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",g);const i=e.headers["sec-websocket-key"],o=e.headers.upgrade,s=+e.headers["sec-websocket-version"];if("GET"!==e.method){return void m(this,e,t,405,"Invalid HTTP method")}if(void 0===o||"websocket"!==o.toLowerCase()){return void m(this,e,t,400,"Invalid Upgrade header")}if(void 0===i||!f.test(i)){return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header")}if(8!==s&&13!==s){return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header")}if(!this.shouldHandle(e))return void _(t,400);const u=e.headers["sec-websocket-protocol"];let h=new Set;if(void 0!==u)try{h=l.parse(u)}catch(r){return void m(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(d);e[c.extensionName]&&(r.accept(e[c.extensionName]),p[c.extensionName]=r)}catch(r){return void m(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[""+(8===s?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((o,s,a,c)=>{if(!o)return _(t,s||401,a,c);this.completeUpgrade(p,i,h,e,t,r,n)}));if(!this.options.verifyClient(o))return _(t,401)}this.completeUpgrade(p,i,h,e,t,r,n)}completeUpgrade(e,t,r,n,i,o,l){if(!i.readable||!i.writable)return i.destroy();if(i[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return _(i,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+h).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=e}this.emit("headers",u,n),i.write(u.concat("\r\n").join("\r\n")),i.removeListener("error",g),f.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",(()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)}))),l(f,n)}}},6107:(e,t,r)=>{"use strict";const n=r(4434),i=r(5692),o=r(8611),s=r(9278),a=r(4756),{randomBytes:c,createHash:l}=r(6982),{Duplex:u,Readable:h}=r(2203),{URL:d}=r(7016),f=r(5138),p=r(3595),g=r(2407),{isBlob:_}=r(7289),{BINARY_TYPES:m,EMPTY_BUFFER:y,GUID:b,kForOnEventAttribute:w,kListener:A,kStatusCode:v,kWebSocket:E,NOOP:S}=r(5969),{EventTarget:{addEventListener:I,removeEventListener:k}}=r(80),{format:C,parse:R}=r(2089),{toBuffer:T}=r(285),B=Symbol("kAborted"),O=[8,13],P=["CONNECTING","OPEN","CLOSING","CLOSED"],N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class x extends n{constructor(e,t,r){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=x.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),L(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new p({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),i=new g(e,this._extensions,r.generateMask);this._receiver=n,this._sender=i,this._socket=e,n[E]=this,i[E]=this,e[E]=this,n.on("conclude",H),n.on("drain",W),n.on("error",$),n.on("message",K),n.on("ping",q),n.on("pong",G),i.onerror=Y,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",X),e.on("data",J),e.on("end",Z),e.on("error",ee),this._readyState=x.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=x.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=x.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==x.CLOSED)if(this.readyState!==x.CONNECTING)this.readyState!==x.CLOSING?(this._readyState=x.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),z(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";F(this,this._req,e)}}pause(){this.readyState!==x.CONNECTING&&this.readyState!==x.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===x.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)):j(this,e,r)}pong(e,t,r){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===x.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)):j(this,e,r)}resume(){this.readyState!==x.CONNECTING&&this.readyState!==x.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===x.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==x.OPEN)return void j(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(n.compress=!1),this._sender.send(e||y,n,r)}terminate(){if(this.readyState!==x.CLOSED)if(this.readyState!==x.CONNECTING)this._socket&&(this._readyState=x.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";F(this,this._req,e)}}}function L(e,t,r,n){const s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:O[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=s.autoPong,!O.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${O.join(", ")})`);let a;if(t instanceof d)a=t;else try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,h="ws+unix:"===a.protocol;let p;if("ws:"===a.protocol||u||h?h&&!a.pathname?p="The URL's pathname is empty":a.hash&&(p="The URL contains a fragment identifier"):p='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',p){const t=new SyntaxError(p);if(0===e._redirects)throw t;return void M(e,t)}const g=u?443:80,_=c(16).toString("base64"),m=u?i.request:o.request,y=new Set;let w,A;if(s.createConnection=s.createConnection||(u?U:D),s.defaultPort=s.defaultPort||g,s.port=a.port||g,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":_,Connection:"Upgrade",Upgrade:"websocket"},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(w=new f(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=C({[f.extensionName]:w.offer()})),r.length){for(const e of r){if("string"!=typeof e||!N.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),h){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalIpc=h,e._originalSecure=u,e._originalHostOrSocketPath=h?s.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=h?!!e._originalIpc&&s.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete s.headers.authorization,delete s.headers.cookie,t||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),A=e._req=m(s),e._redirects&&e.emit("redirect",e.url,A)}else A=e._req=m(s);s.timeout&&A.on("timeout",(()=>{F(e,A,"Opening handshake has timed out")})),A.on("error",(t=>{null===A||A[B]||(A=e._req=null,M(e,t))})),A.on("response",(i=>{const o=i.headers.location,a=i.statusCode;if(o&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void F(e,A,"Maximum redirects exceeded");let i;A.abort();try{i=new d(o,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${o}`);return void M(e,r)}L(e,i,r,n)}else e.emit("unexpected-response",A,i)||F(e,A,`Unexpected server response: ${i.statusCode}`)})),A.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==x.CONNECTING)return;A=e._req=null;const i=t.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase())return void F(e,r,"Invalid Upgrade header");const o=l("sha1").update(_+b).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void F(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?y.size?y.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void F(e,r,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!w){return void F(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=R(u)}catch(t){return void F(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==f.extensionName){return void F(e,r,"Server indicated an extension that was not requested")}try{w.accept(t[f.extensionName])}catch(t){return void F(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=w}e.setSocket(r,n,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})})),s.finishRequest?s.finishRequest(A,e):A.end()}function M(e,t){e._readyState=x.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function D(e){return e.path=e.socketPath,s.connect(e)}function U(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function F(e,t,r){e._readyState=x.CLOSING;const n=new Error(r);Error.captureStackTrace(n,F),t.setHeader?(t[B]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(M,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function j(e,t,r){if(t){const r=_(t)?t.size:T(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${P[e.readyState]})`);process.nextTick(r,t)}}function H(e,t){const r=this[E];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[E]&&(r._socket.removeListener("data",J),process.nextTick(V,r._socket),1005===e?r.close():r.close(e,t))}function W(){const e=this[E];e.isPaused||e._socket.resume()}function $(e){const t=this[E];void 0!==t._socket[E]&&(t._socket.removeListener("data",J),process.nextTick(V,t._socket),t.close(e[v])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function Q(){this[E].emitClose()}function K(e,t){this[E].emit("message",e,t)}function q(e){const t=this[E];t._autoPong&&t.pong(e,!this._isServer,S),t.emit("ping",e)}function G(e){this[E].emit("pong",e)}function V(e){e.resume()}function Y(e){const t=this[E];t.readyState!==x.CLOSED&&(t.readyState===x.OPEN&&(t._readyState=x.CLOSING,z(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function z(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function X(){const e=this[E];let t;this.removeListener("close",X),this.removeListener("data",J),this.removeListener("end",Z),e._readyState=x.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[E]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",Q),e._receiver.on("finish",Q))}function J(e){this[E]._receiver.write(e)||this.pause()}function Z(){const e=this[E];e._readyState=x.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[E];this.removeListener("error",ee),this.on("error",S),e&&(e._readyState=x.CLOSING,this.destroy())}Object.defineProperty(x,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(x.prototype,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(x,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(x.prototype,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(x,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(x.prototype,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(x,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),Object.defineProperty(x.prototype,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(x.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(x.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[w])return t[A];return null},set(t){for(const t of this.listeners(e))if(t[w]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[w]:!0})}})})),x.prototype.addEventListener=I,x.prototype.removeEventListener=k,e.exports=x},4808:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i,s=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=n)return a(e,o,n,"hour");if(o>=r)return a(e,o,r,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=n)return Math.round(e/n)+"h";if(o>=r)return Math.round(e/r)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6282:(e,t,r)=>{const n=r(3328);e.exports.NumberAllocator=n},3328:(e,t,r)=>{"use strict";const n=r(3089).CD,i=r(8766)("number-allocator:trace"),o=r(8766)("number-allocator:error");function s(e,t){this.low=e,this.high=t}function a(e,t){if(!(this instanceof a))return new a(e,t);this.min=e,this.max=t,this.ss=new n([],((e,t)=>e.compare(t))),i("Create"),this.clear()}s.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},s.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return i("alloc():empty"),null;const e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high,n=t;return n+1<=r?this.ss.updateKeyByIterator(e,new s(t+1,r)):this.ss.eraseElementByPos(0),i("alloc():"+n),n},a.prototype.use=function(e){const t=new s(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){const n=r.pointer.low,o=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),i("use():"+e),!0):!(n>e)&&(n===e?(this.ss.updateKeyByIterator(r,new s(n+1,o)),i("use():"+e),!0):o===e?(this.ss.updateKeyByIterator(r,new s(n,o-1)),i("use():"+e),!0):(this.ss.updateKeyByIterator(r,new s(e+1,o)),this.ss.insert(new s(n,e-1)),i("use():"+e),!0))}return i("use():failed"),!1},a.prototype.free=function(e){if(e<this.min||e>this.max)return void o("free():"+e+" is out of range");const t=new s(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin()))return void this.ss.insert(t);r.pre();const n=r.pointer.high;r.pointer.high+1===e?this.ss.updateKeyByIterator(r,new s(n,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin()))if(e+1===r.pointer.low){const t=r.pointer.high;this.ss.updateKeyByIterator(r,new s(e,t))}else this.ss.insert(t);else{const n=r.pointer.low,i=r.pointer.high;r.pre();const o=r.pointer.low;r.pointer.high+1===e?e+1===n?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new s(o,i))):this.ss.updateKeyByIterator(r,new s(o,e)):e+1===n?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new s(e,i))):this.ss.insert(t)}i("free():"+e)},a.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},e.exports=a},3628:e=>{"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,n)}));default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick((function(){e.apply(null,i)}))}}}:e.exports=process},7097:e=>{e.exports=global.process},9388:(e,t,r)=>{"use strict";e.exports=r(9129)()},9129:e=>{"use strict";function t(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(e){if((e=e||{}).circles)return function(e){const r=[],n=[],i=new Map;if(i.set(Date,(e=>new Date(e))),i.set(Map,((e,t)=>new Map(s(Array.from(e),t)))),i.set(Set,((e,t)=>new Set(s(Array.from(e),t)))),e.constructorHandlers)for(const t of e.constructorHandlers)i.set(t[0],t[1]);let o=null;return e.proto?c:a;function s(e,s){const a=Object.keys(e),c=new Array(a.length);for(let l=0;l<a.length;l++){const u=a[l],h=e[u];if("object"!=typeof h||null===h)c[u]=h;else if(h.constructor!==Object&&(o=i.get(h.constructor)))c[u]=o(h,s);else if(ArrayBuffer.isView(h))c[u]=t(h);else{const e=r.indexOf(h);c[u]=-1!==e?n[e]:s(h)}}return c}function a(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return s(e,a);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,a);const c={};r.push(e),n.push(c);for(const s in e){if(!1===Object.hasOwnProperty.call(e,s))continue;const l=e[s];if("object"!=typeof l||null===l)c[s]=l;else if(l.constructor!==Object&&(o=i.get(l.constructor)))c[s]=o(l,a);else if(ArrayBuffer.isView(l))c[s]=t(l);else{const e=r.indexOf(l);c[s]=-1!==e?n[e]:a(l)}}return r.pop(),n.pop(),c}function c(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return s(e,c);if(e.constructor!==Object&&(o=i.get(e.constructor)))return o(e,c);const a={};r.push(e),n.push(a);for(const s in e){const l=e[s];if("object"!=typeof l||null===l)a[s]=l;else if(l.constructor!==Object&&(o=i.get(l.constructor)))a[s]=o(l,c);else if(ArrayBuffer.isView(l))a[s]=t(l);else{const e=r.indexOf(l);a[s]=-1!==e?n[e]:c(l)}}return r.pop(),n.pop(),a}}(e);const r=new Map;if(r.set(Date,(e=>new Date(e))),r.set(Map,((e,t)=>new Map(i(Array.from(e),t)))),r.set(Set,((e,t)=>new Set(i(Array.from(e),t)))),e.constructorHandlers)for(const t of e.constructorHandlers)r.set(t[0],t[1]);let n=null;return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(n=r.get(o.constructor)))return n(o,e);const s={};for(const i in o){const a=o[i];"object"!=typeof a||null===a?s[i]=a:a.constructor!==Object&&(n=r.get(a.constructor))?s[i]=n(a,e):ArrayBuffer.isView(a)?s[i]=t(a):s[i]=e(a)}return s}:function e(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,e);if(o.constructor!==Object&&(n=r.get(o.constructor)))return n(o,e);const s={};for(const i in o){if(!1===Object.hasOwnProperty.call(o,i))continue;const a=o[i];"object"!=typeof a||null===a?s[i]=a:a.constructor!==Object&&(n=r.get(a.constructor))?s[i]=n(a,e):ArrayBuffer.isView(a)?s[i]=t(a):s[i]=e(a)}return s};function i(e,i){const o=Object.keys(e),s=new Array(o.length);for(let a=0;a<o.length;a++){const c=o[a],l=e[c];"object"!=typeof l||null===l?s[c]=l:l.constructor!==Object&&(n=r.get(l.constructor))?s[c]=n(l,i):ArrayBuffer.isView(l)?s[c]=t(l):s[c]=i(l)}return s}}},9930:(e,t,r)=>{"use strict";const n=r(857),i=r(4629),o=process.env;let s;function a(e){const t=function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in o))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},4904:(e,t,r)=>{"use strict";r.r(t),r.d(t,{clearInterval:()=>u,clearTimeout:()=>h,setInterval:()=>d,setTimeout:()=>f});const n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,o=1073741824,s=new WeakMap;var a;const c=((e,t)=>r=>{const s=t.get(r);let a=void 0===s?r.size:s<o?s+1:0;if(!r.has(a))return e(r,a);if(r.size<i){for(;r.has(a);)a=Math.floor(Math.random()*o);return e(r,a)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(a);)a=Math.floor(Math.random()*n);return e(r,a)})((a=s,(e,t)=>(a.set(e,t),t)),s),l=((e=>{})(c),((e,t)=>{let r=null;return()=>{if(null!==r)return r;const n=new Blob([t],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return r=e(i),setTimeout((()=>URL.revokeObjectURL(i))),r}})((e=>{const t=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),n=new Map,i=new Worker(e);i.addEventListener("message",(({data:e})=>{if(void 0!==(i=e).method&&"call"===i.method){const{params:{timerId:i,timerType:o}}=e;if("interval"===o){const e=t.get(i);if("number"==typeof e){const t=n.get(e);if(void 0===t||t.timerId!==i||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof e)throw new Error("The timer is in an undefined state.");e()}}else if("timeout"===o){const e=r.get(i);if("number"==typeof e){const t=n.get(e);if(void 0===t||t.timerId!==i||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof e)throw new Error("The timer is in an undefined state.");e(),r.delete(i)}}}else{if(!(e=>null===e.error&&"number"==typeof e.id)(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:i}=e,o=n.get(i);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:s,timerType:a}=o;n.delete(i),"interval"===a?t.delete(s):r.delete(s)}}var i}));return{clearInterval:e=>{const r=c(n);n.set(r,{timerId:e,timerType:"interval"}),t.set(e,r),i.postMessage({id:r,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:e=>{const t=c(n);n.set(t,{timerId:e,timerType:"timeout"}),r.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:(e,r=0)=>{const n=c(t);return t.set(n,(()=>{e(),"function"==typeof t.get(n)&&i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n,timerType:"interval"}})})),i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n,timerType:"interval"}}),n},setTimeout:(e,t=0)=>{const n=c(r);return r.set(n,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:n,timerType:"timeout"}}),n}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();')),u=e=>l().clearInterval(e),h=e=>l().clearTimeout(e),d=(...e)=>l().setInterval(...e),f=(...e)=>l().setTimeout(...e)},7562:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.sdk=t.MixinDeviceBase=t.ScryptedDeviceBase=void 0,i(r(4192),t);const o=r(4192);class s extends o.DeviceBase{constructor(e){super(),this.nativeId=e}get storage(){return this._storage||(this._storage=deviceManager.getDeviceStorage(this.nativeId)),this._storage}get log(){return this._log||(this._log=deviceManager.getDeviceLogger(this.nativeId)),this._log}get console(){return this._console||(this._console=deviceManager.getDeviceConsole(this.nativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.nativeId)}_lazyLoadDeviceState(){this._deviceState||(this.nativeId?this._deviceState=deviceManager.getDeviceState(this.nativeId):this._deviceState=deviceManager.getDeviceState())}onDeviceEvent(e,t){return deviceManager.onDeviceEvent(this.nativeId,e,t)}}t.ScryptedDeviceBase=s;class a extends o.DeviceBase{constructor(e){super(),this._listeners=new Set,this.mixinDevice=e.mixinDevice,this.mixinDeviceInterfaces=e.mixinDeviceInterfaces,this.mixinStorageSuffix=e.mixinStorageSuffix,this._deviceState=e.mixinDeviceState,this.nativeId=systemManager.getDeviceById(this.id).nativeId,this.mixinProviderNativeId=e.mixinProviderNativeId,this._deviceState.__rpcproxy_traps_all_properties&&"string"==typeof this._deviceState.id&&(this._deviceState=deviceManager.createDeviceState(this._deviceState.id,this._deviceState.setState))}get storage(){if(!this._storage){const e=this.mixinStorageSuffix,t=this.id+(e?":"+e:"");this._storage=deviceManager.getMixinStorage(t,this.mixinProviderNativeId)}return this._storage}get console(){return this._console||(deviceManager.getMixinConsole?this._console=deviceManager.getMixinConsole(this.id,this.mixinProviderNativeId):this._console=deviceManager.getDeviceConsole(this.mixinProviderNativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.mixinProviderNativeId)}onDeviceEvent(e,t){return deviceManager.onMixinEvent(this.id,this,e,t)}_lazyLoadDeviceState(){}manageListener(e){this._listeners.add(e)}release(){for(const e of this._listeners)e.removeListener()}}t.MixinDeviceBase=a,function(){function e(e){return function(){return this._lazyLoadDeviceState(),this._deviceState?.[e]}}function t(e){return function(t){this._lazyLoadDeviceState(),this._deviceState?this._deviceState[e]=t:console.warn("device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.")}}for(const r of Object.values(o.ScryptedInterfaceProperty))r!==o.ScryptedInterfaceProperty.nativeId&&(Object.defineProperty(s.prototype,r,{set:t(r),get:e(r)}),Object.defineProperty(a.prototype,r,{set:t(r),get:e(r)}))}(),t.sdk={};try{let e;try{e=pluginRuntimeAPI}catch(e){}Object.assign(t.sdk,{log:deviceManager.getDeviceLogger(void 0),deviceManager,endpointManager,mediaManager,systemManager,pluginHostAPI,...e});try{systemManager.setScryptedInterfaceDescriptors?.(o.TYPES_VERSION,o.ScryptedInterfaceDescriptors)?.catch((()=>{}))}catch(e){}}catch(e){console.error("sdk initialization error, import @scrypted/types or use @scrypted/client instead",e)}t.default=t.sdk},6117:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageSettings=void 0;const s=o(r(7562)),{systemManager:a}=s.default;t.StorageSettings=class{constructor(e,t){this.device=e,this.settings=t,this.values={},this.hasValue={};for(const e of Object.keys(t)){const r=t[e],n=()=>this.getItem(e);let i;i="clippath"!==r.type?n:()=>{try{return JSON.parse(n())}catch(e){}},Object.defineProperty(this.values,e,{get:i,set:t=>this.putSetting(e,t),enumerable:!0}),Object.defineProperty(this.hasValue,e,{get:()=>null!=this.device.storage.getItem(e),enumerable:!0})}}get keys(){const e={};for(const t of Object.keys(this.settings))e[t]=t;return e}async getSettings(){const e=await(this.options?.onGet?.()),t=[];for(const[r,n]of Object.entries(this.settings)){let i=Object.assign({},n);e?.[r]&&(i=Object.assign(i,e[r])),i.onGet&&(i=Object.assign(i,await i.onGet())),i.hide||await(this.options?.hide?.[r]?.())||(i.key=r,i.value=this.getItemInternal(r,i,!0),t.push(i),delete i.onPut,delete i.onGet,delete i.mapPut,delete i.mapGet)}return t}async putSetting(e,t){const r=this.settings[e];let n;return r&&(n=this.getItemInternal(e,r)),this.putSettingInternal(r,n,e,t)}putSettingInternal(e,t,r,n){e?.noStore||(e?.mapPut&&(n=e.mapPut(t,n)),null==n?this.device.storage.removeItem(r):"object"==typeof n?this.device.storage.setItem(r,JSON.stringify(n)):this.device.storage.setItem(r,n?.toString())),e?.onPut?.(t,n),e?.hide||this.device.onDeviceEvent(s.ScryptedInterface.Settings,void 0)}getItemInternal(e,t,r){if(!t)return this.device.storage.getItem(e);const n=function(e,t,r,n){if(null==e)return r();const i=t.multiple?"array":t.type;if("boolean"===i)return"true"===e||"false"!==e&&(r()||!1);if("number"===i){const t=parseFloat(e);return isNaN(t)?r()||0:t}if("integer"===i){const t=parseInt(e);return isNaN(t)?r()||0:t}if("array"===i){if(!e)return r()||[];try{return JSON.parse(e)}catch(e){return r()||[]}}if("device"===i)return n?e:a.getDeviceById(e)||a.getDeviceById(r());if(e&&t.json)try{return JSON.parse(e)}catch(e){return r()}return e||r()}(this.device.storage.getItem(e),t,(()=>null!=t.persistedDefaultValue?(this.putSettingInternal(t,void 0,e,t.persistedDefaultValue),t.persistedDefaultValue):t.defaultValue),r);return t.mapGet?t.mapGet(n):n}getItem(e){return this.getItemInternal(e,this.settings[e])}}},4192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.AirPurifierMode=t.AirPurifierStatus=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.3.59";var r,n,i,o,s,a,c,l,u,h,d,f,p,g,_,m,y,b;t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.scryptedRuntimeArguments="scryptedRuntimeArguments",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.audioVolumes="audioVolumes",e.recordingActive="recordingActive",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.converters="converters",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.airPurifierState="airPurifierState",e.filterChangeIndication="filterChangeIndication",e.filterLifeLevel="filterLifeLevel",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo",e.systemDevice="systemDevice"}(r||(t.ScryptedInterfaceProperty=r={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.setAudioVolumes="setAudioVolumes",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getPrivacyMasks="getPrivacyMasks",e.setPrivacyMasks="setPrivacyMasks",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.deleteRecordingStream="deleteRecordingStream",e.setRecordingActive="setRecordingActive",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClipThumbnail="getVideoClipThumbnail",e.getVideoClips="getVideoClips",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.reboot="reboot",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.convertMedia="convertMedia",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.setAirPurifierState="setAirPurifierState",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames",e.connectStream="connectStream",e.getTTYSettings="getTTYSettings"}(n||(t.ScryptedInterfaceMethod=n={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},ScryptedPluginRuntime:{name:"ScryptedPluginRuntime",methods:[],properties:["scryptedRuntimeArguments"]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature"],properties:["temperatureSetting"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},AudioVolumeControl:{name:"AudioVolumeControl",methods:["setAudioVolumes"],properties:["audioVolumes"]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoCameraMask:{name:"VideoCameraMask",methods:["getPrivacyMasks","setPrivacyMasks"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:["recordingActive"]},VideoRecorderManagement:{name:"VideoRecorderManagement",methods:["deleteRecordingStream","setRecordingActive"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Reboot:{name:"Reboot",methods:["reboot"],properties:[]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},MediaConverter:{name:"MediaConverter",methods:["convertMedia"],properties:["converters"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},AirPurifier:{name:"AirPurifier",methods:["setAirPurifierState"],properties:["airPurifierState"]},FilterMaintenance:{name:"FilterMaintenance",methods:[],properties:["filterChangeIndication","filterLifeLevel"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},ObjectDetectionPreview:{name:"ObjectDetectionPreview",methods:[],properties:[]},ObjectDetectionGenerator:{name:"ObjectDetectionGenerator",methods:[],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]},StreamService:{name:"StreamService",methods:["connectStream"],properties:[]},TTY:{name:"TTY",methods:[],properties:[]},TTYSettings:{name:"TTYSettings",methods:["getTTYSettings"],properties:[]},ScryptedSystemDevice:{name:"ScryptedSystemDevice",methods:[],properties:["systemDevice"]},ScryptedDeviceCreator:{name:"ScryptedDeviceCreator",methods:[],properties:[]},ScryptedSettings:{name:"ScryptedSettings",methods:[],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.AirPurifier="AirPurifier",e.Unknown="Unknown"}(i||(t.ScryptedDeviceType=i={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(o||(t.HumidityMode=o={})),function(e){e.Auto="Auto",e.Manual="Manual"}(s||(t.FanMode=s={})),function(e){e.C="C",e.F="F"}(a||(t.TemperatureUnit=a={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(c||(t.ThermostatMode=c={})),function(e){e.Absolute="Absolute",e.Relative="Relative",e.Continuous="Continuous",e.Preset="Preset",e.Home="Home"}(l||(t.PanTiltZoomMovement=l={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(u||(t.LockState=u={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(h||(t.ChargeState=h={})),function(e){e.Inactive="Inactive",e.Idle="Idle",e.Active="Active",e.ActiveNightMode="ActiveNightMode"}(d||(t.AirPurifierStatus=d={})),function(e){e.Manual="Manual",e.Automatic="Automatic"}(f||(t.AirPurifierMode=f={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(p||(t.AirQuality=p={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(g||(t.SecuritySystemMode=g={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(_||(t.SecuritySystemObstruction=_={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(m||(t.MediaPlayerState=m={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.ScryptedPluginRuntime="ScryptedPluginRuntime",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.AudioVolumeControl="AudioVolumeControl",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoCameraMask="VideoCameraMask",e.VideoRecorder="VideoRecorder",e.VideoRecorderManagement="VideoRecorderManagement",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Reboot="Reboot",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.MediaConverter="MediaConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.AirPurifier="AirPurifier",e.FilterMaintenance="FilterMaintenance",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.ObjectDetectionPreview="ObjectDetectionPreview",e.ObjectDetectionGenerator="ObjectDetectionGenerator",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator",e.StreamService="StreamService",e.TTY="TTY",e.TTYSettings="TTYSettings",e.ScryptedSystemDevice="ScryptedSystemDevice",e.ScryptedDeviceCreator="ScryptedDeviceCreator",e.ScryptedSettings="ScryptedSettings"}(y||(t.ScryptedInterface=y={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.ServerId="text/x-server-id",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(b||(t.ScryptedMimeTypes=b={}))},6395:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},5670:(e,t,r)=>{var n=r(6395),i=r(6299),o=r(3319),s=r(1431);for(var a in e.exports={Reader:o,Writer:s},i)i.hasOwnProperty(a)&&(e.exports[a]=i[a]);for(var c in n)n.hasOwnProperty(c)&&(e.exports[c]=n[c])},3319:(e,t,r)=>{var n=r(2613),i=r(4774).Buffer,o=r(6299),s=r(6395).newInvalidAsn1Error;function a(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128&~t)this._len=t;else{if(0===(t&=127))throw s("Indefinite length not supported");if(t>4)throw s("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},a.prototype.readInt=function(){return this._readTag(o.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(o.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(o.Enumeration)},a.prototype.readString=function(e,t){e||(e=o.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return t?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},a.prototype.readOID=function(e){e||(e=o.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],n=0,i=0;i<t.length;i++){var s=255&t[i];n<<=7,n+=127&s,128&s||(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40|0),r.join(".")},a.prototype._readTag=function(e){n.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw s("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],o=0,a=0;a<this.length;a++)o<<=8,o|=255&this._buf[this._offset++];return 128&~i||4===a||(o-=1<<8*a),o|0},e.exports=a},6299:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},1431:(e,t,r)=>{var n=r(2613),i=r(4774).Buffer,o=r(6299),s=r(6395).newInvalidAsn1Error,a={size:1024,growthFactor:8};function c(e){var t,r;t=a,r=e||{},n.ok(t),n.equal(typeof t,"object"),n.ok(r),n.equal(typeof r,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!r[e]){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n)}})),e=r,this._buf=i.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(c.prototype,"buffer",{get:function(){if(this._seq.length)throw s(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),c.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},c.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=o.Integer);for(var r=4;(!(4286578688&e)||-8388608==(4286578688&e))&&r>1;)r--,e<<=8;if(r>4)throw s("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=t,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},c.prototype.writeNull=function(){this.writeByte(o.Null),this.writeByte(0)},c.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=o.Enumeration),this.writeInt(e,t)},c.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=o.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},c.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=o.OctetString);var r=i.byteLength(e);this.writeByte(t),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},c.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!i.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},c.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},c.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=o.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var r=e.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(t>>>7&255|128),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(t>>>14&255|128),e.push(t>>>7&255|128),e.push(127&t)):(e.push(t>>>28&255|128),e.push(t>>>21&255|128),e.push(t>>>14&255|128),e.push(t>>>7&255|128),e.push(127&t))}(n,parseInt(e,10))}));var i=this;this._ensure(2+n.length),this.writeByte(t),this.writeLength(n.length),n.forEach((function(e){i.writeByte(e)}))},c.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw s("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},c.prototype.startSequence=function(e){"number"!=typeof e&&(e=o.Sequence|o.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},c.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,r=this._offset-t;if(r<=127)this._shift(t,r,-2),this._buf[e]=r;else if(r<=255)this._shift(t,r,-1),this._buf[e]=129,this._buf[e+1]=r;else if(r<=65535)this._buf[e]=130,this._buf[e+1]=r>>8,this._buf[e+2]=r;else{if(!(r<=16777215))throw s("Sequence too long");this._shift(t,r,1),this._buf[e]=131,this._buf[e+1]=r>>16,this._buf[e+2]=r>>8,this._buf[e+3]=r}},c.prototype._shift=function(e,t,r){n.ok(void 0!==e),n.ok(void 0!==t),n.ok(r),this._buf.copy(this._buf,e+r,e,e+t),this._offset+=r},c.prototype._ensure=function(e){if(n.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var r=i.alloc(t);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=t}},e.exports=c},3100:(e,t,r)=>{var n=r(5670);e.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},4015:(e,t,r)=>{"use strict";var n=r(8947).lowlevel.crypto_hash,i=0,o=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function s(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}function a(e,t){var r,n=0;for(r=0;r<4;r++,i++)i>=t&&(i=0),n=n<<8|e[i];return n}o.prototype.encipher=function(e,t){void 0===t&&(t=new Uint8Array(e.buffer),0!==e.byteOffset&&(t=t.subarray(e.byteOffset))),e[0]^=this.P[0];for(var r=1;r<16;r+=2)e[1]^=s(this.S,t,0)^this.P[r],e[0]^=s(this.S,t,4)^this.P[r+1];var n=e[0];e[0]=e[1]^this.P[17],e[1]=n},o.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);0!==e.byteOffset&&(t=t.subarray(e.byteOffset)),e[0]^=this.P[17];for(var r=16;r>0;r-=2)e[1]^=s(this.S,t,0)^this.P[r],e[0]^=s(this.S,t,4)^this.P[r-1];var n=e[0];e[0]=e[1]^this.P[0],e[1]=n},o.prototype.expand0state=function(e,t){var r,n,o=new Uint32Array(2),s=new Uint8Array(o.buffer);for(r=0,i=0;r<18;r++)this.P[r]^=a(e,t);for(i=0,r=0;r<18;r+=2)this.encipher(o,s),this.P[r]=o[0],this.P[r+1]=o[1];for(r=0;r<4;r++)for(n=0;n<256;n+=2)this.encipher(o,s),this.S[r][n]=o[0],this.S[r][n+1]=o[1]},o.prototype.expandstate=function(e,t,r,n){var o,s,c=new Uint32Array(2);for(o=0,i=0;o<18;o++)this.P[o]^=a(r,n);for(o=0,i=0;o<18;o+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.P[o]=c[0],this.P[o+1]=c[1];for(o=0;o<4;o++)for(s=0;s<256;s+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.S[o][s]=c[0],this.S[o][s+1]=c[1];i=0},o.prototype.enc=function(e,t){for(var r=0;r<t;r++)this.encipher(e.subarray(2*r))},o.prototype.dec=function(e,t){for(var r=0;r<t;r++)this.decipher(e.subarray(2*r))};function c(e,t,r){var n,i=new o,s=new Uint32Array(8),c=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(i.expandstate(t,64,e,64),n=0;n<64;n++)i.expand0state(t,64),i.expand0state(e,64);for(n=0;n<8;n++)s[n]=a(c,c.byteLength);for(n=0;n<64;n++)i.enc(s,s.byteLength/8);for(n=0;n<8;n++)r[4*n+3]=s[n]>>>24,r[4*n+2]=s[n]>>>16,r[4*n+1]=s[n]>>>8,r[4*n+0]=s[n]}e.exports={BLOCKS:8,HASHSIZE:32,hash:c,pbkdf:function(e,t,r,i,o,s,a){var l,u,h,d,f,p,g=new Uint8Array(64),_=new Uint8Array(64),m=new Uint8Array(32),y=new Uint8Array(32),b=new Uint8Array(i+4),w=s;if(a<1)return-1;if(0===t||0===i||0===s||s>m.byteLength*m.byteLength||i>1<<20)return-1;for(d=Math.floor((s+m.byteLength-1)/m.byteLength),h=Math.floor((s+d-1)/d),l=0;l<i;l++)b[l]=r[l];for(n(g,e,t),p=1;s>0;p++){for(b[i+0]=p>>>24,b[i+1]=p>>>16,b[i+2]=p>>>8,b[i+3]=p,n(_,b,i+4),c(g,_,y),l=m.byteLength;l--;)m[l]=y[l];for(l=1;l<a;l++)for(n(_,y,y.byteLength),c(g,_,y),u=0;u<m.byteLength;u++)m[u]^=y[u];for(h=Math.min(h,s),l=0;l<h&&!((f=l*d+(p-1))>=w);l++)o[f]=m[l];s-=l}return 0}}},2746:e=>{var t=Object.prototype.toString,r="undefined"!=typeof Buffer&&"function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;e.exports=function(e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return o=e,"ArrayBuffer"===t.call(o).slice(8,-1)?function(e,t,n){t>>>=0;var i=e.byteLength-t;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===n)n=i;else if((n>>>=0)>i)throw new RangeError("'length' is out of bounds");return r?Buffer.from(e.slice(t,t+n)):new Buffer(new Uint8Array(e.slice(t,t+n)))}(e,n,i):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return r?Buffer.from(e,t):new Buffer(e,t)}(e,n):r?Buffer.from(e):new Buffer(e);var o}},7520:(e,t,r)=>{var n=r(4198).Writable,i=r(2017),o=r(2746);if("undefined"==typeof Uint8Array)var s=r(9656).SE;else s=Uint8Array;function a(e,t){if(!(this instanceof a))return new a(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,n.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}e.exports=a,i(a,n),a.prototype._write=function(e,t,r){this.body.push(e),r()},a.prototype.inferEncoding=function(e){var t=void 0===e?this.body[0]:e;return Buffer.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},a.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"string"==typeof n||Buffer.isBuffer(n)?t.push(n):c(n)?t.push(o(n)):t.push(o(String(n)))}t=Buffer.isBuffer(e[0])?(t=Buffer.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];Buffer.isBuffer(n)?t.push(n):c(n)?t.push(o(n)):t.push(o(String(n)))}return Buffer.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=o(e[r])),t+=e[r].length;for(var n=new s(t),i=(r=0,0);r<e.length;r++)for(var a=e[r],c=0;c<a.length;c++)n[i++]=a[c];return n}(this.body):this.body):[]};Array.isArray;function c(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}},6295:(e,t,r)=>{"use strict";const n=r(9430);e.exports=n.getCPUInfo},4993:(e,t,r)=>{"use strict";const n=r(5317),i=r(2014),o=r(3436);function s(e,t,r){const s=i(e,t,r),a=n.spawn(s.command,s.args,s.options);return o.hookChildProcess(a,s),a}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,r){const s=i(e,t,r),a=n.spawnSync(s.command,s.args,s.options);return a.error=a.error||o.verifyENOENTSync(a.status,s),a},e.exports._parse=i,e.exports._enoent=o},3436:e=>{"use strict";const t="win32"===process.platform;function r(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function n(e,n){return t&&1===e&&!n.file?r(n.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;const i=e.emit;e.emit=function(t,o){if("exit"===t){const t=n(o,r);if(t)return i.call(e,"error",t)}return i.apply(e,arguments)}},verifyENOENT:n,verifyENOENTSync:function(e,n){return t&&1===e&&!n.file?r(n.original,"spawnSync"):null},notFoundError:r}},2014:(e,t,r)=>{"use strict";const n=r(6928),i=r(9045),o=r(4483),s=r(9182),a="win32"===process.platform,c=/\.(?:com|exe)$/i,l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function u(e){if(!a)return e;const t=function(e){e.file=i(e);const t=e.file&&s(e.file);return t?(e.args.unshift(e.file),e.command=t,i(e)):e.file}(e),r=!c.test(t);if(e.options.forceShell||r){const r=l.test(t);e.command=n.normalize(e.command),e.command=o.command(e.command),e.args=e.args.map((e=>o.argument(e,r)));const i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const n={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?n:u(n)}},4483:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e=e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},9182:(e,t,r)=>{"use strict";const n=r(9896),i=r(1395);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=n.openSync(e,"r"),n.readSync(r,t,0,150,0),n.closeSync(r)}catch(e){}return i(t.toString())}},9045:(e,t,r)=>{"use strict";const n=r(6928),i=r(6911),o=r(9376);function s(e,t){const r=e.options.env||process.env,s=process.cwd(),a=null!=e.options.cwd,c=a&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let l;try{l=i.sync(e.command,{path:r[o({env:r})],pathExt:t?n.delimiter:void 0})}catch(e){}finally{c&&process.chdir(s)}return l&&(l=n.resolve(a?e.options.cwd:"",l)),l}e.exports=function(e){return s(e)||s(e,!0)}},6310:e=>{"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof r&&(n=r,r=void 0),null!=r&&(n.code=r);try{return t(e,n)}catch(r){n.message=e.message,n.stack=e.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),t(new i,n)}}},2779:(e,t,r)=>{"use strict";const n=r(6928),i=r(5317),o=r(4993),s=r(2993),a=r(4458),c=r(6034),l=r(3697),u=r(2854),{spawnedKill:h,spawnedCancel:d,setupTimeout:f,validateTimeout:p,setExitHandler:g}=r(4983),{handleInput:_,getSpawnedResult:m,makeAllStream:y,validateInputSync:b}=r(2463),{mergePromise:w,getSpawnedPromise:A}=r(8698),{joinCommand:v,parseCommand:E,getEscapedCommand:S}=r(1882),I=(e,t,r={})=>{const i=o._parse(e,t,r);return e=i.command,t=i.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=i.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:i})=>{const o=t?{...process.env,...e}:e;return r?a.env({env:o,cwd:n,execPath:i}):o})(r),r.stdio=u(r),"win32"===process.platform&&"cmd"===n.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:i}},k=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?s(t):t:void 0===r?void 0:"",C=(e,t,r)=>{const n=I(e,t,r),o=v(e,t),s=S(e,t);let a;p(n.options);try{a=i.spawn(n.file,n.args,n.options)}catch(e){const t=new i.ChildProcess,r=Promise.reject(l({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return w(t,r)}const u=A(a),b=f(a,n.options,u),E=g(a,n.options,b),C={isCanceled:!1};a.kill=h.bind(null,a.kill.bind(a)),a.cancel=d.bind(null,a,C);const R=c((async()=>{const[{error:e,exitCode:t,signal:r,timedOut:i},c,u,h]=await m(a,n.options,E),d=k(n.options,c),f=k(n.options,u),p=k(n.options,h);if(e||0!==t||null!==r){const c=l({error:e,exitCode:t,signal:r,stdout:d,stderr:f,all:p,command:o,escapedCommand:s,parsed:n,timedOut:i,isCanceled:C.isCanceled,killed:a.killed});if(!n.options.reject)return c;throw c}return{command:o,escapedCommand:s,exitCode:0,stdout:d,stderr:f,all:p,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return _(a,n.options.input),a.all=y(a,n.options),w(a,R)};e.exports=C,e.exports.sync=(e,t,r)=>{const n=I(e,t,r),o=v(e,t),s=S(e,t);let a;b(n.options);try{a=i.spawnSync(n.file,n.args,n.options)}catch(e){throw l({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}const c=k(n.options,a.stdout,a.error),u=k(n.options,a.stderr,a.error);if(a.error||0!==a.status||null!==a.signal){const e=l({stdout:c,stderr:u,error:a.error,signal:a.signal,exitCode:a.status,command:o,escapedCommand:s,parsed:n,timedOut:a.error&&"ETIMEDOUT"===a.error.code,isCanceled:!1,killed:null!==a.signal});if(!n.options.reject)return e;throw e}return{command:o,escapedCommand:s,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},e.exports.command=(e,t)=>{const[r,...n]=E(e);return C(r,n,t)},e.exports.commandSync=(e,t)=>{const[r,...n]=E(e);return C.sync(r,n,t)},e.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);const n=u.node(r),i=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:o=process.execPath,nodeOptions:s=i}=r;return C(o,[...s,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}},1882:e=>{"use strict";const t=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],r=/^[\w.-]+$/,n=/"/g,i=/ +/g;e.exports={joinCommand:(e,r)=>t(e,r).join(" "),getEscapedCommand:(e,i)=>t(e,i).map((e=>(e=>"string"!=typeof e||r.test(e)?e:`"${e.replace(n,'\\"')}"`)(e))).join(" "),parseCommand:e=>{const t=[];for(const r of e.trim().split(i)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${r}`:t.push(r)}return t}}},3697:(e,t,r)=>{"use strict";const{signalsByName:n}=r(2751);e.exports=({stdout:e,stderr:t,all:r,error:i,signal:o,exitCode:s,command:a,escapedCommand:c,timedOut:l,isCanceled:u,killed:h,parsed:{options:{timeout:d}}})=>{s=null===s?void 0:s;const f=void 0===(o=null===o?void 0:o)?void 0:n[o].description,p=(({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":void 0!==r?`failed with ${r}`:void 0!==n?`was killed with ${n} (${i})`:void 0!==o?`failed with exit code ${o}`:"failed")({timedOut:l,timeout:d,errorCode:i&&i.code,signal:o,signalDescription:f,exitCode:s,isCanceled:u}),g=`Command ${p}: ${a}`,_="[object Error]"===Object.prototype.toString.call(i),m=_?`${g}\n${i.message}`:g,y=[m,t,e].filter(Boolean).join("\n");return _?(i.originalMessage=i.message,i.message=y):i=new Error(y),i.shortMessage=m,i.command=a,i.escapedCommand=c,i.exitCode=s,i.signal=o,i.signalDescription=f,i.stdout=e,i.stderr=t,void 0!==r&&(i.all=r),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(l),i.isCanceled=u,i.killed=h&&!l,i}},4983:(e,t,r)=>{"use strict";const n=r(857),i=r(6270),o=(e,t,r,n)=>{if(!s(t,r,n))return;const i=c(r),o=setTimeout((()=>{e("SIGKILL")}),i);o.unref&&o.unref()},s=(e,{forceKillAfterTimeout:t},r)=>a(e)&&!1!==t&&r,a=e=>e===n.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),c=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};e.exports={spawnedKill:(e,t="SIGTERM",r={})=>{const n=e(t);return o(e,t,r,n),n},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(0===t||void 0===t)return n;let i;const o=new Promise(((n,o)=>{i=setTimeout((()=>{((e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,r,o)}),t)})),s=n.finally((()=>{clearTimeout(i)}));return Promise.race([o,s])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;const o=i((()=>{e.kill()}));return n.finally((()=>{o()}))}}},8698:e=>{"use strict";const t=(async()=>{})().constructor.prototype,r=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(t,e)]));e.exports={mergePromise:(e,t)=>{for(const[n,i]of r){const r="function"==typeof t?(...e)=>Reflect.apply(i.value,t(),e):i.value.bind(t);Reflect.defineProperty(e,n,{...i,value:r})}return e},getSpawnedPromise:e=>new Promise(((t,r)=>{e.on("exit",((e,r)=>{t({exitCode:e,signal:r})})),e.on("error",(e=>{r(e)})),e.stdin&&e.stdin.on("error",(e=>{r(e)}))}))}},2854:e=>{"use strict";const t=["stdin","stdout","stderr"],r=e=>{if(!e)return;const{stdio:r}=e;if(void 0===r)return t.map((t=>e[t]));if((e=>t.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${t.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof r)return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);const n=Math.max(r.length,t.length);return Array.from({length:n},((e,t)=>r[t]))};e.exports=r,e.exports.node=e=>{const t=r(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}},2463:(e,t,r)=>{"use strict";const n=r(1232),i=r(4594),o=r(7882),s=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},a=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(e&&r)return t?i(e,{encoding:t,maxBuffer:n}):i.buffer(e,{maxBuffer:n})};e.exports={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(n(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const r=o();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:n,buffer:i,maxBuffer:o},c)=>{const l=a(e,{encoding:n,buffer:i,maxBuffer:o}),u=a(t,{encoding:n,buffer:i,maxBuffer:o}),h=a(r,{encoding:n,buffer:i,maxBuffer:2*o});try{return await Promise.all([c,l,u,h])}catch(n){return Promise.all([{error:n,signal:n.signal,timedOut:n.timedOut},s(e,l),s(t,u),s(r,h)])}},validateInputSync:({input:e})=>{if(n(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}}},6270:(e,t,r)=>{var n=global.process;const i=function(e){return e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on};if(i(n)){var o,s=r(2613),a=r(651),c=/^win/i.test(n.platform),l=r(4434);"function"!=typeof l&&(l=l.EventEmitter),n.__signal_exit_emitter__?o=n.__signal_exit_emitter__:((o=n.__signal_exit_emitter__=new l).count=0,o.emitted={}),o.infinite||(o.setMaxListeners(1/0),o.infinite=!0),e.exports=function(e,t){if(!i(global.process))return function(){};s.equal(typeof e,"function","a callback must be provided for exit handler"),!1===f&&p();var r="exit";t&&t.alwaysLast&&(r="afterexit");return o.on(r,e),function(){o.removeListener(r,e),0===o.listeners("exit").length&&0===o.listeners("afterexit").length&&u()}};var u=function(){f&&i(global.process)&&(f=!1,a.forEach((function(e){try{n.removeListener(e,d[e])}catch(e){}})),n.emit=m,n.reallyExit=g,o.count-=1)};e.exports.unload=u;var h=function(e,t,r){o.emitted[e]||(o.emitted[e]=!0,o.emit(e,t,r))},d={};a.forEach((function(e){d[e]=function(){i(global.process)&&(n.listeners(e).length===o.count&&(u(),h("exit",null,e),h("afterexit",null,e),c&&"SIGHUP"===e&&(e="SIGINT"),n.kill(n.pid,e)))}})),e.exports.signals=function(){return a};var f=!1,p=function(){!f&&i(global.process)&&(f=!0,o.count+=1,a=a.filter((function(e){try{return n.on(e,d[e]),!0}catch(e){return!1}})),n.emit=y,n.reallyExit=_)};e.exports.load=p;var g=n.reallyExit,_=function(e){i(global.process)&&(n.exitCode=e||0,h("exit",n.exitCode,null),h("afterexit",n.exitCode,null),g.call(n,n.exitCode))},m=n.emit,y=function(e,t){if("exit"===e&&i(global.process)){void 0!==t&&(n.exitCode=t);var r=m.apply(this,arguments);return h("exit",n.exitCode,null),h("afterexit",n.exitCode,null),r}return m.apply(this,arguments)}}else e.exports=function(){return function(){}}},651:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},5635:(e,t,r)=>{"use strict";const{PassThrough:n}=r(2203);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const i="buffer"===r;let o=!1;t?o=!(r||i):r=r||"utf8",i&&(r=null);const s=new n({objectMode:o});r&&s.setEncoding(r);let a=0;const c=[];return s.on("data",(e=>{c.push(e),o?a=c.length:a+=e.length})),s.getBufferedValue=()=>t?c:i?Buffer.concat(c,a):c.join(""),s.getBufferedLength=()=>a,s}},4594:(e,t,r)=>{"use strict";const{constants:n}=r(181),i=r(2203),{promisify:o}=r(9023),s=r(5635),a=o(i.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function l(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,i=s(t);return await new Promise(((t,o)=>{const s=e=>{e&&i.getBufferedLength()<=n.MAX_LENGTH&&(e.bufferedData=i.getBufferedValue()),o(e)};(async()=>{try{await a(e,i),t()}catch(e){s(e)}})(),i.on("data",(()=>{i.getBufferedLength()>r&&s(new c)}))})),i.getBufferedValue()}e.exports=l,e.exports.buffer=(e,t)=>l(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>l(e,{...t,array:!0}),e.exports.MaxBufferError=c},4417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNALS=void 0;t.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]},2751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signalsByNumber=t.signalsByName=void 0;var n=r(857),i=r(5089),o=r(9075);const s=function(e,{name:t,number:r,description:n,supported:i,action:o,forced:s,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:i,action:o,forced:s,standard:a}}},a=(0,i.getSignals)().reduce(s,{});t.signalsByName=a;const c=function(e,t){const r=l(e,t);if(void 0===r)return{};const{name:n,description:i,supported:o,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:i,supported:o,action:s,forced:a,standard:c}}},l=function(e,t){const r=t.find((({name:t})=>n.constants.signals[t]===e));return void 0!==r?r:t.find((t=>t.number===e))},u=function(){const e=(0,i.getSignals)(),t=o.SIGRTMAX+1,r=Array.from({length:t},((t,r)=>c(r,e)));return Object.assign({},...r)}();t.signalsByNumber=u},9075:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGRTMAX=t.getRealtimeSignals=void 0;t.getRealtimeSignals=function(){const e=i-n+1;return Array.from({length:e},r)};const r=function(e,t){return{name:`SIGRT${t+1}`,number:n+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},n=34,i=64;t.SIGRTMAX=i},5089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSignals=void 0;var n=r(857),i=r(4417),o=r(9075);t.getSignals=function(){const e=(0,o.getRealtimeSignals)();return[...i.SIGNALS,...e].map(s)};const s=function({name:e,number:t,description:r,action:i,forced:o=!1,standard:s}){const{signals:{[e]:a}}=n.constants,c=void 0!==a;return{name:e,number:c?a:t,description:r,supported:c,action:i,forced:o,standard:s}}},2017:(e,t,r)=>{try{var n=r(9023);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(6698)}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},1232:e=>{"use strict";const t=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;t.writable=e=>t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,t.readable=e=>t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&"function"==typeof e._transform,e.exports=t},1147:(e,t,r)=>{var n;r(9896);function i(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){i(e,t||{},(function(e,t){e?n(e):r(t)}))}))}n(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}n="win32"===process.platform||global.TESTING_WINDOWS?r(438):r(96),e.exports=i,i.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},96:(e,t,r)=>{e.exports=i,i.sync=function(e,t){return o(n.statSync(e),t)};var n=r(9896);function i(e,t,r){n.stat(e,(function(e,n){r(e,!e&&o(n,t))}))}function o(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),u=a|c;return r&l||r&c&&i===s||r&a&&n===o||r&u&&0===o}(e,t)}},438:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return i(n.statSync(e),e,t)};var n=r(9896);function i(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,r)}function o(e,t,r){n.stat(e,(function(n,o){r(n,!n&&i(o,e,t))}))}},2543:function(e,t,r){var n;e=r.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,u=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,_=4294967295,m=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",u],["rearg",d]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",A="[object Date]",v="[object Error]",E="[object Function]",S="[object GeneratorFunction]",I="[object Map]",k="[object Number]",C="[object Object]",R="[object Promise]",T="[object RegExp]",B="[object Set]",O="[object String]",P="[object Symbol]",N="[object WeakMap]",x="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",U="[object Int8Array]",F="[object Int16Array]",j="[object Int32Array]",H="[object Uint8Array]",W="[object Uint8ClampedArray]",$="[object Uint16Array]",Q="[object Uint32Array]",K=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,z=RegExp(V.source),X=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,_e=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,Ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",Ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Re="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Be="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="[']",Pe="["+Se+"]",Ne="["+Be+"]",xe="["+Ie+"]",Le="\\d+",Me="["+ke+"]",De="["+Ce+"]",Ue="[^"+Se+Be+Le+ke+Ce+Re+"]",Fe="\\ud83c[\\udffb-\\udfff]",je="[^"+Se+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+Re+"]",Qe="\\u200d",Ke="(?:"+De+"|"+Ue+")",qe="(?:"+$e+"|"+Ue+")",Ge="(?:['](?:d|ll|m|re|s|t|ve))?",Ve="(?:['](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+xe+"|"+Fe+")"+"?",ze="["+Te+"]?",Xe=ze+Ye+("(?:"+Qe+"(?:"+[je,He,We].join("|")+")"+ze+Ye+")*"),Je="(?:"+[Me,He,We].join("|")+")"+Xe,Ze="(?:"+[je+xe+"?",xe,He,We,Pe].join("|")+")",et=RegExp(Oe,"g"),tt=RegExp(xe,"g"),rt=RegExp(Fe+"(?="+Fe+")|"+Ze+Xe,"g"),nt=RegExp([$e+"?"+De+"+"+Ge+"(?="+[Ne,$e,"$"].join("|")+")",qe+"+"+Ve+"(?="+[Ne,$e+Ke,"$"].join("|")+")",$e+"?"+Ke+"+"+Ge,$e+"+"+Ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Je].join("|"),"g"),it=RegExp("["+Qe+Se+Ie+Te+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ct={};ct[M]=ct[D]=ct[U]=ct[F]=ct[j]=ct[H]=ct[W]=ct[$]=ct[Q]=!0,ct[y]=ct[b]=ct[x]=ct[w]=ct[L]=ct[A]=ct[v]=ct[E]=ct[I]=ct[k]=ct[C]=ct[T]=ct[B]=ct[O]=ct[N]=!1;var lt={};lt[y]=lt[b]=lt[x]=lt[L]=lt[w]=lt[A]=lt[M]=lt[D]=lt[U]=lt[F]=lt[j]=lt[I]=lt[k]=lt[C]=lt[T]=lt[B]=lt[O]=lt[P]=lt[H]=lt[W]=lt[$]=lt[Q]=!0,lt[v]=lt[E]=lt[N]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof global&&global&&global.Object===Object&&global,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),_t=t&&!t.nodeType&&t,mt=_t&&e&&!e.nodeType&&e,yt=mt&&mt.exports===_t,bt=yt&&ft.process,wt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(e){}}(),At=wt&&wt.isArrayBuffer,vt=wt&&wt.isDate,Et=wt&&wt.isMap,St=wt&&wt.isRegExp,It=wt&&wt.isSet,kt=wt&&wt.isTypedArray;function Ct(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Rt(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Bt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Nt(e,t){return!!(null==e?0:e.length)&&$t(e,t,0)>-1}function xt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Lt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Mt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Dt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function Ut(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Ft(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var jt=Gt("length");function Ht(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Wt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function $t(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Wt(e,Kt,r)}function Qt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Kt(e){return e!=e}function qt(e,t){var r=null==e?0:e.length;return r?zt(e,t)/r:g}function Gt(e){return function(t){return null==t?i:t[e]}}function Vt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function zt(e,t){for(var r,n=-1,o=e.length;++n<o;){var s=t(e[n]);s!==i&&(r=r===i?s:r+s)}return r}function Xt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Jt(e){return e?e.slice(0,gr(e)+1).replace(se,""):e}function Zt(e){return function(t){return e(t)}}function er(e,t){return Lt(t,(function(t){return e[t]}))}function tr(e,t){return e.has(t)}function rr(e,t){for(var r=-1,n=e.length;++r<n&&$t(t,e[r],0)>-1;);return r}function nr(e,t){for(var r=e.length;r--&&$t(t,e[r],0)>-1;);return r}var ir=Vt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),or=Vt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sr(e){return"\\"+ut[e]}function ar(e){return it.test(e)}function cr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function lr(e,t){return function(r){return e(t(r))}}function ur(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==a||(e[r]=a,o[i++]=r)}return o}function hr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function dr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function fr(e){return ar(e)?function(e){var t=rt.lastIndex=0;for(;rt.test(e);)++t;return t}(e):jt(e)}function pr(e){return ar(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.split("")}(e)}function gr(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var _r=Vt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mr=function e(t){var r,n=(t=null==t?gt:mr.defaults(gt.Object(),t,mr.pick(gt,st))).Array,ae=t.Date,Se=t.Error,Ie=t.Function,ke=t.Math,Ce=t.Object,Re=t.RegExp,Te=t.String,Be=t.TypeError,Oe=n.prototype,Pe=Ie.prototype,Ne=Ce.prototype,xe=t["__core-js_shared__"],Le=Pe.toString,Me=Ne.hasOwnProperty,De=0,Ue=(r=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Fe=Ne.toString,je=Le.call(Ce),He=gt._,We=Re("^"+Le.call(Me).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=yt?t.Buffer:i,Qe=t.Symbol,Ke=t.Uint8Array,qe=$e?$e.allocUnsafe:i,Ge=lr(Ce.getPrototypeOf,Ce),Ve=Ce.create,Ye=Ne.propertyIsEnumerable,ze=Oe.splice,Xe=Qe?Qe.isConcatSpreadable:i,Je=Qe?Qe.iterator:i,Ze=Qe?Qe.toStringTag:i,rt=function(){try{var e=fo(Ce,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,ut=ae&&ae.now!==gt.Date.now&&ae.now,ft=t.setTimeout!==gt.setTimeout&&t.setTimeout,pt=ke.ceil,_t=ke.floor,mt=Ce.getOwnPropertySymbols,bt=$e?$e.isBuffer:i,wt=t.isFinite,jt=Oe.join,Vt=lr(Ce.keys,Ce),yr=ke.max,br=ke.min,wr=ae.now,Ar=t.parseInt,vr=ke.random,Er=Oe.reverse,Sr=fo(t,"DataView"),Ir=fo(t,"Map"),kr=fo(t,"Promise"),Cr=fo(t,"Set"),Rr=fo(t,"WeakMap"),Tr=fo(Ce,"create"),Br=Rr&&new Rr,Or={},Pr=Fo(Sr),Nr=Fo(Ir),xr=Fo(kr),Lr=Fo(Cr),Mr=Fo(Rr),Dr=Qe?Qe.prototype:i,Ur=Dr?Dr.valueOf:i,Fr=Dr?Dr.toString:i;function jr(e){if(ra(e)&&!Ks(e)&&!(e instanceof Qr)){if(e instanceof $r)return e;if(Me.call(e,"__wrapped__"))return jo(e)}return new $r(e)}var Hr=function(){function e(){}return function(t){if(!ta(t))return{};if(Ve)return Ve(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function Wr(){}function $r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Qr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_,this.__views__=[]}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Gr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new qr(e);this.size=t.size}function zr(e,t){var r=Ks(e),n=!r&&Qs(e),i=!r&&!n&&Ys(e),o=!r&&!n&&!i&&ua(e),s=r||n||i||o,a=s?Xt(e.length,Te):[],c=a.length;for(var l in e)!t&&!Me.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wo(l,c))||a.push(l);return a}function Xr(e){var t=e.length;return t?e[Yn(0,t-1)]:i}function Jr(e,t){return Mo(Bi(e),cn(t,0,e.length))}function Zr(e){return Mo(Bi(e))}function en(e,t,r){(r!==i&&!Hs(e[t],r)||r===i&&!(t in e))&&sn(e,t,r)}function tn(e,t,r){var n=e[t];Me.call(e,t)&&Hs(n,r)&&(r!==i||t in e)||sn(e,t,r)}function rn(e,t){for(var r=e.length;r--;)if(Hs(e[r][0],t))return r;return-1}function nn(e,t,r,n){return fn(e,(function(e,i,o){t(n,e,r(e),o)})),n}function on(e,t){return e&&Oi(t,Pa(t),e)}function sn(e,t,r){"__proto__"==t&&rt?rt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function an(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:Ca(e,t[r]);return s}function cn(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function ln(e,t,r,n,o,s){var a,c=1&t,l=2&t,u=4&t;if(r&&(a=o?r(e,n,o,s):r(e)),a!==i)return a;if(!ta(e))return e;var h=Ks(e);if(h){if(a=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Me.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!c)return Bi(e,a)}else{var d=_o(e),f=d==E||d==S;if(Ys(e))return Si(e,c);if(d==C||d==y||f&&!o){if(a=l||f?{}:yo(e),!c)return l?function(e,t){return Oi(e,go(e),t)}(e,function(e,t){return e&&Oi(t,Na(t),e)}(a,e)):function(e,t){return Oi(e,po(e),t)}(e,on(a,e))}else{if(!lt[d])return o?e:{};a=function(e,t,r){var n=e.constructor;switch(t){case x:return Ii(e);case w:case A:return new n(+e);case L:return function(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case M:case D:case U:case F:case j:case H:case W:case $:case Q:return ki(e,r);case I:return new n;case k:case O:return new n(e);case T:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case B:return new n;case P:return i=e,Ur?Ce(Ur.call(i)):{}}var i}(e,d,c)}}s||(s=new Yr);var p=s.get(e);if(p)return p;s.set(e,a),aa(e)?e.forEach((function(n){a.add(ln(n,t,r,n,e,s))})):na(e)&&e.forEach((function(n,i){a.set(i,ln(n,t,r,i,e,s))}));var g=h?i:(u?l?oo:io:l?Na:Pa)(e);return Tt(g||e,(function(n,i){g&&(n=e[i=n]),tn(a,i,ln(n,t,r,i,e,s))})),a}function un(e,t,r){var n=r.length;if(null==e)return!n;for(e=Ce(e);n--;){var o=r[n],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function hn(e,t,r){if("function"!=typeof e)throw new Be(o);return Po((function(){e.apply(i,r)}),t)}function dn(e,t,r,n){var i=-1,o=Nt,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;r&&(t=Lt(t,Zt(r))),n?(o=xt,s=!1):t.length>=200&&(o=tr,s=!1,t=new Vr(t));e:for(;++i<a;){var u=e[i],h=null==r?u:r(u);if(u=n||0!==u?u:0,s&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else o(t,h,n)||c.push(u)}return c}jr.templateSettings={escape:J,evaluate:Z,interpolate:ee,variable:"",imports:{_:jr}},jr.prototype=Wr.prototype,jr.prototype.constructor=jr,$r.prototype=Hr(Wr.prototype),$r.prototype.constructor=$r,Qr.prototype=Hr(Wr.prototype),Qr.prototype.constructor=Qr,Kr.prototype.clear=function(){this.__data__=Tr?Tr(null):{},this.size=0},Kr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kr.prototype.get=function(e){var t=this.__data__;if(Tr){var r=t[e];return r===s?i:r}return Me.call(t,e)?t[e]:i},Kr.prototype.has=function(e){var t=this.__data__;return Tr?t[e]!==i:Me.call(t,e)},Kr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tr&&t===i?s:t,this},qr.prototype.clear=function(){this.__data__=[],this.size=0},qr.prototype.delete=function(e){var t=this.__data__,r=rn(t,e);return!(r<0)&&(r==t.length-1?t.pop():ze.call(t,r,1),--this.size,!0)},qr.prototype.get=function(e){var t=this.__data__,r=rn(t,e);return r<0?i:t[r][1]},qr.prototype.has=function(e){return rn(this.__data__,e)>-1},qr.prototype.set=function(e,t){var r=this.__data__,n=rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Gr.prototype.clear=function(){this.size=0,this.__data__={hash:new Kr,map:new(Ir||qr),string:new Kr}},Gr.prototype.delete=function(e){var t=uo(this,e).delete(e);return this.size-=t?1:0,t},Gr.prototype.get=function(e){return uo(this,e).get(e)},Gr.prototype.has=function(e){return uo(this,e).has(e)},Gr.prototype.set=function(e,t){var r=uo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Vr.prototype.add=Vr.prototype.push=function(e){return this.__data__.set(e,s),this},Vr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new qr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof qr){var n=r.__data__;if(!Ir||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gr(n)}return r.set(e,t),this.size=r.size,this};var fn=xi(An),pn=xi(vn,!0);function gn(e,t){var r=!0;return fn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function _n(e,t,r){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(c===i?a==a&&!la(a):r(a,c)))var c=a,l=s}return l}function mn(e,t){var r=[];return fn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function yn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=bo),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?yn(a,t-1,r,n,i):Mt(i,a):n||(i[i.length]=a)}return i}var bn=Li(),wn=Li(!0);function An(e,t){return e&&bn(e,t,Pa)}function vn(e,t){return e&&wn(e,t,Pa)}function En(e,t){return Pt(t,(function(t){return Js(e[t])}))}function Sn(e,t){for(var r=0,n=(t=wi(t,e)).length;null!=e&&r<n;)e=e[Uo(t[r++])];return r&&r==n?e:i}function In(e,t,r){var n=t(e);return Ks(e)?n:Mt(n,r(e))}function kn(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Ce(e)?function(e){var t=Me.call(e,Ze),r=e[Ze];try{e[Ze]=i;var n=!0}catch(e){}var o=Fe.call(e);n&&(t?e[Ze]=r:delete e[Ze]);return o}(e):function(e){return Fe.call(e)}(e)}function Cn(e,t){return e>t}function Rn(e,t){return null!=e&&Me.call(e,t)}function Tn(e,t){return null!=e&&t in Ce(e)}function Bn(e,t,r){for(var o=r?xt:Nt,s=e[0].length,a=e.length,c=a,l=n(a),u=1/0,h=[];c--;){var d=e[c];c&&t&&(d=Lt(d,Zt(t))),u=br(d.length,u),l[c]=!r&&(t||s>=120&&d.length>=120)?new Vr(c&&d):i}d=e[0];var f=-1,p=l[0];e:for(;++f<s&&h.length<u;){var g=d[f],_=t?t(g):g;if(g=r||0!==g?g:0,!(p?tr(p,_):o(h,_,r))){for(c=a;--c;){var m=l[c];if(!(m?tr(m,_):o(e[c],_,r)))continue e}p&&p.push(_),h.push(g)}}return h}function On(e,t,r){var n=null==(e=To(e,t=wi(t,e)))?e:e[Uo(Xo(t))];return null==n?i:Ct(n,e,r)}function Pn(e){return ra(e)&&kn(e)==y}function Nn(e,t,r,n,o){return e===t||(null==e||null==t||!ra(e)&&!ra(t)?e!=e&&t!=t:function(e,t,r,n,o,s){var a=Ks(e),c=Ks(t),l=a?b:_o(e),u=c?b:_o(t),h=(l=l==y?C:l)==C,d=(u=u==y?C:u)==C,f=l==u;if(f&&Ys(e)){if(!Ys(t))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Yr),a||ua(e)?ro(e,t,r,n,o,s):function(e,t,r,n,i,o,s){switch(r){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case w:case A:case k:return Hs(+e,+t);case v:return e.name==t.name&&e.message==t.message;case T:case O:return e==t+"";case I:var a=cr;case B:var c=1&n;if(a||(a=hr),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var u=ro(a(e),a(t),n,i,o,s);return s.delete(e),u;case P:if(Ur)return Ur.call(e)==Ur.call(t)}return!1}(e,t,l,r,n,o,s);if(!(1&r)){var p=h&&Me.call(e,"__wrapped__"),g=d&&Me.call(t,"__wrapped__");if(p||g){var _=p?e.value():e,m=g?t.value():t;return s||(s=new Yr),o(_,m,r,n,s)}}if(!f)return!1;return s||(s=new Yr),function(e,t,r,n,o,s){var a=1&r,c=io(e),l=c.length,u=io(t),h=u.length;if(l!=h&&!a)return!1;var d=l;for(;d--;){var f=c[d];if(!(a?f in t:Me.call(t,f)))return!1}var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var _=!0;s.set(e,t),s.set(t,e);var m=a;for(;++d<l;){var y=e[f=c[d]],b=t[f];if(n)var w=a?n(b,y,f,t,e,s):n(y,b,f,e,t,s);if(!(w===i?y===b||o(y,b,r,n,s):w)){_=!1;break}m||(m="constructor"==f)}if(_&&!m){var A=e.constructor,v=t.constructor;A==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof A&&A instanceof A&&"function"==typeof v&&v instanceof v||(_=!1)}return s.delete(e),s.delete(t),_}(e,t,r,n,o,s)}(e,t,r,n,Nn,o))}function xn(e,t,r,n){var o=r.length,s=o,a=!n;if(null==e)return!s;for(e=Ce(e);o--;){var c=r[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=r[o])[0],u=e[l],h=c[1];if(a&&c[2]){if(u===i&&!(l in e))return!1}else{var d=new Yr;if(n)var f=n(u,h,l,e,t,d);if(!(f===i?Nn(h,u,3,n,d):f))return!1}}return!0}function Ln(e){return!(!ta(e)||(t=e,Ue&&Ue in t))&&(Js(e)?We:ye).test(Fo(e));var t}function Mn(e){return"function"==typeof e?e:null==e?ic:"object"==typeof e?Ks(e)?Wn(e[0],e[1]):Hn(e):fc(e)}function Dn(e){if(!Io(e))return Vt(e);var t=[];for(var r in Ce(e))Me.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Un(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var r in Ce(e))t.push(r);return t}(e);var t=Io(e),r=[];for(var n in e)("constructor"!=n||!t&&Me.call(e,n))&&r.push(n);return r}function Fn(e,t){return e<t}function jn(e,t){var r=-1,i=Gs(e)?n(e.length):[];return fn(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Hn(e){var t=ho(e);return 1==t.length&&t[0][2]?Co(t[0][0],t[0][1]):function(r){return r===e||xn(r,e,t)}}function Wn(e,t){return vo(e)&&ko(t)?Co(Uo(e),t):function(r){var n=Ca(r,e);return n===i&&n===t?Ra(r,e):Nn(t,n,3)}}function $n(e,t,r,n,o){e!==t&&bn(t,(function(s,a){if(o||(o=new Yr),ta(s))!function(e,t,r,n,o,s,a){var c=Bo(e,r),l=Bo(t,r),u=a.get(l);if(u)return void en(e,r,u);var h=s?s(c,l,r+"",e,t,a):i,d=h===i;if(d){var f=Ks(l),p=!f&&Ys(l),g=!f&&!p&&ua(l);h=l,f||p||g?Ks(c)?h=c:Vs(c)?h=Bi(c):p?(d=!1,h=Si(l,!0)):g?(d=!1,h=ki(l,!0)):h=[]:oa(l)||Qs(l)?(h=c,Qs(c)?h=ya(c):ta(c)&&!Js(c)||(h=yo(l))):d=!1}d&&(a.set(l,h),o(h,l,n,s,a),a.delete(l));en(e,r,h)}(e,t,a,r,$n,n,o);else{var c=n?n(Bo(e,a),s,a+"",e,t,o):i;c===i&&(c=s),en(e,a,c)}}),Na)}function Qn(e,t){var r=e.length;if(r)return wo(t+=t<0?r:0,r)?e[t]:i}function Kn(e,t,r){t=t.length?Lt(t,(function(e){return Ks(e)?function(t){return Sn(t,1===e.length?e[0]:e)}:e})):[ic];var n=-1;t=Lt(t,Zt(lo()));var i=jn(e,(function(e,r,i){var o=Lt(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;for(;++n<s;){var c=Ci(i[n],o[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function qn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=Sn(e,s);r(a,s)&&ei(o,wi(s,e),a)}return o}function Gn(e,t,r,n){var i=n?Qt:$t,o=-1,s=t.length,a=e;for(e===t&&(t=Bi(t)),r&&(a=Lt(e,Zt(r)));++o<s;)for(var c=0,l=t[o],u=r?r(l):l;(c=i(a,u,c,n))>-1;)a!==e&&ze.call(a,c,1),ze.call(e,c,1);return e}function Vn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;wo(i)?ze.call(e,i,1):di(e,i)}}return e}function Yn(e,t){return e+_t(vr()*(t-e+1))}function zn(e,t){var r="";if(!e||t<1||t>p)return r;do{t%2&&(r+=e),(t=_t(t/2))&&(e+=e)}while(t);return r}function Xn(e,t){return No(Ro(e,t,ic),e+"")}function Jn(e){return Xr(Ha(e))}function Zn(e,t){var r=Ha(e);return Mo(r,cn(t,0,r.length))}function ei(e,t,r,n){if(!ta(e))return e;for(var o=-1,s=(t=wi(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var l=Uo(t[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var h=c[l];(u=n?n(h,l,c):i)===i&&(u=ta(h)?h:wo(t[o+1])?[]:{})}tn(c,l,u),c=c[l]}return e}var ti=Br?function(e,t){return Br.set(e,t),e}:ic,ri=rt?function(e,t){return rt(e,"toString",{configurable:!0,enumerable:!1,value:tc(t),writable:!0})}:ic;function ni(e){return Mo(Ha(e))}function ii(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function oi(e,t){var r;return fn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function si(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!la(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return ai(e,t,ic,r)}function ai(e,t,r,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=r(t))!=t,c=null===t,l=la(t),u=t===i;o<s;){var h=_t((o+s)/2),d=r(e[h]),f=d!==i,p=null===d,g=d==d,_=la(d);if(a)var m=n||g;else m=u?g&&(n||f):c?g&&f&&(n||!p):l?g&&f&&!p&&(n||!_):!p&&!_&&(n?d<=t:d<t);m?o=h+1:s=h}return br(s,4294967294)}function ci(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!Hs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function li(e){return"number"==typeof e?e:la(e)?g:+e}function ui(e){if("string"==typeof e)return e;if(Ks(e))return Lt(e,ui)+"";if(la(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hi(e,t,r){var n=-1,i=Nt,o=e.length,s=!0,a=[],c=a;if(r)s=!1,i=xt;else if(o>=200){var l=t?null:zi(e);if(l)return hr(l);s=!1,i=tr,c=new Vr}else c=t?[]:a;e:for(;++n<o;){var u=e[n],h=t?t(u):u;if(u=r||0!==u?u:0,s&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,r)||(c!==a&&c.push(h),a.push(u))}return a}function di(e,t){return null==(e=To(e,t=wi(t,e)))||delete e[Uo(Xo(t))]}function fi(e,t,r,n){return ei(e,t,r(Sn(e,t)),n)}function pi(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ii(e,n?0:o,n?o+1:i):ii(e,n?o+1:0,n?i:o)}function gi(e,t){var r=e;return r instanceof Qr&&(r=r.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),r)}function _i(e,t,r){var i=e.length;if(i<2)return i?hi(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=dn(s[o]||a,e[c],t,r));return hi(yn(s,1),t,r)}function mi(e,t,r){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var c=n<s?t[n]:i;r(a,e[n],c)}return a}function yi(e){return Vs(e)?e:[]}function bi(e){return"function"==typeof e?e:ic}function wi(e,t){return Ks(e)?e:vo(e,t)?[e]:Do(ba(e))}var Ai=Xn;function vi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:ii(e,t,r)}var Ei=it||function(e){return gt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var r=e.length,n=qe?qe(r):new e.constructor(r);return e.copy(n),n}function Ii(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function ki(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var r=e!==i,n=null===e,o=e==e,s=la(e),a=t!==i,c=null===t,l=t==t,u=la(t);if(!c&&!u&&!s&&e>t||s&&a&&l&&!c&&!u||n&&a&&l||!r&&l||!o)return 1;if(!n&&!s&&!u&&e<t||u&&r&&o&&!n&&!s||c&&r&&o||!a&&o||!l)return-1}return 0}function Ri(e,t,r,i){for(var o=-1,s=e.length,a=r.length,c=-1,l=t.length,u=yr(s-a,0),h=n(l+u),d=!i;++c<l;)h[c]=t[c];for(;++o<a;)(d||o<s)&&(h[r[o]]=e[o]);for(;u--;)h[c++]=e[o++];return h}function Ti(e,t,r,i){for(var o=-1,s=e.length,a=-1,c=r.length,l=-1,u=t.length,h=yr(s-c,0),d=n(h+u),f=!i;++o<h;)d[o]=e[o];for(var p=o;++l<u;)d[p+l]=t[l];for(;++a<c;)(f||o<s)&&(d[p+r[a]]=e[o++]);return d}function Bi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Oi(e,t,r,n){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var c=t[s],l=n?n(r[c],e[c],c,r,e):i;l===i&&(l=e[c]),o?sn(r,c,l):tn(r,c,l)}return r}function Pi(e,t){return function(r,n){var i=Ks(r)?Rt:nn,o=t?t():{};return i(r,e,lo(n,2),o)}}function Ni(e){return Xn((function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:i,a=o>2?r[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&Ao(r[0],r[1],a)&&(s=o<3?i:s,o=1),t=Ce(t);++n<o;){var c=r[n];c&&e(t,c,n,s)}return t}))}function xi(e,t){return function(r,n){if(null==r)return r;if(!Gs(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Ce(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Li(e){return function(t,r,n){for(var i=-1,o=Ce(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}function Mi(e){return function(t){var r=ar(t=ba(t))?pr(t):i,n=r?r[0]:t.charAt(0),o=r?vi(r,1).join(""):t.slice(1);return n[e]()+o}}function Di(e){return function(t){return Dt(Ja(Qa(t).replace(et,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Hr(e.prototype),n=e.apply(r,t);return ta(n)?n:r}}function Fi(e){return function(t,r,n){var o=Ce(t);if(!Gs(t)){var s=lo(r,3);t=Pa(t),r=function(e){return s(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[s?t[a]:a]:i}}function ji(e){return no((function(t){var r=t.length,n=r,s=$r.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new Be(o);if(s&&!c&&"wrapper"==ao(a))var c=new $r([],!0)}for(n=c?n:r;++n<r;){var l=ao(a=t[n]),u="wrapper"==l?so(a):i;c=u&&Eo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[ao(u[0])].apply(c,u[3]):1==a.length&&Eo(a)?c[l]():c.thru(a)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&Ks(n))return c.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}function Hi(e,t,r,o,s,a,c,l,u,d){var f=t&h,p=1&t,g=2&t,_=24&t,m=512&t,y=g?i:Ui(e);return function h(){for(var b=arguments.length,w=n(b),A=b;A--;)w[A]=arguments[A];if(_)var v=co(h),E=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(w,v);if(o&&(w=Ri(w,o,s,_)),a&&(w=Ti(w,a,c,_)),b-=E,_&&b<d){var S=ur(w,v);return Vi(e,t,Hi,h.placeholder,r,w,S,l,u,d-b)}var I=p?r:this,k=g?I[e]:e;return b=w.length,l?w=function(e,t){var r=e.length,n=br(t.length,r),o=Bi(e);for(;n--;){var s=t[n];e[n]=wo(s,r)?o[s]:i}return e}(w,l):m&&b>1&&w.reverse(),f&&u<b&&(w.length=u),this&&this!==gt&&this instanceof h&&(k=y||Ui(k)),k.apply(I,w)}}function Wi(e,t){return function(r,n){return function(e,t,r,n){return An(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function $i(e,t){return function(r,n){var o;if(r===i&&n===i)return t;if(r!==i&&(o=r),n!==i){if(o===i)return n;"string"==typeof r||"string"==typeof n?(r=ui(r),n=ui(n)):(r=li(r),n=li(n)),o=e(r,n)}return o}}function Qi(e){return no((function(t){return t=Lt(t,Zt(lo())),Xn((function(r){var n=this;return e(t,(function(e){return Ct(e,n,r)}))}))}))}function Ki(e,t){var r=(t=t===i?" ":ui(t)).length;if(r<2)return r?zn(t,e):t;var n=zn(t,pt(e/fr(t)));return ar(t)?vi(pr(n),0,e).join(""):n.slice(0,e)}function qi(e){return function(t,r,o){return o&&"number"!=typeof o&&Ao(t,r,o)&&(r=o=i),t=pa(t),r===i?(r=t,t=0):r=pa(r),function(e,t,r,i){for(var o=-1,s=yr(pt((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:pa(o),e)}}function Gi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ma(t),r=ma(r)),e(t,r)}}function Vi(e,t,r,n,o,s,a,c,h,d){var f=8&t;t|=f?l:u,4&(t&=~(f?u:l))||(t&=-4);var p=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,c,h,d],g=r.apply(i,p);return Eo(e)&&Oo(g,p),g.placeholder=n,xo(g,e,t)}function Yi(e){var t=ke[e];return function(e,r){if(e=ma(e),(r=null==r?0:br(ga(r),292))&&wt(e)){var n=(ba(e)+"e").split("e");return+((n=(ba(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var zi=Cr&&1/hr(new Cr([,-0]))[1]==f?function(e){return new Cr(e)}:lc;function Xi(e){return function(t){var r=_o(t);return r==I?cr(t):r==B?dr(t):function(e,t){return Lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,s,f,p,g,_){var m=2&t;if(!m&&"function"!=typeof e)throw new Be(o);var y=s?s.length:0;if(y||(t&=-97,s=f=i),g=g===i?g:yr(ga(g),0),_=_===i?_:ga(_),y-=f?f.length:0,t&u){var b=s,w=f;s=f=i}var A=m?i:so(e),v=[e,t,r,s,f,b,w,p,g,_];if(A&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,s=n==h&&8==r||n==h&&r==d&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ri(l,c,t[4]):c,e[4]=l?ur(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Ti(l,c,t[6]):c,e[6]=l?ur(e[5],a):t[6]);(c=t[7])&&(e[7]=c);n&h&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(v,A),e=v[0],t=v[1],r=v[2],s=v[3],f=v[4],!(_=v[9]=v[9]===i?m?0:e.length:yr(v[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||t==c?function(e,t,r){var o=Ui(e);return function s(){for(var a=arguments.length,c=n(a),l=a,u=co(s);l--;)c[l]=arguments[l];var h=a<3&&c[0]!==u&&c[a-1]!==u?[]:ur(c,u);return(a-=h.length)<r?Vi(e,t,Hi,s.placeholder,i,c,h,i,i,r-a):Ct(this&&this!==gt&&this instanceof s?o:e,this,c)}}(e,t,_):t!=l&&33!=t||f.length?Hi.apply(i,v):function(e,t,r,i){var o=1&t,s=Ui(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=i.length,h=n(u+c),d=this&&this!==gt&&this instanceof t?s:e;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++a];return Ct(d,o?r:this,h)}}(e,t,r,s);else var E=function(e,t,r){var n=1&t,i=Ui(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return xo((A?ti:Oo)(E,v),e,t)}function Zi(e,t,r,n){return e===i||Hs(e,Ne[r])&&!Me.call(n,r)?t:e}function eo(e,t,r,n,o,s){return ta(e)&&ta(t)&&(s.set(t,e),$n(e,t,i,eo,s),s.delete(t)),e}function to(e){return oa(e)?i:e}function ro(e,t,r,n,o,s){var a=1&r,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&r?new Vr:i;for(s.set(e,t),s.set(t,e);++d<c;){var g=e[d],_=t[d];if(n)var m=a?n(_,g,d,t,e,s):n(g,_,d,e,t,s);if(m!==i){if(m)continue;f=!1;break}if(p){if(!Ft(t,(function(e,t){if(!tr(p,t)&&(g===e||o(g,e,r,n,s)))return p.push(t)}))){f=!1;break}}else if(g!==_&&!o(g,_,r,n,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function no(e){return No(Ro(e,i,qo),e+"")}function io(e){return In(e,Pa,po)}function oo(e){return In(e,Na,go)}var so=Br?function(e){return Br.get(e)}:lc;function ao(e){for(var t=e.name+"",r=Or[t],n=Me.call(Or,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(Me.call(jr,"placeholder")?jr:e).placeholder}function lo(){var e=jr.iteratee||oc;return e=e===oc?Mn:e,arguments.length?e(arguments[0],arguments[1]):e}function uo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ho(e){for(var t=Pa(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ko(i)]}return t}function fo(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return Ln(r)?r:i}var po=mt?function(e){return null==e?[]:(e=Ce(e),Pt(mt(e),(function(t){return Ye.call(e,t)})))}:_c,go=mt?function(e){for(var t=[];e;)Mt(t,po(e)),e=Ge(e);return t}:_c,_o=kn;function mo(e,t,r){for(var n=-1,i=(t=wi(t,e)).length,o=!1;++n<i;){var s=Uo(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&ea(i)&&wo(s,i)&&(Ks(e)||Qs(e))}function yo(e){return"function"!=typeof e.constructor||Io(e)?{}:Hr(Ge(e))}function bo(e){return Ks(e)||Qs(e)||!!(Xe&&e&&e[Xe])}function wo(e,t){var r=typeof e;return!!(t=null==t?p:t)&&("number"==r||"symbol"!=r&&we.test(e))&&e>-1&&e%1==0&&e<t}function Ao(e,t,r){if(!ta(r))return!1;var n=typeof t;return!!("number"==n?Gs(r)&&wo(t,r.length):"string"==n&&t in r)&&Hs(r[t],e)}function vo(e,t){if(Ks(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!la(e))||(re.test(e)||!te.test(e)||null!=t&&e in Ce(t))}function Eo(e){var t=ao(e),r=jr[t];if("function"!=typeof r||!(t in Qr.prototype))return!1;if(e===r)return!0;var n=so(r);return!!n&&e===n[0]}(Sr&&_o(new Sr(new ArrayBuffer(1)))!=L||Ir&&_o(new Ir)!=I||kr&&_o(kr.resolve())!=R||Cr&&_o(new Cr)!=B||Rr&&_o(new Rr)!=N)&&(_o=function(e){var t=kn(e),r=t==C?e.constructor:i,n=r?Fo(r):"";if(n)switch(n){case Pr:return L;case Nr:return I;case xr:return R;case Lr:return B;case Mr:return N}return t});var So=xe?Js:mc;function Io(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ne)}function ko(e){return e==e&&!ta(e)}function Co(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==i||e in Ce(r)))}}function Ro(e,t,r){return t=yr(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=yr(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=i[o];return c[t]=r(a),Ct(e,this,c)}}function To(e,t){return t.length<2?e:Sn(e,ii(t,0,-1))}function Bo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=Lo(ti),Po=ft||function(e,t){return gt.setTimeout(e,t)},No=Lo(ri);function xo(e,t,r){var n=t+"";return No(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Tt(m,(function(r){var n="_."+r[0];t&r[1]&&!Nt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ue):[]}(n),r)))}function Lo(e){var t=0,r=0;return function(){var n=wr(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Mo(e,t){var r=-1,n=e.length,o=n-1;for(t=t===i?n:t;++r<t;){var s=Yn(r,o),a=e[s];e[s]=e[r],e[r]=a}return e.length=t,e}var Do=function(e){var t=Ls(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,r,n,i){t.push(n?i.replace(fe,"$1"):r||e)})),t}));function Uo(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function jo(e){if(e instanceof Qr)return e.clone();var t=new $r(e.__wrapped__,e.__chain__);return t.__actions__=Bi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Xn((function(e,t){return Vs(e)?dn(e,yn(t,1,Vs,!0)):[]})),Wo=Xn((function(e,t){var r=Xo(t);return Vs(r)&&(r=i),Vs(e)?dn(e,yn(t,1,Vs,!0),lo(r,2)):[]})),$o=Xn((function(e,t){var r=Xo(t);return Vs(r)&&(r=i),Vs(e)?dn(e,yn(t,1,Vs,!0),i,r):[]}));function Qo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ga(r);return i<0&&(i=yr(n+i,0)),Wt(e,lo(t,3),i)}function Ko(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return r!==i&&(o=ga(r),o=r<0?yr(n+o,0):br(o,n-1)),Wt(e,lo(t,3),o,!0)}function qo(e){return(null==e?0:e.length)?yn(e,1):[]}function Go(e){return e&&e.length?e[0]:i}var Vo=Xn((function(e){var t=Lt(e,yi);return t.length&&t[0]===e[0]?Bn(t):[]})),Yo=Xn((function(e){var t=Xo(e),r=Lt(e,yi);return t===Xo(r)?t=i:r.pop(),r.length&&r[0]===e[0]?Bn(r,lo(t,2)):[]})),zo=Xn((function(e){var t=Xo(e),r=Lt(e,yi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?Bn(r,i,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Jo=Xn(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}var es=no((function(e,t){var r=null==e?0:e.length,n=an(e,t);return Vn(e,Lt(t,(function(e){return wo(e,r)?+e:e})).sort(Ci)),n}));function ts(e){return null==e?e:Er.call(e)}var rs=Xn((function(e){return hi(yn(e,1,Vs,!0))})),ns=Xn((function(e){var t=Xo(e);return Vs(t)&&(t=i),hi(yn(e,1,Vs,!0),lo(t,2))})),is=Xn((function(e){var t=Xo(e);return t="function"==typeof t?t:i,hi(yn(e,1,Vs,!0),i,t)}));function os(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(Vs(e))return t=yr(e.length,t),!0})),Xt(t,(function(t){return Lt(e,Gt(t))}))}function ss(e,t){if(!e||!e.length)return[];var r=os(e);return null==t?r:Lt(r,(function(e){return Ct(t,i,e)}))}var as=Xn((function(e,t){return Vs(e)?dn(e,t):[]})),cs=Xn((function(e){return _i(Pt(e,Vs))})),ls=Xn((function(e){var t=Xo(e);return Vs(t)&&(t=i),_i(Pt(e,Vs),lo(t,2))})),us=Xn((function(e){var t=Xo(e);return t="function"==typeof t?t:i,_i(Pt(e,Vs),i,t)})),hs=Xn(os);var ds=Xn((function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,ss(e,r)}));function fs(e){var t=jr(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var gs=no((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Qr&&wo(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new $r(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var _s=Pi((function(e,t,r){Me.call(e,r)?++e[r]:sn(e,r,1)}));var ms=Fi(Qo),ys=Fi(Ko);function bs(e,t){return(Ks(e)?Tt:fn)(e,lo(t,3))}function ws(e,t){return(Ks(e)?Bt:pn)(e,lo(t,3))}var As=Pi((function(e,t,r){Me.call(e,r)?e[r].push(t):sn(e,r,[t])}));var vs=Xn((function(e,t,r){var i=-1,o="function"==typeof t,s=Gs(e)?n(e.length):[];return fn(e,(function(e){s[++i]=o?Ct(t,e,r):On(e,t,r)})),s})),Es=Pi((function(e,t,r){sn(e,r,t)}));function Ss(e,t){return(Ks(e)?Lt:jn)(e,lo(t,3))}var Is=Pi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var ks=Xn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&Ao(e,t[0],t[1])?t=[]:r>2&&Ao(t[0],t[1],t[2])&&(t=[t[0]]),Kn(e,yn(t,1),[])})),Cs=ut||function(){return gt.Date.now()};function Rs(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Ts(e,t){var r;if("function"!=typeof t)throw new Be(o);return e=ga(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var Bs=Xn((function(e,t,r){var n=1;if(r.length){var i=ur(r,co(Bs));n|=l}return Ji(e,n,t,r,i)})),Os=Xn((function(e,t,r){var n=3;if(r.length){var i=ur(r,co(Os));n|=l}return Ji(t,n,e,r,i)}));function Ps(e,t,r){var n,s,a,c,l,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Be(o);function g(t){var r=n,o=s;return n=s=i,h=t,c=e.apply(o,r)}function _(e){var r=e-u;return u===i||r>=t||r<0||f&&e-h>=a}function m(){var e=Cs();if(_(e))return y(e);l=Po(m,function(e){var r=t-(e-u);return f?br(r,a-(e-h)):r}(e))}function y(e){return l=i,p&&n?g(e):(n=s=i,c)}function b(){var e=Cs(),r=_(e);if(n=arguments,s=this,u=e,r){if(l===i)return function(e){return h=e,l=Po(m,t),d?g(e):c}(u);if(f)return Ei(l),l=Po(m,t),g(u)}return l===i&&(l=Po(m,t)),c}return t=ma(t)||0,ta(r)&&(d=!!r.leading,a=(f="maxWait"in r)?yr(ma(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),b.cancel=function(){l!==i&&Ei(l),h=0,n=u=s=l=i},b.flush=function(){return l===i?c:y(Cs())},b}var Ns=Xn((function(e,t){return hn(e,1,t)})),xs=Xn((function(e,t,r){return hn(e,ma(t)||0,r)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Be(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ls.Cache||Gr),r}function Ms(e){if("function"!=typeof e)throw new Be(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=Gr;var Ds=Ai((function(e,t){var r=(t=1==t.length&&Ks(t[0])?Lt(t[0],Zt(lo())):Lt(yn(t,1),Zt(lo()))).length;return Xn((function(n){for(var i=-1,o=br(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Ct(e,this,n)}))})),Us=Xn((function(e,t){var r=ur(t,co(Us));return Ji(e,l,i,t,r)})),Fs=Xn((function(e,t){var r=ur(t,co(Fs));return Ji(e,u,i,t,r)})),js=no((function(e,t){return Ji(e,d,i,i,i,t)}));function Hs(e,t){return e===t||e!=e&&t!=t}var Ws=Gi(Cn),$s=Gi((function(e,t){return e>=t})),Qs=Pn(function(){return arguments}())?Pn:function(e){return ra(e)&&Me.call(e,"callee")&&!Ye.call(e,"callee")},Ks=n.isArray,qs=At?Zt(At):function(e){return ra(e)&&kn(e)==x};function Gs(e){return null!=e&&ea(e.length)&&!Js(e)}function Vs(e){return ra(e)&&Gs(e)}var Ys=bt||mc,zs=vt?Zt(vt):function(e){return ra(e)&&kn(e)==A};function Xs(e){if(!ra(e))return!1;var t=kn(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Js(e){if(!ta(e))return!1;var t=kn(e);return t==E||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zs(e){return"number"==typeof e&&e==ga(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ra(e){return null!=e&&"object"==typeof e}var na=Et?Zt(Et):function(e){return ra(e)&&_o(e)==I};function ia(e){return"number"==typeof e||ra(e)&&kn(e)==k}function oa(e){if(!ra(e)||kn(e)!=C)return!1;var t=Ge(e);if(null===t)return!0;var r=Me.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Le.call(r)==je}var sa=St?Zt(St):function(e){return ra(e)&&kn(e)==T};var aa=It?Zt(It):function(e){return ra(e)&&_o(e)==B};function ca(e){return"string"==typeof e||!Ks(e)&&ra(e)&&kn(e)==O}function la(e){return"symbol"==typeof e||ra(e)&&kn(e)==P}var ua=kt?Zt(kt):function(e){return ra(e)&&ea(e.length)&&!!ct[kn(e)]};var ha=Gi(Fn),da=Gi((function(e,t){return e<=t}));function fa(e){if(!e)return[];if(Gs(e))return ca(e)?pr(e):Bi(e);if(Je&&e[Je])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Je]());var t=_o(e);return(t==I?cr:t==B?hr:Ha)(e)}function pa(e){return e?(e=ma(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=pa(e),r=t%1;return t==t?r?t-r:t:0}function _a(e){return e?cn(ga(e),0,_):0}function ma(e){if("number"==typeof e)return e;if(la(e))return g;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var r=me.test(e);return r||be.test(e)?dt(e.slice(2),r?2:8):_e.test(e)?g:+e}function ya(e){return Oi(e,Na(e))}function ba(e){return null==e?"":ui(e)}var wa=Ni((function(e,t){if(Io(t)||Gs(t))Oi(t,Pa(t),e);else for(var r in t)Me.call(t,r)&&tn(e,r,t[r])})),Aa=Ni((function(e,t){Oi(t,Na(t),e)})),va=Ni((function(e,t,r,n){Oi(t,Na(t),e,n)})),Ea=Ni((function(e,t,r,n){Oi(t,Pa(t),e,n)})),Sa=no(an);var Ia=Xn((function(e,t){e=Ce(e);var r=-1,n=t.length,o=n>2?t[2]:i;for(o&&Ao(t[0],t[1],o)&&(n=1);++r<n;)for(var s=t[r],a=Na(s),c=-1,l=a.length;++c<l;){var u=a[c],h=e[u];(h===i||Hs(h,Ne[u])&&!Me.call(e,u))&&(e[u]=s[u])}return e})),ka=Xn((function(e){return e.push(i,eo),Ct(La,i,e)}));function Ca(e,t,r){var n=null==e?i:Sn(e,t);return n===i?r:n}function Ra(e,t){return null!=e&&mo(e,t,Tn)}var Ta=Wi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r}),tc(ic)),Ba=Wi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Me.call(e,t)?e[t].push(r):e[t]=[r]}),lo),Oa=Xn(On);function Pa(e){return Gs(e)?zr(e):Dn(e)}function Na(e){return Gs(e)?zr(e,!0):Un(e)}var xa=Ni((function(e,t,r){$n(e,t,r)})),La=Ni((function(e,t,r,n){$n(e,t,r,n)})),Ma=no((function(e,t){var r={};if(null==e)return r;var n=!1;t=Lt(t,(function(t){return t=wi(t,e),n||(n=t.length>1),t})),Oi(e,oo(e),r),n&&(r=ln(r,7,to));for(var i=t.length;i--;)di(r,t[i]);return r}));var Da=no((function(e,t){return null==e?{}:function(e,t){return qn(e,t,(function(t,r){return Ra(e,r)}))}(e,t)}));function Ua(e,t){if(null==e)return{};var r=Lt(oo(e),(function(e){return[e]}));return t=lo(t),qn(e,r,(function(e,r){return t(e,r[0])}))}var Fa=Xi(Pa),ja=Xi(Na);function Ha(e){return null==e?[]:er(e,Pa(e))}var Wa=Di((function(e,t,r){return t=t.toLowerCase(),e+(r?$a(t):t)}));function $a(e){return Xa(ba(e).toLowerCase())}function Qa(e){return(e=ba(e))&&e.replace(Ae,ir).replace(tt,"")}var Ka=Di((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),qa=Di((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ga=Mi("toLowerCase");var Va=Di((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Ya=Di((function(e,t,r){return e+(r?" ":"")+Xa(t)}));var za=Di((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Xa=Mi("toUpperCase");function Ja(e,t,r){return e=ba(e),(t=r?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Za=Xn((function(e,t){try{return Ct(e,i,t)}catch(e){return Xs(e)?e:new Se(e)}})),ec=no((function(e,t){return Tt(t,(function(t){t=Uo(t),sn(e,t,Bs(e[t],e))})),e}));function tc(e){return function(){return e}}var rc=ji(),nc=ji(!0);function ic(e){return e}function oc(e){return Mn("function"==typeof e?e:ln(e,1))}var sc=Xn((function(e,t){return function(r){return On(r,e,t)}})),ac=Xn((function(e,t){return function(r){return On(e,r,t)}}));function cc(e,t,r){var n=Pa(t),i=En(t,n);null!=r||ta(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=En(t,Pa(t)));var o=!(ta(r)&&"chain"in r&&!r.chain),s=Js(e);return Tt(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Bi(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Mt([this.value()],arguments))})})),e}function lc(){}var uc=Qi(Lt),hc=Qi(Ot),dc=Qi(Ft);function fc(e){return vo(e)?Gt(Uo(e)):function(e){return function(t){return Sn(t,e)}}(e)}var pc=qi(),gc=qi(!0);function _c(){return[]}function mc(){return!1}var yc=$i((function(e,t){return e+t}),0),bc=Yi("ceil"),wc=$i((function(e,t){return e/t}),1),Ac=Yi("floor");var vc,Ec=$i((function(e,t){return e*t}),1),Sc=Yi("round"),Ic=$i((function(e,t){return e-t}),0);return jr.after=function(e,t){if("function"!=typeof t)throw new Be(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},jr.ary=Rs,jr.assign=wa,jr.assignIn=Aa,jr.assignInWith=va,jr.assignWith=Ea,jr.at=Sa,jr.before=Ts,jr.bind=Bs,jr.bindAll=ec,jr.bindKey=Os,jr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ks(e)?e:[e]},jr.chain=fs,jr.chunk=function(e,t,r){t=(r?Ao(e,t,r):t===i)?1:yr(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=n(pt(o/t));s<o;)c[a++]=ii(e,s,s+=t);return c},jr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},jr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(Ks(r)?Bi(r):[r],yn(t,1))},jr.cond=function(e){var t=null==e?0:e.length,r=lo();return e=t?Lt(e,(function(e){if("function"!=typeof e[1])throw new Be(o);return[r(e[0]),e[1]]})):[],Xn((function(r){for(var n=-1;++n<t;){var i=e[n];if(Ct(i[0],this,r))return Ct(i[1],this,r)}}))},jr.conforms=function(e){return function(e){var t=Pa(e);return function(r){return un(r,e,t)}}(ln(e,1))},jr.constant=tc,jr.countBy=_s,jr.create=function(e,t){var r=Hr(e);return null==t?r:on(r,t)},jr.curry=function e(t,r,n){var o=Ji(t,8,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},jr.curryRight=function e(t,r,n){var o=Ji(t,c,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},jr.debounce=Ps,jr.defaults=Ia,jr.defaultsDeep=ka,jr.defer=Ns,jr.delay=xs,jr.difference=Ho,jr.differenceBy=Wo,jr.differenceWith=$o,jr.drop=function(e,t,r){var n=null==e?0:e.length;return n?ii(e,(t=r||t===i?1:ga(t))<0?0:t,n):[]},jr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ii(e,0,(t=n-(t=r||t===i?1:ga(t)))<0?0:t):[]},jr.dropRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0,!0):[]},jr.dropWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0):[]},jr.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Ao(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=ga(r))<0&&(r=-r>o?0:o+r),(n=n===i||n>o?o:ga(n))<0&&(n+=o),n=r>n?0:_a(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},jr.filter=function(e,t){return(Ks(e)?Pt:mn)(e,lo(t,3))},jr.flatMap=function(e,t){return yn(Ss(e,t),1)},jr.flatMapDeep=function(e,t){return yn(Ss(e,t),f)},jr.flatMapDepth=function(e,t,r){return r=r===i?1:ga(r),yn(Ss(e,t),r)},jr.flatten=qo,jr.flattenDeep=function(e){return(null==e?0:e.length)?yn(e,f):[]},jr.flattenDepth=function(e,t){return(null==e?0:e.length)?yn(e,t=t===i?1:ga(t)):[]},jr.flip=function(e){return Ji(e,512)},jr.flow=rc,jr.flowRight=nc,jr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},jr.functions=function(e){return null==e?[]:En(e,Pa(e))},jr.functionsIn=function(e){return null==e?[]:En(e,Na(e))},jr.groupBy=As,jr.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},jr.intersection=Vo,jr.intersectionBy=Yo,jr.intersectionWith=zo,jr.invert=Ta,jr.invertBy=Ba,jr.invokeMap=vs,jr.iteratee=oc,jr.keyBy=Es,jr.keys=Pa,jr.keysIn=Na,jr.map=Ss,jr.mapKeys=function(e,t){var r={};return t=lo(t,3),An(e,(function(e,n,i){sn(r,t(e,n,i),e)})),r},jr.mapValues=function(e,t){var r={};return t=lo(t,3),An(e,(function(e,n,i){sn(r,n,t(e,n,i))})),r},jr.matches=function(e){return Hn(ln(e,1))},jr.matchesProperty=function(e,t){return Wn(e,ln(t,1))},jr.memoize=Ls,jr.merge=xa,jr.mergeWith=La,jr.method=sc,jr.methodOf=ac,jr.mixin=cc,jr.negate=Ms,jr.nthArg=function(e){return e=ga(e),Xn((function(t){return Qn(t,e)}))},jr.omit=Ma,jr.omitBy=function(e,t){return Ua(e,Ms(lo(t)))},jr.once=function(e){return Ts(2,e)},jr.orderBy=function(e,t,r,n){return null==e?[]:(Ks(t)||(t=null==t?[]:[t]),Ks(r=n?i:r)||(r=null==r?[]:[r]),Kn(e,t,r))},jr.over=uc,jr.overArgs=Ds,jr.overEvery=hc,jr.overSome=dc,jr.partial=Us,jr.partialRight=Fs,jr.partition=Is,jr.pick=Da,jr.pickBy=Ua,jr.property=fc,jr.propertyOf=function(e){return function(t){return null==e?i:Sn(e,t)}},jr.pull=Jo,jr.pullAll=Zo,jr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Gn(e,t,lo(r,2)):e},jr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Gn(e,t,i,r):e},jr.pullAt=es,jr.range=pc,jr.rangeRight=gc,jr.rearg=js,jr.reject=function(e,t){return(Ks(e)?Pt:mn)(e,Ms(lo(t,3)))},jr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=lo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return Vn(e,i),r},jr.rest=function(e,t){if("function"!=typeof e)throw new Be(o);return Xn(e,t=t===i?t:ga(t))},jr.reverse=ts,jr.sampleSize=function(e,t,r){return t=(r?Ao(e,t,r):t===i)?1:ga(t),(Ks(e)?Jr:Zn)(e,t)},jr.set=function(e,t,r){return null==e?e:ei(e,t,r)},jr.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:ei(e,t,r,n)},jr.shuffle=function(e){return(Ks(e)?Zr:ni)(e)},jr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Ao(e,t,r)?(t=0,r=n):(t=null==t?0:ga(t),r=r===i?n:ga(r)),ii(e,t,r)):[]},jr.sortBy=ks,jr.sortedUniq=function(e){return e&&e.length?ci(e):[]},jr.sortedUniqBy=function(e,t){return e&&e.length?ci(e,lo(t,2)):[]},jr.split=function(e,t,r){return r&&"number"!=typeof r&&Ao(e,t,r)&&(t=r=i),(r=r===i?_:r>>>0)?(e=ba(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=ui(t))&&ar(e)?vi(pr(e),0,r):e.split(t,r):[]},jr.spread=function(e,t){if("function"!=typeof e)throw new Be(o);return t=null==t?0:yr(ga(t),0),Xn((function(r){var n=r[t],i=vi(r,0,t);return n&&Mt(i,n),Ct(e,this,i)}))},jr.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},jr.take=function(e,t,r){return e&&e.length?ii(e,0,(t=r||t===i?1:ga(t))<0?0:t):[]},jr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ii(e,(t=n-(t=r||t===i?1:ga(t)))<0?0:t,n):[]},jr.takeRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!1,!0):[]},jr.takeWhile=function(e,t){return e&&e.length?pi(e,lo(t,3)):[]},jr.tap=function(e,t){return t(e),e},jr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Be(o);return ta(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ps(e,t,{leading:n,maxWait:t,trailing:i})},jr.thru=ps,jr.toArray=fa,jr.toPairs=Fa,jr.toPairsIn=ja,jr.toPath=function(e){return Ks(e)?Lt(e,Uo):la(e)?[e]:Bi(Do(ba(e)))},jr.toPlainObject=ya,jr.transform=function(e,t,r){var n=Ks(e),i=n||Ys(e)||ua(e);if(t=lo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:ta(e)&&Js(o)?Hr(Ge(e)):{}}return(i?Tt:An)(e,(function(e,n,i){return t(r,e,n,i)})),r},jr.unary=function(e){return Rs(e,1)},jr.union=rs,jr.unionBy=ns,jr.unionWith=is,jr.uniq=function(e){return e&&e.length?hi(e):[]},jr.uniqBy=function(e,t){return e&&e.length?hi(e,lo(t,2)):[]},jr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?hi(e,i,t):[]},jr.unset=function(e,t){return null==e||di(e,t)},jr.unzip=os,jr.unzipWith=ss,jr.update=function(e,t,r){return null==e?e:fi(e,t,bi(r))},jr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:fi(e,t,bi(r),n)},jr.values=Ha,jr.valuesIn=function(e){return null==e?[]:er(e,Na(e))},jr.without=as,jr.words=Ja,jr.wrap=function(e,t){return Us(bi(t),e)},jr.xor=cs,jr.xorBy=ls,jr.xorWith=us,jr.zip=hs,jr.zipObject=function(e,t){return mi(e||[],t||[],tn)},jr.zipObjectDeep=function(e,t){return mi(e||[],t||[],ei)},jr.zipWith=ds,jr.entries=Fa,jr.entriesIn=ja,jr.extend=Aa,jr.extendWith=va,cc(jr,jr),jr.add=yc,jr.attempt=Za,jr.camelCase=Wa,jr.capitalize=$a,jr.ceil=bc,jr.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=ma(r))==r?r:0),t!==i&&(t=(t=ma(t))==t?t:0),cn(ma(e),t,r)},jr.clone=function(e){return ln(e,4)},jr.cloneDeep=function(e){return ln(e,5)},jr.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:i)},jr.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:i)},jr.conformsTo=function(e,t){return null==t||un(e,t,Pa(t))},jr.deburr=Qa,jr.defaultTo=function(e,t){return null==e||e!=e?t:e},jr.divide=wc,jr.endsWith=function(e,t,r){e=ba(e),t=ui(t);var n=e.length,o=r=r===i?n:cn(ga(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},jr.eq=Hs,jr.escape=function(e){return(e=ba(e))&&X.test(e)?e.replace(Y,or):e},jr.escapeRegExp=function(e){return(e=ba(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},jr.every=function(e,t,r){var n=Ks(e)?Ot:gn;return r&&Ao(e,t,r)&&(t=i),n(e,lo(t,3))},jr.find=ms,jr.findIndex=Qo,jr.findKey=function(e,t){return Ht(e,lo(t,3),An)},jr.findLast=ys,jr.findLastIndex=Ko,jr.findLastKey=function(e,t){return Ht(e,lo(t,3),vn)},jr.floor=Ac,jr.forEach=bs,jr.forEachRight=ws,jr.forIn=function(e,t){return null==e?e:bn(e,lo(t,3),Na)},jr.forInRight=function(e,t){return null==e?e:wn(e,lo(t,3),Na)},jr.forOwn=function(e,t){return e&&An(e,lo(t,3))},jr.forOwnRight=function(e,t){return e&&vn(e,lo(t,3))},jr.get=Ca,jr.gt=Ws,jr.gte=$s,jr.has=function(e,t){return null!=e&&mo(e,t,Rn)},jr.hasIn=Ra,jr.head=Go,jr.identity=ic,jr.includes=function(e,t,r,n){e=Gs(e)?e:Ha(e),r=r&&!n?ga(r):0;var i=e.length;return r<0&&(r=yr(i+r,0)),ca(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&$t(e,t,r)>-1},jr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ga(r);return i<0&&(i=yr(n+i,0)),$t(e,t,i)},jr.inRange=function(e,t,r){return t=pa(t),r===i?(r=t,t=0):r=pa(r),function(e,t,r){return e>=br(t,r)&&e<yr(t,r)}(e=ma(e),t,r)},jr.invoke=Oa,jr.isArguments=Qs,jr.isArray=Ks,jr.isArrayBuffer=qs,jr.isArrayLike=Gs,jr.isArrayLikeObject=Vs,jr.isBoolean=function(e){return!0===e||!1===e||ra(e)&&kn(e)==w},jr.isBuffer=Ys,jr.isDate=zs,jr.isElement=function(e){return ra(e)&&1===e.nodeType&&!oa(e)},jr.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(Ks(e)||"string"==typeof e||"function"==typeof e.splice||Ys(e)||ua(e)||Qs(e)))return!e.length;var t=_o(e);if(t==I||t==B)return!e.size;if(Io(e))return!Dn(e).length;for(var r in e)if(Me.call(e,r))return!1;return!0},jr.isEqual=function(e,t){return Nn(e,t)},jr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?Nn(e,t,i,r):!!n},jr.isError=Xs,jr.isFinite=function(e){return"number"==typeof e&&wt(e)},jr.isFunction=Js,jr.isInteger=Zs,jr.isLength=ea,jr.isMap=na,jr.isMatch=function(e,t){return e===t||xn(e,t,ho(t))},jr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,xn(e,t,ho(t),r)},jr.isNaN=function(e){return ia(e)&&e!=+e},jr.isNative=function(e){if(So(e))throw new Se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(e)},jr.isNil=function(e){return null==e},jr.isNull=function(e){return null===e},jr.isNumber=ia,jr.isObject=ta,jr.isObjectLike=ra,jr.isPlainObject=oa,jr.isRegExp=sa,jr.isSafeInteger=function(e){return Zs(e)&&e>=-9007199254740991&&e<=p},jr.isSet=aa,jr.isString=ca,jr.isSymbol=la,jr.isTypedArray=ua,jr.isUndefined=function(e){return e===i},jr.isWeakMap=function(e){return ra(e)&&_o(e)==N},jr.isWeakSet=function(e){return ra(e)&&"[object WeakSet]"==kn(e)},jr.join=function(e,t){return null==e?"":jt.call(e,t)},jr.kebabCase=Ka,jr.last=Xo,jr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return r!==i&&(o=(o=ga(r))<0?yr(n+o,0):br(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Wt(e,Kt,o,!0)},jr.lowerCase=qa,jr.lowerFirst=Ga,jr.lt=ha,jr.lte=da,jr.max=function(e){return e&&e.length?_n(e,ic,Cn):i},jr.maxBy=function(e,t){return e&&e.length?_n(e,lo(t,2),Cn):i},jr.mean=function(e){return qt(e,ic)},jr.meanBy=function(e,t){return qt(e,lo(t,2))},jr.min=function(e){return e&&e.length?_n(e,ic,Fn):i},jr.minBy=function(e,t){return e&&e.length?_n(e,lo(t,2),Fn):i},jr.stubArray=_c,jr.stubFalse=mc,jr.stubObject=function(){return{}},jr.stubString=function(){return""},jr.stubTrue=function(){return!0},jr.multiply=Ec,jr.nth=function(e,t){return e&&e.length?Qn(e,ga(t)):i},jr.noConflict=function(){return gt._===this&&(gt._=He),this},jr.noop=lc,jr.now=Cs,jr.pad=function(e,t,r){e=ba(e);var n=(t=ga(t))?fr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Ki(_t(i),r)+e+Ki(pt(i),r)},jr.padEnd=function(e,t,r){e=ba(e);var n=(t=ga(t))?fr(e):0;return t&&n<t?e+Ki(t-n,r):e},jr.padStart=function(e,t,r){e=ba(e);var n=(t=ga(t))?fr(e):0;return t&&n<t?Ki(t-n,r)+e:e},jr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Ar(ba(e).replace(se,""),t||0)},jr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&Ao(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=pa(e),t===i?(t=e,e=0):t=pa(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=vr();return br(e+o*(t-e+ht("1e-"+((o+"").length-1))),t)}return Yn(e,t)},jr.reduce=function(e,t,r){var n=Ks(e)?Dt:Yt,i=arguments.length<3;return n(e,lo(t,4),r,i,fn)},jr.reduceRight=function(e,t,r){var n=Ks(e)?Ut:Yt,i=arguments.length<3;return n(e,lo(t,4),r,i,pn)},jr.repeat=function(e,t,r){return t=(r?Ao(e,t,r):t===i)?1:ga(t),zn(ba(e),t)},jr.replace=function(){var e=arguments,t=ba(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jr.result=function(e,t,r){var n=-1,o=(t=wi(t,e)).length;for(o||(o=1,e=i);++n<o;){var s=null==e?i:e[Uo(t[n])];s===i&&(n=o,s=r),e=Js(s)?s.call(e):s}return e},jr.round=Sc,jr.runInContext=e,jr.sample=function(e){return(Ks(e)?Xr:Jn)(e)},jr.size=function(e){if(null==e)return 0;if(Gs(e))return ca(e)?fr(e):e.length;var t=_o(e);return t==I||t==B?e.size:Dn(e).length},jr.snakeCase=Va,jr.some=function(e,t,r){var n=Ks(e)?Ft:oi;return r&&Ao(e,t,r)&&(t=i),n(e,lo(t,3))},jr.sortedIndex=function(e,t){return si(e,t)},jr.sortedIndexBy=function(e,t,r){return ai(e,t,lo(r,2))},jr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=si(e,t);if(n<r&&Hs(e[n],t))return n}return-1},jr.sortedLastIndex=function(e,t){return si(e,t,!0)},jr.sortedLastIndexBy=function(e,t,r){return ai(e,t,lo(r,2),!0)},jr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=si(e,t,!0)-1;if(Hs(e[r],t))return r}return-1},jr.startCase=Ya,jr.startsWith=function(e,t,r){return e=ba(e),r=null==r?0:cn(ga(r),0,e.length),t=ui(t),e.slice(r,r+t.length)==t},jr.subtract=Ic,jr.sum=function(e){return e&&e.length?zt(e,ic):0},jr.sumBy=function(e,t){return e&&e.length?zt(e,lo(t,2)):0},jr.template=function(e,t,r){var n=jr.templateSettings;r&&Ao(e,t,r)&&(t=i),e=ba(e),t=va({},t,n,Zi);var o,s,a=va({},t.imports,n.imports,Zi),c=Pa(a),l=er(a,c),u=0,h=t.interpolate||ve,d="__p += '",f=Re((t.escape||ve).source+"|"+h.source+"|"+(h===ee?pe:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),p="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,r,n,i,a,c){return n||(n=i),d+=e.slice(u,c).replace(Ee,sr),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),d+="';\n";var g=Me.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new Se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(K,""):d).replace(q,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var _=Za((function(){return Ie(c,p+"return "+d).apply(i,l)}));if(_.source=d,Xs(_))throw _;return _},jr.times=function(e,t){if((e=ga(e))<1||e>p)return[];var r=_,n=br(e,_);t=lo(t),e-=_;for(var i=Xt(n,t);++r<e;)t(r);return i},jr.toFinite=pa,jr.toInteger=ga,jr.toLength=_a,jr.toLower=function(e){return ba(e).toLowerCase()},jr.toNumber=ma,jr.toSafeInteger=function(e){return e?cn(ga(e),-9007199254740991,p):0===e?e:0},jr.toString=ba,jr.toUpper=function(e){return ba(e).toUpperCase()},jr.trim=function(e,t,r){if((e=ba(e))&&(r||t===i))return Jt(e);if(!e||!(t=ui(t)))return e;var n=pr(e),o=pr(t);return vi(n,rr(n,o),nr(n,o)+1).join("")},jr.trimEnd=function(e,t,r){if((e=ba(e))&&(r||t===i))return e.slice(0,gr(e)+1);if(!e||!(t=ui(t)))return e;var n=pr(e);return vi(n,0,nr(n,pr(t))+1).join("")},jr.trimStart=function(e,t,r){if((e=ba(e))&&(r||t===i))return e.replace(se,"");if(!e||!(t=ui(t)))return e;var n=pr(e);return vi(n,rr(n,pr(t))).join("")},jr.truncate=function(e,t){var r=30,n="...";if(ta(t)){var o="separator"in t?t.separator:o;r="length"in t?ga(t.length):r,n="omission"in t?ui(t.omission):n}var s=(e=ba(e)).length;if(ar(e)){var a=pr(e);s=a.length}if(r>=s)return e;var c=r-fr(n);if(c<1)return n;var l=a?vi(a,0,c).join(""):e.slice(0,c);if(o===i)return l+n;if(a&&(c+=l.length-c),sa(o)){if(e.slice(c).search(o)){var u,h=l;for(o.global||(o=Re(o.source,ba(ge.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;l=l.slice(0,d===i?c:d)}}else if(e.indexOf(ui(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+n},jr.unescape=function(e){return(e=ba(e))&&z.test(e)?e.replace(V,_r):e},jr.uniqueId=function(e){var t=++De;return ba(e)+t},jr.upperCase=za,jr.upperFirst=Xa,jr.each=bs,jr.eachRight=ws,jr.first=Go,cc(jr,(vc={},An(jr,(function(e,t){Me.call(jr.prototype,t)||(vc[t]=e)})),vc),{chain:!1}),jr.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){jr[e].placeholder=jr})),Tt(["drop","take"],(function(e,t){Qr.prototype[e]=function(r){r=r===i?1:yr(ga(r),0);var n=this.__filtered__&&!t?new Qr(this):this.clone();return n.__filtered__?n.__takeCount__=br(r,n.__takeCount__):n.__views__.push({size:br(r,_),type:e+(n.__dir__<0?"Right":"")}),n},Qr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Qr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Tt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Qr.prototype[e]=function(){return this[r](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Qr.prototype[e]=function(){return this.__filtered__?new Qr(this):this[r](1)}})),Qr.prototype.compact=function(){return this.filter(ic)},Qr.prototype.find=function(e){return this.filter(e).head()},Qr.prototype.findLast=function(e){return this.reverse().find(e)},Qr.prototype.invokeMap=Xn((function(e,t){return"function"==typeof e?new Qr(this):this.map((function(r){return On(r,e,t)}))})),Qr.prototype.reject=function(e){return this.filter(Ms(lo(e)))},Qr.prototype.slice=function(e,t){e=ga(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Qr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=ga(t))<0?r.dropRight(-t):r.take(t-e)),r)},Qr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Qr.prototype.toArray=function(){return this.take(_)},An(Qr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=jr[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(jr.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof Qr,l=a[0],u=c||Ks(t),h=function(e){var t=o.apply(jr,Mt([e],a));return n&&d?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,g=c&&!f;if(!s&&u){t=g?t:new Qr(this);var _=e.apply(t,a);return _.__actions__.push({func:ps,args:[h],thisArg:i}),new $r(_,d)}return p&&g?e.apply(this,a):(_=this.thru(h),p?n?_.value()[0]:_.value():_)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Oe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);jr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Ks(i)?i:[],e)}return this[r]((function(r){return t.apply(Ks(r)?r:[],e)}))}})),An(Qr.prototype,(function(e,t){var r=jr[t];if(r){var n=r.name+"";Me.call(Or,n)||(Or[n]=[]),Or[n].push({name:t,func:r})}})),Or[Hi(i,2).name]=[{name:"wrapper",func:i}],Qr.prototype.clone=function(){var e=new Qr(this.__wrapped__);return e.__actions__=Bi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bi(this.__views__),e},Qr.prototype.reverse=function(){if(this.__filtered__){var e=new Qr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Qr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ks(e),n=t<0,i=r?e.length:0,o=function(e,t,r){var n=-1,i=r.length;for(;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=br(t,e+s);break;case"takeRight":e=yr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,l=n?a:s-1,u=this.__iteratees__,h=u.length,d=0,f=br(c,this.__takeCount__);if(!r||!n&&i==c&&f==c)return gi(e,this.__actions__);var p=[];e:for(;c--&&d<f;){for(var g=-1,_=e[l+=t];++g<h;){var m=u[g],y=m.iteratee,b=m.type,w=y(_);if(2==b)_=w;else if(!w){if(1==b)continue e;break e}}p[d++]=_}return p},jr.prototype.at=gs,jr.prototype.chain=function(){return fs(this)},jr.prototype.commit=function(){return new $r(this.value(),this.__chain__)},jr.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},jr.prototype.plant=function(e){for(var t,r=this;r instanceof Wr;){var n=jo(r);n.__index__=0,n.__values__=i,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},jr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Qr){var t=e;return this.__actions__.length&&(t=new Qr(this)),(t=t.reverse()).__actions__.push({func:ps,args:[ts],thisArg:i}),new $r(t,this.__chain__)}return this.thru(ts)},jr.prototype.toJSON=jr.prototype.valueOf=jr.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},jr.prototype.first=jr.prototype.head,Je&&(jr.prototype[Je]=function(){return this}),jr}();gt._=mr,(n=function(){return mr}.call(t,r,t,e))===i||(e.exports=n)}.call(this)},7882:(e,t,r)=>{"use strict";const{PassThrough:n}=r(2203);e.exports=function(){var e=[],t=new n({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=function(){return 0==e.length},t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),t;function r(n){return Array.isArray(n)?(n.forEach(r),this):(e.push(n),n.once("end",i.bind(null,n)),n.once("error",t.emit.bind(t,"error")),n.pipe(t,{end:!1}),this)}function i(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}},4865:e=>{"use strict";const t=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};e.exports=t,e.exports.default=t},326:(e,t,r)=>{const n=r(4434),i=r(6928),{fork:o}=r(5317),s=r(2587);e.exports=class extends n{constructor(e,t,r){super(),r||(r={scheduled:!0,recoverMissedExecutions:!1}),this.cronExpression=e,this.taskPath=t,this.options=r,this.options.name=this.options.name||s.v4(),r.scheduled&&this.start()}start(){this.stop(),this.forkProcess=o("node_modules/node-cron/src/background-scheduled-task/daemon.js"),this.forkProcess.on("message",(e=>{if("task-done"===e.type)this.emit("task-done",e.result)}));let e=this.options;e.scheduled=!0,this.forkProcess.send({type:"register",path:i.resolve(this.taskPath),cron:this.cronExpression,options:e})}stop(){this.forkProcess&&this.forkProcess.kill()}pid(){if(this.forkProcess)return this.forkProcess.pid}isRunning(){return!this.forkProcess.killed}}},3901:e=>{"use strict";e.exports=(()=>{function e(e,t){return-1!==e.indexOf("*")?e.replace("*",t):e}return function(t){return t[0]=e(t[0],"0-59"),t[1]=e(t[1],"0-59"),t[2]=e(t[2],"0-23"),t[3]=e(t[3],"1-31"),t[4]=e(t[4],"1-12"),t[5]=e(t[5],"0-6"),t}})()},2462:(e,t,r)=>{"use strict";const n=r(2370),i=r(7619),o=r(3901),s=r(8504),a=r(6802);e.exports=function(e){let t=(r=e,r.replace(/\s{2,}/g," ").trim()).split(" ");var r;return t=function(e){return 5===e.length?["0"].concat(e):e}(t),t[4]=n(t[4]),t[5]=i(t[5]),t=o(t),t=s(t),t=a(t),t=function(e){for(let t=0;t<e.length;t++){const r=e[t].split(",");for(let e=0;e<r.length;e++)r[e]=parseInt(r[e]);e[t]=r}return e}(t),t.join(" ")}},2370:e=>{"use strict";e.exports=(()=>{const e=["january","february","march","april","may","june","july","august","september","october","november","december"],t=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function r(e,t){for(let r=0;r<t.length;r++)e=e.replace(new RegExp(t[r],"gi"),parseInt(r,10)+1);return e}return function(n){return n=r(n,e),n=r(n,t)}})()},8504:e=>{"use strict";e.exports=(()=>{function e(e,t,r,n){const i=[];let o=parseInt(n),s=parseInt(r);s>o&&(o=parseInt(r),s=parseInt(n));for(let e=s;e<=o;e++)i.push(e);return e.replace(new RegExp(t,"i"),i.join())}function t(t){const r=/(\d+)-(\d+)/;let n=r.exec(t);for(;null!==n&&n.length>0;)t=e(t,n[0],n[1],n[2]),n=r.exec(t);return t}return function(e){for(let r=0;r<e.length;r++)e[r]=t(e[r]);return e}})()},6802:e=>{"use strict";e.exports=function(e){for(var t=/^(.+)\/(\w+)$/,r=0;r<e.length;r++){var n=t.exec(e[r]);if(null!==n&&n.length>0){var i=n[2];if(isNaN(i))throw i+" is not a valid step value";for(var o=n[1].split(","),s=[],a=parseInt(i,10),c=0;c<=o.length;c++){var l=parseInt(o[c],10);l%a==0&&s.push(l)}e[r]=s.join(",")}}return e}},7619:e=>{"use strict";e.exports=(()=>{const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=["sun","mon","tue","wed","thu","fri","sat"];function r(e,t){for(let r=0;r<t.length;r++)e=e.replace(new RegExp(t[r],"gi"),parseInt(r,10));return e}return function(n){return n=r(n=n.replace("7","0"),e),r(n,t)}})()},8274:(e,t,r)=>{"use strict";const n=r(8758),i=r(326),o=r(499),s=r(6456);e.exports={schedule:function(e,t,r){const o=function(e,t,r){return"string"==typeof t?new i(e,t,r):new n(e,t,r)}(e,t,r);return s.save(o),o},validate:function(e){try{return o(e),!0}catch(e){return!1}},getTasks:function(){return s.getTasks()}}},499:(e,t,r)=>{"use strict";const n=r(2462),i=/^(?:\d+|\*|\*\/\d+)$/;function o(e,t,r){const n=e.split(",");for(const e of n){const n=parseInt(e,10);if(!Number.isNaN(n)&&(n<t||n>r)||!i.test(e))return!1}return!0}function s(e,t){if(!o(t[0],0,59))throw new Error(`${e[0]} is a invalid expression for second`);if(function(e){return!o(e,0,59)}(t[1]))throw new Error(`${e[1]} is a invalid expression for minute`);if(function(e){return!o(e,0,23)}(t[2]))throw new Error(`${e[2]} is a invalid expression for hour`);if(function(e){return!o(e,1,31)}(t[3]))throw new Error(`${e[3]} is a invalid expression for day of month`);if(function(e){return!o(e,1,12)}(t[4]))throw new Error(`${e[4]} is a invalid expression for month`);if(function(e){return!o(e,0,7)}(t[5]))throw new Error(`${e[5]} is a invalid expression for week day`)}e.exports=function(e){if("string"!=typeof e)throw new TypeError("pattern must be a string!");const t=e.split(" "),r=n(e).split(" ");5===t.length&&t.unshift("0"),s(t,r)}},8758:(e,t,r)=>{"use strict";const n=r(4434),i=r(5184),o=r(288),s=r(2587);e.exports=class extends n{constructor(e,t,r){super(),r||(r={scheduled:!0,recoverMissedExecutions:!1}),this.options=r,this.options.name=this.options.name||s.v4(),this._task=new i(t),this._scheduler=new o(e,r.timezone,r.recoverMissedExecutions),this._scheduler.on("scheduled-time-matched",(e=>{this.now(e)})),!1!==r.scheduled&&this._scheduler.start(),!0===r.runOnInit&&this.now("init")}now(e="manual"){let t=this._task.execute(e);this.emit("task-done",t)}start(){this._scheduler.start()}stop(){this._scheduler.stop()}}},288:(e,t,r)=>{"use strict";const n=r(4434),i=r(3979);e.exports=class extends n{constructor(e,t,r){super(),this.timeMatcher=new i(e,t),this.autorecover=r}start(){this.stop();let e=process.hrtime(),t=this.timeMatcher.apply(new Date);const r=()=>{const n=process.hrtime(e),i=(1e9*n[0]+n[1])/1e6;for(let e=Math.floor(i/1e3);e>=0;e--){const r=new Date((new Date).getTime()-1e3*e);let n=this.timeMatcher.apply(r);t.getTime()<n.getTime()&&(0===e||this.autorecover)&&this.timeMatcher.match(r)&&(this.emit("scheduled-time-matched",n),n.setMilliseconds(0),t=n)}e=process.hrtime(),this.timeout=setTimeout(r,1e3)};r()}stop(){this.timeout&&clearTimeout(this.timeout),this.timeout=null}}},6456:(e,t,r)=>{e.exports=(global.scheduledTasks||(global.scheduledTasks=new Map),{save:e=>{if(!e.options){const t=r(2587);e.options={},e.options.name=t.v4()}global.scheduledTasks.set(e.options.name,e)},getTasks:()=>global.scheduledTasks})},5184:(e,t,r)=>{"use strict";const n=r(4434);e.exports=class extends n{constructor(e){if(super(),"function"!=typeof e)throw"execution must be a function";this._execution=e}execute(e){let t;try{t=this._execution(e)}catch(e){return this.emit("task-failed",e)}return t instanceof Promise?t.then((()=>this.emit("task-finished"))).catch((e=>this.emit("task-failed",e))):(this.emit("task-finished"),t)}}},3979:(e,t,r)=>{const n=r(499),i=r(2462);function o(e,t){if(-1!==e.indexOf(",")){return-1!==e.split(",").indexOf(t.toString())}return e===t.toString()}e.exports=class{constructor(e,t){n(e),this.pattern=i(e),this.timezone=t,this.expressions=this.pattern.split(" "),this.dtf=this.timezone?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",fractionalSecondDigits:3,timeZone:this.timezone}):null}match(e){e=this.apply(e);const t=o(this.expressions[0],e.getSeconds()),r=o(this.expressions[1],e.getMinutes()),n=o(this.expressions[2],e.getHours()),i=o(this.expressions[3],e.getDate()),s=o(this.expressions[4],e.getMonth()+1),a=o(this.expressions[5],e.getDay());return t&&r&&n&&i&&s&&a}apply(e){return this.dtf?new Date(this.dtf.format(e)):e}}},9430:(e,t,r)=>{e=r.nmd(e);try{process.dlopen(e,"node_modules/cpu-features/build/Release"+r(6928).sep+r.p+"8c0ae41c234bc6fa1d5ddc8696893d19.node")}catch(e){throw new Error("node-loader:\n"+e)}},6677:(e,t,r)=>{e=r.nmd(e);try{process.dlopen(e,"node_modules/ssh2/lib/protocol/crypto/build/Release"+r(6928).sep+r.p+"ca32cdaa553b305eba2edbd47a587d1e.node")}catch(e){throw new Error("node-loader:\n"+e)}},4458:(e,t,r)=>{"use strict";const n=r(6928),i=r(9376),o=e=>{let t;e={cwd:process.cwd(),path:process.env[i()],execPath:process.execPath,...e};let r=n.resolve(e.cwd);const o=[];for(;t!==r;)o.push(n.join(r,"node_modules/.bin")),t=r,r=n.resolve(r,"..");const s=n.resolve(e.cwd,e.execPath,"..");return o.push(s),o.concat(e.path).join(n.delimiter)};e.exports=o,e.exports.default=o,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},n=i({env:r});return t.path=r[n],r[n]=e.exports(t),r}},6034:(e,t,r)=>{"use strict";const n=r(4865),i=new WeakMap,o=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,o=0;const s=e.displayName||e.name||"<anonymous>",a=function(...n){if(i.set(a,++o),1===o)r=e.apply(this,n),e=null;else if(!0===t.throw)throw new Error(`Function \`${s}\` can only be called once`);return r};return n(a,e),i.set(a,o),a};e.exports=o,e.exports.default=o,e.exports.callCount=e=>{if(!i.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return i.get(e)}},9376:e=>{"use strict";const t=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};e.exports=t,e.exports.default=t},1369:(e,t,r)=>{"use strict";var n=r(6310),i=r(5617),o=Object.prototype.hasOwnProperty;function s(e){return e&&"EPROMISERETRY"===e.code&&o.call(e,"retried")}e.exports=function(e,t){var r,o;return"object"==typeof e&&"function"==typeof t&&(r=t,t=e,e=r),o=i.operation(t),new Promise((function(t,r){o.attempt((function(i){Promise.resolve().then((function(){return e((function(e){throw s(e)&&(e=e.retried),n(new Error("Retrying"),"EPROMISERETRY",{retried:e})}),i)})).then(t,(function(e){s(e)&&(e=e.retried,o.retry(e||new Error))||r(e)}))}))}))}},113:e=>{"use strict";const t={};function r(e,r,n){n||(n=Error);class i extends n{constructor(e,t,n){super(function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(e,t,n))}}i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){let i;var o,s;let a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a=`The ${e} ${i} ${n(t,"type")}`;else{const r=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a=`The "${e}" ${r} ${i} ${n(t,"type")}`}return a+=". Received type "+typeof r,a}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},5382:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var i=r(5412),o=r(6708);r(2017)(l,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var c=s[a];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},3600:(e,t,r)=>{"use strict";e.exports=i;var n=r(4610);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(2017)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},5412:(e,t,r)=>{"use strict";var n;e.exports=S,S.ReadableState=E;r(4434).EventEmitter;var i=function(e,t){return e.listeners(t).length},o=r(1416),s=r(181).Buffer,a=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,l=r(9023);c=l&&l.debuglog?l.debuglog("stream"):function(){};var u,h,d,f=r(345),p=r(5896),g=r(5291).getHighWaterMark,_=r(113).F,m=_.ERR_INVALID_ARG_TYPE,y=_.ERR_STREAM_PUSH_AFTER_EOF,b=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2017)(S,o);var A=p.errorOrDestroy,v=["error","close","destroy","pause","resume"];function E(e,t,i){n=n||r(5382),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=r(3141).I),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function S(e){if(n=n||r(5382),!(this instanceof S))return new S(e);var t=this instanceof n;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function I(e,t,r,n,i){c("readableAddChunk",t);var o,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,B(e)))}(e,l);else if(i||(o=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof a||"string"==typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(l,t)),o)A(e,o);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)l.endEmitted?A(e,new w):k(e,l,t,!0);else if(l.ended)A(e,new y);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?k(e,l,t,!1):O(e,l)):k(e,l,t,!1)}else n||(l.reading=!1,O(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),O(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),I(this,e,t,!1,r)},S.prototype.unshift=function(e){return I(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){u||(u=r(3141).I);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(B,e))}function B(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function O(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function x(e){c("readable nexttick read 0"),e.read(0)}function L(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){A(this,new b("_read()"))},S.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,c("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:g;function s(t,i){c("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function a(){c("onend"),e.end()}n.endEmitted?process.nextTick(o):r.once("end",o),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",l);var u=!1;function h(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==j(n.pipes,e))&&!u&&(c("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===i(e,"error")&&A(e,t)}function f(){e.removeListener("finish",p),g()}function p(){c("onfinish"),e.removeListener("close",f),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",f),e.once("finish",p),e.emit("pipe",r),n.flowing||(c("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=j(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,c("on readable",n.length,n.reading),n.length?T(this):n.reading||process.nextTick(x,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(N,this),r},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(N,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(2955)),h(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=D,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===d&&(d=r(6532)),d(S,e,t)})},4610:(e,t,r)=>{"use strict";e.exports=u;var n=r(113).F,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(5382);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(2017)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},6708:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=S,S.WritableState=E;var o={deprecate:r(7983)},s=r(1416),a=r(181).Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,u=r(5896),h=r(5291).getHighWaterMark,d=r(113).F,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,_=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,y=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,A=u.errorOrDestroy;function v(){}function E(e,t,o){i=i||r(5382),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(B,e,t),e._writableState.errorEmitted=!0,A(e,n)):(i(n),e._writableState.errorEmitted=!0,A(e,n),B(e,t))}(e,r,n,t,i);else{var o=R(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),n?process.nextTick(k,e,r,o,i):k(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(e){var t=this instanceof(i=i||r(5382));if(!t&&!l.call(S,this))return new S(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function I(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function k(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),B(e,t)}function C(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)o[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;o.allBuffers=c,I(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,h=r.callback;if(I(e,t,!1,t.objectMode?1:l.length,l,u,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&A(e,r),t.prefinished=!0,e.emit("prefinish"),B(e,t)}))}function B(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2017)(S,s),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):l=function(e){return e instanceof this},S.prototype.pipe=function(){A(this,new _)},S.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,a.isBuffer(n)||n instanceof c);return s&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=v),i.ending?function(e,t){var r=new b;A(e,r),process.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i;return null===r?i=new y:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(A(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var c=t.objectMode?1:n.length;t.length+=c;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,c,n,i,o);return l}(this,i,s,e,t,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,B(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=u.destroy,S.prototype._undestroy=u.undestroy,S.prototype._destroy=function(e,t){t(e)}},2955:(e,t,r)=>{"use strict";var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(6238),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[u]=null,e[s]=null,e[a]=null,t(f(r,!1)))}}function g(e){process.nextTick(p,e)}var _=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(f(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(f(void 0,!0)):t[h](r,n)}),n)}}(n,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[h])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(f(void 0,!0))}))}))})),n),_);e.exports=function(e){var t,r=Object.create(m,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[d].read();n?(r[u]=null,r[s]=null,r[a]=null,e(f(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[u]=null,r[s]=null,r[a]=null,n(f(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},345:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=r(181).Buffer,l=r(9023).inspect,u=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n,i=c.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,c.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5896:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(r,o),i(e)):process.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},6238:(e,t,r)=>{"use strict";var n=r(113).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,h=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",d),t.on("finish",u),!1!==r.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)}}},6532:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(113).F.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,r){var a;if(t&&"function"==typeof t.next)a=t;else if(t&&t[Symbol.asyncIterator])a=t[Symbol.asyncIterator]();else{if(!t||!t[Symbol.iterator])throw new s("iterable",["Iterable"],t);a=t[Symbol.iterator]()}var c=new e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({objectMode:!0},r)),l=!1;function u(){return h.apply(this,arguments)}function h(){var e;return e=function*(){try{var e=yield a.next(),t=e.value;e.done?c.push(null):c.push(yield t)?u():l=!1}catch(e){c.destroy(e)}},h=function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))},h.apply(this,arguments)}return c._read=function(){l||(l=!0,u())},c}},7758:(e,t,r)=>{"use strict";var n;var i=r(113).F,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var u,h=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var d=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(6238)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,i>0,(function(e){u||(u=e),e&&d.forEach(c),o||(d.forEach(c),h(u))}))}));return t.reduce(l)}},5291:(e,t,r)=>{"use strict";var n=r(113).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},1416:(e,t,r)=>{e.exports=r(2203)},4198:(e,t,r)=>{var n=r(2203);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n.Readable,Object.assign(e.exports,n),e.exports.Stream=n):((t=e.exports=r(5412)).Stream=n||t,t.Readable=t,t.Writable=r(6708),t.Duplex=r(5382),t.Transform=r(4610),t.PassThrough=r(3600),t.finished=r(6238),t.pipeline=r(7758))},5617:(e,t,r)=>{e.exports=r(8303)},8303:(e,t,r)=>{var n=r(3961);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var o=0;o<n.length;o++){var s=n[o],a=e[s];e[s]=function(n){var i=t.operation(r),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){n.apply(e,o)}))}.bind(e,a),e[s].options=r}}},3961:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,i=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&i.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(e[o]||0)+1;e[o]=s,s>=r&&(t=i,r=s)}return t}},2861:(e,t,r)=>{var n=r(181),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},4774:(e,t,r)=>{"use strict";var n,i=r(181),o=i.Buffer,s={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=i[n]);var a=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=o[n]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&"undefined"==typeof e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,r)}),a.alloc||(a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=o(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},9687:(e,t,r)=>{"use strict";const n=r(2779),i=r(6928),o=/\//g,s=/(NT_STATUS_OBJECT_NAME_NOT_FOUND|NT_STATUS_NO_SUCH_FILE)/im,a=e=>Array.isArray(e)?e.map((e=>`"${e.replace(o,"\\")}"`)).join(" "):`"${e.replace(o,"\\")}"`;e.exports=class{constructor(e){this.address=e.address,this.username=e.username||"guest",this.password=e.password,this.domain=e.domain,this.port=e.port,this.directory=e.directory,this.timeout=e.timeout,this.maxProtocol=e.maxProtocol,this.maskCmd=Boolean(e.maskCmd)}async getFile(e,t,r){return await this.execute("get",`${a(e)} "${t}"`,r)}async sendFile(e,t){const r=i.dirname(e);return await this.execute("put",[i.basename(e),t],r)}async deleteFile(e){return await this.execute("del",[e],"")}async listFiles(e,t){try{const r=`${e}*${t}`,n=await this.execute("dir",r,""),i=[];for(let r of n.split("\n"))if(r=r.toString().trim(),r.startsWith(e)){const e=r.substring(0,r.indexOf(t)+t.length);i.push(e)}return i}catch(e){if(e.message.match(s))return[];throw e}}async mkdir(e,t){return await this.execute("mkdir",[e],t)}async dir(e,t){return await this.execute("dir",[e],t)}async fileExists(e,t){try{return await this.dir(e,t),!0}catch(e){if(e.message.match(s))return!1;throw e}}async cwd(){return(await this.execute("cd","","")).match(/\s.{2}\s(.+?)/)[1]}async list(e){const t=[],r=await this.dir(e);for(const e of r.matchAll(/\s*(.+?)\s{6,}([A-Z0-9]{1,2})\s+([0-9]+)\s{2}(.+)/g))t.push({name:e[1],type:e[2],size:parseInt(e[3]),modifyTime:new Date(e[4]+"Z")});return t}getSmbClientArgs(e,t){const r=[];this.username&&r.push("-U",this.username),this.password||r.push("-N");let n=t;return Array.isArray(t)&&(n=a(t)),r.push("-c",`${e} ${n}`,this.address),this.password&&r.push("--password",this.password),this.domain&&r.push("-W",this.domain),this.directory&&r.push("-D",this.directory),this.maxProtocol&&r.push("--max-protocol",this.maxProtocol),this.port&&r.push("-p",this.port),this.timeout&&r.push("-t",this.timeout),r}async execute(e,t,r){const i=this.getSmbClientArgs(e,t),o={all:!0,cwd:r||""};try{const{all:e}=await n("smbclient",i,o);return e}catch(e){throw this.maskCmd&&(e.message=e.all,e.shortMessage=e.all),e}}async getAllShares(){try{const{stdout:e}=await n("smbtree",["-U","guest","-N"],{all:!0}),t=[];for(const r in e.split(/\r?\n/)){const e=r.split(/\t/);e.length>2&&null!==e[2].match(/^\s*$/)&&t.append(e[2].trim())}return t}catch(e){throw this.maskCmd&&(e.message=e.all,e.shortMessage=e.all),e}}}},1395:(e,t,r)=>{"use strict";const n=r(7521);e.exports=(e="")=>{const t=e.match(n);if(!t)return null;const[r,i]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return"env"===o?i:i?`${o} ${i}`:o}},7521:e=>{"use strict";e.exports=/^#!(.*)/},4267:e=>{e.exports={errorCode:{generic:"ERR_GENERIC_CLIENT",connect:"ERR_NOT_CONNECTED",badPath:"ERR_BAD_PATH",permission:"EACCES",notexist:"ENOENT",notdir:"ENOTDIR",badAuth:"ERR_BAD_AUTH"},targetType:{writeFile:1,readFile:2,writeDir:3,readDir:4,readObj:5,writeObj:6}}},9706:(e,t,r)=>{"use strict";const{Client:n}=r(7649),i=r(3024),o=r(7520),s=r(1369),{join:a,parse:c}=r(6760),{globalListener:l,addTempListeners:u,removeTempListeners:h,haveConnection:d,normalizeRemotePath:f,localExists:p,haveLocalAccess:g,haveLocalCreate:_,partition:m}=r(9579),{errorCode:y}=r(4267);e.exports=class{constructor(e="sftp",t={error:e=>console.error(`Global error listener: ${e.message}`),end:()=>console.log("Global end listener: end event raised"),close:()=>console.log("Global close listener: close event raised")}){this.version="11.0.0",this.client=new n,this.sftp=void 0,this.clientName=e,this.endCalled=!1,this.errorHandled=!1,this.closeHandled=!1,this.endHandled=!1,this.remotePlatform="unix",this.debug=void 0,this.promiseLimit=10,this.eventCallbacks=t,this.client.on("close",l(this,"close",this.eventCallbacks)),this.client.on("end",l(this,"end",this.eventCallbacks)),this.client.on("error",l(this,"error",this.eventCallbacks))}debugMsg(e,t){this.debug&&(t?this.debug(`CLIENT[${this.clientName}]: ${e} ${JSON.stringify(t,null," ")}`):this.debug(`CLIENT[${this.clientName}]: ${e}`))}fmtError(e,t="sftp",r,n){let i="",o="";const s=n?` after ${n} ${n>1?"attempts":"attempt"}`:"";if(void 0===e)i=`${t}: Undefined error - probably a bug!`,o=y.generic;else if("string"==typeof e)i=`${t}: ${e}${s}`,o=r||y.generic;else if(e.custom)i=`${t}->${e.message}${s}`,o=e.code;else{switch(e.code){case"ENOTFOUND":i=`${t}: Address lookup failed for host${s}`;break;case"ECONNREFUSED":i=`${t}: Remote host refused connection${s}`;break;case"ECONNRESET":i=`${t}: Remote host has reset the connection: ${e.message}${s}`;break;default:i=`${t}: ${e.message}${s}`}o=e.code||y.generic}const a=new Error(i);return a.code=o,a.custom=!0,this.debugMsg(`${a.message} (${a.code})`),a}on(e,t){this.client.prependListener(e,t)}removeListener(e,t){this.client.removeListener(e,t)}_resetEventFlags(){this.closeHandled=!1,this.endHandled=!1,this.errorHandled=!1}getConnection(e){let t,r;return new Promise(((n,i)=>{r=u(this,"getConnection",i),t=()=>{n(!0)},this.on("ready",t);try{this.client.connect(e)}catch(e){i(e)}})).finally((()=>{this.removeListener("ready",t),h(this,r,"getConnection")}))}getSftpChannel(){return new Promise(((e,t)=>{this.client.sftp(((r,n)=>{r?t(this.fmtError(r,"getSftpChannel",r.code)):(this.sftp=n,e(n))}))}))}async connect(e){let t;try{if(t=u(this,"connect"),e.debug&&(this.debug=e.debug,this.debugMsg("connect: Debugging turned on"),this.debugMsg(`ssh2-sftp-client Version: ${this.version} `,process.versions)),this.promiseLimit=e.promiseLimit??10,this.sftp)throw this.fmtError("An existing SFTP connection is already defined","connect",y.connect);const r={retries:e.retries??1,factor:e.retry_factor??2,minTimeout:e.retry_minTimeout??25e3};await s(r,(async(t,r)=>{try{this.debugMsg(`connect: Connect attempt ${r}`),await this.getConnection(e)}catch(e){switch(e.code){case"ENOTFOUND":case"ECONNREFUSED":case"ERR_SOCKET_BAD_PORT":throw e;case void 0:if(e.message.endsWith("All configured authentication methods failed")||e.message.startsWith("Cannot parse privateKey"))throw e;t(e);break;default:t(e)}}}));const n=await this.getSftpChannel();return this.endCalled=!1,n}catch(e){throw this.end(),e.custom?e:this.fmtError(e,"connect")}finally{h(this,t,"connect")}}realPath(e,t=!0){let r;return new Promise(((n,i)=>{t&&(r=u(this,"realPath",i)),this.sftp.realpath(e,((t,r)=>{t&&(2===t.code?n(""):i(this.fmtError(`${t.message} ${e}`,"realPath",t.code))),n(r)}))})).finally((()=>{t&&h(this,r,"realPath")}))}cwd(){return this.realPath(".")}_xstat(e,t,r=!0){let n;return new Promise(((i,o)=>{const s=(e,r)=>{if(e)2===e.code||4===e.code?o(this.fmtError(`No such file: ${t}`,"_xstat",y.notexist)):o(this.fmtError(`${e.message} ${t}`,"_xstat",e.code));else{const e={mode:r.mode,uid:r.uid,gid:r.gid,size:r.size,accessTime:1e3*r.atime,modifyTime:1e3*r.mtime,isDirectory:r.isDirectory(),isFile:r.isFile(),isBlockDevice:r.isBlockDevice(),isCharacterDevice:r.isCharacterDevice(),isSymbolicLink:r.isSymbolicLink(),isFIFO:r.isFIFO(),isSocket:r.isSocket()};i(e)}};r&&(n=u(this,"_xstat",o)),"stat"===e?this.sftp.stat(t,s):this.sftp.lstat(t,s)})).finally((()=>{r&&h(this,n,"_xstat")}))}async stat(e){try{return d(this,"stat"),await this._xstat("stat",e)}catch(e){throw e.custom?e:this.fmtError(e,"stat",e.code)}}async lstat(e){try{return d(this,"lstat"),await this._xstat("lstat",e)}catch(e){throw e.custom?e:this.fmtError(e,"lstat",e.code)}}async exists(e){try{if("."===e)return"d";const t=await this.lstat(e);return t.isDirectory?"d":t.isSymbolicLink?"l":!!t.isFile&&"-"}catch(e){if(e.code===y.notexist)return!1;throw e.custom?e:this.fmtError(e.message,"exists",e.code)}}list(e,t,r=!0){let n;return new Promise(((i,o)=>{r&&(n=u(this,"list",o)),d(this,"list",o)&&this.sftp.readdir(e,((r,n)=>{if(r)o(this.fmtError(`${r.message} ${e}`,"list",r.code));else{const e=/-/gi,r=n.map((t=>({type:t.longname.slice(0,1),name:t.filename,size:t.attrs.size,modifyTime:1e3*t.attrs.mtime,accessTime:1e3*t.attrs.atime,rights:{user:t.longname.slice(1,4).replaceAll(e,""),group:t.longname.slice(4,7).replaceAll(e,""),other:t.longname.slice(7,10).replaceAll(e,"")},owner:t.attrs.uid,group:t.attrs.gid,longname:t.longname})));i(t?r.filter((e=>t(e))):r)}}))})).finally((()=>{r&&h(this,n,"list")}))}get(e,t,r,n=!0){let s,a,c;return new Promise(((l,h)=>{if(n&&(s=u(this,"get",h)),d(this,"get",h)){if(r={readStreamOptions:{...r?.readStreamOptions,autoClose:!0},writeStreamOptions:{...r?.writeStreamOptions,autoClose:!0},pipeOptions:{...r?.pipeOptions,end:!0}},a=this.sftp.createReadStream(e,r.readStreamOptions),a.once("error",(r=>{t&&"string"==typeof t&&c&&!c.destroyed&&c.destroy(),h(this.fmtError(`${r.message} ${e}`,"get",r.code))})),void 0===t)this.debugMsg("get resolving with buffer of data"),c=o((e=>{l(e)}));else if("string"==typeof t){this.debugMsg(`get called with file path destination ${t}`);const e=_(t);e.status?c=i.createWriteStream(t,r.writeStreamOptions):h(this.fmtError(`Bad path: ${t}: ${e.details}`,"get",e.code))}else this.debugMsg("get called with stream destination"),c=t;c.once("error",(e=>{h(this.fmtError(`${e.message} ${"string"==typeof t?t:"<stream>"}`,"get",e.code))})),a.once("end",(()=>{"string"==typeof t?l(t):void 0!==t&&l(c)})),a.pipe(c,r.pipeOptions)}})).finally((()=>{a&&!a.destroyed&&a.destroy(),n&&h(this,s,"get")}))}_fastGet(e,t,r,n=!0){let i;return new Promise(((o,s)=>{n&&(i=u(this,"_fastGet",s)),d(this,"_fastGet",s)&&this.sftp.fastGet(e,t,r,(r=>{r&&s(this.fmtError(`${r.message} Remote: ${e} Local: ${t}`)),o(`${e} was successfully download to ${t}!`)}))})).finally((()=>{n&&h(this,i,"_fastGet")}))}async fastGet(e,t,r){try{const n=await this.exists(e);if("-"!==n){const t=`${n?"Not a regular file":"No such file "} ${e}`;throw this.fmtError(t,"fastGet",y.badPath)}const i=_(t);if(!i.status)throw this.fmtError(`Bad path: ${t}: ${i.details}`,"fastGet",y.badPath);return await this._fastGet(e,t,r)}catch(e){throw this.fmtError(e,"fastGet")}}_fastPut(e,t,r,n=!0){let i;return new Promise(((o,s)=>{n&&(i=u(this,"_fastPut",s)),d(this,"_fastPut",s)&&this.sftp.fastPut(e,t,r,(r=>{r&&s(this.fmtError(`${r.message} Local: ${e} Remote: ${t}`,"fastPut",r.code)),o(`${e} was successfully uploaded to ${t}!`)}))})).finally((()=>{n&&h(this,i,"_fastPut")}))}async fastPut(e,t,r){try{const n=g(e);if(!n.status)throw this.fmtError(`Bad path: ${e}: ${n.details}`,"fastPut",n.code);if(n.status&&"d"===p(e))throw this.fmtError(`Bad path: ${e} not a regular file`,"fastgPut",y.badPath);return await this._fastPut(e,t,r)}catch(e){throw e.custom?e:this.fmtError(e.message,"fastPut",e.code)}}_put(e,t,r,n=!0){let o,s,a;return new Promise(((c,l)=>{n&&(o=u(this,"_put",l)),r={readStreamOptions:{...r?.readStreamOptions,autoClose:!0},writeStreamOptions:{...r?.writeStreamOptions,autoClose:!0},pipeOptions:{...r?.pipeOptions,end:!0}},d(this,"_put",l)&&(s=this.sftp.createWriteStream(t,r.writeStreamOptions),s.once("error",(r=>{"string"==typeof e&&a&&!a.destroyed&&a.destroy(),l(this.fmtError(`Write stream error: ${r.message} ${t}`,"_put",r.code))})),s.once("close",(()=>{c(`Uploaded data stream to ${t}`)})),e instanceof Buffer?(this.debugMsg("put source is a buffer"),s.end(e)):("string"==typeof e?(this.debugMsg("put source is string path"),a=i.createReadStream(e,r.readStreamOptions)):(this.debugMsg("put source is a stream"),a=e),a.once("error",(t=>{l(this.fmtError(`Read stream error: ${t.message} ${"string"==typeof e?e:"<stream>"}`,"_put",t.code))})),a.pipe(s,r.pipeOptions)))})).finally((()=>{s&&!s.destroyed&&s.destroy(),n&&h(this,o,"_put")}))}async put(e,t,r){try{if("string"==typeof e){const t=g(e);if(!t.status)throw this.fmtError(`Bad path: ${e} ${t.details}`,"put",t.code)}return await this._put(e,t,r)}catch(e){throw e.custom?e:this.fmtError(`Re-thrown: ${e.message}`,"put",e.code)}}_append(e,t,r,n=!0){let i;return new Promise(((o,s)=>{if(n&&(i=u(this,"_append",s)),d(this,"_append",s)){r.flags="a";const n=this.sftp.createWriteStream(t,r);n.on("error",(e=>{s(this.fmtError(`${e.message} ${t}`,"append",e.code))})),n.on("close",(()=>{o(`Appended data to ${t}`)})),e instanceof Buffer?(n.write(e),n.end()):e.pipe(n)}})).finally((()=>{n&&h(this,i,"_append")}))}async append(e,t,r={}){try{if("string"==typeof e)throw this.fmtError("Cannot append one file to another","append",y.badPath);const n=await this.exists(t);if(n&&"d"===n)throw this.fmtError(`Bad path: ${t}: cannot append to a directory`,"append",y.badPath);return await this._append(e,t,r)}catch(e){throw e.custom?e:this.fmtError(e.message,"append",e.code)}}_doMkdir(e,t=!0){let r;return new Promise(((n,i)=>{t&&(r=u(this,"_doMkdir",i)),this.sftp.mkdir(e,(t=>{t?4===t.code?i(this.fmtError(`Bad path: ${e} permission denied`,"_doMkdir",y.badPath)):2===t.code?i(this.fmtError(`Bad path: ${e} parent not a directory or not exist`,"_doMkdir",y.badPath)):i(this.fmtError(`${t.message} ${e}`,"_doMkdir",t.code)):n(`${e} directory created`)}))})).finally((()=>{t&&h(this,r,"_doMkdir")}))}async _mkdir(e,t){try{const r=await f(this,e),n=await this.exists(r);if(n&&"d"!==n)throw this.fmtError(`Bad path: ${r} already exists as a file`,"_mkdir",y.badPath);if(n)return`${r} already exists`;if(!t)return await this._doMkdir(r);const i=c(r).dir;if(i){const e=await this.exists(i);if(e){if("d"!==e)throw this.fmtError(`Bad path: ${i} not a directory`,"_mkdir",y.badPath)}else await this._mkdir(i,!0)}return await this._doMkdir(r)}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"_mkdir",t.code)}}async mkdir(e,t=!1){try{return d(this,"mkdir"),await this._mkdir(e,t)}catch(e){throw this.fmtError(`${e.message}`,"mkdir",e.code)}}async rmdir(e,t=!1){const r=e=>{let t;return new Promise(((r,n)=>{t=u(this,"_rmdir",n),this.sftp.rmdir(e,(t=>{t&&n(this.fmtError(`${t.message} ${e}`,"rmdir",t.code)),r("Successfully removed directory")}))})).finally((()=>{h(this,t,"_rmdir")}))},n=(e,t)=>{let r;return new Promise(((n,i)=>{r=u(this,"_delFiles",i);const o=[];for(const r of t)o.push(this.delete(`${e}/${r.name}`,!0,!1));n(o)})).then((e=>Promise.all(e))).finally((()=>{h(this,r,"_delFiles")}))};try{const i=await f(this,e),o=await this.exists(i);if(!o)throw this.fmtError(`Bad Path: ${e}: No such directory`,"rmdir",y.badPath);if("d"!==o)throw this.fmtError(`Bad Path: ${e}: Not a directory`,"rmdir",y.badPath);if(!t)return await r(i);const s=await this.list(i);if(!s.length)return await r(i);const a=s.filter((e=>"d"!==e.type)),c=s.filter((e=>"d"===e.type));await n(i,a);for(const e of c)await this.rmdir(`${i}/${e.name}`,!0);return await r(i),"Successfully removed directory"}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"rmdir",t.code)}}delete(e,t=!1,r=!0){let n;return new Promise(((i,o)=>{r&&(n=u(this,"delete",o)),this.sftp.unlink(e,(r=>{r&&(t&&2===r.code?i(`Successfully deleted ${e}`):o(this.fmtError(`${r.message} ${e}`,"delete",r.code))),i(`Successfully deleted ${e}`)}))})).finally((()=>{r&&h(this,n,"delete")}))}rename(e,t,r=!0){let n;return new Promise(((i,o)=>{r&&(n=u(this,"rename",o)),d(this,"rename",o)&&this.sftp.rename(e,t,(r=>{r&&o(this.fmtError(`${r.message} From: ${e} To: ${t}`,"_rename",r.code)),i(`Successfully renamed ${e} to ${t}`)}))})).finally((()=>{r&&h(this,n,"rename")}))}posixRename(e,t,r=!0){let n;return new Promise(((i,o)=>{r&&(n=u(this,"posixRename",o)),d(this,"posixRename",o)&&this.sftp.ext_openssh_rename(e,t,(r=>{r&&o(this.fmtError(`${r.message} From: ${e} To: ${t}`,"_posixRename",r.code)),i(`Successful POSIX rename ${e} to ${t}`)}))})).finally((()=>{h(this,n,"posixRename")}))}chmod(e,t,r=!0){let n;return new Promise(((i,o)=>{r&&(n=u(this,"chmod",o)),d(this,"chmod",o)&&this.sftp.chmod(e,t,(t=>{t&&o(this.fmtError(`${t.message} ${e}`,"_chmod",t.code)),i("Successfully change file mode")}))})).finally((()=>{r&&h(this,n,"chmod")}))}async uploadDir(e,t,r){const n=async e=>{const t=await f(this,e),r=await this.exists(t);if(r&&"d"!==r)throw this.fmtError(`Bad path ${t} Not a directory`,"getRemoteStatus",y.badPath);return{remoteDir:t,remoteStatus:r}},o=e=>{const t=p(e);if(!t)throw this.fmtError(`Bad path: ${e} not exist`,"getLocalStatus",y.badPath);if("d"!==t)throw this.fmtError(`Bad path: ${e}: not a directory`,"getLocalStatus",y.badPath);return t},s=async(e,t,r,n)=>{let i=u(this,"uploadFiles");try{const i=[];for(const n of r){const r=a(e,n.name),o=`${t}/${n.name}`;i.push([r,o])}const o=m(i,this.promiseLimit),s=n?this._fastPut.bind(this):this._put.bind(this),c=[];for(const e of o){const t=[];for(const[r,n]of e)t.push(s(r,n,null,!1)),this.client.emit("upload",{source:r,destination:n});const r=await Promise.all(t);for(const e of r)c.push(e)}return c}catch(r){throw this.fmtError(`${r.message} ${e} to ${t}`,"uploadFiles",r.code)}finally{h(this,i,s)}};try{d(this,"uploadDir");const{remoteDir:c,remoteStatus:l}=await n(t);o(e),l||await this._mkdir(c,!0);let u=i.readdirSync(e,{encoding:"utf8",withFileTypes:!0});r?.filter&&(u=u.filter((t=>r.filter(a(e,t.name),t.isDirectory()))));const h=u.filter((e=>e.isDirectory())),f=u.filter((e=>!e.isDirectory()));await s(e,c,f,r?.useFastput);for(const t of h){const n=a(e,t.name),i=`${c}/${t.name}`;await this.uploadDir(n,i,r)}return`${e} uploaded to ${t}`}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"uploadDir",t.code)}}async downloadDir(e,t,r={filter:null,useFastget:!1}){const n=async(e,t)=>{try{const r=await this.list(e);return t?r.filter((r=>t(`${e}/${r.name}`,"d"===r.type))):r}catch(e){throw e.custom?e:this.fmtError(e.message,"_getDownloadList",e.code)}},o=e=>{try{const r=_(e);if(!r.status&&"permission denied"===r.details)throw this.fmtError(`Bad path: ${e}: ${r.details}`,"prepareDestination",r.code);if(r.status&&!r.type)i.mkdirSync(e,{recursive:!0});else if(r.status&&"d"!==r.type)throw this.fmtError(`Bad path: ${t}: not a directory`,"_prepareDestination",y.badPath)}catch(e){throw e.custom?e:this.fmtError(e.message,"_prepareDestination",e.code)}},s=async(r,n,i,o)=>{let s=u(this,"downloadFIles");try{const e=[];for(const t of i){const i=`${r}/${t.name}`,o=a(n,t.name);e.push([i,o])}const t=m(e,this.promiseLimit),s=o?this._fastGet.bind(this):this.get.bind(this),c=[];for(const e of t){const t=[];for(const[r,n]of e)t.push(s(r,n,null,!1)),this.client.emit("download",{source:r,destination:n});const r=await Promise.all(t);for(const e of r)c.push(e)}return c}catch(r){throw this.fmtError(`${r.message} ${e} to ${t}`,"downloadFiles",r.code)}finally{h(this,s,"downloadFiles")}};try{d(this,"downloadDir");const i=await n(e,r.filter);o(t);const c=i.filter((e=>"d"!==e.type));c.length&&await s(e,t,c,r.useFastget);const l=i.filter((e=>"d"===e.type));for(const n of l){const i=`${e}/${n.name}`,o=a(t,n.name);await this.downloadDir(i,o,r)}return`${e} downloaded to ${t}`}catch(t){throw t.custom?t:this.fmtError(`${t.message}: ${e}`,"downloadDir",t.code)}}createReadStream(e,t){let r;try{r=u(this,"createReadStream"),d(this,"createReadStream");return this.sftp.createReadStream(e,t)}catch(e){throw e.custom?e:this.fmtError(e.message,"createReadStream",e.code)}finally{h(this,r,"createReadStreame")}}createWriteStream(e,t){let r;try{r=u(this,"createWriteStream"),d(this,"createWriteStream");return this.sftp.createWriteStream(e,t)}catch(e){throw e.custom?e:this.fmtError(e.message,"createWriteStream",e.code)}finally{h(this,r,"createWriteStream")}}_rcopy(e,t){return new Promise(((r,n)=>{const i=this.sftp.createWriteStream(t),o=this.sftp.createReadStream(e);i.on("error",(e=>{n(this.fmtError(`${e.message} ${t}`,"_rcopy"))})),o.on("error",(t=>{n(this.fmtError(`${t.message} ${e}`,"_rcopy"))})),i.on("close",(()=>{r(`${e} copied to ${t}`)})),o.pipe(i)}))}async rcopy(e,t){let r;try{r=u(this,"rcopy"),d(this,"rcopy");const n=await f(this,e),i=await this.exists(n);if(!i)throw this.fmtError(`Source does not exist ${n}`,"rcopy",y.badPath);if("-"!==i)throw this.fmtError(`Source not a file ${n}`,"rcopy",y.badPath);const o=await f(this,t);if(await this.exists(o))throw this.fmtError(`Destination already exists ${o}`,"rcopy",y.badPath);return this._rcopy(n,o)}catch(e){throw e.custom?e:this.fmtError(e,"rcopy")}finally{h(this,r,"rcopy")}}end(){let e,t;return new Promise(((r,n)=>{t=u(this,"end",n),this.endCalled=!0,e=()=>{this.sftp=void 0,this.debugMsg("end: Connection closed"),r(!0)},this.on("close",e),this.sftp?(this.debugMsg("end: Ending SFTP connection"),this.client.end()):(this.debugMsg("end: Called when no connection active"),r(!0))})).finally((()=>{h(this,t,"end"),this.removeListener("close",e)}))}}},9579:(e,t,r)=>{const{statSync:n,constants:i,accessSync:o}=r(3024),{dirname:s}=r(6760),{errorCode:a}=r(4267);function c(e){return!!(e.errorHandled||e.endHandled||e.closeHandled)}function l(e,t,r){return function(n){if(c(e))return void e.debugMsg(`${t} errorListener - ignoring handled error ${n.message}`);e.debugMsg(`${t} errorListener - handling error ${n.message}`),e.errorHandled=!0;const i=new Error(`${t}: ${n.message}`);if(i.code=n.code,!r)throw i;r(i)}}function u(e,t,r){return function(){if(e.sftp=void 0,e.endCalled||c(e))return void e.debugMsg(`${t} endListener - ignoring handled end event`);e.endHandled=!0,e.debugMsg(`${t} endListener - handling unexpected end event`);const n=new Error(`${t}: Unexpected end event`);if(n.code=a.ERR_GENERIC_CLIENT,!r)throw n;r(n)}}function h(e,t,r){return function(){if(e.sftp=void 0,e.endCalled||c(e))return void e.debugMsg(`${t} closeListener - ignoring handled close event`);e.closeHandled=!0,e.debugMsg(`${t} closeListener - handling unexpected close event`);const n=new Error(`${t}: Unexpected close event`);if(n.code=a.ERR_GENERIC_CLIENT,!r)throw n;r(n)}}function d(e){const t=n(e,{throwIfNoEntry:!1});if(t){if(t.isDirectory())return"d";if(t.isFile())return"-";{const t=new Error(`Bad path: ${e}: target must be a file or directory`);throw t.code=a.badPath,t}}return!1}function f(e,t="r"){const r=i.F_OK|"w"===t?i.W_OK:i.R_OK;try{o(e,r);return{status:!0,type:d(e),details:"access OK",code:0}}catch(t){switch(t.errno){case-2:return{status:!1,type:null,details:"not exist",code:-2};case-13:return{status:!1,type:d(e),details:"permission denied",code:-13};case-20:return{status:!1,type:null,details:"parent not a directory"};default:return{status:!1,type:null,details:t.message}}}}e.exports={globalListener:function(e,t,r){return"error"===t?t=>{e.errorHandled?e.debugMsg(`Global error event: Ignoring handled error ${t.message}`):(e.debugMsg(`Global error event: ${t.message}`),e.errorHandled=!0,r?.error&&r.error(t))}:"end"===t?()=>{e.endCalled||e.endHandled?e.debugMsg("Global end event: Ignoring handled end event"):(e.debugMsg("Global end event: Handling end event"),e.endHandled=!0,r?.end&&r.end())}:()=>{e.endCalled||e.closeHandled?e.debugMsg("Global close event: Ignoring handled close event"):(e.debugMsg("Global close event: Handling close event"),e.closeHandled=!0,e.sftp=void 0,r?.close&&r.close())}},errorListener:l,endListener:u,closeListener:h,addTempListeners:function(e,t,r){const n={end:u(e,t,r),close:h(e,t,r),error:l(e,t,r)};return e.on("end",n.end),e.on("close",n.close),e.on("error",n.error),e._resetEventFlags(),n},removeTempListeners:function(e,t,r){try{e.removeListener("end",t.end),e.removeListener("close",t.close),e.removeListener("error",t.error)}catch(e){throw new Error(`${r}: Error removing temp listeners: ${e.message}`)}},haveLocalAccess:f,haveLocalCreate:function(e){const{status:t,details:r,type:n}=f(e,"w");if(!t){if("permission denied"===r)return{status:t,details:r,type:n};const i=s(e),o=f(i,"w");return o.status?"d"!==o.type?{status:!1,details:`${i}: not a directory`,type:null}:{status:!0,details:"access OK",type:null,code:0}:{status:o.status,details:`${i}: ${o.details}`,type:null}}return{status:t,details:r,type:n}},normalizeRemotePath:async function(e,t){try{if(t.startsWith("..")){return`${await e.realPath("..")}/${t.slice(3)}`}if(t.startsWith(".")){return`${await e.realPath(".")}/${t.slice(2)}`}return t}catch(e){throw new Error(`normalizeRemotePath: ${e.message}`)}},localExists:d,haveConnection:function(e,t,r){if(!e.sftp){const e=new Error(`${t}: No SFTP connection available`);if(e.code=a.connect,r)return r(e),!1;throw e}return!0},sleep:function(e){return new Promise(((t,r)=>{try{Number.isNaN(Number.parseInt(e))||e<0?r("Argument must be a number >= 0"):setTimeout((()=>{t(!0)}),e)}catch(e){r(e)}}))},partition:function(e,t){let r=[];if(t<1)throw new Error("Partition size must be greater than zero");for(let n=0;n<e.length;n+=t)r[r.length]=e.slice(n,n+t);return r}}},7838:(e,t,r)=>{"use strict";const{Duplex:n,Readable:i,Writable:o}=r(2203),{CHANNEL_EXTENDED_DATATYPE:{STDERR:s}}=r(2535),{bufferSlice:a}=r(5623),c=2097152,l=1048576;class u extends i{constructor(e,t){super(t),this._channel=e}_read(e){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=l&&p(this._channel))}}class h extends o{constructor(e){super({highWaterMark:c}),this._channel=e}_write(e,t,r){const n=this._channel,i=n._client._protocol,o=n.outgoing,c=o.packetSize,l=o.id;let u=o.window;const h=e.length;let d=0;if("open"===o.state){for(;h-d>0&&u>0;){let t=h-d;t>u&&(t=u),t>c&&(t=c),0===d&&t===h?i.channelExtData(l,e,s):i.channelExtData(l,a(e,d,d+t),s),d+=t,u-=t}if(o.window=u,h-d>0)return 0===u&&(n._waitWindow=!0),n._chunkErr=d>0?a(e,d,h):e,void(n._chunkcbErr=r);r()}}}function d(){this.eof(),!this.server&&this.allowHalfOpen||this.close(),this.writable=!1}function f(){this.readable=!1}function p(e){if("closed"===e.outgoing.state)return;const t=c-e.incoming.window;t<=0||(e.incoming.window+=t,e._client._protocol.channelWindowAdjust(e.outgoing.id,t))}e.exports={Channel:class extends n{constructor(e,t,r){const n={highWaterMark:c,allowHalfOpen:!r||r&&!1!==r.allowHalfOpen,emitClose:!1};super(n),this.allowHalfOpen=n.allowHalfOpen;const i=!(!r||!r.server);this.server=i,this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this._callbacks=[],this._client=e,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,this.stderr=i?new h(this):new u(this,n),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",d).on("prefinish",d),this.on("end",f).on("close",f)}_read(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=l&&p(this))}_write(e,t,r){const n=this._client._protocol,i=this.outgoing,o=i.packetSize,s=i.id;let c=i.window;const l=e.length;let u=0;if("open"===i.state){for(;l-u>0&&c>0;){let t=l-u;t>c&&(t=c),t>o&&(t=o),0===u&&t===l?n.channelData(s,e):n.channelData(s,a(e,u,u+t)),u+=t,c-=t}if(i.window=c,l-u>0)return 0===c&&(this._waitWindow=!0),this._chunk=u>0?a(e,u,l):e,void(this._chunkcb=r);r()}}eof(){"open"===this.outgoing.state&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");"session"!==this.type||"shell"!==this.subtype&&"exec"!==this.subtype||!this.writable||"open"!==this.outgoing.state||this._client._protocol.windowChange(this.outgoing.id,e,t,r,n)}signal(e){if(this.server)throw new Error("Client-only method called in server mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&this._client._protocol.signal(this.outgoing.id,e)}exit(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&("number"==typeof e?this._client._protocol.exitStatus(this.outgoing.id,e):this._client._protocol.exitSignal(this.outgoing.id,e,t,r))}},MAX_WINDOW:c,PACKET_SIZE:32768,windowAdjust:p,WINDOW_THRESHOLD:l}},7852:(e,t,r)=>{"use strict";const{Socket:n}=r(9278),{Duplex:i}=r(2203),{resolve:o}=r(6928),{readFile:s}=r(9896),{execFile:a,spawn:c}=r(5317),{isParsedKey:l,parseKey:u}=r(8946),{makeBufferParser:h,readUInt32BE:d,writeUInt32BE:f,writeUInt32LE:p}=r(5623);function g(e){let t=!1;return(...r)=>{t||(t=!0,e(...r))}}function _(){}const m=Buffer.alloc(0),y=h();class b{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,t,r,n){"function"==typeof r&&(n=r),n(new Error("Missing sign() implementation"))}}class w extends b{constructor(e){super(),this.socketPath=e}getStream(e){e=g(e);const t=new n;function r(){try{t.destroy()}catch{}e(new Error("Failed to connect to agent"))}t.on("connect",(()=>{e(null,t)})),t.on("close",r).on("end",r).on("error",r),t.connect(this.socketPath)}getIdentities(e){e=g(e),this.getStream(((t,r)=>{function n(t){if(r)try{r.destroy()}catch{}t||(t=new Error("Failed to retrieve identities from agent")),e(t)}if(t)return n(t);const i=new I(!0);i.on("error",n),i.pipe(r).pipe(i),r.on("close",n).on("end",n).on("error",n),i.getIdentities(((t,i)=>{if(t)return n(t);try{r.destroy()}catch{}e(null,i)}))}))}sign(e,t,r,n){"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0),n=g(n),this.getStream(((i,o)=>{function s(e){if(o)try{o.destroy()}catch{}e||(e=new Error("Failed to sign data with agent")),n(e)}if(i)return s(i);const a=new I(!0);a.on("error",s),a.pipe(o).pipe(a),o.on("close",s).on("end",s).on("error",s),a.sign(e,t,r,((e,t)=>{if(e)return s(e);try{o.destroy()}catch{}n(null,t)}))}))}}const A=(()=>{const e=10,t=11,r=12,n=13,s=14,a=15,l=o("node_modules/ssh2/lib","..","util/pagent.exe"),u={[e]:new Error("Invalid pagent.exe arguments"),[t]:new Error("Pageant is not running"),[r]:new Error("pagent.exe could not create an mmap"),[n]:new Error("pagent.exe could not set mode for stdin"),[s]:new Error("pagent.exe could not set mode for stdout"),[a]:new Error("pagent.exe did not get expected input payload")};function h(e){e.buffer=null,e.proc&&(e.proc.kill(),e.proc=void 0)}class f extends i{constructor(){super(),this.proc=void 0,this.buffer=null}_read(e){}_write(e,t,r){if(null===this.buffer)this.buffer=e;else{const t=Buffer.allocUnsafe(this.buffer.length+e.length);this.buffer.copy(t,0),e.copy(t,this.buffer.length),this.buffer=t}if(this.buffer.length<4)return r();const n=d(this.buffer,0);if(this.buffer.length-4<n)return r();if(e=this.buffer.slice(0,4+n),this.buffer.length>4+n)return r(new Error("Unexpected multiple agent requests"));let i;this.buffer=null;const o=this.proc=c(l,[e.length]);o.stdout.on("data",(e=>{this.push(e)})),o.on("error",(e=>{i=e,r(i)})),o.on("close",(e=>{if(this.proc=void 0,!i){if(i=u[e])return r(i);r()}})),o.stdin.end(e)}_final(e){h(this),e()}_destroy(e,t){h(this),t()}}return class extends w{getStream(e){e(null,new f)}}})(),v=(()=>{const e=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends w{getStream(t){t=g(t);let r=this.socketPath,i=!1;s(r,(function o(c,l){if(c)return i?t(new Error("Invalid cygwin unix socket path")):void a("cygpath",["-w",r],((e,n,a)=>{if(e||0===n.length)return t(new Error("Invalid cygwin unix socket path"));i=!0,r=n.toString().replace(/[\r\n]/g,""),s(r,o)}));const u=e.exec(l.toString("ascii"));if(!u)return t(new Error("Malformed cygwin unix socket file"));let h,f=0,g=!1;const _=[];let m,y=Buffer.alloc(12);const b=parseInt(u[1],10),w=u[2].replace(/-/g,""),A=Buffer.allocUnsafe(16);for(let e=0,t=0;t<32;++e,t+=2)A[e]=parseInt(w.substring(t,t+2),16);for(let e=0;e<16;e+=4)p(A,d(A,e),e);function v(){f=0,h="secret",m.write(A)}function E(e){if(f+=e.length,"secret"!==h){if("creds"===h&&(g||_.push(e),12===f)){if(m.removeListener("connect",v),m.removeListener("data",E),m.removeListener("error",S),m.removeListener("end",S),m.removeListener("close",S),g)return t(null,m);g=!0,y=Buffer.concat(_),p(y,process.pid,0),m.on("error",(()=>{})),m.destroy(),I()}}else 16===f&&(f=0,h="creds",m.write(y))}function S(){t(new Error("Problem negotiating cygwin unix socket security"))}function I(){m=new n,m.on("connect",v),m.on("data",E),m.on("error",S),m.on("end",S),m.on("close",S),m.connect(b)}I()}))}}})(),E=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function S(e){return"win32"!==process.platform||E.test(e)?new w(e):"pageant"===e?new A:new v(e)}const I=(()=>{const e=Symbol("Inbound Request Type"),t=Symbol("Inbound Request Response"),r=Symbol("Inbound Request Context");class n{constructor(n,i){this[e]=n,this[t]=void 0,this[r]=i}hasResponded(){return void 0!==this[t]}getType(){return this[e]}getContext(){return this[r]}}function o(e,r,n){return r[t]=n,function(e){let r;for(;e[h].length;){const n=e[h][0][t];if(void 0===n)break;e[h].shift(),r=e.push(n)}return r}(e)}function s(e){if(e[g]=null,0===e[p]){const t=e[h];if(t&&t.length){e[h]=[];for(const e of t)e.cb(new Error("No reply from server"))}}try{e.end()}catch{}setImmediate((()=>{e[A]||e.emit("end"),e[w]||e.emit("close")}))}function a(){this[w]=!0}function c(){this[A]=!0}const h=Symbol("Requests"),p=Symbol("Agent Protocol Role"),g=Symbol("Agent Protocol Buffer"),b=Symbol("Agent Protocol Current Message Length"),w=Symbol("Agent Protocol Closed"),A=Symbol("Agent Protocol Ended");return class extends i{constructor(e){super({autoDestroy:!0,emitClose:!1}),this[p]=e?0:1,this[h]=[],this[g]=null,this[b]=-1,this.once("end",c),this.once("close",a)}_read(e){}_write(e,t,r){null===this[g]?this[g]=e:this[g]=function(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}(this[g],e);let i=this[g],o=i.length,s=0;for(;s<o&&!(o<5)&&(-1===this[b]&&(this[b]=d(i,s)),!(o<4+this[b]));){const e=i[s+=4];if(++s,0===this[p]){if(0===this[h].length)return r(new Error("Received unexpected message from server"));const t=this[h].shift();switch(e){case 5:t.cb(new Error("Agent responded with failure"));break;case 12:{if(11!==t.type)return r(new Error("Agent responded with wrong message type"));y.init(i,s);const e=y.readUInt32BE();if(void 0===e)return y.clear(),r(new Error("Malformed agent response"));const n=[];for(let t=0;t<e;++t){let e=y.readString();if(void 0===e)return y.clear(),r(new Error("Malformed agent response"));const t=y.readString(!0);if(void 0===t)return y.clear(),r(new Error("Malformed agent response"));e=u(e),e instanceof Error||(e.comment=e.comment||t,n.push(e))}s=y.pos(),y.clear(),t.cb(null,n);break}case 14:{if(13!==t.type)return r(new Error("Agent responded with wrong message type"));y.init(i,s);let e=y.readString();if(s=y.pos(),y.clear(),void 0===e)return r(new Error("Malformed agent response"));if(y.init(e,0),y.readString(!0),e=y.readString(),y.clear(),void 0===e)return r(new Error("Malformed OpenSSH signature format"));t.cb(null,e);break}default:return r(new Error("Agent responded with unsupported message type"))}}else switch(e){case 11:{const t=new n(e);this[h].push(t),this.emit("identities",t);break}case 13:{y.init(i,s);let t=y.readString();const r=y.readString(),o=y.readUInt32BE();if(s=y.pos(),y.clear(),void 0===o){const t=new n(e);return this[h].push(t),this.failureReply(t)}if(t=u(t),t instanceof Error){const t=new n(e);return this[h].push(t),this.failureReply(t)}const a={hash:void 0};let c;"ssh-rsa"===t.type&&(2&o?(c="rsa-sha2-256",a.hash="sha256"):4&o&&(c="rsa-sha2-512",a.hash="sha512")),void 0===c&&(c=t.type);const l=new n(e,c);this[h].push(l),this.emit("sign",l,t,r,a);break}default:{const t=new n(e);this[h].push(t),this.failureReply(t)}}if(this[b]=-1,s===o){this[g]=null;break}this[g]=i=i.slice(s),o=i.length,s=0}r()}_destroy(e,t){s(this),t()}_final(e){s(this),e()}sign(e,t,r,n){if(0!==this[p])throw new Error("Client-only method called with server role");"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0);let i=0;if((e=u(e))instanceof Error)throw new Error("Invalid public key argument");if("ssh-rsa"===e.type&&r)switch(r.hash){case"sha256":i=2;break;case"sha512":i=4}const o=(e=e.getPublicSSH()).length,s=t.length;let a=0;const c=Buffer.allocUnsafe(9+o+4+s+4);return f(c,c.length-4,a),c[a+=4]=13,f(c,o,++a),e.copy(c,a+=4),f(c,s,a+=o),t.copy(c,a+=4),f(c,i,a+=s),"function"!=typeof n&&(n=_),this[h].push({type:13,cb:n}),this.push(c)}getIdentities(e){if(0!==this[p])throw new Error("Client-only method called with server role");let t=0;const r=Buffer.allocUnsafe(5);return f(r,r.length-4,t),r[t+=4]=11,"function"!=typeof e&&(e=_),this[h].push({type:11,cb:e}),this.push(r)}failureReply(e){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;let t=0;const r=Buffer.allocUnsafe(5);return f(r,r.length-4,t),r[t+=4]=5,o(this,e,r)}getIdentitiesReply(e,t){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(11!==e.getType())throw new Error("Invalid response to request");if(!Array.isArray(t))throw new Error("Keys argument must be an array");let r=4;const i=[];for(let e=0;e<t.length;++e){const n=t[e];if("object"!=typeof n||null===n)throw new Error(`Invalid key entry: ${n}`);let o,s;if(l(n))o=n;else if(l(n.pubKey))o=n.pubKey;else{if("object"!=typeof n.pubKey||null===n.pubKey)continue;if(({pubKey:o,comment:s}=n.pubKey),o=u(o),o instanceof Error)continue}s=o.comment||s,o=o.getPublicSSH(),r+=4+o.length,s&&"string"==typeof s?s=Buffer.from(s):Buffer.isBuffer(s)||(s=m),r+=4+s.length,i.push({pubKey:o,comment:s})}let s=0;const a=Buffer.allocUnsafe(5+r);f(a,a.length-4,s),a[s+=4]=12,f(a,i.length,++s),s+=4;for(let e=0;e<i.length;++e){const{pubKey:t,comment:r}=i[e];f(a,t.length,s),t.copy(a,s+=4),f(a,r.length,s+=t.length),s+=4,r.length&&(r.copy(a,s),s+=r.length)}return o(this,e,a)}signReply(e,t){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(13!==e.getType())throw new Error("Invalid response to request");if(!Buffer.isBuffer(t))throw new Error("Signature argument must be a Buffer");if(0===t.length)throw new Error("Signature argument must be non-empty");let r=0;const i=e.getContext(),s=Buffer.byteLength(i),a=Buffer.allocUnsafe(13+s+4+t.length);return f(a,a.length-4,r),a[r+=4]=14,f(a,4+s+4+t.length,++r),f(a,s,r+=4),a.utf8Write(i,r+=4,s),f(a,t.length,r+=s),t.copy(a,r+=4),o(this,e,a)}}})(),k=Symbol("Agent"),C=Symbol("Agent Keys"),R=Symbol("Agent Keys Index"),T=Symbol("Agent Init Callbacks");function B(e){return e instanceof b}e.exports={AgentContext:class{constructor(e){if("string"==typeof e)e=S(e);else if(!B(e))throw new Error("Invalid agent argument");this[k]=e,this[C]=null,this[R]=-1,this[T]=null}init(e){if("function"!=typeof e&&(e=_),null===this[C])if(null===this[T]){this[T]=[e];const t=(...e)=>{process.nextTick((()=>{const t=this[T];this[T]=null;for(const r of t)r(...e)}))};this[k].getIdentities(g(((e,r)=>{if(e)return t(e);if(!Array.isArray(r))return t(new Error("Agent implementation failed to provide keys"));const n=[];for(let e of r)e=u(e),e instanceof Error||n.push(e);this[C]=n,this[R]=-1,t()})))}else this[T].push(e);else process.nextTick(e)}nextKey(){return!(null===this[C]||++this[R]>=this[C].length)&&this[C][this[R]]}currentKey(){return null===this[C]||this[R]>=this[C].length?null:this[C][this[R]]}pos(){return null===this[C]||this[R]>=this[C].length?-1:this[R]}reset(){this[R]=-1}sign(...e){this[k].sign(...e)}},AgentProtocol:I,BaseAgent:b,createAgent:S,CygwinAgent:v,isAgent:B,OpenSSHAgent:w,PageantAgent:A}},1818:(e,t,r)=>{"use strict";const{createHash:n,getHashes:i,randomFillSync:o}=r(6982),{Socket:s}=r(9278),{lookup:a}=r(2250),c=r(4434),l=i(),{COMPAT:u,CHANNEL_EXTENDED_DATATYPE:{STDERR:h},CHANNEL_OPEN_FAILURE:d,DEFAULT_CIPHER:f,DEFAULT_COMPRESSION:p,DEFAULT_KEX:g,DEFAULT_MAC:_,DEFAULT_SERVER_HOST_KEY:m,DISCONNECT_REASON:y,DISCONNECT_REASON_BY_VALUE:b,SUPPORTED_CIPHER:w,SUPPORTED_COMPRESSION:A,SUPPORTED_KEX:v,SUPPORTED_MAC:E,SUPPORTED_SERVER_HOST_KEY:S}=r(2535),{init:I}=r(7785),k=r(6008),{parseKey:C}=r(8946),{SFTP:R}=r(4261),{bufferCopy:T,makeBufferParser:B,makeError:O,readUInt32BE:P,sigSSHToASN1:N,writeUInt32BE:x}=r(5623),{AgentContext:L,createAgent:M,isAgent:D}=r(7852),{Channel:U,MAX_WINDOW:F,PACKET_SIZE:j,windowAdjust:H,WINDOW_THRESHOLD:W}=r(7838),{ChannelManager:$,generateAlgorithmList:Q,isWritable:K,onChannelOpenFailure:q,onCHANNEL_CLOSE:G}=r(9100),V=B(),Y=B(),z=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,X=e=>{};function J(e,t,r,n){const i=F,o=j;"function"==typeof r&&(n=r,r={});const s=(e,t)=>{n(e,t)};s.type=t;const a=e._chanMgr.add(s);if(-1!==a)switch(t){case"session":case"sftp":e._protocol.session(a,i,o);break;case"direct-tcpip":e._protocol.directTcpip(a,i,o,r);break;case"direct-streamlocal@openssh.com":e._protocol.openssh_directStreamLocal(a,i,o,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else n(new Error("No free channels available"))}function Z(e,t,r){const n={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("boolean"==typeof t.single&&(n.single=t.single),"number"==typeof t.screen&&(n.screen=t.screen),"string"==typeof t.protocol&&(n.protocol=t.protocol),"string"==typeof t.cookie?n.cookie=t.cookie:Buffer.isBuffer(t.cookie)&&(n.cookie=t.cookie.hexSlice(0,t.cookie.length))),void 0===n.cookie&&(n.cookie=ie());const i="function"==typeof r;"open"===e.outgoing.state?(i&&e._callbacks.push((t=>{t?r(!0!==t?t:new Error("Unable to request X11")):(e._hasX11=!0,++e._client._acceptX11,e.once("close",(()=>{e._client._acceptX11&&--e._client._acceptX11})),r())})),e._client._protocol.x11Forward(e.outgoing.id,n,i)):i&&r(new Error("Channel is not open"))}function ee(e,t,r){let n=24,i=80,o=640,s=480,a="vt100",c=null;"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("number"==typeof t.rows&&(n=t.rows),"number"==typeof t.cols&&(i=t.cols),"number"==typeof t.width&&(o=t.width),"number"==typeof t.height&&(s=t.height),"string"==typeof t.term&&(a=t.term),"object"==typeof t.modes&&(c=t.modes));const l="function"==typeof r;"open"===e.outgoing.state?(l&&e._callbacks.push((e=>{e?r(!0!==e?e:new Error("Unable to request a pseudo-terminal")):r()})),e._client._protocol.pty(e.outgoing.id,n,i,s,o,a,c,l)):l&&r(new Error("Channel is not open"))}function te(e,t){const r="function"==typeof t;"open"===e.outgoing.state?e._client._agentFwdEnabled?r&&t(!1):(e._client._agentFwdEnabled=!0,e._callbacks.push((n=>{if(n)return e._client._agentFwdEnabled=!1,void(r&&t(!0!==n?n:new Error("Unable to request agent forwarding")));r&&t()})),e._client._protocol.openssh_agentForward(e.outgoing.id,!0)):r&&t(new Error("Channel is not open"))}function re(e,t){if("open"!==e.outgoing.state)return;const r=Object.keys(t||{});for(let n=0;n<r.length;++n){const i=r[n],o=t[i];e._client._protocol.env(e.outgoing.id,i,o,!1)}}function ne(e,t,r){"open"===e.outgoing.state?(e._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to start subsystem: ${t}`)):(e.subtype="subsystem",r(void 0,e))})),e._client._protocol.subsystem(e.outgoing.id,t,!0)):r(new Error("Channel is not open"))}const ie=(()=>{const e=Buffer.allocUnsafe(16);return()=>(o(e,0,16),e.hexSlice(0,16))})();function oe(e){if(!Array.isArray(e))throw new Error("authList must be an array");let t=0;return(r,n,i)=>t!==e.length&&e[t++]}function se(e,t,r){if("ssh-rsa"===t.type){if(e._protocol._compatFlags&u.IMPLY_RSA_SHA2_SIGALGS&&(r=Array.isArray(r)?["rsa-sha2-256","rsa-sha2-512",...r]:["rsa-sha2-256","rsa-sha2-512"]),Array.isArray(r)){if(-1!==r.indexOf("rsa-sha2-256"))return[["rsa-sha2-256","sha256"]];if(-1!==r.indexOf("rsa-sha2-512"))return[["rsa-sha2-512","sha512"]];if(-1===r.indexOf("ssh-rsa"))return[]}return[["ssh-rsa","sha1"]]}}e.exports=class extends c{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(e){if(this._sock&&K(this._sock))return this.once("close",(()=>{this.connect(e)})),this.end(),this;this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress="string"==typeof e.localAddress?e.localAddress:void 0,this.config.localPort="string"==typeof e.localPort||"number"==typeof e.localPort?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax="number"==typeof e.keepaliveCountMax&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval="number"==typeof e.keepaliveInterval&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout="number"==typeof e.readyTimeout&&e.readyTimeout>=0?e.readyTimeout:2e4,this.config.ident="string"==typeof e.ident||Buffer.isBuffer(e.ident)?e.ident:void 0;const t={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0};let r=!0;if("object"==typeof e.algorithms&&null!==e.algorithms&&(t.kex=Q(e.algorithms.kex,g,v),t.kex!==g&&(r=!1),t.serverHostKey=Q(e.algorithms.serverHostKey,m,S),t.serverHostKey!==m&&(r=!1),t.cs.cipher=Q(e.algorithms.cipher,f,w),t.cs.cipher!==f&&(r=!1),t.cs.mac=Q(e.algorithms.hmac,_,E),t.cs.mac!==_&&(r=!1),t.cs.compress=Q(e.algorithms.compress,p,A),t.cs.compress!==p&&(r=!1),r||(t.sc=t.cs)),"string"==typeof e.username)this.config.username=e.username;else{if("string"!=typeof e.user)throw new Error("Invalid username");this.config.username=e.user}this.config.password="string"==typeof e.password?e.password:void 0,this.config.privateKey="string"==typeof e.privateKey||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname="string"==typeof e.localHostname?e.localHostname:void 0,this.config.localUsername="string"==typeof e.localUsername?e.localUsername:void 0,this.config.tryKeyboard=!0===e.tryKeyboard,"string"==typeof e.agent&&e.agent.length?this.config.agent=M(e.agent):D(e.agent)?this.config.agent=e.agent:this.config.agent=void 0,this.config.allowAgentFwd=!0===e.agentForward&&void 0!==this.config.agent;let i=this.config.authHandler="function"==typeof e.authHandler||Array.isArray(e.authHandler)?e.authHandler:void 0;this.config.strictVendor="boolean"!=typeof e.strictVendor||e.strictVendor;const o=this.config.debug="function"==typeof e.debug?e.debug:void 0;if(!0===e.agentForward&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let c,u,B=this._callbacks=[];if(this._chanMgr=new $(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0,this.config.privateKey){if(c=C(this.config.privateKey,e.passphrase),c instanceof Error)throw new Error(`Cannot parse privateKey: ${c.message}`);if(Array.isArray(c)&&(c=c[0]),null===c.getPrivatePEM())throw new Error("privateKey value does not contain a (valid) private key")}if("function"==typeof e.hostVerifier){const t=e.hostVerifier;let r;-1!==l.indexOf(e.hostHash)&&(r=e.hostHash),u=(e,i)=>{r&&(e=n(r).update(e).digest("hex"));const o=t(e,i);void 0!==o&&i(o)}}const P=this._sock=e.sock||new s;let J=!1,Z=!1;this._protocol&&this._protocol.cleanup();const ee=o?(e,t,r)=>{o(`Debug output from server: ${JSON.stringify(r)}`)}:void 0;let te;const re=this._protocol=new k({ident:this.config.ident,offer:r?void 0:t,onWrite:e=>{K(P)&&P.write(e)},onError:e=>{"handshake"===e.level&&clearTimeout(this._readyTimeout),re._destruct||P.removeAllListeners("data"),this.emit("error",e);try{P.end()}catch{}},onHeader:e=>{Z=!0,this._remoteVer=e.versions.software,e.greeting&&this.emit("greeting",e.greeting)},onHandshakeComplete:e=>{this.emit("handshake",e),J||(J=!0,re.service("ssh-userauth"))},debug:o,hostVerifier:u,messageHandlers:{DEBUG:ee,DISCONNECT:(e,t,r)=>{if(t!==y.BY_APPLICATION){r||void 0===(r=b[t])&&(r=`Unexpected disconnection reason: ${t}`);const e=new Error(r);e.code=t,this.emit("error",e)}P.end()},SERVICE_ACCEPT:(e,t)=>{"ssh-userauth"===t&&Ae()},EXT_INFO:(e,t)=>{if(void 0===te){for(const e of t)if("server-sig-algs"===e.name)return void(te=e.algs);te=null}},USERAUTH_BANNER:(e,t)=>{this.emit("banner",t)},USERAUTH_SUCCESS:e=>{ue(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(e,t,r)=>{if(fe.keyAlgos){const e=fe.keyAlgos[0][0];if(o&&o(`Client: ${fe.type} (${e}) auth failed`),fe.keyAlgos.shift(),fe.keyAlgos.length){const[e,t]=fe.keyAlgos[0];switch(fe.type){case"agent":return void re.authPK(fe.username,fe.agentCtx.currentKey(),e);case"publickey":return void re.authPK(fe.username,fe.key,e);case"hostbased":return void re.authHostbased(fe.username,fe.key,fe.localHostname,fe.localUsername,e,((e,r)=>{const n=fe.key.sign(e,t);if(n instanceof Error)return n.message=`Error while signing with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),Ae();r(n)}))}}else fe.keyAlgos=void 0}if("agent"===fe.type){const e=fe.agentCtx.pos();return o&&o(`Client: Agent key #${e+1} failed`),ve()}o&&o(`Client: ${fe.type} auth failed`),ge=r,_e=t,Ae()},USERAUTH_PASSWD_CHANGEREQ:(e,t)=>{"password"===fe.type&&this.emit("change password",t,(e=>{re.authPassword(this.config.username,this.config.password,e)}))},USERAUTH_PK_OK:e=>{let t,r;if(fe.keyAlgos&&([t,r]=fe.keyAlgos[0]),"agent"===fe.type){const e=fe.agentCtx.currentKey();re.authPK(fe.username,e,t,((t,n)=>{const i={hash:r};fe.agentCtx.sign(e,t,i,((e,t)=>{if(!e)return n(t);e.level="agent",this.emit("error",e),ve()}))}))}else"publickey"===fe.type&&re.authPK(fe.username,fe.key,t,((e,t)=>{const n=fe.key.sign(e,r);if(n instanceof Error)return n.message=`Error signing data with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),Ae();t(n)}))},USERAUTH_INFO_REQUEST:(e,t,r,n)=>{if("keyboard-interactive"===fe.type){if(0===(Array.isArray(n)?n.length:0))return o&&o("Client: Sending automatic USERAUTH_INFO_RESPONSE"),void re.authInfoRes();fe.prompt(t,r,"",n,(e=>{re.authInfoRes(e)}))}},REQUEST_SUCCESS:(e,t)=>{B.length&&B.shift()(!1,t)},REQUEST_FAILURE:e=>{B.length&&B.shift()(!0)},GLOBAL_REQUEST:(e,t,r,n)=>{if("hostkeys-00@openssh.com"===t)!function(e,t,r){if(!e._sock||!K(e._sock))return;"function"!=typeof r&&(r=X);if(!Array.isArray(t))throw new TypeError("Invalid keys argument type");const n=[];for(const e of t){const t=C(e);if(t instanceof Error)throw t;n.push(t)}if(!e.config.strictVendor||e.config.strictVendor&&z.test(e._remoteVer))return e._callbacks.push(((t,i)=>{if(t)return void r(!0!==t?t:new Error("Server failed to prove supplied keys"));const o=[];let s=0;for(V.init(i,0);V.avail()&&s!==n.length;){const t=n[s++],r=t.getPublicSSH(),i=V.readString();Y.init(i,0);const a=Y.readString(!0);let c,l=Y.readString();if(a!==t.type){if("ssh-rsa"!==t.type)continue;switch(a){case"rsa-sha2-256":c="sha256";break;case"rsa-sha2-512":c="sha512";break;default:continue}}const u=e._protocol._kex.sessionID,h=Buffer.allocUnsafe(37+u.length+4+r.length);let d=0;x(h,29,d),h.utf8Write("hostkeys-prove-00@openssh.com",d+=4,29),x(h,u.length,d+=29),T(u,h,0,u.length,d+=4),x(h,r.length,d+=u.length),T(r,h,0,r.length,d+=4),(l=N(l,a))&&!0===t.verify(h,l,c)&&o.push(t)}Y.clear(),V.clear(),r(null,o)})),void e._protocol.openssh_hostKeysProve(n);process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}(this,n,((e,t)=>{e||this.emit("hostkeys",t)})),r&&re.requestSuccess();else r&&re.requestFailure()},CHANNEL_OPEN:(e,t)=>{!function(e,t){let r,n=-1;const i=()=>{const r={type:t.type,incoming:{id:n,window:F,packetSize:j,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},i=new U(e,r);return e._chanMgr.update(n,i),e._protocol.channelOpenConfirm(t.sender,n,F,j),i},o=()=>{void 0===r&&(r=-1===n?d.RESOURCE_SHORTAGE:d.CONNECT_FAILED),-1!==n&&e._chanMgr.remove(n),e._protocol.channelOpenFail(t.sender,r,"")},s=()=>(n=e._chanMgr.add(),-1===n&&(r=d.RESOURCE_SHORTAGE,e.config.debug&&e.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),-1!==n),a=t.data;switch(t.type){case"forwarded-tcpip":{const t=e._forwarding[`${a.destIP}:${a.destPort}`];if(void 0!==t&&s())return 0===a.destPort&&(a.destPort=t),void e.emit("tcp connection",a,i,o);break}case"forwarded-streamlocal@openssh.com":if(void 0!==e._forwardingUnix[a.socketPath]&&s())return void e.emit("unix connection",a,i,o);break;case"auth-agent@openssh.com":if(e._agentFwdEnabled&&"function"==typeof e._agent.getStream&&s())return void e._agent.getStream(((e,t)=>{if(e)return o();const r=i();r.pipe(t).pipe(r)}));break;case"x11":if(0!==e._acceptX11&&s())return void e.emit("x11",a,i,o);break;default:r=d.UNKNOWN_CHANNEL_TYPE,e.config.debug&&e.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=d.ADMINISTRATIVELY_PROHIBITED,e.config.debug&&e.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+t.type));o()}(this,t)},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const n="sftp"===r.type,i={type:n?"session":r.type,incoming:{id:t.recipient,window:F,packetSize:j,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},s=n?new R(this,i,{debug:o}):new U(this,i);this._chanMgr.update(t.recipient,s),r(void 0,s)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const i=this._chanMgr.get(t);if("function"!=typeof i)return;q(this,t,{reason:r,description:n},i)},CHANNEL_DATA:(e,t,r)=>{const n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=W&&H(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{if(n!==h)return;const i=this._chanMgr.get(t);"object"==typeof i&&null!==i&&0!==i.incoming.window&&(i.incoming.window-=r.length,i.stderr.push(r)?i.incoming.window<=W&&H(i):i._waitChanDrain=!0)},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{const n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!1))},CHANNEL_FAILURE:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!0))},CHANNEL_REQUEST:(e,t,r,n,i)=>{const o=this._chanMgr.get(t);if("object"!=typeof o||null===o)return;const s=o._exit;if(void 0===s.code){switch(r){case"exit-status":return void o.emit("exit",s.code=i);case"exit-signal":return void o.emit("exit",s.code=null,s.signal=`SIG${i.signal}`,s.dump=i.coreDumped,s.desc=i.errorMessage)}n&&e.channelFailure(o.outgoing.id)}},CHANNEL_EOF:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null),r.stderr.readable&&r.stderr.push(null))},CHANNEL_CLOSE:(e,t)=>{G(this,t,this._chanMgr.get(t))}}});P.pause();const ne=this.config.keepaliveInterval,ie=this.config.keepaliveCountMax;let ae,ce=0;const le=()=>{if(++ce>ie){if(clearInterval(ae),P.readable){const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),P.destroy()}}else K(P)?(B.push(ue),re.ping()):clearInterval(ae)};function ue(){ne>0&&(ce=0,clearInterval(ae),K(P)&&(ae=setInterval(le,ne)))}this._resetKA=ue;const he=(()=>{let e=!1;return()=>{if(!e&&(e=!0,pe&&!Z)){const e=O("Connection lost before handshake","protocol",!0);this.emit("error",e)}}})(),de=(()=>{let e=!1;return()=>{e||(e=!0,pe=!0,o&&o("Socket connected"),this.emit("connect"),I.then((()=>{re.start(),P.on("data",(e=>{try{re.parse(e,0,e.length)}catch(e){this.emit("error",e);try{K(P)&&P.end()}catch{}}})),P.stderr&&"function"==typeof P.stderr.resume&&P.stderr.resume(),P.resume()})).catch((e=>{this.emit("error",e);try{K(P)&&P.end()}catch{}})))}})();let fe,pe=!1;P.on("connect",de).on("timeout",(()=>{this.emit("timeout")})).on("error",(e=>{o&&o(`Socket error: ${e.message}`),clearTimeout(this._readyTimeout),e.level="client-socket",this.emit("error",e)})).on("end",(()=>{o&&o("Socket ended"),he(),re.cleanup(),clearTimeout(this._readyTimeout),clearInterval(ae),this.emit("end")})).on("close",(()=>{o&&o("Socket closed"),he(),re.cleanup(),clearTimeout(this._readyTimeout),clearInterval(ae),this.emit("close");const e=B;B=this._callbacks=[];const t=new Error("No response from server");for(let r=0;r<e.length;++r)e[r](t);this._chanMgr.cleanup(t)}));let ge=null,_e=null;const me=["none"];void 0!==this.config.password&&me.push("password"),void 0!==c&&me.push("publickey"),void 0!==this._agent&&me.push("agent"),this.config.tryKeyboard&&me.push("keyboard-interactive"),void 0!==c&&void 0!==this.config.localHostname&&void 0!==this.config.localUsername&&me.push("hostbased"),Array.isArray(i)?i=oe(i):"function"!=typeof i&&(i=oe(me));let ye=!1;const be=e=>{if(!ye){if(ye=!0,!1===e){const e=new Error("All configured authentication methods failed");return e.level="client-authentication",this.emit("error",e),void this.end()}if("string"==typeof e){const t=e;if(-1===me.indexOf(t))return we(`Authentication method not allowed: ${t}`);const r=this.config.username;switch(t){case"password":e={type:t,username:r,password:this.config.password};break;case"publickey":e={type:t,username:r,key:c};break;case"hostbased":e={type:t,username:r,key:c,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":e={type:t,username:r,agentCtx:new L(this._agent)};break;case"keyboard-interactive":e={type:t,username:r,prompt:(...e)=>this.emit("keyboard-interactive",...e)};break;case"none":e={type:t,username:r};break;default:return we(`Skipping unsupported authentication method: ${e}`)}}else{if("object"!=typeof e||null===e)return we(`Skipping invalid authentication attempt: ${e}`);{const t=e.username;if("string"!=typeof t)return we(`Skipping invalid authentication attempt: ${e}`);const r=e.type;switch(r){case"password":{const{password:n}=e;if("string"!=typeof n&&!Buffer.isBuffer(n))return we("Skipping invalid password auth attempt");e={type:r,username:t,password:n};break}case"publickey":{const n=C(e.key,e.passphrase);if(n instanceof Error)return we("Skipping invalid key auth attempt");if(!n.isPrivateKey())return we("Skipping non-private key");e={type:r,username:t,key:n};break}case"hostbased":{const{localHostname:n,localUsername:i}=e,o=C(e.key,e.passphrase);if(o instanceof Error||"string"!=typeof n||"string"!=typeof i)return we("Skipping invalid hostbased auth attempt");if(!o.isPrivateKey())return we("Skipping non-private key");e={type:r,username:t,key:o,localHostname:n,localUsername:i};break}case"agent":{let n=e.agent;if("string"==typeof n&&n.length)n=M(n);else if(!D(n))return we(`Skipping invalid agent: ${e.agent}`);e={type:r,username:t,agentCtx:new L(n)};break}case"keyboard-interactive":{const{prompt:n}=e;if("function"!=typeof n)return we("Skipping invalid keyboard-interactive auth attempt");e={type:r,username:t,prompt:n};break}case"none":e={type:r,username:t};break;default:return we(`Skipping unsupported authentication method: ${e}`)}}}fe=e;try{const e=fe.username;switch(fe.type){case"password":re.authPassword(e,fe.password);break;case"publickey":{let t;if(fe.keyAlgos=se(this,fe.key,te),fe.keyAlgos){if(!fe.keyAlgos.length)return we("Skipping key authentication (no mutual hash algorithm)");t=fe.keyAlgos[0][0]}re.authPK(e,fe.key,t);break}case"hostbased":{let t,r;if(fe.keyAlgos=se(this,fe.key,te),fe.keyAlgos){if(!fe.keyAlgos.length)return we("Skipping hostbased authentication (no mutual hash algorithm)");[t,r]=fe.keyAlgos[0]}re.authHostbased(e,fe.key,fe.localHostname,fe.localUsername,t,((e,t)=>{const n=fe.key.sign(e,r);if(n instanceof Error)return n.message=`Error while signing with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),Ae();t(n)}));break}case"agent":fe.agentCtx.init((e=>{if(e)return e.level="agent",this.emit("error",e),Ae();ve()}));break;case"keyboard-interactive":re.authKeyboard(e);break;case"none":re.authNone(e)}}finally{ye=!1}}};function we(e){o&&o(e),process.nextTick(Ae)}function Ae(){ye=!1;const e=i(_e,ge,be);ye||void 0===e||be(e)}const ve=()=>{if("agent"===fe.type){const e=fe.agentCtx.nextKey();if(!1===e)o&&o("Agent: No more keys left to try"),o&&o("Client: agent auth failed"),Ae();else{const t=fe.agentCtx.pos();let r;if(fe.keyAlgos=se(this,e,te),fe.keyAlgos){if(!fe.keyAlgos.length)return o&&o(`Agent: Skipping key #${t+1} (no mutual hash algorithm)`),void ve();r=fe.keyAlgos[0][0]}o&&o(`Agent: Trying key #${t+1}`),re.authPK(fe.username,e,r)}}},Ee=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout((()=>{const e=new Error("Timed out while waiting for handshake");e.level="client-timeout",this.emit("error",e),P.destroy()}),this.config.readyTimeout))};if(e.sock)Ee(),"boolean"==typeof P.connecting&&P.connecting||de();else{let t=this.config.host;const r=this.config.forceIPv4,n=this.config.forceIPv6;o&&o(`Client: Trying ${t} on port ${this.config.port} ...`);const i=()=>{Ee(),P.connect({host:t,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),P.setMaxListeners(0),P.setTimeout("number"==typeof e.timeout?e.timeout:0)};!r&&!n||r&&n?i():a(t,r?4:6,((e,n,o)=>{if(e){const n=new Error(`Error while looking up ${r?"IPv4":"IPv6"} address for '${t}': ${e}`);return clearTimeout(this._readyTimeout),n.level="client-dns",this.emit("error",n),void this.emit("close")}t=n,i()}))}return this}end(){return this._sock&&K(this._sock)&&(this._protocol.disconnect(y.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&K(this._sock)&&this._sock.destroy(),this}exec(e,t,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");"function"==typeof t&&(r=t,t={});return J(this,"session",{allowHalfOpen:!1!==t.allowHalfOpen},((n,i)=>{if(n)return void r(n);const o=[];function s(e){if(e)return i.close(),void r(e);o.length&&o.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&o.push((()=>te(i,s))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&re(i,t.env),("object"==typeof t.pty&&null!==t.pty||!0===t.pty)&&o.push((()=>ee(i,t.pty,s))),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&o.push((()=>Z(i,t.x11,s)))),o.push((()=>function(e,t,r,n){if("open"!==e.outgoing.state)return void n(new Error("Channel is not open"));e._callbacks.push((t=>{t?n(!0!==t?t:new Error("Unable to exec")):(e.subtype="exec",e.allowHalfOpen=!1!==r.allowHalfOpen,n(void 0,e))})),e._client._protocol.exec(e.outgoing.id,t,!0)}(i,e,t,r))),o.shift()()})),this}shell(e,t,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),!e||void 0===e.x11&&void 0===e.env||(t=e,e=void 0),J(this,"session",((n,i)=>{if(n)return void r(n);const o=[];function s(e){if(e)return i.close(),void r(e);o.length&&o.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&o.push((()=>te(i,s))),!1!==e&&o.push((()=>ee(i,e,s))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&re(i,t.env),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&o.push((()=>Z(i,t.x11,s)))),o.push((()=>function(e,t){if("open"!==e.outgoing.state)return void t(new Error("Channel is not open"));e._callbacks.push((r=>{r?t(!0!==r?r:new Error("Unable to open shell")):(e.subtype="shell",t(void 0,e))})),e._client._protocol.shell(e.outgoing.id,!0)}(i,r))),o.shift()()})),this}subsys(e,t){if(!this._sock||!K(this._sock))throw new Error("Not connected");return J(this,"session",((r,n)=>{r?t(r):ne(n,e,((e,r)=>{e?t(e):t(void 0,r)}))})),this}forwardIn(e,t,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push(((n,i)=>{if(n)return void r(!0!==n?n:new Error(`Unable to bind to ${e}:${t}`));let o=t;0===t&&i&&i.length>=4&&(o=P(i,0),this._protocol._compatFlags&u.DYN_RPORT_BUG||(t=o)),this._forwarding[`${e}:${t}`]=o,r(void 0,o)})),this._protocol.tcpipForward(e,t,n),this}unforwardIn(e,t,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to unbind from ${e}:${t}`)):(delete this._forwarding[`${e}:${t}`],r())})),this._protocol.cancelTcpipForward(e,t,n),this}forwardOut(e,t,r,n,i){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"!=typeof i&&(i=X),J(this,"direct-tcpip",{srcIP:e,srcPort:t,dstIP:r,dstPort:n},i),this}openssh_noMoreSessions(e){if(!this._sock||!K(this._sock))throw new Error("Not connected");const t="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&z.test(this._remoteVer)?(t&&this._callbacks.push((t=>{t?e(!0!==t?t:new Error("Unable to disable future sessions")):e()})),this._protocol.openssh_noMoreSessions(t),this):t?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(e,t){if(!this._sock||!K(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&z.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to bind to ${e}`)):(this._forwardingUnix[e]=!0,t())})),this._protocol.openssh_streamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(e,t){if(!this._sock||!K(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&z.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to unbind from ${e}`)):(delete this._forwardingUnix[e],t())})),this._protocol.openssh_cancelStreamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(e,t){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"!=typeof t&&(t=X),!this.config.strictVendor||this.config.strictVendor&&z.test(this._remoteVer)?(J(this,"direct-streamlocal@openssh.com",{socketPath:e},t),this):(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(e){if(!this._sock||!K(this._sock))throw new Error("Not connected");return J(this,"sftp",((t,r)=>{t?e(t):ne(r,"sftp",((t,n)=>{function i(){r.removeListener("ready",o),r.removeListener("error",s),r.removeListener("exit",a),r.removeListener("close",a)}function o(){i(),e(void 0,r)}function s(t){i(),e(t)}function a(t,r){let n;i(),n="number"==typeof t?`Received exit code ${t} while establishing SFTP session`:void 0!==r?`Received signal ${r} while establishing SFTP session`:"Received unexpected SFTP session termination";const o=new Error(n);o.code=t,o.signal=r,e(o)}t?e(t):(r.on("ready",o).on("error",s).on("exit",a).on("close",a),r._init())}))})),this}setNoDelay(e){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(e),this}}},1980:(e,t,r)=>{"use strict";const{Agent:n}=r(8611),{Agent:i}=r(5692),{connect:o}=r(4756);let s;for(const e of[n,i]){class i extends e{constructor(e,t){super(t),this._connectCfg=e,this._defaultSrcIP=t&&t.srcIP||"localhost"}createConnection(t,n){const i=t&&t.localAddress||this._defaultSrcIP,o=t&&t.localPort||0,a=t.host,l=t.port;void 0===s&&(s=r(1818));const u=new s;let h=!1;u.on("ready",(()=>{u.forwardOut(i,o,a,l,((r,i)=>{if(h=!0,r)return u.end(),n(r);i.once("close",(()=>u.end())),n(null,c(i,e,t))}))})).on("error",n).on("close",(()=>{h||n(new Error("Unexpected connection close"))})).connect(this._connectCfg)}}t[e===n?"SSHTTPAgent":"SSHTTPSAgent"]=i}function a(){}function c(e,t,r){if(t===n)return e.setKeepAlive=a,e.setNoDelay=a,e.setTimeout=a,e.ref=a,e.unref=a,e.destroySoon=e.destroy,e;r.socket=e;const i=o(r),s=(()=>{let t=!1;return()=>{t||(t=!0,e.isPaused()&&e.resume())}})();return i.on("end",s).on("close",s),i}},7649:(e,t,r)=>{"use strict";const{AgentProtocol:n,BaseAgent:i,createAgent:o,CygwinAgent:s,OpenSSHAgent:a,PageantAgent:c}=r(7852),{SSHTTPAgent:l,SSHTTPSAgent:u}=r(1980),{parseKey:h}=r(8946),{flagsToString:d,OPEN_MODE:f,STATUS_CODE:p,stringToFlags:g}=r(4261);e.exports={AgentProtocol:n,BaseAgent:i,createAgent:o,Client:r(1818),CygwinAgent:s,HTTPAgent:l,HTTPSAgent:u,OpenSSHAgent:a,PageantAgent:c,Server:r(734),utils:{parseKey:h,...r(3314),sftp:{flagsToString:d,OPEN_MODE:f,STATUS_CODE:p,stringToFlags:g}}}},3314:(e,t,r)=>{"use strict";const{createCipheriv:n,generateKeyPair:i,generateKeyPairSync:o,getCurves:s,randomBytes:a}=r(6982),{Ber:c}=r(3100),l=r(4015).pbkdf,{CIPHER_INFO:u}=r(7785),h=s(),d=new Map(Object.entries(u));function f(e,t){if("string"!=typeof e)throw new TypeError("Key type must be a string");const r={type:"spki",format:"der"},n={type:"pkcs8",format:"der"};switch(e.toLowerCase()){case"rsa":{if("object"!=typeof t||null===t)throw new TypeError("Missing options object for RSA key");const e=t.bits;if(!Number.isInteger(e))throw new TypeError("RSA bits must be an integer");if(e<=0||e>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:e,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ecdsa":{if("object"!=typeof t||null===t)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(t.bits))throw new TypeError("ECDSA bits must be an integer");let e;switch(t.bits){case 256:e="prime256v1";break;case 384:e="secp384r1";break;case 521:e="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!h.includes(e))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:e,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:n}];default:throw new Error(`Unsupported key type: ${e}`)}}function p(e,t,r,i){let o,s="new",u="";if("object"==typeof i&&null!==i&&("string"==typeof i.comment&&i.comment&&(u=i.comment),"string"==typeof i.format&&i.format&&(s=i.format),i.passphrase)){let e;if("string"==typeof i.passphrase)e=Buffer.from(i.passphrase);else{if(!Buffer.isBuffer(i.passphrase))throw new Error("Invalid passphrase");e=i.passphrase}if(void 0===i.cipher)throw new Error("Missing cipher name");const t=d.get(i.cipher);if(void 0===t)throw new Error("Invalid cipher name");if("new"===s){let r=16;if(void 0!==i.rounds){if(!Number.isInteger(i.rounds))throw new TypeError("rounds must be an integer");i.rounds>0&&(r=i.rounds)}const n=Buffer.allocUnsafe(t.keyLen+t.ivLen),s=a(16);if(0!==l(e,e.length,s,s.length,n,n.length,r))return new Error("Failed to generate information to encrypt key");const c=Buffer.allocUnsafe(4+s.length+4);{let e=0;c.writeUInt32BE(s.length,e+=0),c.set(s,e+=4),c.writeUInt32BE(r,e+=s.length)}o={cipher:t,cipherName:i.cipher,kdfName:"bcrypt",kdfOptions:c,key:n.slice(0,t.keyLen),iv:n.slice(t.keyLen)}}}if("new"===s){let i,s="-----BEGIN OPENSSH PRIVATE KEY-----\n";const l=Buffer.from(o?o.cipherName:"none"),h=Buffer.from(o?o.kdfName:"none"),d=o?o.kdfOptions:Buffer.alloc(0),f=o?o.cipher.blockLen:8,p=function(e,t,r){switch(e){case"rsa":{let e=new c.Reader(r);if(e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in RSA private key");if(e.readSequence(),"1.2.840.113549.1.1.1"!==e.readOID())throw new Error("Bad RSA private OID");if(e.readByte()!==c.Null)throw new Error("Malformed RSA private key (expected null)");if(0!==e.readByte())throw new Error("Malformed RSA private key (expected zero-length null)");if(e=new c.Reader(e.readString(c.OctetString,!0)),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in RSA private key");const t=e.readString(c.Integer,!0),n=e.readString(c.Integer,!0),i=e.readString(c.Integer,!0),o=e.readString(c.Integer,!0),s=e.readString(c.Integer,!0);e.readString(c.Integer,!0),e.readString(c.Integer,!0);const a=e.readString(c.Integer,!0),l=Buffer.from("ssh-rsa"),u=Buffer.allocUnsafe(4+l.length+4+t.length+4+n.length+4+i.length+4+a.length+4+o.length+4+s.length);let h=0;u.writeUInt32BE(l.length,h+=0),u.set(l,h+=4),u.writeUInt32BE(t.length,h+=l.length),u.set(t,h+=4),u.writeUInt32BE(n.length,h+=t.length),u.set(n,h+=4),u.writeUInt32BE(i.length,h+=n.length),u.set(i,h+=4),u.writeUInt32BE(a.length,h+=i.length),u.set(a,h+=4),u.writeUInt32BE(o.length,h+=a.length),u.set(o,h+=4),u.writeUInt32BE(s.length,h+=o.length),u.set(s,h+=4);const d=Buffer.allocUnsafe(4+l.length+4+n.length+4+t.length);return h=0,d.writeUInt32BE(l.length,h+=0),d.set(l,h+=4),d.writeUInt32BE(n.length,h+=l.length),d.set(n,h+=4),d.writeUInt32BE(t.length,h+=n.length),d.set(t,h+=4),{sshName:l.toString(),priv:u,pub:d}}case"ec":{let e=new c.Reader(t);if(e.readSequence(),e.readSequence(),"1.2.840.10045.2.1"!==e.readOID())throw new Error("Bad ECDSA public OID");e.readOID();let n,i=e.readString(c.BitString,!0);{let e=0;for(;e<i.length&&0===i[e];++e);e>0&&(i=i.slice(e))}if(e=new c.Reader(r),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in ECDSA private key");if(e.readSequence(),"1.2.840.10045.2.1"!==e.readOID())throw new Error("Bad ECDSA private OID");switch(e.readOID()){case"1.2.840.10045.3.1.7":n="nistp256";break;case"1.3.132.0.34":n="nistp384";break;case"1.3.132.0.35":n="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}if(e=new c.Reader(e.readString(c.OctetString,!0)),e.readSequence(),1!==e.readInt())throw new Error("Unsupported version in ECDSA private key");const o=Buffer.concat([Buffer.from([0]),e.readString(c.OctetString,!0)]),s=Buffer.from(`ecdsa-sha2-${n}`);n=Buffer.from(n);const a=Buffer.allocUnsafe(4+s.length+4+n.length+4+i.length+4+o.length);let l=0;a.writeUInt32BE(s.length,l+=0),a.set(s,l+=4),a.writeUInt32BE(n.length,l+=s.length),a.set(n,l+=4),a.writeUInt32BE(i.length,l+=n.length),a.set(i,l+=4),a.writeUInt32BE(o.length,l+=i.length),a.set(o,l+=4);const u=Buffer.allocUnsafe(4+s.length+4+n.length+4+i.length);return l=0,u.writeUInt32BE(s.length,l+=0),u.set(s,l+=4),u.writeUInt32BE(n.length,l+=s.length),u.set(n,l+=4),u.writeUInt32BE(i.length,l+=n.length),u.set(i,l+=4),{sshName:s.toString(),priv:a,pub:u}}case"ed25519":{let e=new c.Reader(t);if(e.readSequence(),e.readSequence(),"1.3.101.112"!==e.readOID())throw new Error("Bad ED25519 public OID");let n=e.readString(c.BitString,!0);{let e=0;for(;e<n.length&&0===n[e];++e);e>0&&(n=n.slice(e))}if(e=new c.Reader(r),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in ED25519 private key");if(e.readSequence(),"1.3.101.112"!==e.readOID())throw new Error("Bad ED25519 private OID");e=new c.Reader(e.readString(c.OctetString,!0));const i=e.readString(c.OctetString,!0),o=Buffer.from("ssh-ed25519"),s=Buffer.allocUnsafe(4+o.length+4+n.length+4+(i.length+n.length));let a=0;s.writeUInt32BE(o.length,a+=0),s.set(o,a+=4),s.writeUInt32BE(n.length,a+=o.length),s.set(n,a+=4),s.writeUInt32BE(i.length+n.length,a+=n.length),s.set(i,a+=4),s.set(n,a+=i.length);const l=Buffer.allocUnsafe(4+o.length+4+n.length);return a=0,l.writeUInt32BE(o.length,a+=0),l.set(o,a+=4),l.writeUInt32BE(n.length,a+=o.length),l.set(n,a+=4),{sshName:o.toString(),priv:s,pub:l}}}}(e,t,r),g=a(4),_=Buffer.from(u),m=8+p.priv.length+4+_.length;let y=[];for(let e=1;(m+y.length)%f;++e)y.push(255&e);y=Buffer.from(y);let b,w=Buffer.allocUnsafe(m+y.length);{let e=0;w.set(g,e+=0),w.set(g,e+=4),w.set(p.priv,e+=4),w.writeUInt32BE(_.length,e+=p.priv.length),w.set(_,e+=4),w.set(y,e+=_.length)}if(o){const e={authTagLength:o.cipher.authLen},t=n(o.cipher.sslName,o.key,o.iv,e);t.setAutoPadding(!1),w=Buffer.concat([t.update(w),t.final()]),b=o.cipher.authLen>0?t.getAuthTag():Buffer.alloc(0),o.key.fill(0),o.iv.fill(0)}else b=Buffer.alloc(0);const A=Buffer.from("openssh-key-v1\0"),v=Buffer.allocUnsafe(A.length+4+l.length+4+h.length+4+d.length+4+4+p.pub.length+4+w.length+b.length);{let e=0;v.set(A,e+=0),v.writeUInt32BE(l.length,e+=A.length),v.set(l,e+=4),v.writeUInt32BE(h.length,e+=l.length),v.set(h,e+=4),v.writeUInt32BE(d.length,e+=h.length),v.set(d,e+=4),v.writeUInt32BE(1,e+=d.length),v.writeUInt32BE(p.pub.length,e+=4),v.set(p.pub,e+=4),v.writeUInt32BE(w.length,e+=p.pub.length),v.set(w,e+=4),v.set(b,e+=w.length)}{const e=v.base64Slice(0,v.length);let t=e.replace(/.{64}/g,"$&\n");63&e.length&&(t+="\n"),s+=t}{const e=p.pub.base64Slice(0,p.pub.length);i=`${p.sshName} ${e}${u?` ${u}`:""}`}return s+="-----END OPENSSH PRIVATE KEY-----\n",{private:s,public:i}}throw new Error("Invalid output key format")}function g(){}e.exports={generateKeyPair:(e,t,r)=>{"function"==typeof t&&(r=t,t=void 0),"function"!=typeof r&&(r=g);const n=f(e,t);i(...n,((e,i,o)=>{if(e)return r(e);let s;try{s=p(n[0],i,o,t)}catch(e){return r(e)}r(null,s)}))},generateKeyPairSync:(e,t)=>{const r=f(e,t),{publicKey:n,privateKey:i}=o(...r);return p(r[0],n,i,t)}}},6008:(e,t,r)=>{"use strict";const{inspect:n}=r(9023),{bindingAvailable:i,NullCipher:o,NullDecipher:s}=r(7785),{COMPAT_CHECKS:a,DISCONNECT_REASON:c,eddsaSupported:l,MESSAGE:u,SIGNALS:h,TERMINAL_MODE:d}=r(2535),{DEFAULT_KEXINIT_CLIENT:f,DEFAULT_KEXINIT_SERVER:p,KexInit:g,kexinit:_,onKEXPayload:m}=r(8818),{parseKey:y}=r(8946),b=r(2569),{bufferCopy:w,bufferFill:A,bufferSlice:v,convertSignature:E,sendPacket:S,writeUInt32BE:I}=r(5623),{PacketReader:k,PacketWriter:C,ZlibPacketReader:R,ZlibPacketWriter:T}=r(3129),B=r(8342).rE,O=new Map(Object.values(c).map((e=>[e,1]))),P=Buffer.from(`SSH-2.0-ssh2js${B}`),N=Buffer.from(`${P}\r\n`),x=Buffer.from([u.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),L=Buffer.from([d.TTY_OP_END]);function M(){}const D=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function U(e,t,r){let i,o;this._buffer?(i=Buffer.allocUnsafe(this._buffer.length+(r-t)),i.set(this._buffer,0),0===t?i.set(e,this._buffer.length):i.set(new Uint8Array(e.buffer,e.byteOffset+t,r-t),this._buffer.length),o=this._buffer.length,t=0):(i=e,o=0);const a=t;let c=t,l=t,u=!1,h=0,d=0;for(;t<i.length;++t){const e=i[t];if(13!==e){if(10===e){if(l>c&&l-c>4&&83===i[c]&&83===i[c+1]&&72===i[c+2]&&45===i[c+3]){const e=i.latin1Slice(a,l+1),u=c===a?e:e.slice(c-a),h=D.exec(u);if(!h)throw new Error("Invalid identification string");const d={greeting:c===a?"":e.slice(0,c-a),identRaw:u,versions:{protocol:h[1],software:h[2]},comments:h[3]};return this._remoteIdentRaw=Buffer.from(u),this._debug&&this._debug(`Remote ident: ${n(u)}`),this._compatFlags=H(d),this._buffer=void 0,this._decipher=new s(0,m.bind(this,{firstPacket:!0})),this._parse=F,this._onHeader(d),this._destruct?(_(this),t+1-o):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++d>1024)throw new Error("Max greeting lines exceeded");u=!1,c=t+1,h=0}else{if(u)throw new Error("Invalid header: expected newline");if(++h>=8192)throw new Error("Header line too long")}l=t}else u=!0}return this._buffer||(this._buffer=v(i,a)),t-o}function F(e,t,r){return this._decipher.decrypt(e,t,r)}function j(e){if(this._onPacket(),0===e.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));const t=(e=this._packetRW.read.read(e))[0];t!==u.USERAUTH_SUCCESS||this._server||this._authenticated||(this._authenticated=!0,"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.write=new T(this)),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.read=new R));const r=b[t];if(void 0!==r)return r(this,e);this._debug&&this._debug(`Inbound: Unsupported message type: ${t}`)}function H(e){const t=e.versions.software;let r=0;for(const e of a)"string"==typeof e[0]?t===e[0]&&(r|=e[1]):e[0].test(t)&&(r|=e[1]);return r}e.exports=class{constructor(e){const t=e.onWrite;if("function"!=typeof t)throw new Error("Missing onWrite function");this._onWrite=e=>{t(e)};const r=e.onError;if("function"!=typeof r)throw new Error("Missing onError function");this._onError=e=>{r(e)};const s=e.debug;this._debug="function"==typeof s?e=>{s(e)}:void 0;const a=e.onHeader;this._onHeader="function"==typeof a?(...e)=>{a(...e)}:M;const c=e.onPacket;this._onPacket="function"==typeof c?()=>{c()}:M;let h,d=e.onHandshakeComplete;"function"!=typeof d&&(d=M),this._onHandshakeComplete=(...e)=>{this._debug&&this._debug("Handshake completed"),h=void 0===h;const t=this._queue;if(t){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${t.length}) ...`);for(let e=0;e<t.length;++e){const r=t[e];let n=this._packetRW.write.finalize(r);if(n===r){const e=this._cipher.allocPacket(r.length);e.set(r,5),n=e}S(this,n)}this._debug&&this._debug("... finished draining outbound queue")}h&&this._server&&this._kex.remoteExtInfoEnabled&&function(e){let t="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";l&&(t=`ssh-ed25519,${t}`);const r=Buffer.byteLength(t);let n=e._packetRW.write.allocStart;const i=e._packetRW.write.alloc(28+r);i[n]=u.EXT_INFO,I(i,1,++n),I(i,15,n+=4),i.utf8Write("server-sig-algs",n+=4,15),I(i,r,n+=15),i.utf8Write(t,n+=4,r),e._debug&&e._debug("Outbound: Sending EXT_INFO"),S(e,e._packetRW.write.finalize(i))}(this),d(...e)},this._queue=void 0;const _=e.messageHandlers;let m;if(this._handlers="object"==typeof _&&null!==_?_:{},this._onPayload=j.bind(this),this._server=!!e.server,this._banner=void 0,this._server){if("object"!=typeof e.hostKeys||null===e.hostKeys)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys,"string"==typeof e.greeting&&e.greeting.length&&(m="\r\n"===e.greeting.slice(-2)?e.greeting:`${e.greeting}\r\n`),"string"==typeof e.banner&&e.banner.length&&(this._banner="\r\n"===e.banner.slice(-2)?e.banner:`${e.banner}\r\n`)}else this._hostKeys=void 0;let y,b=e.offer;if("object"!=typeof b||null===b?b=this._server?p:f:b.constructor!==g&&(this._server?b.kex=b.kex.concat(["kex-strict-s-v00@openssh.com"]):b.kex=b.kex.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),b=new g(b)),this._kex=void 0,this._strictMode=void 0,this._kexinit=void 0,this._offer=b,this._cipher=new o(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new k,write:new C(this)},this._hostVerifier=this._server||"function"!=typeof e.hostVerifier?void 0:e.hostVerifier,this._parse=U,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0,"string"==typeof e.ident)this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`),y=Buffer.allocUnsafe(this._identRaw.length+2),y.set(this._identRaw,0),y[y.length-2]=13,y[y.length-1]=10;else if(Buffer.isBuffer(e.ident)){const t=Buffer.allocUnsafe(8+e.ident.length);t.latin1Write("SSH-2.0-",0,8),t.set(e.ident,8),this._identRaw=t,y=Buffer.allocUnsafe(t.length+2),y.set(t,0),y[y.length-2]=13,y[y.length-1]=10}else this._identRaw=P,y=N;this._compatFlags=0,this._debug&&(i?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${n(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,m&&this._onWrite(m),this._onWrite(y)}}_destruct(e){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),"string"==typeof e&&0!==e.length||(e="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${e}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(e,t,r){for(;t<r;)t=this._parse(e,t,r)}disconnect(e){let t=this._packetRW.write.allocStartKEX;const r=this._packetRW.write.alloc(13,!0),n=t+13;O.has(e)||(e=c.PROTOCOL_ERROR),r[t]=u.DISCONNECT,I(r,e,++t),r.fill(0,t+=4,n),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`),S(this,this._packetRW.write.finalize(r,!0),!0)}ping(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(x.length);t.set(x,e),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),S(this,this._packetRW.write.finalize(t))}rekey(){void 0===this._kexinit?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],_(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(e){let t,r=this._packetRW.write.allocStart;Buffer.isBuffer(e)?(t=this._packetRW.write.alloc(1+e.length),t[r]=u.REQUEST_SUCCESS,t.set(e,++r)):(t=this._packetRW.write.alloc(1),t[r]=u.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),S(this,this._packetRW.write.finalize(t))}requestFailure(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=u.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),S(this,this._packetRW.write.finalize(t))}channelSuccess(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=u.CHANNEL_SUCCESS,I(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`),S(this,this._packetRW.write.finalize(r))}channelFailure(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=u.CHANNEL_FAILURE,I(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`),S(this,this._packetRW.write.finalize(r))}channelEOF(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=u.CHANNEL_EOF,I(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`),S(this,this._packetRW.write.finalize(r))}channelClose(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=u.CHANNEL_CLOSE,I(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`),S(this,this._packetRW.write.finalize(r))}channelWindowAdjust(e,t){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(9);n[r]=u.CHANNEL_WINDOW_ADJUST,I(n,e,++r),I(n,t,r+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${t})`),S(this,this._packetRW.write.finalize(n))}channelData(e,t){const r=Buffer.isBuffer(t),n=r?t.length:Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(9+n);o[i]=u.CHANNEL_DATA,I(o,e,++i),I(o,n,i+=4),r?o.set(t,i+=4):o.utf8Write(t,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${n})`),S(this,this._packetRW.write.finalize(o))}channelExtData(e,t,r){const n=Buffer.isBuffer(t),i=n?t.length:Buffer.byteLength(t);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(13+i);s[o]=u.CHANNEL_EXTENDED_DATA,I(s,e,++o),I(s,r,o+=4),I(s,i,o+=4),n?s.set(t,o+=4):s.utf8Write(t,o+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`),S(this,this._packetRW.write.finalize(s))}channelOpenConfirm(e,t,r,n){let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(17);o[i]=u.CHANNEL_OPEN_CONFIRMATION,I(o,e,++i),I(o,t,i+=4),I(o,r,i+=4),I(o,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${t})`),S(this,this._packetRW.write.finalize(o))}channelOpenFail(e,t,r){"string"!=typeof r&&(r="");const n=Buffer.byteLength(r);let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(13+n+4);o[i]=u.CHANNEL_OPEN_FAILURE,I(o,e,++i),I(o,t,i+=4),I(o,n,i+=4),i+=4,n&&(o.utf8Write(r,i,n),i+=n),I(o,0,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`),S(this,this._packetRW.write.finalize(o))}service(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t);n[r]=u.SERVICE_REQUEST,I(n,t,++r),n.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`),S(this,this._packetRW.write.finalize(n))}authPassword(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e),i=Buffer.byteLength(t),o=r?Buffer.byteLength(r):0;let s=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+n+4+14+4+8+1+4+i+(r?4+o:0));a[s]=u.USERAUTH_REQUEST,I(a,n,++s),a.utf8Write(e,s+=4,n),I(a,14,s+=n),a.utf8Write("ssh-connection",s+=4,14),I(a,8,s+=14),a.utf8Write("password",s+=4,8),a[s+=8]=r?1:0,I(a,i,++s),Buffer.isBuffer(t)?w(t,a,0,i,s+=4):a.utf8Write(t,s+=4,i),r?(I(a,o,s+=i),Buffer.isBuffer(r)?w(r,a,0,o,s+=4):a.utf8Write(r,s+=4,o),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),S(this,this._packetRW.write.finalize(a))}authPK(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");if((t=y(t))instanceof Error)throw new Error("Invalid key");const i=t.type;t=t.getPublicSSH(),"function"==typeof r&&(n=r,r=void 0),r||(r=i);const o=Buffer.byteLength(e),s=Buffer.byteLength(r),a=t.length,c=this._kex.sessionID,l=c.length,h=(n?4+l:0)+1+4+o+4+14+4+9+1+4+s+4+a;let d,f;if(n?(d=Buffer.allocUnsafe(h),f=0,I(d,l,f),d.set(c,f+=4),f+=l):(d=this._packetRW.write.alloc(h),f=this._packetRW.write.allocStart),d[f]=u.USERAUTH_REQUEST,I(d,o,++f),d.utf8Write(e,f+=4,o),I(d,14,f+=o),d.utf8Write("ssh-connection",f+=4,14),I(d,9,f+=14),d.utf8Write("publickey",f+=4,9),d[f+=9]=n?1:0,I(d,s,++f),d.utf8Write(r,f+=4,s),I(d,a,f+=s),d.set(t,f+=4),!n)return this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),void S(this,this._packetRW.write.finalize(d));n(d,(n=>{if(!1===(n=E(n,i)))throw new Error("Error while converting handshake signature");const c=n.length;f=this._packetRW.write.allocStart,d=this._packetRW.write.alloc(5+o+4+14+4+9+1+4+s+4+a+4+4+s+4+c),d[f]=u.USERAUTH_REQUEST,I(d,o,++f),d.utf8Write(e,f+=4,o),I(d,14,f+=o),d.utf8Write("ssh-connection",f+=4,14),I(d,9,f+=14),d.utf8Write("publickey",f+=4,9),d[f+=9]=1,I(d,s,++f),d.utf8Write(r,f+=4,s),I(d,a,f+=s),d.set(t,f+=4),I(d,4+s+4+c,f+=a),I(d,s,f+=4),d.utf8Write(r,f+=4,s),I(d,c,f+=s),d.set(n,f+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),S(this,this._packetRW.write.finalize(d))}))}authHostbased(e,t,r,n,i,o){if(this._server)throw new Error("Client-only method called in server mode");if((t=y(t))instanceof Error)throw new Error("Invalid key");const s=t.type;t=t.getPublicSSH(),"function"==typeof i&&(o=i,i=void 0),i||(i=s);const a=Buffer.byteLength(e),c=Buffer.byteLength(i),l=t.length,h=this._kex.sessionID,d=h.length,f=Buffer.byteLength(r),p=Buffer.byteLength(n),g=Buffer.allocUnsafe(4+d+1+4+a+4+14+4+9+4+c+4+l+4+f+4+p);let _=0;I(g,d,_),g.set(h,_+=4),g[_+=d]=u.USERAUTH_REQUEST,I(g,a,++_),g.utf8Write(e,_+=4,a),I(g,14,_+=a),g.utf8Write("ssh-connection",_+=4,14),I(g,9,_+=14),g.utf8Write("hostbased",_+=4,9),I(g,c,_+=9),g.utf8Write(i,_+=4,c),I(g,l,_+=c),g.set(t,_+=4),I(g,f,_+=l),g.utf8Write(r,_+=4,f),I(g,p,_+=f),g.utf8Write(n,_+=4,p),o(g,(e=>{if(!(e=E(e,s)))throw new Error("Error while converting handshake signature");const t=e.length,r=g.length-d-4;_=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(r+4+4+c+4+t);w(g,n,4+d,g.length,_),I(n,4+c+4+t,_+=r),I(n,c,_+=4),n.utf8Write(i,_+=4,c),I(n,t,_+=c),n.set(e,_+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),S(this,this._packetRW.write.finalize(n))}))}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4+14+4+20+4+4);n[r]=u.USERAUTH_REQUEST,I(n,t,++r),n.utf8Write(e,r+=4,t),I(n,14,r+=t),n.utf8Write("ssh-connection",r+=4,14),I(n,20,r+=14),n.utf8Write("keyboard-interactive",r+=4,20),I(n,0,r+=20),I(n,0,r+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),S(this,this._packetRW.write.finalize(n))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4+14+4+4);n[r]=u.USERAUTH_REQUEST,I(n,t,++r),n.utf8Write(e,r+=4,t),I(n,14,r+=t),n.utf8Write("ssh-connection",r+=4,14),I(n,4,r+=14),n.utf8Write("none",r+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),S(this,this._packetRW.write.finalize(n))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let t,r=0;if(e){t=new Array(e.length);for(let n=0;n<e.length;++n){const i=Buffer.byteLength(e[n]);t[n]=i,r+=4+i}}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r);if(i[n]=u.USERAUTH_INFO_RESPONSE,e){I(i,e.length,++n),n+=4;for(let r=0;r<e.length;++r){const o=t[r];I(i,o,n),n+=4,o&&(i.utf8Write(e[r],n,o),n+=o)}}else I(i,0,++n);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),S(this,this._packetRW.write.finalize(i))}tcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(23+n+4);o[i]=u.GLOBAL_REQUEST,I(o,13,++i),o.utf8Write("tcpip-forward",i+=4,13),o[i+=13]=void 0===r||!0===r?1:0,I(o,n,++i),o.utf8Write(e,i+=4,n),I(o,t,i+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),S(this,this._packetRW.write.finalize(o))}cancelTcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(30+n+4);o[i]=u.GLOBAL_REQUEST,I(o,20,++i),o.utf8Write("cancel-tcpip-forward",i+=4,20),o[i+=20]=void 0===r||!0===r?1:0,I(o,n,++i),o.utf8Write(e,i+=4,n),I(o,t,i+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),S(this,this._packetRW.write.finalize(o))}openssh_streamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(41+r);i[n]=u.GLOBAL_REQUEST,I(i,31,++n),i.utf8Write("streamlocal-forward@openssh.com",n+=4,31),i[n+=31]=void 0===t||!0===t?1:0,I(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),S(this,this._packetRW.write.finalize(i))}openssh_cancelStreamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(48+r);i[n]=u.GLOBAL_REQUEST,I(i,38,++n),i.utf8Write("cancel-streamlocal-forward@openssh.com",n+=4,38),i[n+=38]=void 0===t||!0===t?1:0,I(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),S(this,this._packetRW.write.finalize(i))}directTcpip(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.srcIP),o=Buffer.byteLength(n.dstIP);let s=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(33+i+4+4+o+4);a[s]=u.CHANNEL_OPEN,I(a,12,++s),a.utf8Write("direct-tcpip",s+=4,12),I(a,e,s+=12),I(a,t,s+=4),I(a,r,s+=4),I(a,o,s+=4),a.utf8Write(n.dstIP,s+=4,o),I(a,n.dstPort,s+=o),I(a,i,s+=4),a.utf8Write(n.srcIP,s+=4,i),I(a,n.srcPort,s+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`),S(this,this._packetRW.write.finalize(a))}openssh_directStreamLocal(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.socketPath);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(51+i+4+4);s[o]=u.CHANNEL_OPEN,I(s,30,++o),s.utf8Write("direct-streamlocal@openssh.com",o+=4,30),I(s,e,o+=30),I(s,t,o+=4),I(s,r,o+=4),I(s,i,o+=4),s.utf8Write(n.socketPath,o+=4,i),A(s,0,o+=i,o+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-streamlocal@openssh.com)`),S(this,this._packetRW.write.finalize(s))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(34);r[t]=u.GLOBAL_REQUEST,I(r,28,++t),r.utf8Write("no-more-sessions@openssh.com",t+=4,28),r[t+=28]=void 0===e||!0===e?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),S(this,this._packetRW.write.finalize(r))}session(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(24);i[n]=u.CHANNEL_OPEN,I(i,7,++n),i.utf8Write("session",n+=4,7),I(i,e,n+=7),I(i,t,n+=4),I(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`),S(this,this._packetRW.write.finalize(i))}windowChange(e,t,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(39);s[o]=u.CHANNEL_REQUEST,I(s,e,++o),I(s,13,o+=4),s.utf8Write("window-change",o+=4,13),s[o+=13]=0,I(s,r,++o),I(s,t,o+=4),I(s,i,o+=4),I(s,n,o+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`),S(this,this._packetRW.write.finalize(s))}pty(e,t,r,n,i,o,s,a){if(this._server)throw new Error("Client-only method called in server mode");o&&o.length||(o="vt100"),!s||Buffer.isBuffer(s)||Array.isArray(s)||"object"!=typeof s||null===s||(s=function(e){const t=Object.keys(e),r=Buffer.allocUnsafe(5*t.length+1);let n=0;for(let i=0;i<t.length;++i){const o=t[i];if("TTY_OP_END"===o)continue;const s=d[o];if(void 0===s)continue;const a=e[o];"number"==typeof a&&isFinite(a)&&(r[n++]=s,r[n++]=a>>>24,r[n++]=a>>>16,r[n++]=a>>>8,r[n++]=a)}return r[n++]=d.TTY_OP_END,n<r.length?v(r,0,n):r}(s)),s&&s.length||(s=L);const c=o.length,l=s.length;let h=this._packetRW.write.allocStart;const f=this._packetRW.write.alloc(21+c+4+4+4+4+4+l);if(f[h]=u.CHANNEL_REQUEST,I(f,e,++h),I(f,7,h+=4),f.utf8Write("pty-req",h+=4,7),f[h+=7]=void 0===a||!0===a?1:0,I(f,c,++h),f.utf8Write(o,h+=4,c),I(f,r,h+=c),I(f,t,h+=4),I(f,i,h+=4),I(f,n,h+=4),I(f,l,h+=4),h+=4,Array.isArray(s))for(let e=0;e<l;++e)f[h++]=s[e];else Buffer.isBuffer(s)&&f.set(s,h);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`),S(this,this._packetRW.write.finalize(f))}shell(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(15);n[r]=u.CHANNEL_REQUEST,I(n,e,++r),I(n,5,r+=4),n.utf8Write("shell",r+=4,5),n[r+=5]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`),S(this,this._packetRW.write.finalize(n))}exec(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.isBuffer(t),i=n?t.length:Buffer.byteLength(t);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(18+i);s[o]=u.CHANNEL_REQUEST,I(s,e,++o),I(s,4,o+=4),s.utf8Write("exec",o+=4,4),s[o+=4]=void 0===r||!0===r?1:0,I(s,i,++o),n?s.set(t,o+=4):s.utf8Write(t,o+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${t})`),S(this,this._packetRW.write.finalize(s))}signal(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=t;if("SIG"===(t=t.toUpperCase()).slice(0,3)&&(t=t.slice(3)),1!==h[t])throw new Error(`Invalid signal: ${r}`);const n=t.length;let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(20+n);o[i]=u.CHANNEL_REQUEST,I(o,e,++i),I(o,6,i+=4),o.utf8Write("signal",i+=4,6),o[i+=6]=0,I(o,n,++i),o.utf8Write(t,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${t})`),S(this,this._packetRW.write.finalize(o))}env(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(t),o=Buffer.isBuffer(r),s=o?r.length:Buffer.byteLength(r);let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(17+i+4+s);c[a]=u.CHANNEL_REQUEST,I(c,e,++a),I(c,3,a+=4),c.utf8Write("env",a+=4,3),c[a+=3]=void 0===n||!0===n?1:0,I(c,i,++a),c.utf8Write(t,a+=4,i),I(c,s,a+=i),o?c.set(r,a+=4):c.utf8Write(r,a+=4,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${t}=${r})`),S(this,this._packetRW.write.finalize(c))}x11Forward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=t.protocol,i=t.cookie,o=Buffer.isBuffer(n),s=o?n.length:Buffer.byteLength(n),a=Buffer.isBuffer(i),c=a?i.length:Buffer.byteLength(i);let l=this._packetRW.write.allocStart;const h=this._packetRW.write.alloc(22+s+4+c+4);h[l]=u.CHANNEL_REQUEST,I(h,e,++l),I(h,7,l+=4),h.utf8Write("x11-req",l+=4,7),h[l+=7]=void 0===r||!0===r?1:0,h[++l]=t.single?1:0,I(h,s,++l),o?h.set(n,l+=4):h.utf8Write(n,l+=4,s),I(h,c,l+=s),a?h.set(i,l+=4):h.latin1Write(i,l+=4,c),I(h,t.screen||0,l+=c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`),S(this,this._packetRW.write.finalize(h))}subsystem(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(23+n);o[i]=u.CHANNEL_REQUEST,I(o,e,++i),I(o,9,i+=4),o.utf8Write("subsystem",i+=4,9),o[i+=9]=void 0===r||!0===r?1:0,I(o,n,++i),o.utf8Write(t,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${t})`),S(this,this._packetRW.write.finalize(o))}openssh_agentForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(36);n[r]=u.CHANNEL_REQUEST,I(n,e,++r),I(n,26,r+=4),n.utf8Write("auth-agent-req@openssh.com",r+=4,26),n[r+=26]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, auth-agent-req@openssh.com)`),S(this,this._packetRW.write.finalize(n))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let t=0;const r=[];for(const n of e){const e=n.getPublicSSH();t+=4+e.length,r.push(e)}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(35+t);i[n]=u.GLOBAL_REQUEST,I(i,29,++n),i.utf8Write("hostkeys-prove-00@openssh.com",n+=4,29),i[n+=29]=1,++n;for(const e of r)I(i,e.length,n),w(e,i,0,e.length,n+=4),n+=e.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),S(this,this._packetRW.write.finalize(i))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t);if(n[r]=u.SERVICE_ACCEPT,I(n,t,++r),n.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`),S(this,this._packetRW.write.finalize(n)),this._server&&this._banner&&"ssh-userauth"===e){const e=this._banner;this._banner=void 0;const t=Buffer.byteLength(e);r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4);n[r]=u.USERAUTH_BANNER,I(n,t,++r),n.utf8Write(e,r+=4,t),I(n,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),S(this,this._packetRW.write.finalize(n))}}forwardedTcpip(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.boundAddr),o=Buffer.byteLength(n.remoteAddr);let s=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(36+i+4+4+o+4);a[s]=u.CHANNEL_OPEN,I(a,15,++s),a.utf8Write("forwarded-tcpip",s+=4,15),I(a,e,s+=15),I(a,t,s+=4),I(a,r,s+=4),I(a,i,s+=4),a.utf8Write(n.boundAddr,s+=4,i),I(a,n.boundPort,s+=i),I(a,o,s+=4),a.utf8Write(n.remoteAddr,s+=4,o),I(a,n.remotePort,s+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`),S(this,this._packetRW.write.finalize(a))}x11(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.originAddr);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(24+i+4);s[o]=u.CHANNEL_OPEN,I(s,3,++o),s.utf8Write("x11",o+=4,3),I(s,e,o+=3),I(s,t,o+=4),I(s,r,o+=4),I(s,i,o+=4),s.utf8Write(n.originAddr,o+=4,i),I(s,n.originPort,o+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`),S(this,this._packetRW.write.finalize(s))}openssh_authAgent(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(39);i[n]=u.CHANNEL_OPEN,I(i,22,++n),i.utf8Write("auth-agent@openssh.com",n+=4,22),I(i,e,n+=22),I(i,t,n+=4),I(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`),S(this,this._packetRW.write.finalize(i))}openssh_forwardedStreamLocal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.socketPath);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(54+i+4);s[o]=u.CHANNEL_OPEN,I(s,33,++o),s.utf8Write("forwarded-streamlocal@openssh.com",o+=4,33),I(s,e,o+=33),I(s,t,o+=4),I(s,r,o+=4),I(s,i,o+=4),s.utf8Write(n.socketPath,o+=4,i),I(s,0,o+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-streamlocal@openssh.com)`),S(this,this._packetRW.write.finalize(s))}exitStatus(e,t){if(!this._server)throw new Error("Server-only method called in client mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(25);n[r]=u.CHANNEL_REQUEST,I(n,e,++r),I(n,11,r+=4),n.utf8Write("exit-status",r+=4,11),n[r+=11]=0,I(n,t,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${t})`),S(this,this._packetRW.write.finalize(n))}exitSignal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=t;if("string"!=typeof i||!i)throw new Error(`Invalid signal: ${i}`);let o=t.toUpperCase();if("SIG"===o.slice(0,3)&&(o=o.slice(3)),1!==h[o])throw new Error(`Invalid signal: ${i}`);const s=Buffer.byteLength(o),a=n?Buffer.byteLength(n):0;let c=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(25+s+1+4+a+4);l[c]=u.CHANNEL_REQUEST,I(l,e,++c),I(l,11,c+=4),l.utf8Write("exit-signal",c+=4,11),l[c+=11]=0,I(l,s,++c),l.utf8Write(o,c+=4,s),l[c+=s]=r?1:0,I(l,a,++c),c+=4,a&&(l.utf8Write(n,c,a),c+=a),I(l,0,c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${t})`),S(this,this._packetRW.write.finalize(l))}authFailure(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");let r;if("boolean"==typeof e&&(t=e,e=void 0),e){r=[];for(let t=0;t<e.length;++t)"none"!==e[t].toLowerCase()&&r.push(e[t]);r=r.join(",")}else r="";const n=r.length;let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(5+n+1);o[i]=u.USERAUTH_FAILURE,I(o,n,++i),o.utf8Write(r,i+=4,n),o[i+=n]=!0===t?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),S(this,this._packetRW.write.finalize(o))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=u.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),S(this,this._packetRW.write.finalize(t)),"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.read=new R),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.write=new T(this))}authPKOK(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length||"publickey"!==this._authsQueue[0])throw new Error('"publickey" auth not in progress');const r=Buffer.byteLength(e),n=t.length;let i=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(5+r+4+n);o[i]=u.USERAUTH_PK_OK,I(o,r,++i),o.utf8Write(e,i+=4,r),I(o,n,i+=r),o.set(t,i+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),S(this,this._packetRW.write.finalize(o))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4);n[r]=u.USERAUTH_PASSWD_CHANGEREQ,I(n,t,++r),n.utf8Write(e,r+=4,t),I(n,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),S(this,this._packetRW.write.finalize(n))}authInfoReq(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=0;const i=e?Buffer.byteLength(e):0,o=t?Buffer.byteLength(t):0;for(let e=0;e<r.length;++e)n+=4+Buffer.byteLength(r[e].prompt)+1;let s=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+i+4+o+4+4+n);a[s]=u.USERAUTH_INFO_REQUEST,I(a,i,++s),s+=4,e&&(a.utf8Write(e,s,i),s+=i),I(a,o,s),s+=4,t&&(a.utf8Write(t,s,o),s+=o),I(a,0,s),I(a,r.length,s+=4),s+=4;for(let e=0;e<r.length;++e){const t=r[e],n=Buffer.byteLength(t.prompt);I(a,n,s),s+=4,n&&(a.utf8Write(t.prompt,s,n),s+=n),a[s++]=t.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),S(this,this._packetRW.write.finalize(a))}}},4261:(e,t,r)=>{"use strict";const n=r(4434),i=r(9896),{constants:o}=i,{Readable:s,Writable:a}=r(2203),{inherits:c,types:{isDate:l}}=r(9023),u=Buffer[Symbol.species],{bufferCopy:h,bufferSlice:d,makeBufferParser:f,writeUInt32BE:p}=r(5623),g=1,_=2,m=4,y=8,b=2147483648,w=Buffer.alloc(28),A={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},v=new Map(Object.values(A).map((e=>[e,1]))),E={[A.OK]:"No error",[A.EOF]:"End of file",[A.NO_SUCH_FILE]:"No such file or directory",[A.PERMISSION_DENIED]:"Permission denied",[A.FAILURE]:"Failure",[A.BAD_MESSAGE]:"Bad message",[A.NO_CONNECTION]:"No connection",[A.CONNECTION_LOST]:"Connection lost",[A.OP_UNSUPPORTED]:"Operation unsupported"},S=1,I=3,k=4,C=5,R=6,T=7,B=8,O=9,P=10,N=11,x=12,L=13,M=14,D=15,U=16,F=17,j=18,H=19,W=20,$=200,Q=2,K=101,q=102,G=103,V=104,Y=105,z=201,X={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},J=2**32-1,Z=Buffer.from([0,0,0,5,S,0,0,0,3]),ee=Buffer.from([0,0,0,5,Q,0,0,0,3]),te=/^SSH-2.0-(?:OpenSSH|dropbear)/,re=262144,ne=f(),ie={readable:!1,writable:!1,push:e=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function oe(){}function se(e,t,r,n,i,o,s,a){const c=e._maxReadLen,l=Math.max(i-c,0);l&&(i=c);const u=t.length;let h=9,f=o;const g=Buffer.allocUnsafe(13+u+8+4);p(g,g.length-4,0),g[4]=C;const _=e._writeReqid=e._writeReqid+1&J;p(g,_,5),p(g,u,h),g.set(t,h+=4),h+=u;for(let e=7;e>=0;--e)g[h+e]=255&f,f/=256;p(g,i,h+=8),"function"!=typeof s&&(s=oe);const m=a||{nb:0,position:o,off:n,origOff:n,len:void 0,overflow:void 0,cb:(n,i,o)=>{const a=m.len,c=m.overflow;if(n){if(s._wantEOFError||n.code!==A.EOF)return s(n)}else{if(o>a)return s(new Error("Received more data than requested"));if(o===a&&c)return m.nb+=o,m.position+=o,m.off+=o,void se(e,t,r,m.off,c,m.position,s,m)}o=o||0,i=0===m.origOff&&r.length===m.nb?r:d(r,m.origOff,m.origOff+m.nb+o),s(void 0,m.nb+o,i,m.position)},buffer:void 0};m.len=i,m.overflow=l,m.buffer=d(r,n,n+i),e._requests[_]=m;const y=me(e,g);e._debug&&e._debug(`SFTP: Outbound: ${y?"Buffered":"Sending"} READ`)}function ae(e,t,r,n,o,s){let a,c,l,u,h=64,d=32768;"function"==typeof o?s=o:"object"==typeof o&&null!==o&&("number"==typeof o.concurrency&&o.concurrency>0&&!isNaN(o.concurrency)&&(h=o.concurrency),"number"==typeof o.chunkSize&&o.chunkSize>0&&!isNaN(o.chunkSize)&&(d=o.chunkSize),"number"==typeof o.fileSize&&o.fileSize>0&&!isNaN(o.fileSize)&&(l=o.fileSize),"function"==typeof o.step&&(a=o.step),"string"!=typeof o.mode&&"number"!=typeof o.mode||(c=de(o.mode)));let f,p,g,_=0,m=0,y=!1,b=d*h;function w(r){if(y)return;y=!0;let n,o=0;f||p?(n=()=>{0==--o&&s(r)},!f||e!==i&&"open"!==e.outgoing.state||++o,!p||t!==i&&"open"!==t.outgoing.state||++o,!f||e!==i&&"open"!==e.outgoing.state||e.close(f,n),!p||t!==i&&"open"!==t.outgoing.state||t.close(p,n)):s(r)}e.open(r,"r",((o,y)=>{if(o)return w(o);function A(o,l){if(o)return e!==i?void e.stat(r,((e,t)=>{if(e)return w(o);A(null,t)})):w(o);u=l.size,t.open(n,"w",((r,i)=>{if(r)return w(r);if(p=i,u<=0)return w();for(;b>u;){if(1===h){b=u;break}b-=d,--h}if(g=function(e){try{return Buffer.allocUnsafe(e)}catch(e){return e}}(b),g instanceof Error)return w(g);function o(r,n,i,o,c,h){if(r)return w(r);c=c||0,t.write(p,g,c,n,o,(function(r){if(r)return w(r);if(m+=n,a&&a(m,n,u),n<h)return l(c,o+n,h-n);if(m===u)return void t.close(p,(t=>{if(p=void 0,t)return w(t);e.close(f,(e=>{if(f=void 0,e)return w(e);s()}))}));if(_>=u)return;const i=_+d>u?u-_:d;l(c,_,i),_+=i}))}function l(t,r,n){e.read(f,g,t,n,r,function(e,t,r){return(n,i,s)=>{o(n,i,0,t,e,r)}}(t,r,n))}function y(){let e=0,t=0;for(;_<u&&e<h;){const r=_+d>u?u-_:d;l(t,_,r),t+=r,_+=r,++e}}void 0!==c?t.fchmod(p,c,(function e(r){r?t.chmod(n,c,(t=>e())):y()})):y()}))}f=y,void 0===l?e.fstat(f,A):A(null,{size:l})}))}function ce(e,t,r,n,i,o,s){const a="function"==typeof s?s:void 0;e.write(t,r,n,i,o,((s,c)=>{if(s)return e.close(t,(()=>{a&&a(s)}));c===i?e.close(t,a):ce(e,t,r,n+=c,i-=c,o+=c,a)}))}class le{constructor(e){this.mode=e&&e.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime,this.extended=e&&e.extended}isDirectory(){return(this.mode&o.S_IFMT)===o.S_IFDIR}isFile(){return(this.mode&o.S_IFMT)===o.S_IFREG}isBlockDevice(){return(this.mode&o.S_IFMT)===o.S_IFBLK}isCharacterDevice(){return(this.mode&o.S_IFMT)===o.S_IFCHR}isSymbolicLink(){return(this.mode&o.S_IFMT)===o.S_IFLNK}isFIFO(){return(this.mode&o.S_IFMT)===o.S_IFIFO}isSocket(){return(this.mode&o.S_IFMT)===o.S_IFSOCK}}function ue(e){let t=0,r=0;if("object"==typeof e&&null!==e){if("number"==typeof e.size){t|=g;const n=e.size;w[r++]=n/72057594037927940,w[r++]=n/281474976710656,w[r++]=n/1099511627776,w[r++]=n/4294967296,w[r++]=n/16777216,w[r++]=n/65536,w[r++]=n/256,w[r++]=n}if("number"==typeof e.uid&&"number"==typeof e.gid){t|=_;const n=e.uid,i=e.gid;w[r++]=n>>>24,w[r++]=n>>>16,w[r++]=n>>>8,w[r++]=n,w[r++]=i>>>24,w[r++]=i>>>16,w[r++]=i>>>8,w[r++]=i}if("number"==typeof e.mode||"string"==typeof e.mode){const n=de(e.mode);t|=m,w[r++]=n>>>24,w[r++]=n>>>16,w[r++]=n>>>8,w[r++]=n}if(("number"==typeof e.atime||l(e.atime))&&("number"==typeof e.mtime||l(e.mtime))){const n=he(e.atime),i=he(e.mtime);t|=y,w[r++]=n>>>24,w[r++]=n>>>16,w[r++]=n>>>8,w[r++]=n,w[r++]=i>>>24,w[r++]=i>>>16,w[r++]=i>>>8,w[r++]=i}}return{flags:t,nb:r}}function he(e){if("number"==typeof e&&e==e)return e;if(l(e))return parseInt(e.getTime()/1e3,10);throw new Error(`Cannot parse time: ${e}`)}function de(e){if("number"==typeof e&&e==e)return e;if("string"==typeof e)return de(parseInt(e,8));throw new Error(`Cannot parse mode: ${e}`)}const fe={r:X.READ,"r+":X.READ|X.WRITE,w:X.TRUNC|X.CREAT|X.WRITE,wx:X.TRUNC|X.CREAT|X.WRITE|X.EXCL,xw:X.TRUNC|X.CREAT|X.WRITE|X.EXCL,"w+":X.TRUNC|X.CREAT|X.READ|X.WRITE,"wx+":X.TRUNC|X.CREAT|X.READ|X.WRITE|X.EXCL,"xw+":X.TRUNC|X.CREAT|X.READ|X.WRITE|X.EXCL,a:X.APPEND|X.CREAT|X.WRITE,ax:X.APPEND|X.CREAT|X.WRITE|X.EXCL,xa:X.APPEND|X.CREAT|X.WRITE|X.EXCL,"a+":X.APPEND|X.CREAT|X.READ|X.WRITE,"ax+":X.APPEND|X.CREAT|X.READ|X.WRITE|X.EXCL,"xa+":X.APPEND|X.CREAT|X.READ|X.WRITE|X.EXCL};function pe(e){const t=fe[e];return void 0!==t?t:null}const ge=(()=>{const e=Object.keys(fe);return t=>{for(let r=0;r<e.length;++r){const n=e[r];if(fe[n]===t)return n}return null}})();function _e(e){const t=ne.readUInt32BE();if(void 0===t)return;const r=new le;if(t&g){const t=ne.readUInt64BE(e);if(void 0===t)return;r.size=t}if(t&_){const e=ne.readUInt32BE(),t=ne.readUInt32BE();if(void 0===t)return;r.uid=e,r.gid=t}if(t&m){const e=ne.readUInt32BE();if(void 0===e)return;r.mode=e}if(t&y){const e=ne.readUInt32BE(),t=ne.readUInt32BE();if(void 0===t)return;r.atime=e,r.mtime=t}if(t&b){const e=ne.readUInt32BE();if(void 0===e)return;const t={};for(let r=0;r<e;++r){const e=ne.readString(!0),r=ne.readString();if(void 0===r)return;t[e]=r}r.extended=t}return r}function me(e,t){const r=ye(e,t);return void 0===r||(e._buffer.push(r),!1)}function ye(e,t){const r=e.outgoing;if("open"!==r.state)return;if(0===r.window)return e._waitWindow=!0,e._chunkcb=be,t;let n;const i=t.length;let o=0;for(;i-o>0&&r.window>0;){const n=Math.min(i-o,r.window,r.packetSize);r.window-=n,0===r.window&&(e._waitWindow=!0,e._chunkcb=be),0===o&&n===i?e._protocol.channelData(e.outgoing.id,t):e._protocol.channelData(e.outgoing.id,d(t,o,o+n)),o+=n}return i-o>0&&(n=o>0?d(t,o,i):t),n}function be(){this._chunkcb=void 0;const e=this._buffer;let t=0;for(;t<e.length;){const r=e[t],n=ye(this,r);if(void 0!==n)return n!==r&&(e[t]=n),void(t>0&&(this._buffer=e.slice(t)));++t}t>0&&(this._buffer=[])}function we(e,t,r){const n=new Error(t);return n.level="sftp-protocol",!r&&e._debug&&e._debug(`SFTP: Inbound: ${t}`),e.emit("error",n),e.destroy(),Ae(e),!1}function Ae(e){const t=Object.keys(e._requests);if(0===t.length)return;const r=e._requests;e._requests={};const n=new Error("No response from server");for(let e=0;e<t.length;++e){const i=r[t[e]];"function"==typeof i.cb&&i.cb(n)}}const ve={[Q]:(e,t)=>{if(-1!==e._version)return we(e,"Duplicate VERSION packet");const r={};ne.init(t,1);let n=ne.readUInt32BE();for(;ne.avail();){const e=ne.readString(!0),t=ne.readString(!0);if(void 0===t){n=void 0;break}r[e]=t}if(ne.clear(),void 0===n)return we(e,"Malformed VERSION packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${t})`):e._debug(`SFTP: Inbound: Received VERSION (v${n})`)}if(e._version=n,e._extensions=r,"1"===r["limits@openssh.com"])return function(e,t){let r=9;const n=Buffer.allocUnsafe(31);p(n,n.length-4,0),n[4]=$;const i=e._writeReqid=e._writeReqid+1&J;p(n,i,5),p(n,18,r),n.utf8Write("limits@openssh.com",r+=4,18),e._requests[i]={extended:"limits@openssh.com",cb:t};const o=me(e,n);if(e._debug){const t=o?"Buffered":"Sending";e._debug(`SFTP: Outbound: ${t} limits@openssh.com`)}}(e,((t,r)=>{t||(r.maxPktLen>0&&(e._maxOutPktLen=r.maxPktLen),r.maxReadLen>0&&(e._maxReadLen=r.maxReadLen),r.maxWriteLen>0&&(e._maxWriteLen=r.maxWriteLen),e.maxOpenHandles=r.maxOpenHandles>0?r.maxOpenHandles:1/0),e.emit("ready")}));e.emit("ready")},[K]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readUInt32BE(),i=ne.readString(!0);if(ne.clear(),e._debug){const t=JSON.stringify(i);e._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${t})`)}const o=e._requests[r];if(delete e._requests[r],o&&"function"==typeof o.cb){if(n===A.OK)return void o.cb();const e=new Error(i||E[n]||"Unknown status");e.code=n,o.cb(e)}},[q]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString();if(ne.clear(),void 0===n)return void 0!==r&&delete e._requests[r],we(e,"Malformed HANDLE packet");e._debug&&e._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const i=e._requests[r];delete e._requests[r],i&&"function"==typeof i.cb&&i.cb(void 0,n)},[G]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE();let n;if(void 0!==r&&(n=e._requests[r],delete e._requests[r]),n&&"function"==typeof n.cb)if(n.buffer){const t=ne.readString(n.buffer);if(ne.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`),void n.cb(void 0,n.buffer,t)}else{const t=ne.readString();if(ne.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t.length})`),void n.cb(void 0,t)}else{const t=ne.skipString();if(ne.clear(),void 0!==t)return void(e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`))}return we(e,"Malformed DATA packet")},[V]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE();let n;void 0!==r&&(n=e._requests[r],delete e._requests[r]);const i=ne.readUInt32BE();if(void 0!==i){let t=[];for(let r=0;r<i;++r){const r=ne.readString(!0),n=ne.readString(!0),i=_e(e._biOpt);if(void 0===i){t=void 0;break}t.push({filename:r,longname:n,attrs:i})}if(void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received NAME (id:${r}, ${t.length})`),ne.clear(),void(n&&"function"==typeof n.cb&&n.cb(void 0,t))}return ne.clear(),we(e,"Malformed NAME packet")},[Y]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE();let n;void 0!==r&&(n=e._requests[r],delete e._requests[r]);const i=_e(e._biOpt);return ne.clear(),void 0!==i?(e._debug&&e._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),void(n&&"function"==typeof n.cb&&n.cb(void 0,i))):we(e,"Malformed ATTRS packet")},[z]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE();if(void 0!==r){const t=e._requests[r];if(!t)return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),void ne.clear();switch(delete e._requests[r],t.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const n=e._biOpt,i={f_bsize:ne.readUInt64BE(n),f_frsize:ne.readUInt64BE(n),f_blocks:ne.readUInt64BE(n),f_bfree:ne.readUInt64BE(n),f_bavail:ne.readUInt64BE(n),f_files:ne.readUInt64BE(n),f_ffree:ne.readUInt64BE(n),f_favail:ne.readUInt64BE(n),f_sid:ne.readUInt64BE(n),f_flag:ne.readUInt64BE(n),f_namemax:ne.readUInt64BE(n)};if(void 0===i.f_namemax)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),ne.clear(),void("function"==typeof t.cb&&t.cb(void 0,i))}case"limits@openssh.com":{const n={maxPktLen:ne.readUInt64BE(),maxReadLen:ne.readUInt64BE(),maxWriteLen:ne.readUInt64BE(),maxOpenHandles:ne.readUInt64BE()};if(void 0===n.maxOpenHandles)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),ne.clear(),void("function"==typeof t.cb&&t.cb(void 0,n))}case"users-groups-by-id@openssh.com":{const n=ne.readUInt32BE();if(void 0===n)break;const i=new Array(n);for(let e=0;e<i.length;++e)i[e]=ne.readString(!0);const o=ne.readUInt32BE();if(void 0===o)break;const s=new Array(o);for(let e=0;e<s.length;++e)s[e]=ne.readString(!0);if(s.length>0&&void 0===s[s.length-1])break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),ne.clear(),void("function"==typeof t.cb&&t.cb(void 0,i,s))}default:return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),ne.clear(),void("function"==typeof t.cb&&t.cb())}}return ne.clear(),we(e,"Malformed EXTENDED_REPLY packet")}},Ee={[S]:(e,t)=>{if(-1!==e._version)return we(e,"Duplicate INIT packet");const r={};ne.init(t,1);let n=ne.readUInt32BE();for(;ne.avail();){const e=ne.readString(!0),t=ne.readString(!0);if(void 0===t){n=void 0;break}r[e]=t}if(ne.clear(),void 0===n)return we(e,"Malformed INIT packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${t})`):e._debug(`SFTP: Inbound: Received INIT (v${n})`)}me(e,ee),e._version=n,e._extensions=r,e.emit("ready")},[I]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=ne.readUInt32BE(),o=_e(e._biOpt);if(ne.clear(),void 0===o)return we(e,"Malformed OPEN packet");e._debug&&e._debug(`SFTP: Inbound: Received OPEN (id:${r})`),e.emit("OPEN",r,n,i,o)||e.status(r,A.OP_UNSUPPORTED)},[k]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString();if(ne.clear(),void 0===n||n.length>256)return we(e,"Malformed CLOSE packet");e._debug&&e._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),e.emit("CLOSE",r,n)||e.status(r,A.OP_UNSUPPORTED)},[C]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(),i=ne.readUInt64BE(e._biOpt),o=ne.readUInt32BE();if(ne.clear(),void 0===o||n.length>256)return we(e,"Malformed READ packet");e._debug&&e._debug(`SFTP: Inbound: Received READ (id:${r})`),e.emit("READ",r,n,i,o)||e.status(r,A.OP_UNSUPPORTED)},[R]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(),i=ne.readUInt64BE(e._biOpt),o=ne.readString();if(ne.clear(),void 0===o||n.length>256)return we(e,"Malformed WRITE packet");e._debug&&e._debug(`SFTP: Inbound: Received WRITE (id:${r})`),e.emit("WRITE",r,n,i,o)||e.status(r,A.OP_UNSUPPORTED)},[T]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed LSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),e.emit("LSTAT",r,n)||e.status(r,A.OP_UNSUPPORTED)},[B]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString();if(ne.clear(),void 0===n||n.length>256)return we(e,"Malformed FSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),e.emit("FSTAT",r,n)||e.status(r,A.OP_UNSUPPORTED)},[O]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=_e(e._biOpt);if(ne.clear(),void 0===i)return we(e,"Malformed SETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),e.emit("SETSTAT",r,n,i)||e.status(r,A.OP_UNSUPPORTED)},[P]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(),i=_e(e._biOpt);if(ne.clear(),void 0===i||n.length>256)return we(e,"Malformed FSETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),e.emit("FSETSTAT",r,n,i)||e.status(r,A.OP_UNSUPPORTED)},[N]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed OPENDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),e.emit("OPENDIR",r,n)||e.status(r,A.OP_UNSUPPORTED)},[x]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString();if(ne.clear(),void 0===n||n.length>256)return we(e,"Malformed READDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received READDIR (id:${r})`),e.emit("READDIR",r,n)||e.status(r,A.OP_UNSUPPORTED)},[L]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed REMOVE packet");e._debug&&e._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),e.emit("REMOVE",r,n)||e.status(r,A.OP_UNSUPPORTED)},[M]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=_e(e._biOpt);if(ne.clear(),void 0===i)return we(e,"Malformed MKDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),e.emit("MKDIR",r,n,i)||e.status(r,A.OP_UNSUPPORTED)},[D]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed RMDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),e.emit("RMDIR",r,n)||e.status(r,A.OP_UNSUPPORTED)},[U]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed REALPATH packet");e._debug&&e._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),e.emit("REALPATH",r,n)||e.status(r,A.OP_UNSUPPORTED)},[F]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed STAT packet");e._debug&&e._debug(`SFTP: Inbound: Received STAT (id:${r})`),e.emit("STAT",r,n)||e.status(r,A.OP_UNSUPPORTED)},[j]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=ne.readString(!0);if(ne.clear(),void 0===i)return we(e,"Malformed RENAME packet");e._debug&&e._debug(`SFTP: Inbound: Received RENAME (id:${r})`),e.emit("RENAME",r,n,i)||e.status(r,A.OP_UNSUPPORTED)},[H]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(ne.clear(),void 0===n)return we(e,"Malformed READLINK packet");e._debug&&e._debug(`SFTP: Inbound: Received READLINK (id:${r})`),e.emit("READLINK",r,n)||e.status(r,A.OP_UNSUPPORTED)},[W]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=ne.readString(!0);if(ne.clear(),void 0===i)return we(e,"Malformed SYMLINK packet");let o;e._debug&&e._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`),o=e._isOpenSSH?e.emit("SYMLINK",r,i,n):e.emit("SYMLINK",r,n,i),o||e.status(r,A.OP_UNSUPPORTED)},[$]:(e,t)=>{ne.init(t,1);const r=ne.readUInt32BE(),n=ne.readString(!0);if(void 0===n)return ne.clear(),we(e,"Malformed EXTENDED packet");let i;ne.avail()&&(i=ne.readRaw()),ne.clear(),e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),e.emit("EXTENDED",r,n,i)||e.status(r,A.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:Se,ERR_OUT_OF_RANGE:Ie,validateNumber:ke}=r(8977);let Ce;const Re=[];function Te(e,t){if(!Number.isSafeInteger(e)){if(ke(e,t),!Number.isInteger(e))throw new Ie(t,"an integer",e);throw new Ie(t,">= 0 and <= 2 ** 53 - 1",e)}if(e<0)throw new Ie(t,">= 0 and <= 2 ** 53 - 1",e)}function Be(e){return e+7&-8}function Oe(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(void 0===r.highWaterMark&&(r.highWaterMark=65536),r.emitClose=!1,r.autoDestroy=!1,s.call(this,r),this.path=t,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(Te(this.start,"start"),this.pos=this.start),void 0===this.end)this.end=1/0;else if(this.end!==1/0&&(Te(this.end,"end"),void 0!==this.start&&this.start>this.end))throw new Ie("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",(function(){this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}function Pe(e,t,r){if(!e.handle)return n();function n(n){t(n=n||r),e.isClosed=!0,n||e.emit("close")}e.sftp.close(e.handle,n)}function Ne(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,a.call(this,r),this.path=t,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(Te(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",(function(){this._writableState.finalCalled||this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}c(Oe,s),Oe.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t,this.emit("open",t),this.emit("ready"),this.read()})))},Oe.prototype._read=function(e){if(!Buffer.isBuffer(this.handle))return this.once("open",(()=>this._read(e)));if(this.destroyed)return;var t;(!Ce||Ce.length-Ce.used<128)&&(t=this.readableHighWaterMark||this._readableState.highWaterMark,Ce=Re.length>0?Re.pop():Buffer.allocUnsafe(t),Ce.used=0);const r=Ce;let n=Math.min(Ce.length-Ce.used,e);const i=Ce.used;if(void 0!==this.end&&(n=Math.min(this.end-this.pos+1,n)),n<=0)return this.push(null);this.sftp.read(this.handle,Ce,Ce.used,n,this.pos,((e,t)=>{if(e)return this.emit("error",e),void(this.autoClose&&this.destroy());let o=null;if(i+n===r.used&&r===Ce)r.used=Be(r.used+t-n);else{const e=i+n&-8,o=Be(i+t);e-o>=128&&Re.push(r.slice(o,e))}t>0&&(this.bytesRead+=t,o=r.slice(i,i+t)),this.pos+=t,this.push(o)})),Ce.used=Be(Ce.used+n)},Oe.prototype._destroy=function(e,t){!this._opening||Buffer.isBuffer(this.handle)?(Pe(this,t,e),this.handle=null,this._opening=!1):this.once("open",Pe.bind(null,this,t,e))},Oe.prototype.close=function(e){this.destroy(null,e)},Object.defineProperty(Oe.prototype,"pending",{get(){return null===this.handle},configurable:!0}),c(Ne,a),Ne.prototype._final=function(e){this.autoClose&&this.destroy(),e()},Ne.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t;const r=e=>{if(e)this.sftp.chmod(this.path,this.mode,(e=>r()));else if("a"!==this.flags[0])this.emit("open",t),this.emit("ready");else{const e=(r,n)=>{r?this.sftp.stat(this.path,((t,n)=>{if(t)return this.destroy(),void this.emit("error",r);e(null,n)})):(this.pos=n.size,this.emit("open",t),this.emit("ready"))};this.sftp.fstat(t,e)}};this.sftp.fchmod(t,this.mode,r)})))},Ne.prototype._write=function(e,t,r){if(!Buffer.isBuffer(e)){const t=new Se("data","Buffer",e);return this.emit("error",t)}if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._write(e,t,r)}));this.sftp.write(this.handle,e,0,e.length,this.pos,((e,t)=>{if(e)return this.autoClose&&this.destroy(),r(e);this.bytesWritten+=t,r()})),this.pos+=e.length},Ne.prototype._writev=function(e,t){if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._writev(e,t)}));const r=this.sftp,n=this.handle;let i=e.length;const o=(e,r)=>{if(e)return this.destroy(),t(e);this.bytesWritten+=r,0==--i&&t()};for(let t=0;t<e.length;++t){const i=e[t].chunk;r.write(n,i,0,i.length,this.pos,o),this.pos+=i.length}},"function"!=typeof a.prototype.destroy&&(Ne.prototype.destroy=Oe.prototype.destroy),Ne.prototype._destroy=Oe.prototype._destroy,Ne.prototype.close=function(e){if(e){if(this.isClosed)return void process.nextTick(e);this.on("close",e)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()},Ne.prototype.destroySoon=Ne.prototype.end,Object.defineProperty(Ne.prototype,"pending",{get(){return null===this.handle},configurable:!0}),e.exports={flagsToString:ge,OPEN_MODE:X,SFTP:class extends n{constructor(e,t,r){super(),"object"==typeof r&&r||(r={});const n=e._protocol._remoteIdentRaw;this.server=!!r.server,this._debug="function"==typeof r.debug?r.debug:void 0,this._isOpenSSH=n&&te.test(n),this._version=-1,this._extensions={},this._biOpt=r.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=re,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?re:34e3)-2048,this._maxWriteLen=(this._isOpenSSH?re:34e3)-2048,this.maxOpenHandles=void 0,this._client=e,this._protocol=e._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this.stderr=ie,this.readable=!0}push(e){if(null===e){if(Ae(this),!this.readable)return;return this.readable=!1,void this.emit("end")}let t=0;for(;t<e.length;){if(this._pktLenBytes<4){let r=Math.min(4-this._pktLenBytes,e.length-t);for(this._pktLenBytes+=r;r--;)this._pktLen=(this._pktLen<<8)+e[t++];if(this._pktLenBytes<4)return;if(0===this._pktLen)return we(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const e=this._maxInPktLen;return we(this,`Packet length ${this._pktLen} exceeds max length of ${e}`)}if(t>=e.length)return}if(this._pktPos<this._pktLen){const r=Math.min(this._pktLen-this._pktPos,e.length-t);if(0!==t||r!==e.length?r===this._pktLen?this._pkt=new u(e.buffer,e.byteOffset+t,r):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+t,r),this._pktPos)):r===this._pktLen?this._pkt=e:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(e,this._pktPos)),t+=r,this._pktPos+=r,this._pktPos<this._pktLen)return}const r=this._pkt[0],n=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;const i=this.server?Ee[r]:ve[r];if(!i)return we(this,`Unknown packet type ${r}`);if(-1===this._version)if(this.server){if(r!==S)return we(this,`Expected INIT packet, got ${r}`)}else if(r!==Q)return we(this,`Expected VERSION packet, got ${r}`);if(!1===i(this,n))return}}end(){this.destroy()}destroy(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=oe,this.server||me(this,Z)}createReadStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new Oe(this,e,t)}createWriteStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new Ne(this,e,t)}open(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof r&&(n=r,r=void 0);const i="number"==typeof t?t:pe(t);if(null===i)throw new Error(`Unknown flags string: ${t}`);let o=0,s=0;"string"!=typeof r&&"number"!=typeof r||(r={mode:r}),"object"==typeof r&&null!==r&&(o=(r=ue(r)).flags,s=r.nb);const a=Buffer.byteLength(e);let c=9;const l=Buffer.allocUnsafe(13+a+4+4+s);p(l,l.length-4,0),l[4]=I;const u=this._writeReqid=this._writeReqid+1&J;p(l,u,5),p(l,a,c),l.utf8Write(e,c+=4,a),p(l,i,c+=a),p(l,o,c+=4),s&&(c+=4,s===w.length?l.set(w,c):h(w,l,0,s,c),c+=s),this._requests[u]={cb:n};const d=me(this,l);this._debug&&this._debug(`SFTP: Outbound: ${d?"Buffered":"Sending"} OPEN`)}close(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=k;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.set(e,n+=4),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} CLOSE`)}read(e,t,r,n,i,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>=t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");se(this,e,t,r,n,i,o)}readData(e,t,r,n,i,o){this.read(e,t,r,n,i,o)}write(e,t,r,n,i,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");if(!n)return void(o&&process.nextTick(o,void 0,0));const s=this._maxWriteLen,a=Math.max(n-s,0),c=i;a&&(n=s);const l=e.length;let u=9;const d=Buffer.allocUnsafe(13+l+8+4+n);p(d,d.length-4,0),d[4]=R;const f=this._writeReqid=this._writeReqid+1&J;p(d,f,5),p(d,l,u),d.set(e,u+=4),u+=l;for(let e=7;e>=0;--e)d[u+e]=255&i,i/=256;p(d,n,u+=8),h(t,d,r,r+n,u+=4),this._requests[f]={cb:i=>{i?"function"==typeof o&&o(i):a?this.write(e,t,r+n,a,c+n,o):"function"==typeof o&&o(void 0,r+n)}};const g=me(this,d);if(this._debug){const e=g?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${e} WRITE (id:${f})`)}}writeData(e,t,r,n,i,o){this.write(e,t,r,n,i,o)}fastGet(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");ae(this,i,e,t,r,n)}fastPut(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");ae(i,this,e,t,r,n)}readFile(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n;if("function"==typeof r?n=r:"function"==typeof t&&(n=t,t=void 0),"string"==typeof t)t={encoding:t,flag:"r"};else if(t){if("object"!=typeof t)throw new TypeError("Bad arguments")}else t={encoding:null,flag:"r"};const i=t.encoding;if(i&&!Buffer.isEncoding(i))throw new Error(`Unknown encoding: ${i}`);let o,s,a,c,l=0,u=0;const h=t.flag||"r",f=()=>{0===o?(s=Buffer.allocUnsafe(8192),this.read(c,s,0,8192,u,p)):this.read(c,s,l,o-l,u,p)},p=(e,t)=>{let r;if(e){if(r=e.code===A.EOF,!r)return this.close(c,(()=>n&&n(e)))}else r=!1;if(r||0===o&&0===t)return g();u+=t,l+=t,0!==o?l===o?g():f():(a.push(d(s,0,t)),f())};p._wantEOFError=!0;const g=()=>{this.close(c,(e=>(0===o?s=Buffer.concat(a,l):l<o&&(s=d(s,0,l)),i&&(s=s.toString(i)),n&&n(e,s))))};this.open(e,h,438,((t,r)=>{if(t)return n&&n(t);c=r;const i=(t,r)=>{if(t)this.stat(e,((e,r)=>{if(e)return this.close(c,(()=>{n&&n(t)}));i(null,r)}));else{if(o=r.size||0,0===o)return a=[],f();s=Buffer.allocUnsafe(o),f()}};this.fstat(c,i)}))}writeFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if("function"==typeof n?i=n:"function"==typeof r&&(i=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"w"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"w"};if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error(`Unknown encoding: ${r.encoding}`);const o=r.flag||"w";this.open(e,o,r.mode,((n,s)=>{if(n)i&&i(n);else{const n=Buffer.isBuffer(t)?t:Buffer.from(""+t,r.encoding||"utf8"),a=/a/.test(o)?null:0;if(null===a){const t=(r,o)=>{r?this.stat(e,((e,n)=>{if(e)return this.close(s,(()=>{i&&i(r)}));t(null,n)})):ce(this,s,n,0,n.length,o.size,i)};return void this.fstat(s,t)}ce(this,s,n,0,n.length,a,i)}}))}appendFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if("function"==typeof n?i=n:"function"==typeof r&&(i=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"a"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"a"};r.flag||(r=Object.assign({flag:"a"},r)),this.writeFile(e,t,r,i)}exists(e,t){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,(e=>{t&&t(!e)}))}unlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=L;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} REMOVE`)}rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e),i=Buffer.byteLength(t);let o=9;const s=Buffer.allocUnsafe(13+n+4+i);p(s,s.length-4,0),s[4]=j;const a=this._writeReqid=this._writeReqid+1&J;p(s,a,5),p(s,n,o),s.utf8Write(e,o+=4,n),p(s,i,o+=n),s.utf8Write(t,o+=4,i),this._requests[a]={cb:r};const c=me(this,s);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} RENAME`)}mkdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,i=0;"function"==typeof t&&(r=t,t=void 0),"object"==typeof t&&null!==t&&(n=(t=ue(t)).flags,i=t.nb);const o=Buffer.byteLength(e);let s=9;const a=Buffer.allocUnsafe(13+o+4+i);p(a,a.length-4,0),a[4]=M;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,5),p(a,o,s),a.utf8Write(e,s+=4,o),p(a,n,s+=o),i&&(s+=4,i===w.length?a.set(w,s):h(w,a,0,i,s),s+=i),this._requests[c]={cb:r};const l=me(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} MKDIR`)}rmdir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=D;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} RMDIR`)}readdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof t&&(r=t,t={}),"object"==typeof t&&null!==t||(t={});const n=!t||!t.full;if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new Error("missing directory handle or path");if("string"==typeof e){const n=[];let i=0;const o=(e,s)=>{if(e)return r(e);this.readdir(s,t,((e,t)=>{const a=e&&e.code===A.EOF;if(e&&!a)return this.close(s,(()=>r(e)));if(a)return this.close(s,(e=>{if(e)return r(e);r(void 0,n)}));for(let e=0;e<t.length;++e,++i)n[i]=t[e];o(void 0,s)}))};return this.opendir(e,o)}const i=e.length;let o=9;const s=Buffer.allocUnsafe(13+i);p(s,s.length-4,0),s[4]=x;const a=this._writeReqid=this._writeReqid+1&J;p(s,a,5),p(s,i,o),s.set(e,o+=4),this._requests[a]={cb:n?(e,t)=>{if("function"==typeof r){if(e)return r(e);for(let e=t.length-1;e>=0;--e)"."!==t[e].filename&&".."!==t[e].filename||t.splice(e,1);r(void 0,t)}}:r};const c=me(this,s);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} READDIR`)}fstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=B;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.set(e,n+=4),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} FSTAT`)}stat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=F;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} STAT`)}lstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=T;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} LSTAT`)}opendir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=N;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} OPENDIR`)}setstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,i=0;"object"==typeof t&&null!==t?(n=(t=ue(t)).flags,i=t.nb):"function"==typeof t&&(r=t);const o=Buffer.byteLength(e);let s=9;const a=Buffer.allocUnsafe(13+o+4+i);p(a,a.length-4,0),a[4]=O;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,5),p(a,o,s),a.utf8Write(e,s+=4,o),p(a,n,s+=o),i&&(s+=4,i===w.length?a.set(w,s):h(w,a,0,i,s),s+=i),this._requests[c]={cb:r};const l=me(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let n=0,i=0;"object"==typeof t&&null!==t?(n=(t=ue(t)).flags,i=t.nb):"function"==typeof t&&(r=t);const o=e.length;let s=9;const a=Buffer.allocUnsafe(13+o+4+i);p(a,a.length-4,0),a[4]=P;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,5),p(a,o,s),a.set(e,s+=4),p(a,n,s+=o),i&&(s+=4,i===w.length?a.set(w,s):h(w,a,0,i,s),s+=i),this._requests[c]={cb:r};const l=me(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} FSETSTAT`)}futimes(e,t,r,n){return this.fsetstat(e,{atime:he(t),mtime:he(r)},n)}utimes(e,t,r,n){return this.setstat(e,{atime:he(t),mtime:he(r)},n)}fchown(e,t,r,n){return this.fsetstat(e,{uid:t,gid:r},n)}chown(e,t,r,n){return this.setstat(e,{uid:t,gid:r},n)}fchmod(e,t,r){return this.fsetstat(e,{mode:t},r)}chmod(e,t,r){return this.setstat(e,{mode:t},r)}readlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=H;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing link info"))}};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} READLINK`)}symlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t),i=Buffer.byteLength(e);let o=9;const s=Buffer.allocUnsafe(13+n+4+i);p(s,s.length-4,0),s[4]=W;const a=this._writeReqid=this._writeReqid+1&J;p(s,a,5),this._isOpenSSH?(p(s,i,o),s.utf8Write(e,o+=4,i),p(s,n,o+=i),s.utf8Write(t,o+=4,n)):(p(s,n,o),s.utf8Write(t,o+=4,n),p(s,i,o+=n),s.utf8Write(e,o+=4,i)),this._requests[a]={cb:r};const c=me(this,s);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} SYMLINK`)}realpath(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=U;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,r,n),i.utf8Write(e,n+=4,r),this._requests[o]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing path info"))}};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["posix-rename@openssh.com"];if(!n||"1"!==n)throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e),o=Buffer.byteLength(t);let s=9;const a=Buffer.allocUnsafe(41+i+4+o);p(a,a.length-4,0),a[4]=$;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,5),p(a,24,s),a.utf8Write("posix-rename@openssh.com",s+=4,24),p(a,i,s+=24),a.utf8Write(e,s+=4,i),p(a,o,s+=i),a.utf8Write(t,s+=4,o),this._requests[c]={cb:r};const l=me(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["statvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e);let i=9;const o=Buffer.allocUnsafe(36+n);p(o,o.length-4,0),o[4]=$;const s=this._writeReqid=this._writeReqid+1&J;p(o,s,5),p(o,19,i),o.utf8Write("statvfs@openssh.com",i+=4,19),p(o,n,i+=19),o.utf8Write(e,i+=4,n),this._requests[s]={extended:"statvfs@openssh.com",cb:t};const a=me(this,o);if(this._debug){const e=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fstatvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let i=9;const o=Buffer.allocUnsafe(37+n);p(o,o.length-4,0),o[4]=$;const s=this._writeReqid=this._writeReqid+1&J;p(o,s,5),p(o,20,i),o.utf8Write("fstatvfs@openssh.com",i+=4,20),p(o,n,i+=20),o.set(e,i+=4),this._requests[s]={extended:"fstatvfs@openssh.com",cb:t};const a=me(this,o);if(this._debug){const e=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["hardlink@openssh.com"])throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e),i=Buffer.byteLength(t);let o=9;const s=Buffer.allocUnsafe(37+n+4+i);p(s,s.length-4,0),s[4]=$;const a=this._writeReqid=this._writeReqid+1&J;p(s,a,5),p(s,20,o),s.utf8Write("hardlink@openssh.com",o+=4,20),p(s,n,o+=20),s.utf8Write(e,o+=4,n),p(s,i,o+=n),s.utf8Write(t,o+=4,i),this._requests[a]={cb:r};const c=me(this,s);if(this._debug){const e=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} hardlink@openssh.com`)}}ext_openssh_fsync(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["fsync@openssh.com"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const i=Buffer.allocUnsafe(34+r);p(i,i.length-4,0),i[4]=$;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,17,n),i.utf8Write("fsync@openssh.com",n+=4,17),p(i,r,n+=17),i.set(e,n+=4),this._requests[o]={cb:t};const s=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["lsetstat@openssh.com"])throw new Error("Server does not support this extended request");let n=0,i=0;"object"==typeof t&&null!==t?(n=(t=ue(t)).flags,i=t.nb):"function"==typeof t&&(r=t);const o=Buffer.byteLength(e);let s=9;const a=Buffer.allocUnsafe(37+o+4+i);p(a,a.length-4,0),a[4]=$;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,5),p(a,20,s),a.utf8Write("lsetstat@openssh.com",s+=4,20),p(a,o,s+=20),a.utf8Write(e,s+=4,o),p(a,n,s+=o),i&&(s+=4,i===w.length?a.set(w,s):h(w,a,0,i,s),s+=i),this._requests[c]={cb:r};const l=me(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["expand-path@openssh.com"])throw new Error("Server does not support this extended request");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(40+r);p(i,i.length-4,0),i[4]=$;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,5),p(i,23,n),i.utf8Write("expand-path@openssh.com",n+=4,23),p(i,r,n+=20),i.utf8Write(e,n+=4,r),this._requests[o]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing expanded path"))}};const s=me(this,i);if(this._debug){const e=s?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} expand-path@openssh.com`)}}ext_copy_data(e,t,r,n,i,o){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["copy-data"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(n))throw new Error("Destination handle is not a Buffer");let s=0;const a=Buffer.allocUnsafe(26+e.length+8+8+4+n.length+8);p(a,a.length-4,s),s+=4,a[s]=$,++s;const c=this._writeReqid=this._writeReqid+1&J;p(a,c,s),s+=4,p(a,9,s),s+=4,a.utf8Write("copy-data",s,9),s+=9,p(a,e.length,s),s+=4,a.set(e,s),s+=e.length;for(let e=7;e>=0;--e)a[s+e]=255&t,t/=256;s+=8;for(let e=7;e>=0;--e)a[s+e]=255&r,r/=256;s+=8,p(a,n.length,s),s+=4,a.set(n,s),s+=n.length;for(let e=7;e>=0;--e)a[s+e]=255&i,i/=256;this._requests[c]={cb:o};const l=me(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} copy-data`)}}ext_home_dir(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["home-directory"])throw new Error("Server does not support this extended request");if("string"!=typeof e)throw new TypeError("username is not a string");let r=0;const n=Buffer.byteLength(e),i=Buffer.allocUnsafe(31+n);p(i,i.length-4,r),r+=4,i[r]=$,++r;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,r),r+=4,p(i,14,r),r+=4,i.utf8Write("home-directory",r,14),r+=14,p(i,n,r),r+=4,i.utf8Write(e,r,n),r+=n,this._requests[o]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing home directory"))}};const s=me(this,i);if(this._debug){const e=s?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} home-directory`)}}ext_users_groups(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["users-groups-by-id@openssh.com"])throw new Error("Server does not support this extended request");if(!Array.isArray(e))throw new TypeError("uids is not an array");for(const t of e)if(!Number.isInteger(t)||t<0||t>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers");if(!Array.isArray(t))throw new TypeError("gids is not an array");for(const e of t)if(!Number.isInteger(e)||e<0||e>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers");let n=0;const i=Buffer.allocUnsafe(47+4*e.length+4+4*t.length);p(i,i.length-4,n),n+=4,i[n]=$,++n;const o=this._writeReqid=this._writeReqid+1&J;p(i,o,n),n+=4,p(i,30,n),n+=4,i.utf8Write("users-groups-by-id@openssh.com",n,30),n+=30,p(i,4*e.length,n),n+=4;for(const t of e)p(i,t,n),n+=4;p(i,4*t.length,n),n+=4;for(const e of t)p(i,e,n),n+=4;this._requests[o]={extended:"users-groups-by-id@openssh.com",cb:r};const s=me(this,i);if(this._debug){const e=s?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} users-groups-by-id@openssh.com`)}}handle(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;if(r>256)throw new Error("handle too large (> 256 bytes)");let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=q,p(i,e,5),p(i,r,n),r&&i.set(t,n+=4);const o=me(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} HANDLE`)}status(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!v.has(t))throw new Error(`Bad status code: ${t}`);r||(r="");const n=Buffer.byteLength(r);let i=9;const o=Buffer.allocUnsafe(17+n+4);p(o,o.length-4,0),o[4]=K,p(o,e,5),p(o,t,i),p(o,n,i+=4),i+=4,n&&(o.utf8Write(r,i,n),i+=n),p(o,0,i);const s=me(this,o);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} STATUS`)}data(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");const n=Buffer.isBuffer(t);if(!n&&"string"!=typeof t)throw new Error("data is not a Buffer or string");let i;n||r||(r=void 0,i=!0);const o=n?t.length:Buffer.byteLength(t,r);let s=9;const a=Buffer.allocUnsafe(13+o);p(a,a.length-4,0),a[4]=G,p(a,e,5),p(a,o,s),o&&(n?a.set(t,s+=4):i?a.utf8Write(t,s+=4,o):a.write(t,s+=4,o,r));const c=me(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} DATA`)}name(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(t)){if("object"!=typeof t||null===t)throw new Error("names is not an object or array");t=[t]}const r=t.length;let n,i=0;const o=[];for(let e=0;e<r;++e){const r=t[e],s=r&&r.filename&&"string"==typeof r.filename?r.filename:"";i+=4+Buffer.byteLength(s);const a=r&&r.longname&&"string"==typeof r.longname?r.longname:"";if(i+=4+Buffer.byteLength(a),"object"==typeof r.attrs&&null!==r.attrs){if(n=ue(r.attrs),i+=4+n.nb,n.nb){let e;n.nb===w.length?e=new Uint8Array(w):(e=new Uint8Array(n.nb),h(w,e,0,n.nb,0)),n.bytes=e}o.push(n)}else i+=4,o.push(null)}let s=9;const a=Buffer.allocUnsafe(13+i);p(a,a.length-4,0),a[4]=V,p(a,e,5),p(a,r,s),s+=4;for(let e=0;e<r;++e){const r=t[e];{const e=r&&r.filename&&"string"==typeof r.filename?r.filename:"",t=Buffer.byteLength(e);p(a,t,s),s+=4,t&&(a.utf8Write(e,s,t),s+=t)}{const e=r&&r.longname&&"string"==typeof r.longname?r.longname:"",t=Buffer.byteLength(e);p(a,t,s),s+=4,t&&(a.utf8Write(e,s,t),s+=t)}const n=o[e];n?(p(a,n.flags,s),s+=4,n.flags&&n.bytes&&(a.set(n.bytes,s),s+=n.nb)):(p(a,0,s),s+=4)}const c=me(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} NAME`)}attrs(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if("object"!=typeof t||null===t)throw new Error("attrs is not an object");const r=(t=ue(t)).flags,n=t.nb;let i=9;const o=Buffer.allocUnsafe(13+n);p(o,o.length-4,0),o[4]=Y,p(o,e,5),p(o,r,i),n&&(i+=4,n===w.length?o.set(w,i):h(w,o,0,n,i),i+=n);const s=me(this,o);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} ATTRS`)}},Stats:le,STATUS_CODE:A,stringToFlags:pe}},2535:(e,t,r)=>{"use strict";const n=r(6982);let i;try{i=r(6295)()}catch{}const{bindingAvailable:o,CIPHER_INFO:s,MAC_INFO:a}=r(7785),c=(()=>{if("function"==typeof n.sign&&"function"==typeof n.verify){const e="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----",t=Buffer.from("a");let r,i;try{r=n.sign(null,t,e),i=n.verify(null,t,e,r)}catch{}return Buffer.isBuffer(r)&&64===r.length&&!0===i}return!1})(),l="function"==typeof n.diffieHellman&&"function"==typeof n.generateKeyPairSync&&"function"==typeof n.createPublicKey,u=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];l&&(u.unshift("curve25519-sha256"),u.unshift("curve25519-sha256@libssh.org"));const h=u.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),d=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];c&&d.unshift("ssh-ed25519");const f=d.concat(["ssh-dss"]),p=(()=>{const e=n.getCiphers();return t=>e.includes(s[t].sslName)})();let g=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];i&&i.flags&&!i.flags.aes?o?g.unshift("chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"):o&&i&&"x86"===i.arch?g.splice(4,0,"chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"),g=g.filter(p);const _=g.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(p)),m=(()=>{const e=n.getHashes();return t=>e.includes(a[t].sslName)})(),y=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(m),b=y.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(m)),w=["none","zlib@openssh.com","zlib"],A=w.concat([]),v={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8,IMPLY_RSA_SHA2_SIGALGS:16};e.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce(((e,t)=>({...e,[t]:1})),{}),COMPAT:v,COMPAT_CHECKS:[["Cisco-1.25",v.BAD_DHGEX],[/^Cisco-1[.]/,v.BUG_DHGEX_LARGE],[/^[0-9.]+$/,v.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,v.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,v.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:u,SUPPORTED_KEX:h,DEFAULT_SERVER_HOST_KEY:d,SUPPORTED_SERVER_HOST_KEY:f,DEFAULT_CIPHER:g,SUPPORTED_CIPHER:_,DEFAULT_MAC:y,SUPPORTED_MAC:b,DEFAULT_COMPRESSION:w,SUPPORTED_COMPRESSION:A,curve25519Supported:l,eddsaSupported:c},e.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(e.exports.DISCONNECT_REASON)).reduce(((e,[t,r])=>({...e,[r]:t})),{})},7785:(e,t,r)=>{"use strict";const{createCipheriv:n,createDecipheriv:i,createHmac:o,randomFillSync:s,timingSafeEqual:a}=r(6982),{readUInt32BE:c,writeUInt32BE:l}=r(5623),u=Buffer[Symbol.species],h=2**32-1,d=Buffer.alloc(0),f=Buffer.alloc(4),p=new Map,g=35e3;let _,m,y,b,w,A,v;try{_=r(6677),({AESGCMCipher:m,ChaChaPolyCipher:y,GenericCipher:b,AESGCMDecipher:w,ChaChaPolyDecipher:A,GenericDecipher:v}=_)}catch{}const E=(()=>{function e(e,t,r,n,i,o,s){return{sslName:e,blockLen:t,keyLen:r,ivLen:0!==n||1&s?n:t,authLen:i,discardLen:o,stream:!!(1&s)}}return{"chacha20-poly1305@openssh.com":e("chacha20",8,64,0,16,0,1),"aes128-gcm":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm":e("aes-256-gcm",16,32,12,16,0,1),"aes128-gcm@openssh.com":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm@openssh.com":e("aes-256-gcm",16,32,12,16,0,1),"aes128-cbc":e("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":e("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":e("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":e("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":e("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":e("bf-cbc",8,16,0,0,0,0),"idea-cbc":e("idea-cbc",8,16,0,0,0,0),"cast128-cbc":e("cast-cbc",8,16,0,0,0,0),"aes128-ctr":e("aes-128-ctr",16,16,16,0,0,1),"aes192-ctr":e("aes-192-ctr",16,24,16,0,0,1),"aes256-ctr":e("aes-256-ctr",16,32,16,0,0,1),"3des-ctr":e("des-ede3",8,24,8,0,0,1),"blowfish-ctr":e("bf-ecb",8,16,8,0,0,1),"cast128-ctr":e("cast5-ecb",8,16,8,0,0,1),arcfour:e("rc4",8,16,0,0,1536,1),arcfour128:e("rc4",8,16,0,0,1536,1),arcfour256:e("rc4",8,32,0,0,1536,1),arcfour512:e("rc4",8,64,0,0,1536,1)}})(),S=(()=>{function e(e,t,r,n){return{sslName:e,len:t,actualLen:r,isETM:n}}return{"hmac-md5":e("md5",16,16,!1),"hmac-md5-96":e("md5",16,12,!1),"hmac-ripemd160":e("ripemd160",20,20,!1),"hmac-sha1":e("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":e("sha1",20,20,!0),"hmac-sha1-96":e("sha1",20,12,!1),"hmac-sha2-256":e("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":e("sha256",32,32,!0),"hmac-sha2-256-96":e("sha256",32,12,!1),"hmac-sha2-512":e("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":e("sha512",64,64,!0),"hmac-sha2-512-96":e("sha512",64,12,!1)}})();const I=Buffer.alloc(32),k=Buffer.alloc(16);let C,R,T;class B{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encKeyMain=t.cipherKey.slice(0,32),this._encKeyPktLen=t.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,s(n,5+e,r),n}encrypt(e){if(this._dead)return;k[0]=0,l(k,this.outSeqno,12);const t=n("chacha20",this._encKeyMain,k).update(I),r=n("chacha20",this._encKeyPktLen,k).update(e.slice(0,4));this._onWrite(r),k[0]=1;const i=n("chacha20",this._encKeyMain,k).update(e.slice(4));this._onWrite(i),T(R,r,r.length,i,i.length,t);const o=Buffer.allocUnsafe(16);o.set(new Uint8Array(C.HEAPU8.buffer,R,16),0),this._onWrite(o),this.outSeqno=this.outSeqno+1>>>0}}class O{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new y(t.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t+16);return l(n,t-4,0),n[4]=r,s(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class P{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encSSLName=t.cipherInfo.sslName,this._encKey=t.cipherKey,this._encIV=t.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,s(n,5+e,r),n}encrypt(e){if(this._dead)return;const t=n(this._encSSLName,this._encKey,this._encIV);t.setAutoPadding(!1);const r=e.slice(0,4);t.setAAD(r),this._onWrite(r);const i=t.update(e.slice(4));this._onWrite(i);const o=t.final();o.length&&this._onWrite(o);const s=t.getAuthTag();this._onWrite(s),W(this._encIV),this.outSeqno=this.outSeqno+1>>>0}}class N{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new m(t.cipherInfo.sslName,t.cipherKey,t.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t+16);return l(n,t-4,0),n[4]=r,s(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class x{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encBlockLen=t.cipherInfo.blockLen,this._cipherInstance=n(t.cipherInfo.sslName,t.cipherKey,t.cipherIV),this._macSSLName=t.macInfo.sslName,this._macKey=t.macKey,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;const r=t.cipherInfo.discardLen;if(r){let e=p.get(r);void 0===e&&(e=Buffer.alloc(r),p.set(r,e)),this._cipherInstance.update(e)}}free(){this._dead=!0}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const i=Buffer.allocUnsafe(r);return l(i,r-4,0),i[4]=n,s(i,5+e,n),i}encrypt(e){if(this._dead)return;let t;if(this._macETM){const r=new Uint8Array(e.buffer,e.byteOffset,4),n=this._cipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+4,e.length-4));this._onWrite(r),this._onWrite(n),t=o(this._macSSLName,this._macKey),l(f,this.outSeqno,0),t.update(f),t.update(r),t.update(n)}else{const r=this._cipherInstance.update(e);this._onWrite(r),t=o(this._macSSLName,this._macKey),l(f,this.outSeqno,0),t.update(f),t.update(e)}let r=t.digest();r.length>this._macActualLen&&(r=r.slice(0,this._macActualLen)),this._onWrite(r),this.outSeqno=this.outSeqno+1>>>0}}class L{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encBlockLen=t.cipherInfo.blockLen,this._macLen=t.macInfo.len,this._macActualLen=t.macInfo.actualLen,this._aadLen=t.macInfo.isETM?4:0,this._instance=new b(t.cipherInfo.sslName,t.cipherKey,t.cipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const i=Buffer.allocUnsafe(r+this._macLen);return l(i,r-4,0),i[4]=n,s(i,5+e,n),i}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._macActualLen<this._macLen&&(e=new u(e.buffer,e.byteOffset,e.length-(this._macLen-this._macActualLen))),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class M{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decKeyMain=t.decipherKey.slice(0,32),this._decKeyPktLen=t.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);for(;n--;)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;k[0]=0,l(k,this.inSeqno,12);const o=i("chacha20",this._decKeyPktLen,k).update(this._lenBuf);if(this._len=c(o,0),this._len>g||this._len<8||7&this._len)throw new Error("Bad packet length")}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<16)return}k[0]=0,l(k,this.inSeqno,12);const o=n("chacha20",this._decKeyMain,k).update(I);if(T(R,this._lenBuf,4,this._packet,this._packet.length,o),this._calcMac.set(new Uint8Array(C.HEAPU8.buffer,R,16),0),!a(this._calcMac,this._mac))throw new Error("Invalid MAC");k[0]=1;const s=i("chacha20",this._decKeyMain,k).update(this._packet),h=new u(s.buffer,s.byteOffset+1,s.length-s[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(h);if(void 0!==e)return!1===e?t:e}}}}class D{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new A(t.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);for(;n--;)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>g||this._len<8||7&this._len)throw new Error("Bad packet length");if(t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;if(i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class U{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decipherInstance=null,this._decipherSSLName=t.decipherInfo.sslName,this._decipherKey=t.decipherKey,this._decipherIV=t.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||15&this._len)throw new Error("Bad packet length");this._decipherInstance=i(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD($(this._len))}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(i=0!==t||n!==r?this._decipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+t,n)):this._decipherInstance.update(e),i.length&&(n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._packetPos)),this._packetPos+=i.length),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(0!==t||n!==r?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos):this._tag.set(e,this._tagPos),t+=n,this._tagPos+=n,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const e=this._decipherInstance.final();e.length&&(this._packet?this._packet.set(e,this._packetPos):this._packet=e)}const n=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):d;this.inSeqno=this.inSeqno+1>>>0,W(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class F{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new w(t.decipherInfo.sslName,t.decipherKey,t.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||15&this._len)throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(0!==t||n!==r?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos):this._tag.set(e,this._tagPos),t+=n,this._tagPos+=n,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class j{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decipherInstance=i(t.decipherInfo.sslName,t.decipherKey,t.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(t.macInfo.isETM?4:t.decipherInfo.blockLen),this._blockSize=t.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(t.macInfo.actualLen),this._macPos=0,this._macSSLName=t.macInfo.sslName,this._macKey=t.macKey,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM,this._macInstance=null;const r=t.decipherInfo.discardLen;if(r){let e=p.get(r);void 0===e&&(e=Buffer.alloc(r),p.set(r,e)),this._decipherInstance.update(e)}}free(){}decrypt(e,t,r){for(;t<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(0!==t||n!==r||n<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos):this._block.set(e,this._blockPos),t+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let i,s;if(this._macETM?this._len=s=c(this._block,0):(i=this._decipherInstance.update(this._block),this._len=c(i,0),s=4+this._len-this._blockSize),this._len>g||this._len<5||s&this._blockSize-1)throw new Error("Bad packet length");if(this._macInstance=o(this._macSSLName,this._macKey),l(f,this.inSeqno,0),this._macInstance.update(f),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(i.buffer,i.byteOffset,4)),this._pktLen=i.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(i.buffer,i.byteOffset+4,this._packetPos),0)),t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,this._macETM&&this._macInstance.update(i);const o=this._decipherInstance.update(i);if(o.length&&(n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._packetPos)),this._packetPos+=o.length),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let n=this._macInstance.digest();if(this._macActualLen<n.length&&(n=new Uint8Array(n.buffer,n.byteOffset,this._macActualLen)),!Q(n,this._mac))throw new Error("Invalid MAC");const i=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(i);if(void 0!==e)return!1===e?t:e}}}}class H{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new v(t.decipherInfo.sslName,t.decipherKey,t.decipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM,t.macInfo.actualLen),this._block=Buffer.allocUnsafe(t.macInfo.isETM||t.decipherInfo.stream?4:t.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(t.macInfo.actualLen),this._macPos=0,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(0!==t||n!==r||n<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos):this._block.set(e,this._blockPos),t+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let i;if(this._macETM?this._len=i=c(this._block,0):(this._instance.decryptBlock(this._block),this._len=c(this._block,0),i=4+this._len-this._block.length),this._len>g||this._len<5||i&this._block.length-1)throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;if(i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}function W(e){++e[11]>>>8&&++e[10]>>>8&&++e[9]>>>8&&++e[8]>>>8&&++e[7]>>>8&&++e[6]>>>8&&++e[5]>>>8&&++e[4]}const $=(()=>{const e=Buffer.alloc(4);return t=>(e[0]=t>>>24,e[1]=t>>>16,e[2]=t>>>8,e[3]=t,e)})();function Q(e,t){return e.length!==t.length?(a(e,e),!1):a(e,t)}e.exports={CIPHER_INFO:E,MAC_INFO:S,bindingAvailable:!!_,init:new Promise((async(e,t)=>{try{C=await r(125)(),R=C._malloc(16),T=C.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(e){return t(e)}e()})),NullCipher:class{constructor(e,t){this.outSeqno=e,this._onWrite=t,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(7&t);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,s(n,5+e,r),n}encrypt(e){this._dead||(this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},createCipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.outbound||null===e.outbound)throw new Error("Invalid outbound");const t=e.outbound;if("function"!=typeof t.onWrite)throw new Error("Invalid outbound.onWrite");if("object"!=typeof t.cipherInfo||null===t.cipherInfo)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(t.cipherKey)||t.cipherKey.length!==t.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(t.cipherInfo.ivLen&&(!Buffer.isBuffer(t.cipherIV)||t.cipherIV.length!==t.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>h)throw new Error("Invalid outbound.seqno");const r=!!t.forceNative;switch(t.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return m&&!r?new N(e):new P(e);case"chacha20":return y&&!r?new O(e):new B(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid outbound.macKey");return b&&!r?new L(e):new x(e)}},NullDecipher:class{constructor(e,t){this.inSeqno=e,this._onPayload=t,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len>g||this._len<8||4+this._len&7)throw new Error("Bad packet length");if(t>=r)return}if(this._packetPos<this._len){const n=Math.min(this._len-this._packetPos,r-t);let i;if(i=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._packetPos)),t+=n,this._packetPos+=n,this._packetPos<this._len)return}const n=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):d;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}},createDecipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.inbound||null===e.inbound)throw new Error("Invalid inbound");const t=e.inbound;if("function"!=typeof t.onPayload)throw new Error("Invalid inbound.onPayload");if("object"!=typeof t.decipherInfo||null===t.decipherInfo)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(t.decipherKey)||t.decipherKey.length!==t.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(t.decipherInfo.ivLen&&(!Buffer.isBuffer(t.decipherIV)||t.decipherIV.length!==t.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>h)throw new Error("Invalid inbound.seqno");const r=!!t.forceNative;switch(t.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return w&&!r?new F(e):new U(e);case"chacha20":return A&&!r?new D(e):new M(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid inbound.macKey");return v&&!r?new H(e):new j(e)}}}},125:(e,t,r)=>{var n,i=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||__filename,function(e){var t,i,o;e=e||{},t||(t="undefined"!=typeof e?e:{}),t.ready=new Promise((function(e,t){i=e,o=t}));var s,a={};for(s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);var c,l,u,h,d,f="object"==typeof window,p="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_="";g?(_=p?r(6928).dirname(_)+"/":"node_modules/ssh2/lib/protocol/crypto/",c=function(e,t){var n=Q(e);return n?t?n:n.toString():(h||(h=r(9896)),d||(d=r(6928)),e=d.normalize(e),h.readFileSync(e,t?null:"utf8"))},u=function(e){return(e=c(e,!0)).buffer||(e=new Uint8Array(e)),A(e.buffer),e},l=function(e,t,n){var i=Q(e);i&&t(i),h||(h=r(9896)),d||(d=r(6928)),e=d.normalize(e),h.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),t.inspect=function(){return"[Emscripten Module object]"}):(f||p)&&(p?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),n&&(_=n),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",c=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(i){if(e=Q(e)){t=[];for(var r=0;r<e.length;r++){var n=e[r];255<n&&(W&&A(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255),t.push(String.fromCharCode(n))}return t.join("")}throw i}},p&&(u=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=Q(e))return e;throw t}}),l=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)t(n.response);else{var i=Q(e);i?t(i.buffer):r()}},n.onerror=r,n.send(null)}),t.print||console.log.bind(console);var m,y=t.printErr||console.warn.bind(console);for(s in a)a.hasOwnProperty(s)&&(t[s]=a[s]);a=null,t.wasmBinary&&(m=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&M("no native wasm support detected");var b,w=!1;function A(e,t){e||M("Assertion failed: "+t)}function v(e){var r=t["_"+e];return A(r,"Cannot call unknown function "+e+", make sure it is exported"),r}var E,S,I,k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(){var e=b.buffer;E=e,t.HEAP8=S=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU8=I=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var R,T=[],B=[],O=[];function P(){var e=t.preRun.shift();T.unshift(e)}var N=0,x=null,L=null;function M(e){throw t.onAbort&&t.onAbort(e),y(e),w=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),o(e),e}t.preloadedImages={},t.preloadedAudios={};var D,U="data:application/octet-stream;base64,";if(!(D="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==").startsWith(U)){var F=D;D=t.locateFile?t.locateFile(F,_):_+F}function j(){var e=D;try{if(e==D&&m)return new Uint8Array(m);var t=Q(e);if(t)return t;if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){M(e)}}function H(e){for(;0<e.length;){var r=e.shift();if("function"==typeof r)r(t);else{var n=r.m;"number"==typeof n?void 0===r.l?R.get(n)():R.get(n)(r.l):n(void 0===r.l?null:r.l)}}}var W=!1,$="function"==typeof atob?atob:function(e){var t="",r=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));n=n<<2|i>>4,i=(15&i)<<4|o>>2;var a=(3&o)<<6|s;t+=String.fromCharCode(n),64!==o&&(t+=String.fromCharCode(i)),64!==s&&(t+=String.fromCharCode(a))}while(r<e.length);return t};function Q(e){if(e.startsWith(U)){if(e=e.slice(U.length),"boolean"==typeof g&&g){var t=Buffer.from(e,"base64");t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else try{var r=$(e),n=new Uint8Array(r.length);for(e=0;e<r.length;++e)n[e]=r.charCodeAt(e);t=n}catch(e){throw Error("Converting base64 string to bytes failed.")}return t}}var K={a:function(e){var t=I.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296),0<(n=Math.max(e,n))%65536&&(n+=65536-n%65536);e:{try{b.grow(Math.min(2147483648,n)-E.byteLength+65535>>>16),C();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1}};!function(){function e(e){t.asm=e.exports,b=t.asm.b,C(),R=t.asm.j,B.unshift(t.asm.c),N--,t.monitorRunDependencies&&t.monitorRunDependencies(N),0==N&&(null!==x&&(clearInterval(x),x=null),L&&(e=L,L=null,e()))}function r(t){e(t.instance)}function n(e){return function(){if(!m&&(f||p)){if("function"==typeof fetch&&!D.startsWith("file://"))return fetch(D,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+D+"'";return e.arrayBuffer()})).catch((function(){return j()}));if(l)return new Promise((function(e,t){l(D,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return j()}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),M(e)}))}var i={a:K};if(N++,t.monitorRunDependencies&&t.monitorRunDependencies(N),t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||D.startsWith(U)||D.startsWith("file://")||"function"!=typeof fetch?n(r):fetch(D,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(r,(function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(o)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},t._poly1305_auth=function(){return(t._poly1305_auth=t.asm.d).apply(null,arguments)};var q,G=t.stackSave=function(){return(G=t.stackSave=t.asm.e).apply(null,arguments)},V=t.stackRestore=function(){return(V=t.stackRestore=t.asm.f).apply(null,arguments)},Y=t.stackAlloc=function(){return(Y=t.stackAlloc=t.asm.g).apply(null,arguments)};function z(){function e(){if(!q&&(q=!0,t.calledRun=!0,!w)){if(H(B),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();O.unshift(e)}H(O)}}if(!(0<N)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)P();H(T),0<N||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._malloc=function(){return(t._malloc=t.asm.h).apply(null,arguments)},t._free=function(){return(t._free=t.asm.i).apply(null,arguments)},t.cwrap=function(e,t,r,n){var i=(r=r||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!n?v(e):function(){return function(e,t,r,n){var i={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2),n=t=Y(r),i=I;if(0<r){r=n+r-1;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),127>=s){if(n>=r)break;i[n++]=s}else{if(2047>=s){if(n+1>=r)break;i[n++]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;i[n++]=224|s>>12}else{if(n+3>=r)break;i[n++]=240|s>>18,i[n++]=128|s>>12&63}i[n++]=128|s>>6&63}i[n++]=128|63&s}}i[n]=0}}return t},array:function(e){var t=Y(e.length);return S.set(e,t),t}},o=v(e),s=[];if(e=0,n)for(var a=0;a<n.length;a++){var c=i[r[a]];c?(0===e&&(e=G()),s[a]=c(n[a])):s[a]=n[a]}return r=function(e){if("string"===t)if(e){for(var r=I,n=e+NaN,i=e;r[i]&&!(i>=n);)++i;if(16<i-e&&r.subarray&&k)e=k.decode(r.subarray(e,i));else{for(n="";e<i;){var o=r[e++];if(128&o){var s=63&r[e++];if(192==(224&o))n+=String.fromCharCode((31&o)<<6|s);else{var a=63&r[e++];65536>(o=224==(240&o)?(15&o)<<12|s<<6|a:(7&o)<<18|s<<12|a<<6|63&r[e++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}e=n}}else e="";else e="boolean"===t?!!e:e;return e}(r=o.apply(null,s)),0!==e&&V(e),r}(e,t,r,arguments)}},L=function e(){q||z(),q||(L=e)},t.run=z,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return z(),e.ready});e.exports=i},2569:(e,t,r)=>{"use strict";const n=new Array(256);[r(8818).HANDLERS,r(3439)].forEach((e=>{for(let[t,r]of Object.entries(e))t=+t,isFinite(t)&&t>=0&&t<n.length&&(n[t]=r)})),e.exports=n},3439:(e,t,r)=>{"use strict";const{bufferSlice:n,bufferParser:i,doFatalError:o,sigSSHToASN1:s,writeUInt32BE:a}=r(5623),{CHANNEL_OPEN_FAILURE:c,COMPAT:l,MESSAGE:u,TERMINAL_MODE:h}=r(2535),{parseKey:d}=r(8946),f=Array.from(Object.entries(h)).reduce(((e,[t,r])=>({...e,[t]:r})),{});e.exports={[u.DISCONNECT]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readString(!0),s=i.readString();if(i.clear(),void 0===s)return o(e,"Inbound: Malformed DISCONNECT packet");e._debug&&e._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);const a=e._handlers.DISCONNECT;a&&a(e,r,n)},[u.IGNORE]:(e,t)=>{e._debug&&e._debug("Inbound: Received IGNORE")},[u.UNIMPLEMENTED]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return o(e,"Inbound: Malformed UNIMPLEMENTED packet");e._debug&&e._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[u.DEBUG]:(e,t)=>{i.init(t,1);const r=i.readBool(),n=i.readString(!0),s=i.readString();if(i.clear(),void 0===s)return o(e,"Inbound: Malformed DEBUG packet");e._debug&&e._debug("Inbound: Received DEBUG");const a=e._handlers.DEBUG;a&&a(e,r,n)},[u.SERVICE_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(!0);if(i.clear(),void 0===r)return o(e,"Inbound: Malformed SERVICE_REQUEST packet");e._debug&&e._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const n=e._handlers.SERVICE_REQUEST;n&&n(e,r)},[u.SERVICE_ACCEPT]:(e,t)=>{i.init(t,1);const r=i.readString(!0);if(i.clear(),void 0===r)return o(e,"Inbound: Malformed SERVICE_ACCEPT packet");e._debug&&e._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const n=e._handlers.SERVICE_ACCEPT;n&&n(e,r)},[u.EXT_INFO]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();let n;if(void 0!==r){n=[];for(let e=0;e<r;++e){const e=i.readString(!0),t=i.readString();if(void 0===t){n=void 0;break}if("server-sig-algs"!==e);else{const r=t.latin1Slice(0,t.length).split(",");n.push({name:e,algs:r})}}}if(i.clear(),void 0===n)return o(e,"Inbound: Malformed EXT_INFO packet");e._debug&&e._debug("Inbound: Received EXT_INFO");const s=e._handlers.EXT_INFO;s&&s(e,n)},[u.USERAUTH_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(!0),c=i.readString(!0),l=i.readString(!0);let u,h;switch(l){case"none":u=null;break;case"password":{const e=i.readBool();if(void 0!==e&&(u=i.readString(!0),void 0!==u&&e)){const e=i.readString(!0);u=void 0!==e?{oldPassword:u,newPassword:e}:void 0}break}case"publickey":{const r=i.readBool();if(void 0!==r){const o=i.readString(!0);let c=o;const l=i.readString();let d;switch(o){case"rsa-sha2-256":c="ssh-rsa",d="sha256";break;case"rsa-sha2-512":c="ssh-rsa",d="sha512"}if(r){const r=i.pos();let h=i.readString();if(void 0!==h&&(h.length>4+o.length+4&&h.utf8Slice(4,4+o.length)===o&&(h=n(h,4+o.length+4)),h=s(h,c),h)){const n=e._kex.sessionID,i=Buffer.allocUnsafe(4+n.length+r);a(i,n.length,0),i.set(n,4),i.set(new Uint8Array(t.buffer,t.byteOffset,r),4+n.length),u={keyAlgo:c,key:l,signature:h,blob:i,hashAlgo:d}}}else u={keyAlgo:c,key:l,hashAlgo:d},h="publickey -- check"}break}case"hostbased":{const r=i.readString(!0);let o=r;const c=i.readString(),l=i.readString(!0),h=i.readString(!0);let d;switch(r){case"rsa-sha2-256":o="ssh-rsa",d="sha256";break;case"rsa-sha2-512":o="ssh-rsa",d="sha512"}const f=i.pos();let p=i.readString();if(void 0!==p&&(p.length>4+r.length+4&&p.utf8Slice(4,4+r.length)===r&&(p=n(p,4+r.length+4)),p=s(p,o),void 0!==p)){const r=e._kex.sessionID,n=Buffer.allocUnsafe(4+r.length+f);a(n,r.length,0),n.set(r,4),n.set(new Uint8Array(t.buffer,t.byteOffset,f),4+r.length),u={keyAlgo:o,key:c,signature:p,blob:n,localHostname:l,localUsername:h,hashAlgo:d}}break}case"keyboard-interactive":i.skipString(),u=i.readList();break;default:void 0!==l&&(u=i.readRaw())}if(i.clear(),void 0===u)return o(e,"Inbound: Malformed USERAUTH_REQUEST packet");void 0===h&&(h=l),e._authsQueue.push(l),e._debug&&e._debug(`Inbound: Received USERAUTH_REQUEST (${h})`);const d=e._handlers.USERAUTH_REQUEST;d&&d(e,r,c,l,u)},[u.USERAUTH_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readList(),n=i.readBool();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed USERAUTH_FAILURE packet");e._debug&&e._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),e._authsQueue.shift();const s=e._handlers.USERAUTH_FAILURE;s&&s(e,r,n)},[u.USERAUTH_SUCCESS]:(e,t)=>{e._debug&&e._debug("Inbound: Received USERAUTH_SUCCESS"),e._authsQueue.shift();const r=e._handlers.USERAUTH_SUCCESS;r&&r(e)},[u.USERAUTH_BANNER]:(e,t)=>{i.init(t,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed USERAUTH_BANNER packet");e._debug&&e._debug("Inbound: Received USERAUTH_BANNER");const s=e._handlers.USERAUTH_BANNER;s&&s(e,r)},60:(e,t)=>{if(e._authsQueue.length)switch(e._authsQueue[0]){case"password":{i.init(t,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");e._debug&&e._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const s=e._handlers.USERAUTH_PASSWD_CHANGEREQ;s&&s(e,r);break}case"publickey":{i.init(t,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed USERAUTH_PK_OK packet");e._debug&&e._debug("Inbound: Received USERAUTH_PK_OK"),e._authsQueue.shift();const s=e._handlers.USERAUTH_PK_OK;s&&s(e,r,n);break}case"keyboard-interactive":{i.init(t,1);const r=i.readString(!0),n=i.readString(!0);i.readString();const s=i.readUInt32BE();let a;if(void 0!==s){let e;for(a=new Array(s),e=0;e<s;++e){const t=i.readString(!0),r=i.readBool();if(void 0===r)break;a[e]={prompt:t,echo:r}}e!==s&&(a=void 0)}if(i.clear(),void 0===a)return o(e,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_REQUEST");const c=e._handlers.USERAUTH_INFO_REQUEST;c&&c(e,r,n,a);break}default:e._debug&&e._debug("Inbound: Received unexpected payload type 60")}else e._debug&&e._debug("Inbound: Received payload type 60 without auth")},61:(e,t)=>{if(!e._authsQueue.length)return void(e._debug&&e._debug("Inbound: Received payload type 61 without auth"));if("keyboard-interactive"!==e._authsQueue[0])return o(e,"Inbound: Received unexpected payload type 61");i.init(t,1);const r=i.readUInt32BE();let n;if(void 0!==r){let e;for(n=new Array(r),e=0;e<r;++e){const t=i.readString(!0);if(void 0===t)break;n[e]=t}e!==r&&(n=void 0)}if(i.clear(),void 0===n)return o(e,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const s=e._handlers.USERAUTH_INFO_RESPONSE;s&&s(e,n)},[u.GLOBAL_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(!0),n=i.readBool();let s;if(void 0!==n)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const e=i.readString(!0),t=i.readUInt32BE();void 0!==t&&(s={bindAddr:e,bindPort:t});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const e=i.readString(!0);void 0!==e&&(s={socketPath:e});break}case"no-more-sessions@openssh.com":s=null;break;case"hostkeys-00@openssh.com":for(s=[];i.avail()>0;){const e=i.readString();if(void 0===e){s=void 0;break}const t=d(e);t instanceof Error||s.push(t)}break;default:s=i.readRaw()}if(i.clear(),void 0===s)return o(e,"Inbound: Malformed GLOBAL_REQUEST packet");e._debug&&e._debug(`Inbound: GLOBAL_REQUEST (${r})`);const a=e._handlers.GLOBAL_REQUEST;a?a(e,r,n,s):e.requestFailure()},[u.REQUEST_SUCCESS]:(e,t)=>{const r=t.length>1?n(t,1):null;e._debug&&e._debug("Inbound: REQUEST_SUCCESS");const i=e._handlers.REQUEST_SUCCESS;i&&i(e,r)},[u.REQUEST_FAILURE]:(e,t)=>{e._debug&&e._debug("Inbound: Received REQUEST_FAILURE");const r=e._handlers.REQUEST_FAILURE;r&&r(e)},[u.CHANNEL_OPEN]:(e,t)=>{i.init(t,1);const r=i.readString(!0),n=i.readUInt32BE(),s=i.readUInt32BE(),a=i.readUInt32BE();let l;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const e=i.readString(!0),t=i.readUInt32BE(),o=i.readString(!0),c=i.readUInt32BE();void 0!==c&&(l={type:r,sender:n,window:s,packetSize:a,data:{destIP:e,destPort:t,srcIP:o,srcPort:c}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const e=i.readString(!0);void 0!==e&&(l={type:r,sender:n,window:s,packetSize:a,data:{socketPath:e}});break}case"x11":{const e=i.readString(!0),t=i.readUInt32BE();void 0!==t&&(l={type:r,sender:n,window:s,packetSize:a,data:{srcIP:e,srcPort:t}});break}default:l={type:r,sender:n,window:s,packetSize:a,data:{}}}if(i.clear(),void 0===l)return o(e,"Inbound: Malformed CHANNEL_OPEN packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);const u=e._handlers.CHANNEL_OPEN;u?u(e,l):e.channelOpenFail(l.sender,c.ADMINISTRATIVELY_PROHIBITED,"","")},[u.CHANNEL_OPEN_CONFIRMATION]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),s=i.readUInt32BE(),a=i.readUInt32BE(),c=i.avail()?i.readRaw():void 0;if(i.clear(),void 0===a)return o(e,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);const l=e._handlers.CHANNEL_OPEN_CONFIRMATION;l&&l(e,{recipient:r,sender:n,window:s,packetSize:a,data:c})},[u.CHANNEL_OPEN_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),s=i.readString(!0),a=i.readString();if(i.clear(),void 0===a)return o(e,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const c=e._handlers.CHANNEL_OPEN_FAILURE;c&&c(e,r,n,s)},[u.CHANNEL_WINDOW_ADJUST]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readUInt32BE();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");e._debug&&e._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);const s=e._handlers.CHANNEL_WINDOW_ADJUST;s&&s(e,r,n)},[u.CHANNEL_DATA]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readString();if(i.clear(),void 0===n)return o(e,"Inbound: Malformed CHANNEL_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);const s=e._handlers.CHANNEL_DATA;s&&s(e,r,n)},[u.CHANNEL_EXTENDED_DATA]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),s=i.readString();if(i.clear(),void 0===s)return o(e,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${s.length})`);const a=e._handlers.CHANNEL_EXTENDED_DATA;a&&a(e,r,s,n)},[u.CHANNEL_EOF]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return o(e,"Inbound: Malformed CHANNEL_EOF packet");e._debug&&e._debug(`Inbound: CHANNEL_EOF (r:${r})`);const n=e._handlers.CHANNEL_EOF;n&&n(e,r)},[u.CHANNEL_CLOSE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return o(e,"Inbound: Malformed CHANNEL_CLOSE packet");e._debug&&e._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const n=e._handlers.CHANNEL_CLOSE;n&&n(e,r)},[u.CHANNEL_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE(),n=i.readString(!0),s=i.readBool();let a;if(void 0!==s)switch(n){case"exit-status":a=i.readUInt32BE(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"exit-signal":{let t,o;if(e._compatFlags&l.OLD_EXIT){const e=i.readUInt32BE();switch(e){case 1:t="HUP";break;case 2:t="INT";break;case 3:t="QUIT";break;case 6:t="ABRT";break;case 9:t="KILL";break;case 14:t="ALRM";break;case 15:t="TERM";break;default:void 0!==e&&(t=`UNKNOWN (${e})`)}o=!1}else t=i.readString(!0),o=i.readBool(),void 0===o&&(t=void 0);const s=i.readString(!0);void 0!==i.skipString()&&(a={signal:t,coreDumped:o,errorMessage:s}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${t})`);break}case"pty-req":{const t=i.readString(!0),o=i.readUInt32BE(),s=i.readUInt32BE(),c=i.readUInt32BE(),l=i.readUInt32BE(),u=i.readString();if(void 0!==u){i.init(u,1);let e={};for(;i.avail();){const t=i.readByte();if(t===h.TTY_OP_END)break;const r=f[t],n=i.readUInt32BE();if(void 0===t||void 0===r||void 0===n){e=void 0;break}e[r]=n}void 0!==e&&(a={term:t,cols:o,rows:s,width:c,height:l,modes:e})}e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{const t=i.readUInt32BE(),o=i.readUInt32BE(),s=i.readUInt32BE(),c=i.readUInt32BE();void 0!==c&&(a={cols:t,rows:o,width:s,height:c}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{const t=i.readBool(),o=i.readString(!0),s=i.readString(),c=i.readUInt32BE();void 0!==c&&(a={single:t,protocol:o,cookie:s,screen:c}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{const t=i.readString(!0),o=i.readString(!0);void 0!==o&&(a={name:t,value:o}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${t}=${o})`);break}case"shell":case"auth-agent-req@openssh.com":a=null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":case"subsystem":case"signal":a=i.readString(!0),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"xon-xoff":a=i.readBool(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;default:a=i.avail()?i.readRaw():null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}if(i.clear(),void 0===a)return o(e,"Inbound: Malformed CHANNEL_REQUEST packet");const c=e._handlers.CHANNEL_REQUEST;c&&c(e,r,n,s,a)},[u.CHANNEL_SUCCESS]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return o(e,"Inbound: Malformed CHANNEL_SUCCESS packet");e._debug&&e._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const n=e._handlers.CHANNEL_SUCCESS;n&&n(e,r)},[u.CHANNEL_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return o(e,"Inbound: Malformed CHANNEL_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const n=e._handlers.CHANNEL_FAILURE;n&&n(e,r)}}},8818:(e,t,r)=>{"use strict";const{createDiffieHellman:n,createDiffieHellmanGroup:i,createECDH:o,createHash:s,createPublicKey:a,diffieHellman:c,generateKeyPairSync:l,randomFillSync:u}=r(6982),{Ber:h}=r(3100),{COMPAT:d,curve25519Supported:f,DEFAULT_KEX:p,DEFAULT_SERVER_HOST_KEY:g,DEFAULT_CIPHER:_,DEFAULT_MAC:m,DEFAULT_COMPRESSION:y,DISCONNECT_REASON:b,MESSAGE:w}=r(2535),{CIPHER_INFO:A,createCipher:v,createDecipher:E,MAC_INFO:S}=r(7785),{parseDERKey:I}=r(8946),{bufferFill:k,bufferParser:C,convertSignature:R,doFatalError:T,FastBuffer:B,sigSSHToASN1:O,writeUInt32BE:P}=r(5623),{PacketReader:N,PacketWriter:x,ZlibPacketReader:L,ZlibPacketWriter:M}=r(3129);let D;const U=Buffer.alloc(0);function F(e){let t;if(e._compatFlags&d.BAD_DHGEX){const r=e._offer.lists.kex;let n=r.array,i=!1;for(let e=0;e<n.length;++e)n[e].includes("group-exchange")&&(i||(i=!0,n=n.slice()),n.splice(e--,1));if(i){let i=17+e._offer.totalSize+1+4;const o=Buffer.from(n.join(","));i-=r.buffer.length-o.length;const s=e._offer.lists.all,a=new Uint8Array(s.buffer,s.byteOffset+4+r.buffer.length,s.length-(4+r.buffer.length));t=Buffer.allocUnsafe(i),P(t,o.length,17),t.set(o,21),t.set(a,21+o.length)}}void 0===t&&(t=Buffer.allocUnsafe(17+e._offer.totalSize+1+4),e._offer.copyAllTo(t,17)),e._debug&&e._debug("Outbound: Sending KEXINIT"),t[0]=w.KEXINIT,u(t,1,16),k(t,0,t.length-5),e._kexinit=t,e._packetRW.write.allocStart=0;{const r=e._packetRW.write.allocStartKEX,n=e._packetRW.write.alloc(t.length,!0);n.set(t,r),e._cipher.encrypt(e._packetRW.write.finalize(n,!0))}}function j(e,t){const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(C.init(t,17),void 0===(r.kex=C.readList())||void 0===(r.serverHostKey=C.readList())||void 0===(r.cs.cipher=C.readList())||void 0===(r.sc.cipher=C.readList())||void 0===(r.cs.mac=C.readList())||void 0===(r.sc.mac=C.readList())||void 0===(r.cs.compress=C.readList())||void 0===(r.sc.compress=C.readList())||void 0===(r.cs.lang=C.readList())||void 0===(r.sc.lang=C.readList()))return C.clear(),T(e,"Received malformed KEXINIT","handshake",b.KEY_EXCHANGE_FAILED);const n=C.pos(),i=n<t.length&&1===t[n];C.clear();const o=e._offer,s=r;let a,c,l,u=o.lists.kex.array;if(e._compatFlags&d.BAD_DHGEX){let e=!1;for(let t=0;t<u.length;++t)-1!==u[t].indexOf("group-exchange")&&(e||(e=!0,u=u.slice()),u.splice(t--,1))}const h=e._debug;let f;if(h&&h("Inbound: Handshake in progress"),h&&h(`Handshake: (local) KEX method: ${u}`),h&&h(`Handshake: (remote) KEX method: ${s.kex}`),e._server?(c=u,a=s.kex,f=-1!==a.indexOf("ext-info-c")):(c=s.kex,a=u,f=-1!==c.indexOf("ext-info-s")),void 0===e._strictMode&&(e._server?e._strictMode=-1!==a.indexOf("kex-strict-c-v00@openssh.com"):e._strictMode=-1!==c.indexOf("kex-strict-s-v00@openssh.com"),e._strictMode&&(h&&h("Handshake: strict KEX mode enabled"),1!==e._decipher.inSeqno)))return h&&h("Handshake: KEXINIT not first packet in strict KEX mode"),T(e,"Handshake failed: KEXINIT not first packet in strict KEX mode","handshake",b.KEY_EXCHANGE_FAILED);for(l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: no matching key exchange algorithm"),T(e,"Handshake failed: no matching key exchange algorithm","handshake",b.KEY_EXCHANGE_FAILED);r.kex=a[l],h&&h(`Handshake: KEX algorithm: ${a[l]}`),!i||s.kex.length&&a[l]===s.kex[0]||(e._skipNextInboundPacket=!0);const p=o.lists.serverHostKey.array;for(h&&h(`Handshake: (local) Host key format: ${p}`),h&&h(`Handshake: (remote) Host key format: ${s.serverHostKey}`),e._server?(c=p,a=s.serverHostKey):(c=s.serverHostKey,a=p),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching host key format"),T(e,"Handshake failed: no matching host key format","handshake",b.KEY_EXCHANGE_FAILED);r.serverHostKey=a[l],h&&h(`Handshake: Host key format: ${a[l]}`);const g=o.lists.cs.cipher.array;for(h&&h(`Handshake: (local) C->S cipher: ${g}`),h&&h(`Handshake: (remote) C->S cipher: ${s.cs.cipher}`),e._server?(c=g,a=s.cs.cipher):(c=s.cs.cipher,a=g),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching C->S cipher"),T(e,"Handshake failed: no matching C->S cipher","handshake",b.KEY_EXCHANGE_FAILED);r.cs.cipher=a[l],h&&h(`Handshake: C->S Cipher: ${a[l]}`);const _=o.lists.sc.cipher.array;for(h&&h(`Handshake: (local) S->C cipher: ${_}`),h&&h(`Handshake: (remote) S->C cipher: ${s.sc.cipher}`),e._server?(c=_,a=s.sc.cipher):(c=s.sc.cipher,a=_),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching S->C cipher"),T(e,"Handshake failed: no matching S->C cipher","handshake",b.KEY_EXCHANGE_FAILED);r.sc.cipher=a[l],h&&h(`Handshake: S->C cipher: ${a[l]}`);const m=o.lists.cs.mac.array;if(h&&h(`Handshake: (local) C->S MAC: ${m}`),h&&h(`Handshake: (remote) C->S MAC: ${s.cs.mac}`),A[r.cs.cipher].authLen>0)r.cs.mac="",h&&h("Handshake: C->S MAC: <implicit>");else{for(e._server?(c=m,a=s.cs.mac):(c=s.cs.mac,a=m),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching C->S MAC"),T(e,"Handshake failed: no matching C->S MAC","handshake",b.KEY_EXCHANGE_FAILED);r.cs.mac=a[l],h&&h(`Handshake: C->S MAC: ${a[l]}`)}const y=o.lists.sc.mac.array;if(h&&h(`Handshake: (local) S->C MAC: ${y}`),h&&h(`Handshake: (remote) S->C MAC: ${s.sc.mac}`),A[r.sc.cipher].authLen>0)r.sc.mac="",h&&h("Handshake: S->C MAC: <implicit>");else{for(e._server?(c=y,a=s.sc.mac):(c=s.sc.mac,a=y),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching S->C MAC"),T(e,"Handshake failed: no matching S->C MAC","handshake",b.KEY_EXCHANGE_FAILED);r.sc.mac=a[l],h&&h(`Handshake: S->C MAC: ${a[l]}`)}const w=o.lists.cs.compress.array;for(h&&h(`Handshake: (local) C->S compression: ${w}`),h&&h(`Handshake: (remote) C->S compression: ${s.cs.compress}`),e._server?(c=w,a=s.cs.compress):(c=s.cs.compress,a=w),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching C->S compression"),T(e,"Handshake failed: no matching C->S compression","handshake",b.KEY_EXCHANGE_FAILED);r.cs.compress=a[l],h&&h(`Handshake: C->S compression: ${a[l]}`);const v=o.lists.sc.compress.array;for(h&&h(`Handshake: (local) S->C compression: ${v}`),h&&h(`Handshake: (remote) S->C compression: ${s.sc.compress}`),e._server?(c=v,a=s.sc.compress):(c=s.sc.compress,a=v),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return h&&h("Handshake: No matching S->C compression"),T(e,"Handshake failed: no matching S->C compression","handshake",b.KEY_EXCHANGE_FAILED);r.sc.compress=a[l],h&&h(`Handshake: S->C compression: ${a[l]}`),r.cs.lang="",r.sc.lang="",e._kex&&(e._kexinit||F(e),e._decipher._onPayload=K.bind(e,{firstPacket:!1})),e._kex=H(r,e,t),e._kex.remoteExtInfoEnabled=f,e._kex.start()}const H=(()=>{function e(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 128&e[r]?(t=Buffer.allocUnsafe(1+n),t[0]=0,e.copy(t,1,r),e=t):n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e}class t{constructor(e,t,r){this._protocol=t,this.sessionID=t._kex?t._kex.sessionID:void 0,this.negotiated=e,this.remoteExtInfoEnabled=!1,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=t._kexinit,this._remoteKexinit=r,this._identRaw=t._identRaw,this._remoteIdentRaw=t._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(e){if(this._finished)return!1;this._finished=!0;const t=this._protocol._server,r=this.negotiated,n=this.convertPublicKey(this._dhData);let i=this.computeSecret(this._dhData);if(i instanceof Error)return i.message=`Error while computing DH secret (${this.type}): ${i.message}`,i.level="handshake",T(this._protocol,i,b.KEY_EXCHANGE_FAILED);const o=s(this.hashName);$(o,t?this._remoteIdentRaw:this._identRaw),$(o,t?this._identRaw:this._remoteIdentRaw),$(o,t?this._remoteKexinit:this._kexinit),$(o,t?this._kexinit:this._remoteKexinit);const a=t?this._hostKey.getPublicSSH():this._hostKey;if($(o,a),"groupex"===this.type){const e=this.getDHParams(),t=Buffer.allocUnsafe(4);P(t,this._minBits,0),o.update(t),P(t,this._prefBits,0),o.update(t),P(t,this._maxBits,0),o.update(t),$(o,e.prime),$(o,e.generator)}$(o,t?n:this.getPublicKey());const c=t?this.getPublicKey():n;$(o,c),$(o,i);const l=o.digest();if(t){let e;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":e="sha256";break;case"rsa-sha2-512":e="sha512"}this._protocol._debug&&this._protocol._debug("Generating signature ...");let t=this._hostKey.sign(l,e);if(t instanceof Error)return T(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${t.message}`,"handshake",b.KEY_EXCHANGE_FAILED);if(t=R(t,this._hostKey.type),!1===t)return T(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",b.KEY_EXCHANGE_FAILED);const r=this.negotiated.serverHostKey,n=Buffer.byteLength(r),i=4+n+4+t.length;let o=this._protocol._packetRW.write.allocStartKEX;const s=this._protocol._packetRW.write.alloc(5+a.length+4+c.length+4+i,!0);if(s[o]=w.KEXDH_REPLY,P(s,a.length,++o),s.set(a,o+=4),P(s,c.length,o+=a.length),s.set(c,o+=4),P(s,i,o+=c.length),P(s,n,o+=4),s.utf8Write(r,o+=4,n),P(s,t.length,o+=n),s.set(t,o+=4),this._protocol._debug){let e;switch(this.type){case"group":e="KEXDH_REPLY";break;case"groupex":e="KEXDH_GEX_REPLY";break;default:e="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${e}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(s,!0))}else{C.init(this._sig,0);const e=C.readString(!0);if(!e)return T(this._protocol,"Malformed packet while reading signature","handshake",b.KEY_EXCHANGE_FAILED);if(e!==r.serverHostKey)return T(this._protocol,`Wrong signature type: ${e}, expected: ${r.serverHostKey}`,"handshake",b.KEY_EXCHANGE_FAILED);let t,n,i=C.readString();if(C.clear(),void 0===i)return T(this._protocol,"Malformed packet while reading signature","handshake",b.KEY_EXCHANGE_FAILED);if(!(i=O(i,e)))return T(this._protocol,"Malformed signature","handshake",b.KEY_EXCHANGE_FAILED);{C.init(this._hostKey,0);const e=C.readString(!0),r=this._hostKey.slice(C.pos());if(C.clear(),t=I(r,e),t instanceof Error)return t.level="handshake",T(this._protocol,t,b.KEY_EXCHANGE_FAILED)}switch(this.negotiated.serverHostKey){case"rsa-sha2-256":n="sha256";break;case"rsa-sha2-512":n="sha512"}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const o=t.verify(l,i,n);if(!0!==o)return o instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${o.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),T(this._protocol,"Handshake failed: signature verification failed","handshake",b.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}let u,h;!t&&e||q(this);const d=e=>{if(u)return q(this),u.outbound.seqno=this._protocol._cipher.outSeqno,this._protocol._cipher.free(),this._protocol._cipher=v(u),this._protocol._packetRW.write=h,u=void 0,h=void 0,this._protocol._onHandshakeComplete(r),!1;this.sessionID||(this.sessionID=l);{const e=Buffer.allocUnsafe(4+i.length);P(e,i.length,0),e.set(i,4),i=e}const n=A[r.cs.cipher],o=A[r.sc.cipher],s=Q(n.ivLen,this.hashName,i,l,this.sessionID,"A"),a=Q(o.ivLen,this.hashName,i,l,this.sessionID,"B"),c=Q(n.keyLen,this.hashName,i,l,this.sessionID,"C"),f=Q(o.keyLen,this.hashName,i,l,this.sessionID,"D");let p,g,_,m;n.authLen||(p=S[r.cs.mac],g=Q(p.len,this.hashName,i,l,this.sessionID,"E")),o.authLen||(_=S[r.sc.mac],m=Q(_.len,this.hashName,i,l,this.sessionID,"F"));const y={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:t?n:o,decipherIV:t?s:a,decipherKey:t?c:f,macInfo:t?p:_,macKey:t?g:m},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:t?o:n,cipherIV:t?a:s,cipherKey:t?f:c,macInfo:t?_:p,macKey:t?m:g}};this._protocol._decipher.free(),u=y,this._protocol._decipher=E(y);const b={read:void 0,write:void 0};switch(r.cs.compress){case"zlib":t?b.read=new L:b.write=new M(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){t?b.read=new L:b.write=new M(this._protocol);break}default:t?b.read=new N:b.write=new x(this._protocol)}switch(r.sc.compress){case"zlib":t?b.write=new M(this._protocol):b.read=new L;break;case"zlib@openssh.com":if(this._protocol._authenticated){t?b.write=new M(this._protocol):b.read=new L;break}default:t?b.write=new x(this._protocol):b.read=new N}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW.read=b.read,h=b.write,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,!e&&d()};return(t||e)&&(this.finish=d),t?void 0:d(e)}start(){if(!this._protocol._server){if(this._protocol._debug){let e;if("group"===this.type)e="KEXDH_INIT";else e="KEXECDH_INIT";this._protocol._debug(`Outbound: Sending ${e}`)}const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=w.KEXDH_INIT,P(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}getPublicKey(){this.generateKeys();const e=this._public;if(e)return this.convertPublicKey(e)}convertPublicKey(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 128&e[r]?(t=Buffer.allocUnsafe(1+n),t[0]=0,e.copy(t,1,r),t):(n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e)}computeSecret(t){this.generateKeys();try{return e(this._dh.computeSecret(t))}catch(e){return e}}parse(e){const t=e[0];switch(this._step){case 1:if(this._protocol._server){if(t!==w.KEXDH_INIT)return T(this._protocol,`Received packet ${t} instead of ${w.KEXDH_INIT}`,"handshake",b.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),C.init(e,1);const r=C.readString();if(C.clear(),void 0===r)return T(this._protocol,"Received malformed KEX*_INIT","handshake",b.KEY_EXCHANGE_FAILED);this._dhData=r;let n=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(n)&&(n=n[0]),this._hostKey=n,this.finish()}else{if(t!==w.KEXDH_REPLY)return T(this._protocol,`Received packet ${t} instead of ${w.KEXDH_REPLY}`,"handshake",b.KEY_EXCHANGE_FAILED);let r,n,i;if(this._protocol._debug&&this._protocol._debug("Received DH Reply"),C.init(e,1),void 0===(r=C.readString())||void 0===(n=C.readString())||void 0===(i=C.readString()))return C.clear(),T(this._protocol,"Received malformed KEX*_REPLY","handshake",b.KEY_EXCHANGE_FAILED);C.clear(),C.init(r,0);const o=C.readString(!0);if(C.clear(),void 0===o)return T(this._protocol,"Received malformed host public key","handshake",b.KEY_EXCHANGE_FAILED);if(o!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if("ssh-rsa"===o)break;default:return T(this._protocol,"Host key does not match negotiated type","handshake",b.KEY_EXCHANGE_FAILED)}this._hostKey=r,this._dhData=n,this._sig=i;let s,a=!1;if(void 0===this._protocol._hostVerifier?(s=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):s=this._protocol._hostVerifier(r,(e=>{if(!a){if(a=!0,!1===e)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),T(this._protocol,"Host denied (verification failed)","handshake",b.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():q(this)}})),void 0===s)return void++this._step;if(a=!0,!1===s)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),T(this._protocol,"Host denied (verification failed)","handshake",b.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,q(this)}++this._step;break;case 2:return t!==w.NEWKEYS?T(this._protocol,`Received packet ${t} instead of ${w.NEWKEYS}`,"handshake",b.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,this._protocol._strictMode&&(this._protocol._decipher.inSeqno=0),++this._step,this.finish(!this._protocol._server&&!this._hostVerified));default:return T(this._protocol,`Received unexpected packet ${t} after NEWKEYS`,"handshake",b.KEY_EXCHANGE_FAILED)}}}class r extends t{constructor(e,...t){super(...t),this.type="25519",this.hashName=e,this._keys=null}generateKeys(){this._keys||(this._keys=l("x25519"))}getPublicKey(){this.generateKeys();return this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 32===e.length||n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e}computeSecret(t){this.generateKeys();try{const r=new h.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.3.101.110"),r.endSequence(),r.startSequence(h.BitString),r.writeByte(0),r._ensure(t.length),t.copy(r._buf,r._offset,0,t.length),r._offset+=t.length,r.endSequence(),r.endSequence(),e(c({privateKey:this._keys.privateKey,publicKey:a({key:r.buffer,type:"spki",format:"der"})}))}catch(e){return e}}}class u extends t{constructor(e,t,...r){super(...r),this.type="ecdh",this.curveName=e,this.hashName=t}generateKeys(){this._dh||(this._dh=o(this.curveName),this._public=this._dh.generateKeys())}}class p extends t{constructor(e,...t){super(...t),this.type="groupex",this.hashName=e,this._prime=null,this._generator=null,this._minBits=2048,this._prefBits=function(e){const t=A[e.cs.cipher],r=A[e.sc.cipher],n=8*Math.max(0,"des-ede3-cbc"===t.sslName?14:t.keyLen,t.blockLen,t.ivLen,"des-ede3-cbc"===r.sslName?14:r.keyLen,r.blockLen,r.ivLen);return n<=112?2048:n<=128?3072:n<=192?7680:8192}(this.negotiated),this._protocol._compatFlags&d.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=8192}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let e=this._protocol._packetRW.write.allocStartKEX;const t=this._protocol._packetRW.write.alloc(13,!0);t[e]=w.KEXDH_GEX_REQUEST,P(t,this._minBits,++e),P(t,this._prefBits,e+=4),P(t,this._maxBits,e+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(t,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=n(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(e,t){if(!Buffer.isBuffer(e))throw new Error("Invalid prime value");if(!Buffer.isBuffer(t))throw new Error("Invalid generator value");this._prime=e,this._generator=t}getDHParams(){if(this._dh)return{prime:e(this._dh.getPrime()),generator:e(this._dh.getGenerator())}}parse(e){const r=e[0];switch(this._step){case 1:{if(this._protocol._server)return r!==w.KEXDH_GEX_REQUEST?T(this._protocol,`Received packet ${r} instead of `+w.KEXDH_GEX_REQUEST,"handshake",b.KEY_EXCHANGE_FAILED):T(this._protocol,"Group exchange not implemented for server","handshake",b.KEY_EXCHANGE_FAILED);if(r!==w.KEXDH_GEX_GROUP)return T(this._protocol,`Received packet ${r} instead of ${w.KEXDH_GEX_GROUP}`,"handshake",b.KEY_EXCHANGE_FAILED);let t,n;if(this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),C.init(e,1),void 0===(t=C.readString())||void 0===(n=C.readString()))return C.clear(),T(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",b.KEY_EXCHANGE_FAILED);C.clear(),this.setDHParams(t,n),this.generateKeys();const i=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let o=this._protocol._packetRW.write.allocStartKEX;const s=this._protocol._packetRW.write.alloc(5+i.length,!0);s[o]=w.KEXDH_GEX_INIT,P(s,i.length,++o),s.set(i,o+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(s,!0)),++this._step;break}case 2:if(this._protocol._server)return r!==w.KEXDH_GEX_INIT?T(this._protocol,`Received packet ${r} instead of ${w.KEXDH_GEX_INIT}`,"handshake",b.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),T(this._protocol,"Group exchange not implemented for server","handshake",b.KEY_EXCHANGE_FAILED));if(r!==w.KEXDH_GEX_REPLY)return T(this._protocol,`Received packet ${r} instead of ${w.KEXDH_GEX_REPLY}`,"handshake",b.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,e[0]=w.KEXDH_REPLY,this.parse=t.prototype.parse,this.parse(e)}}}class g extends t{constructor(e,t,...r){super(...r),this.type="group",this.groupName=e,this.hashName=t}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=w.KEXDH_INIT,P(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}generateKeys(){this._dh||(this._dh=i(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:e(this._dh.getPrime()),generator:e(this._dh.getGenerator())}}}return(e,...t)=>{if("object"!=typeof e||null===e)throw new Error("Invalid negotiated argument");const n=e.kex;if("string"==typeof n){switch(t=[e,...t],n){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!f)break;return new r("sha256",...t);case"ecdh-sha2-nistp256":return new u("prime256v1","sha256",...t);case"ecdh-sha2-nistp384":return new u("secp384r1","sha384",...t);case"ecdh-sha2-nistp521":return new u("secp521r1","sha512",...t);case"diffie-hellman-group1-sha1":return new g("modp2","sha1",...t);case"diffie-hellman-group14-sha1":return new g("modp14","sha1",...t);case"diffie-hellman-group14-sha256":return new g("modp14","sha256",...t);case"diffie-hellman-group15-sha512":return new g("modp15","sha512",...t);case"diffie-hellman-group16-sha512":return new g("modp16","sha512",...t);case"diffie-hellman-group17-sha512":return new g("modp17","sha512",...t);case"diffie-hellman-group18-sha512":return new g("modp18","sha512",...t);case"diffie-hellman-group-exchange-sha1":return new p("sha1",...t);case"diffie-hellman-group-exchange-sha256":return new p("sha256",...t)}throw new Error(`Unsupported key exchange algorithm: ${n}`)}throw new Error(`Invalid key exchange type: ${n}`)}})(),W=(()=>{const e=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("Argument must be an object");const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0};let n=0;for(const i of e){let e,o,s,a;if("string"==typeof i)e=r,o=t[i],s=a=i;else{const n=i[0];e=r[n],a=i[1],o=t[n][a],s=`${n}.${a}`}const c={array:void 0,buffer:void 0};if(Buffer.isBuffer(o))c.array=(""+o).split(","),c.buffer=o,n+=4+o.length;else{if("string"==typeof o&&(o=o.split(",")),!Array.isArray(o))throw new TypeError(`Invalid \`${s}\` type: ${typeof o}`);c.array=o,c.buffer=Buffer.from(o.join(",")),n+=4+c.buffer.length}e[a]=c}const i=Buffer.allocUnsafe(n);r.all=i;let o=0;for(const t of e){let e;e="string"==typeof t?r[t].buffer:r[t[0]][t[1]].buffer,o=P(i,e.length,o),i.set(e,o),o+=e.length}this.totalSize=n,this.lists=r}copyAllTo(e,t){const r=this.lists.all;if("number"!=typeof t)throw new TypeError("Invalid offset value: "+typeof t);if(e.length-t<r.length)throw new Error("Insufficient space to copy list");return e.set(r,t),r.length}}})(),$=(()=>{const e=Buffer.allocUnsafe(4);return(t,r)=>{P(e,r.length,0),t.update(e),t.update(r)}})();function Q(e,t,r,n,i,o){let a;if(e){let c=s(t).update(r).update(n).update(o).update(i).digest();for(;c.length<e;){const e=s(t).update(r).update(n).update(c).digest(),i=Buffer.allocUnsafe(c.length+e.length);i.set(c,0),i.set(e,c.length),c=i}a=c.length===e?c:new B(c.buffer,c.byteOffset,e)}else a=U;return a}function K(e,t){if(0===t.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));if(this._skipNextInboundPacket)return void(this._skipNextInboundPacket=!1);const n=(t=this._packetRW.read.read(t))[0];if(!this._strictMode)switch(n){case w.IGNORE:case w.UNIMPLEMENTED:case w.DEBUG:return D||(D=r(2569)),D[n](this,t)}switch(n){case w.DISCONNECT:return D||(D=r(2569)),D[n](this,t);case w.KEXINIT:return e.firstPacket?(e.firstPacket=!1,j(this,t)):T(this,"Received extra KEXINIT during handshake","handshake",b.KEY_EXCHANGE_FAILED);default:if(n<20||n>49)return T(this,`Received unexpected packet type ${n}`,"handshake",b.KEY_EXCHANGE_FAILED)}return this._kex.parse(t)}function q(e){if(!e._sentNEWKEYS){e._protocol._debug&&e._protocol._debug("Outbound: Sending NEWKEYS");const t=e._protocol._packetRW.write.allocStartKEX,r=e._protocol._packetRW.write.alloc(1,!0);r[t]=w.NEWKEYS,e._protocol._cipher.encrypt(e._protocol._packetRW.write.finalize(r,!0)),e._sentNEWKEYS=!0,e._protocol._strictMode&&(e._protocol._cipher.outSeqno=0)}}e.exports={KexInit:W,kexinit:F,onKEXPayload:K,DEFAULT_KEXINIT_CLIENT:new W({kex:p.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),serverHostKey:g,cs:{cipher:_,mac:m,compress:y,lang:[]},sc:{cipher:_,mac:m,compress:y,lang:[]}}),DEFAULT_KEXINIT_SERVER:new W({kex:p.concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:g,cs:{cipher:_,mac:m,compress:y,lang:[]},sc:{cipher:_,mac:m,compress:y,lang:[]}}),HANDLERS:{[w.KEXINIT]:j}}},8946:(e,t,r)=>{"use strict";const{createDecipheriv:n,createECDH:i,createHash:o,createHmac:s,createSign:a,createVerify:c,getCiphers:l,sign:u,verify:h}=r(6982),d=l(),{Ber:f}=r(3100),p=r(4015).pbkdf,{CIPHER_INFO:g}=r(7785),{eddsaSupported:_,SUPPORTED_CIPHER:m}=r(2535),{bufferSlice:y,makeBufferParser:b,readString:w,readUInt32BE:A,writeUInt32BE:v}=r(5623),E=Symbol("Hash Algorithm"),S=Symbol("Private key PEM"),I=Symbol("Public key PEM"),k=Symbol("Public key SSH"),C=Symbol("Decrypted Key"),R=Object.create(null);{const te=Object.keys(g);for(let re=0;re<te.length;++re){const ne=g[te[re]].sslName;ne&&!R[ne]&&(R[ne]=g[te[re]])}}const T=b();function B(e,t){let r=(t=t.base64Slice(0,t.length)).replace(/.{64}/g,"$&\n");return 63&t.length&&(r+="\n"),`-----BEGIN ${e} KEY-----\n${r}-----END ${e} KEY-----`}function O(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}function P(e,t){const r=e.length;let n=e._pos||0;for(let i=0;i<t;++i){const t=r-n;if(n>=r||t<4)return!1;const i=A(e,n);if(t<4+i)return!1;n+=4+i}return e._pos=n,!0}function N(e,t){const r=new f.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(f.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(e,f.Integer),r.writeBuffer(t,f.Integer),r.endSequence(),r.endSequence(),r.endSequence(),B("PUBLIC",r.buffer)}function x(e,t){const r=Buffer.allocUnsafe(15+t.length+4+e.length);v(r,7,0),r.utf8Write("ssh-rsa",4,7);let n=11;return v(r,t.length,n),r.set(t,n+=4),v(r,e.length,n+=t.length),r.set(e,n+4),r}const L=(()=>{function e(e){return BigInt(`0x${e.hexSlice(0,e.length)}`)}function t(e){let t=e.toString(16);if(1&t.length)t=`0${t}`;else{const e=t.charCodeAt(0);(56===e||57===e||e>=97&&e<=102)&&(t=`00${t}`)}return Buffer.from(t,"hex")}return function(r,n,i,o,s,a){const c=e(i);return B("RSA PRIVATE",function(e,t,r,n,i,o,s,a){const c=new f.Writer;return c.startSequence(),c.writeInt(0,f.Integer),c.writeBuffer(e,f.Integer),c.writeBuffer(t,f.Integer),c.writeBuffer(r,f.Integer),c.writeBuffer(n,f.Integer),c.writeBuffer(i,f.Integer),c.writeBuffer(o,f.Integer),c.writeBuffer(s,f.Integer),c.writeBuffer(a,f.Integer),c.endSequence(),c.buffer}(r,n,i,s,a,t(c%(e(s)-1n)),t(c%(e(a)-1n)),o))}})();function M(e,t,r,n){const i=new f.Writer;return i.startSequence(),i.startSequence(),i.writeOID("1.2.840.10040.4.1"),i.startSequence(),i.writeBuffer(e,f.Integer),i.writeBuffer(t,f.Integer),i.writeBuffer(r,f.Integer),i.endSequence(),i.endSequence(),i.startSequence(f.BitString),i.writeByte(0),i.writeBuffer(n,f.Integer),i.endSequence(),i.endSequence(),B("PUBLIC",i.buffer)}function D(e,t,r,n){const i=Buffer.allocUnsafe(15+e.length+4+t.length+4+r.length+4+n.length);v(i,7,0),i.utf8Write("ssh-dss",4,7);let o=11;return v(i,e.length,o),i.set(e,o+=4),v(i,t.length,o+=e.length),i.set(t,o+=4),v(i,r.length,o+=t.length),i.set(r,o+=4),v(i,n.length,o+=r.length),i.set(n,o+4),i}function U(e,t,r,n,i){const o=new f.Writer;return o.startSequence(),o.writeInt(0,f.Integer),o.writeBuffer(e,f.Integer),o.writeBuffer(t,f.Integer),o.writeBuffer(r,f.Integer),o.writeBuffer(n,f.Integer),o.writeBuffer(i,f.Integer),o.endSequence(),B("DSA PRIVATE",o.buffer)}function F(e){const t=new f.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(f.BitString),t.writeByte(0),t._ensure(e.length),t._buf.set(e,t._offset),t._offset+=e.length,t.endSequence(),t.endSequence(),B("PUBLIC",t.buffer)}function j(e){const t=Buffer.allocUnsafe(19+e.length);return v(t,11,0),t.utf8Write("ssh-ed25519",4,11),v(t,e.length,15),t.set(e,19),t}function H(e){const t=new f.Writer;return t.startSequence(),t.writeInt(0,f.Integer),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(f.OctetString),t.writeBuffer(e,f.OctetString),t.endSequence(),t.endSequence(),B("PRIVATE",t.buffer)}function W(e,t){const r=new f.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(e),r.endSequence(),r.startSequence(f.BitString),r.writeByte(0),r._ensure(t.length),r._buf.set(t,r._offset),r._offset+=t.length,r.endSequence(),r.endSequence(),B("PUBLIC",r.buffer)}function $(e,t){let r;switch(e){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const n=Buffer.allocUnsafe(39+t.length);return v(n,19,0),n.utf8Write(`ecdsa-sha2-${r}`,4,19),v(n,8,23),n.utf8Write(r,27,8),v(n,t.length,35),n.set(t,39),n}function Q(e,t,r){const n=new f.Writer;return n.startSequence(),n.writeInt(1,f.Integer),n.writeBuffer(r,f.OctetString),n.startSequence(160),n.writeOID(e),n.endSequence(),n.startSequence(161),n.startSequence(f.BitString),n.writeByte(0),n._ensure(t.length),n._buf.set(t,n._offset),n._offset+=t.length,n.endSequence(),n.endSequence(),n.endSequence(),B("EC PRIVATE",n.buffer)}const K={sign:"function"==typeof u?function(e,t){const r=this[S];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[E]);try{return u(t,e,r)}catch(e){return e}}:function(e,t){const r=this[S];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[E]);const n=a(t);n.update(e);try{return n.sign(r)}catch(e){return e}},verify:"function"==typeof h?function(e,t,r){const n=this[I];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[E]);try{return h(r,e,n,t)}catch(e){return e}}:function(e,t,r){const n=this[I];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[E]);const i=c(r);i.update(e);try{return i.verify(n,t)}catch(e){return e}},isPrivateKey:function(){return null!==this[S]},getPrivatePEM:function(){return this[S]},getPublicPEM:function(){return this[I]},getPublicSSH:function(){return this[k]},equals:function(e){const t=ee(e);return!(t instanceof Error)&&(this.type===t.type&&this[S]===t[S]&&this[I]===t[I]&&this[k].equals(t[k]))}};function q(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[S]=r,this[I]=n,this[k]=i,this[E]=o,this[C]=s}q.prototype=K;{const ie=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;function oe(e,t,r){const n=[];if(e.length<8)return new Error("Malformed OpenSSH private key");if(A(e,0)!==A(e,4))return r?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");let i,o;for(e._pos=8,i=0;i<t;++i){let t,i,s,a;const c=w(e,e._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");switch(c){case"ssh-rsa":{const r=w(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=w(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const o=w(e,e._pos);if(void 0===o)return new Error("Malformed OpenSSH private key");const c=w(e,e._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const l=w(e,e._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");const u=w(e,e._pos);if(void 0===u)return new Error("Malformed OpenSSH private key");s=N(r,n),a=x(r,n),i=L(r,n,o,c,l,u),t="sha1";break}case"ssh-dss":{const r=w(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=w(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const o=w(e,e._pos);if(void 0===o)return new Error("Malformed OpenSSH private key");const c=w(e,e._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const l=w(e,e._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");s=M(r,n,o,c),a=D(r,n,o,c),i=U(r,n,o,c,l),t="sha1";break}case"ssh-ed25519":{if(!_)return new Error(`Unsupported OpenSSH private key type: ${c}`);const r=w(e,e._pos);if(void 0===r||32!==r.length)return new Error("Malformed OpenSSH private key");const n=w(e,e._pos);if(void 0===n||64!==n.length)return new Error("Malformed OpenSSH private key");s=F(r),a=j(r),i=H(y(n,0,32)),t=null;break}case"ecdsa-sha2-nistp256":t="sha256",o="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===t&&(t="sha384",o="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===t&&(t="sha512",o="1.3.132.0.35"),!P(e,1))return new Error("Malformed OpenSSH private key");const r=w(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=w(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");s=W(o,r),a=$(o,r),i=Q(o,r,n);break}default:return new Error(`Unsupported OpenSSH private key type: ${c}`)}const l=w(e,e._pos,!0);if(void 0===l)return new Error("Malformed OpenSSH private key");n.push(new q(c,l,i,s,a,t,r))}let s=0;for(i=e._pos;i<e.length;++i)if(e[i]!==++s%255)return new Error("Malformed OpenSSH private key");return n}q.parse=(e,t)=>{const r=ie.exec(e);if(null===r)return null;let i;const o=Buffer.from(r[1],"base64");if(o.length<31)return new Error("Malformed OpenSSH private key");const s=o.utf8Slice(0,15);if("openssh-key-v1\0"!==s)return new Error(`Unsupported OpenSSH key magic: ${s}`);const a=w(o,15,!0);if(void 0===a)return new Error("Malformed OpenSSH private key");if("none"!==a&&-1===m.indexOf(a))return new Error(`Unsupported cipher for OpenSSH key: ${a}`);const c=w(o,o._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");if("none"!==c){if("none"===a)return new Error("Malformed OpenSSH private key");if("bcrypt"!==c)return new Error(`Unsupported kdf name for OpenSSH key: ${c}`);if(!t)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if("none"!==a)return new Error("Malformed OpenSSH private key");let l,u,h;"none"!==a&&(l=g[a]);const d=w(o,o._pos);if(void 0===d)return new Error("Malformed OpenSSH private key");if(d.length)switch(c){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{const e=w(d,0);if(void 0===e||d._pos+4>d.length)return new Error("Malformed OpenSSH private key");const r=A(d,d._pos),n=Buffer.allocUnsafe(l.keyLen+l.ivLen);if(0!==p(t,t.length,e,e.length,n,n.length,r))return new Error("Failed to generate information to decrypt key");u=y(n,0,l.keyLen),h=y(n,l.keyLen,n.length);break}}else if("none"!==c)return new Error("Malformed OpenSSH private key");if(o._pos+3>=o.length)return new Error("Malformed OpenSSH private key");const f=A(o,o._pos);if(o._pos+=4,f>0){for(let e=0;e<f;++e){const e=w(o,o._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0===w(e,0,!0))return new Error("Malformed OpenSSH private key")}let e=w(o,o._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0!==u){if(e.length<l.blockLen||e.length%l.blockLen!=0)return new Error("Malformed OpenSSH private key");try{const t={authTagLength:l.authLen},r=n(l.sslName,u,h,t);if(r.setAutoPadding(!1),l.authLen>0){if(o.length-o._pos<l.authLen)return new Error("Malformed OpenSSH private key");r.setAuthTag(y(o,o._pos,o._pos+=l.authLen))}e=O(r.update(e),r.final())}catch(e){return e}}if(o._pos!==o.length)return new Error("Malformed OpenSSH private key");i=oe(e,f,void 0!==u)}else i=[];return i instanceof Error?i:i[0]}}function G(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[S]=r,this[I]=n,this[k]=i,this[E]=o,this[C]=s}G.prototype=K;{const se=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;G.parse=(e,t)=>{const r=se.exec(e);if(null===r)return null;let s,a,c,l,u,h,p=Buffer.from(r[3],"base64"),g=r[2],_=!1;if(void 0!==g){g=g.split(/\r\n|\n/g);for(let e=0;e<g.length;++e){const r=g[e];let i=r.indexOf(":");if("DEK-Info"===r.slice(0,i)){const e=r.slice(i+2);if(i=e.indexOf(","),-1===i)continue;const s=e.slice(0,i).toLowerCase();if(-1===d.indexOf(s))return new Error(`Cipher (${s}) not supported for encrypted OpenSSH private key`);const a=R[s];if(!a)return new Error(`Cipher (${s}) not supported for encrypted OpenSSH private key`);const c=Buffer.from(e.slice(i+1),"hex");if(c.length!==a.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!t)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");const l=y(c,0,8);let u=o("md5").update(t).update(l).digest();for(;u.length<a.keyLen;)u=O(u,o("md5").update(u).update(t).update(l).digest());u.length>a.keyLen&&(u=y(u,0,a.keyLen));try{const e=n(s,u,c);e.setAutoPadding(!1),p=O(e.update(p),e.final()),_=!0}catch(e){return e}}}}let m="Malformed OpenSSH private key";switch(_&&(m+=". Bad passphrase?"),r[1]){case"RSA":s="ssh-rsa",a=B("RSA PRIVATE",p);try{h=new f.Reader(p),h.readSequence(),h.readInt();const e=h.readString(f.Integer,!0);if(null===e)return new Error(m);const t=h.readString(f.Integer,!0);if(null===t)return new Error(m);c=N(e,t),l=x(e,t)}catch{return new Error(m)}u="sha1";break;case"DSA":s="ssh-dss",a=B("DSA PRIVATE",p);try{h=new f.Reader(p),h.readSequence(),h.readInt();const e=h.readString(f.Integer,!0);if(null===e)return new Error(m);const t=h.readString(f.Integer,!0);if(null===t)return new Error(m);const r=h.readString(f.Integer,!0);if(null===r)return new Error(m);const n=h.readString(f.Integer,!0);if(null===n)return new Error(m);c=M(e,t,r,n),l=D(e,t,r,n)}catch{return new Error(m)}u="sha1";break;case"EC":{let e,t,r;try{h=new f.Reader(p),h.readSequence(),h.readInt(),t=h.readString(f.OctetString,!0),h.readByte();const n=h.readLength();if(null===n)return new Error(m);if(h._offset=n,r=h.readOID(),null===r)return new Error(m);switch(r){case"1.2.840.10045.3.1.7":e="prime256v1",s="ecdsa-sha2-nistp256",u="sha256";break;case"1.3.132.0.34":e="secp384r1",s="ecdsa-sha2-nistp384",u="sha384";break;case"1.3.132.0.35":e="secp521r1",s="ecdsa-sha2-nistp521",u="sha512";break;default:return new Error(`Unsupported private key EC OID: ${r}`)}}catch{return new Error(m)}a=B("EC PRIVATE",p);const n=function(e,t){const r=i(e);return r.setPrivateKey(t),r.getPublicKey()}(e,t);c=W(r,n),l=$(r,n);break}}return new G(s,"",a,c,l,u,_)}}function V(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[S]=r,this[I]=n,this[k]=i,this[E]=o,this[C]=s}V.prototype=K;{const ae=Buffer.alloc(0),ce=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),le=Buffer.from([0,0,0,0]),ue=Buffer.from([0,0,0,1]),he=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;V.parse=(e,t)=>{const r=he.exec(e);if(null===r)return null;const i=r[2],a="none"!==i;if(a&&!t)return new Error("Encrypted PPK private key detected, but no passphrase given");let c=Buffer.from(r[5],"base64");if(a){const e=g[i];let r=O(o("sha1").update(le).update(t).digest(),o("sha1").update(ue).update(t).digest());r.length>e.keyLen&&(r=y(r,0,e.keyLen));try{const t=n(e.sslName,r,ce);t.setAutoPadding(!1),c=O(t.update(c),t.final())}catch(e){return e}}const l=r[1],u=r[3],h=Buffer.from(r[4],"base64"),d=r[6],f=l.length,p=i.length,_=Buffer.byteLength(u),m=h.length,b=c.length,A=Buffer.allocUnsafe(4+f+4+p+4+_+4+m+4+b);let E=0;v(A,f,E),A.utf8Write(l,E+=4,f),v(A,p,E+=f),A.utf8Write(i,E+=4,p),v(A,_,E+=p),A.utf8Write(u,E+=4,_),v(A,m,E+=_),A.set(h,E+=4),v(A,b,E+=m),A.set(c,E+4),t||(t=ae);if(s("sha1",o("sha1").update("putty-private-key-file-mac-key").update(t).digest()).update(A).digest("hex")!==d)return a?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");let S,I,k;switch(h._pos=0,P(h,1),l){case"ssh-rsa":{const e=w(h,h._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=w(h,h._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=w(c,0);if(void 0===r)return new Error("Malformed PPK private key");const n=w(c,c._pos);if(void 0===n)return new Error("Malformed PPK private key");const i=w(c,c._pos);if(void 0===i)return new Error("Malformed PPK private key");const o=w(c,c._pos);if(void 0===o)return new Error("Malformed PPK private key");S=N(t,e),I=x(t,e),k=L(t,e,r,o,n,i);break}case"ssh-dss":{const e=w(h,h._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=w(h,h._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=w(h,h._pos);if(void 0===r)return new Error("Malformed PPK public key");const n=w(h,h._pos);if(void 0===n)return new Error("Malformed PPK public key");const i=w(c,0);if(void 0===i)return new Error("Malformed PPK private key");S=M(e,t,r,n),I=D(e,t,r,n),k=U(e,t,r,n,i);break}}return new V(l,u,k,S,I,"sha1",a)}}function Y(e,t,r,n,i){this.type=e,this.comment=t,this[S]=null,this[I]=r,this[k]=n,this[E]=i,this[C]=!1}Y.prototype=K;{let de;de=_?/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,Y.parse=e=>{const t=de.exec(e);if(null===t)return null;const r=t[1],n=t[2],i=Buffer.from(t[3],"base64"),o=t[4]||"",s=w(i,i._pos,!0);return void 0===s||0!==s.indexOf(n)?new Error("Malformed OpenSSH public key"):X(i,n,o,r)}}function z(e,t,r,n,i){this.type=e,this.comment=t,this[S]=null,this[I]=r,this[k]=n,this[E]=i,this[C]=!1}z.prototype=K;{const fe=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,pe=/^[A-Z0-9a-z/+=\r\n]+$/,ge=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,_e=/\\\r?\n/g;z.parse=e=>{let t=fe.exec(e);if(null===t)return null;const r=t[1];let n=0,i="";for(;t=ge.exec(r);){const e=t[1],r=t[2].replace(_e,"");if(r.length>1024)return ge.lastIndex=0,new Error("Malformed RFC4716 public key");n=ge.lastIndex,"comment"===e.toLowerCase()&&(i=r,i.length>1&&34===i.charCodeAt(0)&&34===i.charCodeAt(i.length-1)&&(i=i.slice(1,-1)))}let o=r.slice(n);if(!pe.test(o))return new Error("Malformed RFC4716 public key");o=Buffer.from(o,"base64");const s=w(o,0,!0);if(void 0===s)return new Error("Malformed RFC4716 public key");let a=null,c=null;switch(s){case"ssh-rsa":{const e=w(o,o._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=w(o,o._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");a=N(t,e),c=x(t,e);break}case"ssh-dss":{const e=w(o,o._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=w(o,o._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");const r=w(o,o._pos);if(void 0===r)return new Error("Malformed RFC4716 public key");const n=w(o,o._pos);if(void 0===n)return new Error("Malformed RFC4716 public key");a=M(e,t,r,n),c=D(e,t,r,n);break}default:return new Error("Malformed RFC4716 public key")}return new z(s,i,a,c,"sha1")}}function X(e,t,r,n){if(!J(t))return new Error(`Unsupported OpenSSH public key type: ${t}`);let i,o,s=null,a=null;switch(t){case"ssh-rsa":{const t=w(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=w(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");s=N(r,t),a=x(r,t),i="sha1";break}case"ssh-dss":{const t=w(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=w(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");const n=w(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH public key");const o=w(e,e._pos);if(void 0===o)return new Error("Malformed OpenSSH public key");s=M(t,r,n,o),a=D(t,r,n,o),i="sha1";break}case"ssh-ed25519":{const t=w(e,e._pos||0);if(void 0===t||32!==t.length)return new Error("Malformed OpenSSH public key");s=F(t),a=j(t),i=null;break}case"ecdsa-sha2-nistp256":i="sha256",o="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===i&&(i="sha384",o="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===i&&(i="sha512",o="1.3.132.0.35"),!P(e,1))return new Error("Malformed OpenSSH public key");const t=w(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");s=W(o,t),a=$(o,t);break}default:return new Error(`Unsupported OpenSSH public key type: ${t}`)}return new Y(n,r,s,a,i)}function J(e){switch(e){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(_)return!0;default:return!1}}function Z(e){return!!e&&"boolean"==typeof e[C]}function ee(e,t){if(Z(e))return e;let r,n;if(Buffer.isBuffer(e))r=e,e=e.utf8Slice(0,e.length).trim();else{if("string"!=typeof e)return new Error("Key data must be a Buffer or string");e=e.trim()}if(null!=t)if("string"==typeof t)t=Buffer.from(t);else if(!Buffer.isBuffer(t))return new Error("Passphrase must be a string or Buffer when supplied");if(null!==(n=q.parse(e,t)))return n;if(null!==(n=G.parse(e,t)))return n;if(null!==(n=V.parse(e,t)))return n;if(null!==(n=Y.parse(e)))return n;if(null!==(n=z.parse(e)))return n;if(r){T.init(r,0);const t=T.readString(!0);void 0!==t&&void 0!==(e=T.readRaw())&&(n=X(e,t,"",t),n instanceof Error&&(n=null)),T.clear()}return n||new Error("Unsupported key format")}e.exports={isParsedKey:Z,isSupportedKeyType:J,parseDERKey:(e,t)=>X(e,t,"",t),parseKey:ee}},8977:(e,t,r)=>{"use strict";const n=r(2613),{inspect:i}=r(9023);function o(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function s(e,t){if(n("string"==typeof t,"`thing` has to be of type string"),Array.isArray(e)){const r=e.length;return n(r>0,"At least one expected value needs to be specified"),e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}t.ERR_INTERNAL_ASSERTION=class e extends Error{constructor(t){super(),Error.captureStackTrace(this,e);const r="This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.\nPlease open an issue with this stack trace at https://github.com/mscdex/ssh2/issues\n";this.message=void 0===t?r:`${t}\n${r}`}};const a=2**32,c=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();t.ERR_OUT_OF_RANGE=class e extends RangeError{constructor(t,r,s,l){super(),Error.captureStackTrace(this,e),n(r,'Missing "range" argument');let u,h=l?t:`The value of "${t}" is out of range.`;Number.isInteger(s)&&Math.abs(s)>a?u=o(String(s)):"bigint"==typeof s?(u=String(s),(s>c||s<-c)&&(u=o(u)),u+="n"):u=i(s),h+=` It must be ${r}. Received ${u}`,this.message=h}};class l extends TypeError{constructor(e,t,r){let i,o;if(super(),Error.captureStackTrace(this,l),n("string"==typeof e,"'name' must be a string"),"string"==typeof t&&t.startsWith("not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",e.endsWith(" argument"))o=`The ${e} ${i} ${s(t,"type")}`;else{const r=e.includes(".")?"property":"argument";o=`The "${e}" ${r} ${i} ${s(t,"type")}`}o+=". Received type "+typeof r,this.message=o}}t.ERR_INVALID_ARG_TYPE=l,t.validateNumber=function(e,t){if("number"!=typeof e)throw new l(t,"number",e)}},5623:(e,t,r)=>{"use strict";const n=r(3100).Ber;let i;const o=Buffer[Symbol.species],s=Object.getPrototypeOf(Uint8Array.prototype).fill;function a(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function c(e,t,r,n,i){i||(i=0),n>e.length&&(n=e.length);let o=n-r;const s=t.length-i;return o>s&&(o=s),t.set(new Uint8Array(e.buffer,e.byteOffset+r,o),i),o}function l(e,t,r){return void 0===r&&(r=e.length),new o(e.buffer,e.byteOffset+t,r-t)}function u(){let e,t=0;const r={init:(r,n)=>{e=r,t="number"==typeof n?n:0},pos:()=>t,length:()=>e?e.length:0,avail:()=>e&&t<e.length?e.length-t:0,clear:()=>{e=void 0},readUInt32BE:()=>{if(e&&!(t+3>=e.length))return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]},readUInt64BE:r=>{if(e&&!(t+7>=e.length))switch(r){case"always":return BigInt(`0x${e.hexSlice(t,t+=8)}`);case"maybe":if(e[t]>31)return BigInt(`0x${e.hexSlice(t,t+=8)}`);default:return 72057594037927940*e[t++]+281474976710656*e[t++]+1099511627776*e[t++]+4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]}},skip:r=>{e&&r>0&&(t+=r)},skipString:()=>{const n=r.readUInt32BE();if(void 0!==n)return t+=n,t<=e.length?n:void 0},readByte:()=>{if(e&&t<e.length)return e[t++]},readBool:()=>{if(e&&t<e.length)return!!e[t++]},readList:()=>{const e=r.readString(!0);if(void 0!==e)return e?e.split(","):[]},readString:(n,i)=>{"number"==typeof n&&(i=n,n=void 0);const o=r.readUInt32BE();if(void 0!==o&&!(e.length-t<o||"number"==typeof i&&o>i))return n?Buffer.isBuffer(n)?c(e,n,t,t+=o):e.utf8Slice(t,t+=o):l(e,t,t+=o)},readRaw:r=>{if(e)return"number"!=typeof r?l(e,t,t+=e.length-t):e.length-t>=r?l(e,t,t+=r):void 0}};return r}function h(e,t,r){const n=new Error(e);return"boolean"==typeof t?(r=t,n.level="protocol"):n.level=t||"protocol",n.fatal=!!r,n}function d(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}const f=u();e.exports={bufferCopy:c,bufferSlice:l,FastBuffer:o,bufferFill:(e,t,r,n)=>s.call(e,t,r,n),makeError:h,doFatalError:(e,t,n,o)=>{let s;return void 0===i&&({DISCONNECT_REASON:i}=r(2535)),t instanceof Error?(s=t,o="number"!=typeof n?i.PROTOCOL_ERROR:n):s=h(t,n,!0),"number"!=typeof o&&(o=i.PROTOCOL_ERROR),e.disconnect(o),e._destruct(),e._onError(s),1/0},readUInt32BE:a,writeUInt32BE:d,writeUInt32LE:(e,t,r)=>(e[r++]=t,e[r++]=t>>>8,e[r++]=t>>>16,e[r++]=t>>>24,r),makeBufferParser:u,bufferParser:u(),readString:(e,t,r,n)=>{"number"==typeof r&&(n=r,r=void 0),void 0===t&&(t=0);const i=e.length-t;if(t<0||t>=e.length||i<4)return;const o=a(e,t);if(i<4+o||"number"==typeof n&&o>n)return;const s=(t+=4)+o;return e._pos=s,r?Buffer.isBuffer(r)?c(e,r,t,s):e.utf8Slice(t,s):l(e,t,s)},sigSSHToASN1:(e,t)=>{switch(t){case"ssh-dss":{if(e.length>40)return e;const t=new n.Writer;t.startSequence();let r=e.slice(0,20),i=e.slice(20);if(128&r[0]){const e=Buffer.allocUnsafe(21);e[0]=0,r.copy(e,1),r=e}else 0!==r[0]||128&r[1]||(r=r.slice(1));if(128&i[0]){const e=Buffer.allocUnsafe(21);e[0]=0,i.copy(e,1),i=e}else 0!==i[0]||128&i[1]||(i=i.slice(1));return t.writeBuffer(r,n.Integer),t.writeBuffer(i,n.Integer),t.endSequence(),t.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{f.init(e,0);const t=f.readString(),r=f.readString();if(f.clear(),void 0===t||void 0===r)return;const i=new n.Writer;return i.startSequence(),i.writeBuffer(t,n.Integer),i.writeBuffer(r,n.Integer),i.endSequence(),i.buffer}default:return e}},convertSignature:(e,t)=>{switch(t){case"ssh-dss":{if(e.length<=40)return e;const t=new n.Reader(e);t.readSequence();let r=t.readString(n.Integer,!0),i=t.readString(n.Integer,!0),o=0,s=0;if(r.length<20){const e=Buffer.allocUnsafe(20);e.set(r,1),r=e,r[0]=0}if(i.length<20){const e=Buffer.allocUnsafe(20);e.set(i,1),i=e,i[0]=0}r.length>20&&0===r[0]&&(o=1),i.length>20&&0===i[0]&&(s=1);const a=Buffer.allocUnsafe(r.length-o+(i.length-s));return c(r,a,o,r.length,0),c(i,a,s,i.length,r.length-o),a}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(0===e[0])return e;const t=new n.Reader(e);t.readSequence();const r=t.readString(n.Integer,!0),i=t.readString(n.Integer,!0);if(null===r||null===i)return;const o=Buffer.allocUnsafe(4+r.length+4+i.length);return d(o,r.length,0),o.set(r,4),d(o,i.length,4+r.length),o.set(i,8+r.length),o}}return e},sendPacket:(e,t,r)=>r||void 0===e._kexinit?(e._cipher.encrypt(t),!0):(void 0===e._queue&&(e._queue=[]),e._queue.push(t),e._debug&&e._debug("Outbound: ... packet queued"),!1)}},3129:(e,t,r)=>{"use strict";const{kMaxLength:n}=r(181),{createInflate:i,constants:{DEFLATE:o,INFLATE:s,Z_DEFAULT_CHUNK:a,Z_DEFAULT_COMPRESSION:c,Z_DEFAULT_MEMLEVEL:l,Z_DEFAULT_STRATEGY:u,Z_DEFAULT_WINDOWBITS:h,Z_PARTIAL_FLUSH:d}}=r(3106),f=i()._handle.constructor;function p(){throw new Error("Should not get here")}function g(e,t,r){const n=this._owner,i=new Error(e);i.errno=t,i.code=r,n._err=i}function _(e){e._handle&&(e._handle.close(),e._handle=null)}class m{constructor(e){const t=h,r=c,i=l,o=u;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=a,this._maxOutputLength=n,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new f(e),this._handle._owner=this,this._handle.onerror=g,this._handle.init(t,r,i,o,this._writeState,p,undefined)}writeSync(e,t){const r=this._handle;if(!r)throw new Error("Invalid Zlib instance");let n,i,o,s=e.length,a=this._chunkSize-this._outOffset,c=0,l=0;const u=this._writeState;let h=this._outBuffer,f=this._outOffset;const p=this._chunkSize;for(;;){if(r.writeSync(d,e,c,s,h,f,a),this._err)throw this._err;n=u[0],i=u[1];const t=s-i,g=a-n;if(g>0){const e=0===f&&g===h.length?h:h.slice(f,f+g);if(f+=g,o?void 0===o.push?o=[o,e]:o.push(e):o=e,l+=e.byteLength,l>this._maxOutputLength)throw _(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(0!==g)throw new Error("have should not go down");if((0===n||f>=p)&&(a=p,f=0,h=Buffer.allocUnsafe(p)),0!==n)break;c+=t,s=i}if(this._outBuffer=h,this._outOffset=f,0===l&&(o=Buffer.alloc(0)),t)return o.totalLen=l,o;if(void 0===o.push)return o;const g=Buffer.allocUnsafe(l);for(let e=0,t=0;e<o.length;++e){const r=o[e];g.set(r,t),t+=r.length}return g}}e.exports={PacketReader:class{cleanup(){}read(e){return e}},PacketWriter:class{constructor(e){this.allocStart=5,this.allocStartKEX=5,this._protocol=e}cleanup(){}alloc(e,t){return void 0===this._protocol._kexinit||t?this._protocol._cipher.allocPacket(e):Buffer.allocUnsafe(e)}finalize(e,t){return e}},ZlibPacketReader:class{constructor(){this._zlib=new m(s)}cleanup(){this._zlib&&_(this._zlib)}read(e){return this._zlib.writeSync(e,!1)}},ZlibPacketWriter:class{constructor(e){this.allocStart=0,this.allocStartKEX=0,this._protocol=e,this._zlib=new m(o)}cleanup(){this._zlib&&_(this._zlib)}alloc(e,t){return Buffer.allocUnsafe(e)}finalize(e,t){if(void 0===this._protocol._kexinit||t){const t=this._zlib.writeSync(e,!0),r=this._protocol._cipher.allocPacket(t.totalLen);if(void 0===t.push)r.set(t,5);else for(let e=0,n=5;e<t.length;++e){const i=t[e];r.set(i,n),n+=i.length}return r}return e}}}},734:(e,t,r)=>{"use strict";const{Server:n}=r(9278),i=r(4434),{listenerCount:o}=i,{CHANNEL_OPEN_FAILURE:s,DEFAULT_CIPHER:a,DEFAULT_COMPRESSION:c,DEFAULT_KEX:l,DEFAULT_MAC:u,DEFAULT_SERVER_HOST_KEY:h,DISCONNECT_REASON:d,DISCONNECT_REASON_BY_VALUE:f,SUPPORTED_CIPHER:p,SUPPORTED_COMPRESSION:g,SUPPORTED_KEX:_,SUPPORTED_MAC:m,SUPPORTED_SERVER_HOST_KEY:y}=r(2535),{init:b}=r(7785),{KexInit:w}=r(8818),{parseKey:A}=r(8946),v=r(6008),{SFTP:E}=r(4261),{writeUInt32BE:S}=r(5623),{Channel:I,MAX_WINDOW:k,PACKET_SIZE:C,windowAdjust:R,WINDOW_THRESHOLD:T}=r(7838),{ChannelManager:B,generateAlgorithmList:O,isWritable:P,onChannelOpenFailure:N,onCHANNEL_CLOSE:x}=r(9100);class L extends i{constructor(e,t,r,n,i){super(),this.username=this.user=t,this.service=r,this.method=n,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(e,t,r)=>{this._finalResponse||(this._finalResponse=!0,i(this,e,t,r))},this._protocol=e}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(e,t){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,t)}}class M extends L{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this._multistep=!0,this._cb=void 0,this._onInfoResponse=e=>{const t=this._cb;t&&(this._cb=void 0,t(e))},this.submethods=i,this.on("abort",(()=>{this._cb&&this._cb(new Error("Authentication request aborted"))}))}prompt(e,t,r,n){Array.isArray(e)||(e=[e]),"function"==typeof t?(n=t,t=r=void 0):"function"==typeof r?(n=r,r=void 0):"function"!=typeof n&&(n=void 0);for(let t=0;t<e.length;++t)"string"==typeof e[t]&&(e[t]={prompt:e[t],echo:!0});this._cb=n,this._initialResponse=!0,this._protocol.authInfoReq(t,r,e)}}class D extends L{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this.key={algo:i.keyAlgo,data:i.key},this.hashAlgo=i.hashAlgo,this.signature=i.signature,this.blob=i.blob}accept(){this.signature?L.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}}class U extends L{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this.key={algo:i.keyAlgo,data:i.key},this.hashAlgo=i.hashAlgo,this.signature=i.signature,this.blob=i.blob,this.localHostname=i.localHostname,this.localUsername=i.localUsername}}class F extends L{constructor(e,t,r,n,i,o){super(e,t,r,n,o),this.password=i,this._changeCb=void 0}requestChange(e,t){if(this._changeCb)throw new Error("Change request already in progress");if("string"!=typeof e)throw new Error("prompt argument must be a string");if("function"!=typeof t)throw new Error("Callback argument must be a function");this._changeCb=t,this._protocol.authPasswdChg(e)}}class j extends i{constructor(e,t,r){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:r,window:k,packetSize:C,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}}}}class H extends i{constructor(e,t){if(super(),"object"!=typeof e||null===e)throw new Error("Missing configuration object");const r=Object.create(null),i=[],o=e.hostKeys;if(!Array.isArray(o))throw new Error("hostKeys must be an array");const s="object"==typeof e.algorithms&&null!==e.algorithms?e.algorithms:{},d=O(s.serverHostKey,h,y);for(let e=0;e<o.length;++e){let t;if(t=Buffer.isBuffer(o[e])||"string"==typeof o[e]?A(o[e]):A(o[e].key,o[e].passphrase),t instanceof Error)throw new Error(`Cannot parse privateKey: ${t.message}`);if(Array.isArray(t)&&(t=t[0]),null===t.getPrivatePEM())throw new Error("privateKey value contains an invalid private key");if(!i.includes(t.type))if("ssh-rsa"===t.type){let e=d.indexOf("ssh-rsa");const n=d.indexOf("rsa-sha2-256"),o=d.indexOf("rsa-sha2-512");-1===e&&(e=1/0),[e,n,o].sort(Q).forEach((s=>{if(-1===s)return;let a;switch(s){case e:a="ssh-rsa";break;case n:a="rsa-sha2-256";break;case o:a="rsa-sha2-512";break;default:return}r[a]=t,i.push(a)}))}else r[t.type]=t,i.push(t.type)}const f={kex:O(s.kex,l,_).concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:i,cs:{cipher:O(s.cipher,a,p),mac:O(s.hmac,u,m),compress:O(s.compress,c,g),lang:[]},sc:void 0};f.sc=f.cs,"function"==typeof t&&this.on("connection",t);const b="function"==typeof e.debug?e.debug:void 0,v=e.ident?Buffer.from(e.ident):void 0,E=new w(f);this._srv=new n((t=>{if(this._connections>=this.maxConnections)return void t.destroy();let n;if(++this._connections,t.once("close",(()=>{--this._connections})),b){const e=`[${process.hrtime().join(".")}] `;n=t=>{b(`${e}${t}`)}}new W(t,r,v,E,n,this,e)})).on("error",(e=>{this.emit("error",e)})).on("listening",(()=>{this.emit("listening")})).on("close",(()=>{this.emit("close")})),this._connections=0,this.maxConnections=1/0}injectSocket(e){this._srv.emit("connection",e)}listen(...e){return this._srv.listen(...e),this}address(){return this._srv.address()}getConnections(e){return this._srv.getConnections(e),this}close(e){return this._srv.close(e),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}}H.KEEPALIVE_CLIENT_INTERVAL=15e3,H.KEEPALIVE_CLIENT_COUNT_MAX=3;class W extends i{constructor(e,t,r,n,i,a,c){super();let l,u,h,p=0,g=!1,_=[];const m=[];function y(e){}this._sock=e,this._chanMgr=new B(this),this._debug=i,this.noMoreSessions=!1,this.authenticated=!1,this.on("error",y);const w=i?(e,t,r)=>{i(`Debug output from client: ${JSON.stringify(r)}`)}:void 0,A="number"==typeof c.keepaliveInterval&&isFinite(c.keepaliveInterval)&&c.keepaliveInterval>0?c.keepaliveInterval:"number"==typeof H.KEEPALIVE_CLIENT_INTERVAL&&isFinite(H.KEEPALIVE_CLIENT_INTERVAL)&&H.KEEPALIVE_CLIENT_INTERVAL>0?H.KEEPALIVE_CLIENT_INTERVAL:-1,O="number"==typeof c.keepaliveCountMax&&isFinite(c.keepaliveCountMax)&&c.keepaliveCountMax>=0?c.keepaliveCountMax:"number"==typeof H.KEEPALIVE_CLIENT_COUNT_MAX&&isFinite(H.KEEPALIVE_CLIENT_COUNT_MAX)&&H.KEEPALIVE_CLIENT_COUNT_MAX>=0?H.KEEPALIVE_CLIENT_COUNT_MAX:-1;let W=0;-1!==A&&-1!==O&&(this.once("ready",(()=>{const e=()=>{clearInterval(u)};this.on("close",e).on("end",e),u=setInterval((()=>{if(++W>O){clearInterval(u);const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),this.end()}else $.ping()}),A)})),h=()=>{u&&u.refresh(),W=0});const $=this._protocol=new v({server:!0,hostKeys:t,ident:r,offer:n,onPacket:h,greeting:c.greeting,banner:c.banner,onWrite:t=>{P(e)&&e.write(t)},onError:t=>{$._destruct||e.removeAllListeners("data"),this.emit("error",t);try{e.end()}catch{}},onHeader:t=>{this.removeListener("error",y);const r={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:t};if(!a.emit("connection",this,r))return $.disconnect(d.BY_APPLICATION),void e.end();t.greeting&&this.emit("greeting",t.greeting)},onHandshakeComplete:e=>{++p>1&&this.emit("rekey"),this.emit("handshake",e)},debug:i,messageHandlers:{DEBUG:w,DISCONNECT:(t,r,n)=>{if(r!==d.BY_APPLICATION){n||void 0===(n=f[r])&&(n=`Unexpected disconnection reason: ${r}`);const e=new Error(n);e.code=r,this.emit("error",e)}e.end()},CHANNEL_OPEN:(e,t)=>{if("session"===t.type&&this.noMoreSessions||!this.authenticated){const e=s.ADMINISTRATIVELY_PROHIBITED;return $.channelOpenFail(t.sender,e)}let r,n,a=-1,c=!1;const l=()=>{c||(c=!0,void 0===r&&(r=-1===a?s.RESOURCE_SHORTAGE:s.CONNECT_FAILED),-1!==a&&this._chanMgr.remove(a),$.channelOpenFail(t.sender,r,""))},u=()=>(a=this._chanMgr.add(),-1===a&&(r=s.RESOURCE_SHORTAGE,i&&i("Automatic rejection of incoming channel open: no channels available")),-1!==a),h=t.data;switch(t.type){case"session":if(o(this,"session")&&u())return n=()=>{if(c)return;c=!0;const e=new j(this,t,a);return this._chanMgr.update(a,e),$.channelOpenConfirm(t.sender,a,k,C),e},void this.emit("session",n,l);break;case"direct-tcpip":if(o(this,"tcpip")&&u())return n=()=>{if(c)return;c=!0;const e={type:void 0,incoming:{id:a,window:k,packetSize:C,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new I(this,e,{server:!0});return this._chanMgr.update(a,r),$.channelOpenConfirm(t.sender,a,k,C),r},void this.emit("tcpip",n,l,h);break;case"direct-streamlocal@openssh.com":if(o(this,"openssh.streamlocal")&&u())return n=()=>{if(c)return;c=!0;const e={type:void 0,incoming:{id:a,window:k,packetSize:C,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new I(this,e,{server:!0});return this._chanMgr.update(a,r),$.channelOpenConfirm(t.sender,a,k,C),r},void this.emit("openssh.streamlocal",n,l,h);break;default:r=s.UNKNOWN_CHANNEL_TYPE,i&&i(`Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=s.ADMINISTRATIVELY_PROHIBITED,i&&i(`Automatic rejection of unexpected incoming channel open for: ${t.type}`)),l()},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const n={type:r.type,incoming:{id:t.recipient,window:k,packetSize:C,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},i=new I(this,n,{server:!0});this._chanMgr.update(t.recipient,i),r(void 0,i)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const i=this._chanMgr.get(t);if("function"!=typeof i)return;N(this,t,{reason:r,description:n},i)},CHANNEL_DATA:(e,t,r)=>{let n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.constructor!==j||(n=n._channel,n))&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=T&&R(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{let n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.constructor!==j||(n=n._channel,n))&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==j||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!1)},CHANNEL_FAILURE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==j||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!0)},CHANNEL_REQUEST:(e,t,r,n,s)=>{const a=this._chanMgr.get(t);if("object"!=typeof a||null===a)return;let c,l,u=!1;if(a.constructor===j)if(n&&("shell"!==r&&"exec"!==r&&"subsystem"!==r&&(c=()=>{u||a._ending||a._channel||(u=!0,$.channelSuccess(a._chanInfo.outgoing.id))}),l=()=>{u||a._ending||a._channel||(u=!0,$.channelFailure(a._chanInfo.outgoing.id))}),a._ending)l&&l();else{switch(r){case"env":if(o(a,"env"))return void a.emit("env",c,l,{key:s.name,val:s.value});break;case"pty-req":if(o(a,"pty"))return void a.emit("pty",c,l,s);break;case"window-change":o(a,"window-change")?a.emit("window-change",c,l,s):l&&l();break;case"x11-req":if(o(a,"x11"))return void a.emit("x11",c,l,s);break;case"signal":if(o(a,"signal"))return void a.emit("signal",c,l,{name:s});break;case"auth-agent-req@openssh.com":if(o(a,"auth-agent"))return void a.emit("auth-agent",c,l);break;case"shell":if(o(a,"shell"))return c=()=>{if(u||a._ending||a._channel)return;u=!0,n&&$.channelSuccess(a._chanInfo.outgoing.id);const e=new I(this,a._chanInfo,{server:!0});return e.subtype=a.subtype=r,a._channel=e,e},void a.emit("shell",c,l);break;case"exec":if(o(a,"exec"))return c=()=>{if(u||a._ending||a._channel)return;u=!0,n&&$.channelSuccess(a._chanInfo.outgoing.id);const e=new I(this,a._chanInfo,{server:!0});return e.subtype=a.subtype=r,a._channel=e,e},void a.emit("exec",c,l,{command:s});break;case"subsystem":{let e="sftp"===s;if(c=()=>{if(u||a._ending||a._channel)return;let t;return u=!0,n&&$.channelSuccess(a._chanInfo.outgoing.id),e?t=new E(this,a._chanInfo,{server:!0,debug:i}):(t=new I(this,a._chanInfo,{server:!0}),t.subtype=a.subtype=`${r}:${s}`),a._channel=t,t},"sftp"===s){if(o(a,"sftp"))return void a.emit("sftp",c,l);e=!1}if(o(a,"subsystem"))return void a.emit("subsystem",c,l,{name:s});break}}i&&i(`Automatic rejection of incoming channel request: ${r}`),l&&l()}else n&&$.channelFailure(a.outgoing.id)},CHANNEL_EOF:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==j||(r._ending||(r._ending=!0,r.emit("eof"),r.emit("end")),r=r._channel,r))&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null))},CHANNEL_CLOSE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==j||(r._ending=!0,r.emit("close"),r=r._channel,r))&&x(this,t,r)},SERVICE_REQUEST:(t,r)=>{if(0===p||g||this.authenticated||"ssh-userauth"!==r)return $.disconnect(d.SERVICE_NOT_AVAILABLE),void e.end();g=!0,$.serviceAccept(r)},USERAUTH_REQUEST:(t,r,n,i,s)=>{if(0===p||this.authenticated||l&&(l.username!==r||l.service!==n)||"password"!==i&&"publickey"!==i&&"hostbased"!==i&&"keyboard-interactive"!==i&&"none"!==i||10===_.length)return $.disconnect(d.PROTOCOL_ERROR),void e.end();if("ssh-connection"!==n)return $.disconnect(d.SERVICE_NOT_AVAILABLE),void e.end();let a;switch(i){case"keyboard-interactive":a=new M($,r,n,i,s,Q);break;case"publickey":a=new D($,r,n,i,s,Q);break;case"hostbased":a=new U($,r,n,i,s,Q);break;case"password":if(l&&l instanceof F&&l._changeCb){const e=l._changeCb;return l._changeCb=void 0,void e(s.newPassword)}a=new F($,r,n,i,s,Q);break;case"none":a=new L($,r,n,i,Q)}if(l){if(!l._initialResponse)return _.push(a);l._multistep&&!l._finalResponse&&(l._cleanup&&l._cleanup(),l.emit("abort"))}l=a,o(this,"authentication")?this.emit("authentication",l):l.reject()},USERAUTH_INFO_RESPONSE:(e,t)=>{l&&l instanceof M&&l._onInfoResponse(t)},GLOBAL_REQUEST:(e,t,r,n)=>{const i={type:null,buf:null};function s(e,t){i.type=e,i.buf=t,function(){for(;m.length>0&&m[0].type;){const e=m.shift();"SUCCESS"===e.type&&$.requestSuccess(e.buf),"FAILURE"===e.type&&$.requestFailure()}}()}if(r&&m.push(i),("tcpip-forward"===t||"cancel-tcpip-forward"===t||"no-more-sessions@openssh.com"===t||"streamlocal-forward@openssh.com"===t||"cancel-streamlocal-forward@openssh.com"===t)&&o(this,"request")&&this.authenticated){let e,i;if(r){let r=!1;e=e=>{if(r)return;let i;r=!0,"tcpip-forward"===t&&0===n.bindPort&&"number"==typeof e&&(i=Buffer.allocUnsafe(4),S(i,e,0)),s("SUCCESS",i)},i=()=>{r||(r=!0,s("FAILURE"))}}if("no-more-sessions@openssh.com"===t)return this.noMoreSessions=!0,void(e&&e());this.emit("request",e,i,t,n)}else r&&s("FAILURE")}}});e.pause(),b.then((()=>{$.start(),e.on("data",(t=>{try{$.parse(t,0,t.length)}catch(t){this.emit("error",t);try{P(e)&&e.end()}catch{}}})),e.resume()})).catch((t=>{this.emit("error",t);try{P(e)&&e.end()}catch{}})),e.on("error",(e=>{e.level="socket",this.emit("error",e)})).once("end",(()=>{i&&i("Socket ended"),$.cleanup(),this.emit("end")})).once("close",(()=>{i&&i("Socket closed"),$.cleanup(),this.emit("close");const e=new Error("No response from server");this._chanMgr.cleanup(e)}));const Q=(e,t,r,n)=>{l!==e||this.authenticated||(t?(l=void 0,this.authenticated=!0,$.authSuccess(),_=[],this.emit("ready")):($.authFailure(r,n),_.length&&(l=_.pop(),o(this,"authentication")?this.emit("authentication",l):l.reject())))}}end(){return this._sock&&P(this._sock)&&(this._protocol.disconnect(d.BY_APPLICATION),this._sock.end()),this}x11(e,t,r){return $(this,"x11",{originAddr:e,originPort:t},r),this}forwardOut(e,t,r,n,i){return $(this,"forwarded-tcpip",{boundAddr:e,boundPort:t,remoteAddr:r,remotePort:n},i),this}openssh_forwardOutStreamLocal(e,t){return $(this,"forwarded-streamlocal@openssh.com",{socketPath:e},t),this}rekey(e){let t;try{this._protocol.rekey()}catch(e){t=e}"function"==typeof e&&(t?process.nextTick(e,t):this.once("rekey",e))}setNoDelay(e){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(e),this}}function $(e,t,r,n){const i=k,o=C;"function"==typeof r&&(n=r,r={});const s=(e,t)=>{n(e,t)};s.type=t;const a=e._chanMgr.add(s);if(-1!==a)switch(t){case"forwarded-tcpip":e._protocol.forwardedTcpip(a,i,o,r);break;case"x11":e._protocol.x11(a,i,o,r);break;case"forwarded-streamlocal@openssh.com":e._protocol.openssh_forwardedStreamLocal(a,i,o,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else n(new Error("No free channels available"))}function Q(e,t){return e-t}e.exports=H,e.exports.IncomingClient=W},9100:(e,t,r)=>{"use strict";const{SFTP:n}=r(4261),i=2**32-1;function o(e,t,r,n){if(e._chanMgr.remove(t),"function"!=typeof n)return;let i;r instanceof Error?i=r:"object"==typeof r&&null!==r?(i=new Error(`(SSH) Channel open failure: ${r.description}`),i.reason=r.reason):(i=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),i.reason=""),n(i)}function s(e,t,r,i,s){if("function"==typeof r)return void o(e,t,i,r);if("object"!=typeof r||null===r)return;if(r.incoming&&"closed"===r.incoming.state)return;if(e._chanMgr.remove(t),r.server&&"Session"===r.constructor.name)return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor===n||"open"!==r.outgoing.state&&"eof"!==r.outgoing.state||s||r.close(),"closing"===r.outgoing.state&&(r.outgoing.state="closed");const a=r._readableState,c=r._writableState;!c||c.ending||c.finished||s||r.end();const l=r._callbacks;r._callbacks=[];for(let e=0;e<l.length;++e)l[e](!0);if(r.server)!r.readable||r.destroyed||a&&a.endEmitted?r.emit("close"):r.once("end",(()=>r.emit("close")));else{let e;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":e=()=>r.emit("close");break;default:{const t=r._exit;e=()=>{null===t.code?r.emit("close",t.code,t.signal,t.dump,t.desc):r.emit("close",t.code)}}}!r.readable||r.destroyed||a&&a.endEmitted?e():r.once("end",e);const t=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||t&&t.endEmitted?r.stderr.emit("close"):r.stderr.once("end",(()=>r.stderr.emit("close")))}}const a=(()=>{const e=Object.prototype.toString;return t=>"[object RegExp]"===e.call(t)})();e.exports={ChannelManager:class{constructor(e){this._client=e,this._channels={},this._cur=-1,this._count=0}add(e){let t;if(this._cur<i)t=++this._cur;else if(0===this._count)this._cur=0,t=0;else{const e=this._channels;for(let r=0;r<i;++r)if(void 0===e[r]){t=r;break}}return void 0===t?-1:(this._channels[t]=e||!0,++this._count,t)}update(e,t){if("number"!=typeof e||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);t&&this._channels[e]&&(this._channels[e]=t)}get(e){if("number"!=typeof e||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if("number"!=typeof e||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);this._channels[e]&&(delete this._channels[e],this._count&&--this._count)}cleanup(e){const t=this._channels;this._channels={},this._cur=-1,this._count=0;const r=Object.keys(t),n=this._client;for(let i=0;i<r.length;++i){const o=+r[i],a=t[o];s(n,o,a._channel||a,e,!0)}}},generateAlgorithmList:function(e,t,r){if(Array.isArray(e)&&e.length>0){for(let t=0;t<e.length;++t)if(-1===r.indexOf(e[t]))throw new Error(`Unsupported algorithm: ${e[t]}`);return e}if("object"==typeof e&&null!==e){const n=Object.keys(e);let i=t;for(let o=0;o<n.length;++o){const s=n[o];let c=e[s];switch(s){case"append":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=0;e<c.length;++e){const n=c[e];if("string"==typeof n){if(!n||-1!==i.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);i===t&&(i=i.slice()),i.push(n)}else if(a(n))for(let e=0;e<r.length;++e){const o=r[e];if(n.test(o)){if(-1!==i.indexOf(o))continue;i===t&&(i=i.slice()),i.push(o)}}}break;case"prepend":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=c.length;e>=0;--e){const n=c[e];if("string"==typeof n){if(!n||-1!==i.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);i===t&&(i=i.slice()),i.unshift(n)}else if(a(n))for(let e=r.length;e>=0;--e){const o=r[e];if(n.test(o)){if(-1!==i.indexOf(o))continue;i===t&&(i=i.slice()),i.unshift(o)}}}break;case"remove":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=0;e<c.length;++e){const r=c[e];if("string"==typeof r){if(!r)continue;const e=i.indexOf(r);if(-1===e)continue;i===t&&(i=i.slice()),i.splice(e,1)}else if(a(r))for(let e=0;e<i.length;++e)r.test(i[e])&&(i===t&&(i=i.slice()),i.splice(e,1),--e)}}}return i}return t},onChannelOpenFailure:o,onCHANNEL_CLOSE:s,isWritable:e=>e&&e.writable&&e._readableState&&!1===e._readableState.ended}},3141:(e,t,r)=>{"use strict";var n=r(2861).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=s(t[n]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=s(t[n]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2993:e=>{"use strict";e.exports=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}},5467:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMixin=void 0;const s=o(r(1687)),a=r(5798);class c extends s.MixinDeviceBase{constructor(e,t){super(e),this.plugin=t,this.baseStorageSettings=new a.StorageSettings(this,{debug:{title:"Log debug messages",type:"boolean",defaultValue:!1,immediate:!0}})}async release(){this.killed=!0}getLogger(){const e=s.default.deviceManager.getMixinConsole(this.id,this.nativeId);if(!this.logger){const t=(t,r,...n)=>{const i=(new Date).toLocaleString();t&&!this.baseStorageSettings.getItem("debug")||e.log(` ${i} - `,r,...n)};this.logger={log:(e,...r)=>t(!1,e,...r),debug:(e,...r)=>t(!0,e,...r)}}return this.logger}}t.BaseMixin=c},4195:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlugin=t.getBaseSettings=void 0;const a=o(r(1687)),c=s(r(1535)),l=r(5467),{systemManager:u}=a.default;t.getBaseSettings=e=>{const{onPluginSwitch:t,hideMqtt:r}=e;return{pluginEnabled:{title:"Plugin enabled",type:"boolean",defaultValue:!0,immediate:!0,group:"base",onPut:t},mqttEnabled:{title:"MQTT enabled",type:"boolean",defaultValue:!0,immediate:!0,group:"base",hide:r},debug:{title:"Log debug messages",type:"boolean",defaultValue:!1,immediate:!0,group:"base"},devNotifier:{title:"DEV notifier",type:"device",deviceFilter:`(type === '${a.ScryptedDeviceType.Notifier}')`,group:"base"},useMqttPluginCredentials:{title:"Use MQTT plugin credentials",subgroup:"MQTT",type:"boolean",immediate:!0,group:"base"},mqttHost:{title:"Host",subgroup:"MQTT",description:"Specify the mqtt address.",placeholder:"mqtt://192.168.1.100",group:"base"},mqttUsename:{title:"Username",subgroup:"MQTT",description:"Specify the mqtt username.",group:"base"},mqttPassword:{title:"Password",subgroup:"MQTT",description:"Specify the mqtt password.",type:"password",group:"base"}}};class h extends a.ScryptedDeviceBase{constructor(e,t){super(e),this.opts=t}async getSettings(){const{mqttEnabled:e,useMqttPluginCredentials:t}=this.storageSettings.values;e?(this.storageSettings.settings.mqttHost.hide=t,this.storageSettings.settings.mqttPassword.hide=t,this.storageSettings.settings.mqttUsename.hide=t,this.storageSettings.settings.useMqttPluginCredentials.hide=!1):(this.storageSettings.settings.mqttHost.hide=!0,this.storageSettings.settings.mqttPassword.hide=!0,this.storageSettings.settings.mqttUsename.hide=!0,this.storageSettings.settings.useMqttPluginCredentials.hide=!0);return await this.storageSettings.getSettings()}putSetting(e,t){return this.storageSettings.putSetting(e,t)}async setupMqttClient(){const{mqttEnabled:e,useMqttPluginCredentials:t,pluginEnabled:r}=this.storageSettings.values;if(e&&r){let e,r,n;const i=this.getLogger();if(this.mqttClient&&(this.mqttClient.disconnect(),this.mqttClient=void 0),t){i.log("Using MQTT plugin credentials.");const t=u.getDeviceByName("MQTT"),o=await t.getSettings();JSON.parse(o.find((e=>"enableBroker"===e.key))?.value||"false")?i.log("Internal MQTT broker not supported yet. Please disable useMqttPluginCredentials."):(e=o.find((e=>"externalBroker"===e.key))?.value,r=o.find((e=>"username"===e.key))?.value,n=o.find((e=>"password"===e.key))?.value)}else i.log("Using provided credentials."),e=this.storageSettings.getItem("mqttHost"),r=this.storageSettings.getItem("mqttUsename"),n=this.storageSettings.getItem("mqttPassword");e&&r&&n||i.log("MQTT params not provided");try{this.mqttClient=new c.default(e,r,n,i)}catch(e){this.getLogger().log("Error setting up MQTT client",e)}}}async getMqttClient(){return this.mqttClient||await this.setupMqttClient(),this.mqttClient}async getMixin(e,t,r){const n={mixinDevice:e,mixinDeviceInterfaces:t,mixinDeviceState:r,mixinProviderNativeId:this.nativeId,group:this.opts.mixinGroup,groupKey:this.opts.mixinKey};return[a.ScryptedInterface.Camera,a.ScryptedInterface.VideoCamera].some((e=>t.includes(e)))||[a.ScryptedInterface.BinarySensor,a.ScryptedInterface.Lock].some((e=>t.includes(e)))||t.includes(a.ScryptedInterface.Notifier)?new l.BaseMixin(n,this):void 0}async releaseMixin(e,t){await t.release()}getLogger(){if(!this.mainLogger){const e=`[${this.opts.pluginFriendlyName}]`,t=(t,r,...n)=>{const i=(new Date).toLocaleString();("debug"!==t||this.storageSettings.getItem("debug"))&&this.console.log(`${e} ${i} - `,r,...n),"error"===t&&this.storageSettings.values.devNotifier&&this.storageSettings.values.devNotifier.sendNotification(this.opts.pluginFriendlyName,{body:`${r}${n?.map((e=>"\n"+e))}`,data:{pushover:{priority:1}}})};this.mainLogger={log:(e,...r)=>t("log",e,...r),debug:(e,...r)=>t("debug",e,...r),error:(e,...r)=>t("error",e,...r)}}return this.mainLogger}}t.BasePlugin=h},1535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9913);t.default=class{constructor(e,t,r,n){this.topicLastValue={},this.host=e,this.username=t,this.password=r,this.logger=n}async disconnect(){if(this.mqttClient)try{this.mqttClient.end(!0)}catch(e){this.logger.log("Error closing MQTT connection",e)}}async getMqttClient(e){const t=async()=>{const e=await(0,n.connectAsync)(this.mqttPathmame,{rejectUnauthorized:!1,username:this.username,password:this.password,reschedulePings:!0});e.on("connect",(t=>{this.mqttClient=e})),e.on("error",(e=>{this.logger.log("Error connecting to mqtt",e),this.mqttClient=void 0})),e.setMaxListeners(1/0),this.logger.log("Connected to mqtt"),this.mqttClient=e};if(!this.mqttClient||e){if(e&&this.mqttClient)try{await this.mqttClient.endAsync()}catch(e){}const r=this.host,n=new URL(r);return n.pathname="",this.mqttPathmame=n.toString(),this.mqttPathmame.endsWith("/")||(this.mqttPathmame=`${this.mqttPathmame}/`),this.logger.log("Starting MQTT connection",this.host,this.username,this.mqttPathmame),await t(),this.mqttClient&&(this.mqttClient.onKeepaliveTimeout=async()=>{this.logger.log("keepalive timeout. Reconnecting"),this.mqttClient.reconnect()}),this.mqttClient}return this.mqttClient.connected||(this.logger.log("MQTT disconnected. Reconnecting",this.host,this.username,this.mqttPathmame),await t()),this.mqttClient}async publish(e,t,r=!0){let n;try{"object"==typeof t&&(n=JSON.stringify(t)),t.constructor.name!==Buffer.name&&(n=t.toString())}catch(t){return void this.logger.log(`Error parsing publish values: ${JSON.stringify({topic:e,value:n})}`,t)}if(r&&this.topicLastValue[e]===n)return void this.logger.debug(`Skipping publish, same as previous value: ${JSON.stringify({topic:e,value:n,previousValue:this.topicLastValue[e]})}`);this.logger.debug(`Publishing ${JSON.stringify({topic:e,value:n})}`);const i=await this.getMqttClient();try{await i.publishAsync(e,n,{retain:r})}catch(t){this.logger.log(`Error publishing to MQTT. Reconnecting. ${JSON.stringify({topic:e,value:n})}`,t),await this.getMqttClient(!0),await i.publishAsync(e,n,{retain:r})}finally{r&&(this.topicLastValue[e]=n)}}getMqttTopicTopics(e,t){const r=t.id,n=t=>`scrypted/${e}/${r}/${t}`;return{getEntityTopic:n,getDiscoveryTopic:(t,n)=>`homeassistant/${t}/${e}-${r}/${n}/config`,getInfoTopic:e=>`${n(e)}/info`}}async subscribeToTopic(e,t){const r=await this.getMqttClient();await r.unsubscribeAsync([e]),await r.subscribeAsync([e]),r.on("message",((r,n)=>{const i=n.toString();r===e&&t(i)}))}async subscribe(e,t){await this.unsubscribe(e),await this.mqttClient.subscribeAsync(e),this.mqttClient.on("message",(async(e,r)=>{const n=r.toString();await t(e,n)}))}async unsubscribe(e){await this.mqttClient.unsubscribeAsync(e)}removeAllListeners(){this.mqttClient.removeAllListeners()}}},9959:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Local=void 0;const i=n(r(7562)),o=r(1613),s=n(r(9896)),a=n(r(6928));t.Local=class{constructor(e){this.console=e,this.backupFolder=a.default.join(process.env.SCRYPTED_PLUGIN_VOLUME,"backups")}log(e,...t){this.console.log("[LOCAL] ",e,...t)}async uploadBackup(e){const t=await i.default.systemManager.getComponent("backup");await t.restoreBackup(e.buffer)}async getBackupsList(e){const{filePrefix:t}=e,r=(await s.default.promises.readdir(this.backupFolder)).filter((e=>e.startsWith(t))),{filesOrderedByDate:n}=(0,o.findFilesToRemove)({fileNames:r,filePrefix:t});return n}async getBackup(e){const{fileName:t}=e;this.log(`Looking for the backup ${t}`);try{return await s.default.promises.readFile(`${this.backupFolder}/${t}`)}catch(e){return void this.log("Error finding the backup",e)}}getFileNames(e,t){const r=`${t}-${`${e.getFullYear()}_${e.getMonth()+1}_${e.getDate()}_${e.getHours()}_${e.getMinutes()}_${e.getSeconds()}`}${o.fileExtension}`;return{fileName:r,filePath:`${this.backupFolder}/${r}`}}async createBackup(e){this.log("Starting backup download.");const{date:t,filePrefix:r}=e;try{const{filePrefix:t,date:r}=e;s.default.existsSync(this.backupFolder)||(this.log(`Creating backups dir at: ${this.backupFolder}`),s.default.mkdirSync(this.backupFolder));const n=await i.default.systemManager.getComponent("backup"),o=await n.createBackup(),{filePath:a,fileName:c}=this.getFileNames(r,t);return await s.default.promises.writeFile(a,o),this.log("Backup download completed."),{filePath:a,fileName:c}}catch(e){return void this.log("Error downloading backup",e)}}async restoreBackup(e){this.log("Starting backup restore.");const{fileBuffer:t}=e;try{const e=await i.default.systemManager.getComponent("backup");await e.restore(t),this.log("Backup restore completed.")}catch(e){return void this.log("Error restore backup",e)}}async pruneOldBackups(e){const{filePrefix:t,maxBackups:r}=e,n=(await s.default.promises.readdir(this.backupFolder)).filter((e=>e.startsWith(t))),{filesToRemove:i}=(0,o.findFilesToRemove)({fileNames:n,filesToKeep:r,filePrefix:t}),a=i.length;if(a>0){this.log(`Removing ${a} old backups`);for(const e of i)try{await s.default.promises.unlink(`${this.backupFolder}/${e}`),this.log(`File ${e} removed`)}catch(t){this.log(`Error removing file ${e}`,t)}}return a}}},7927:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(6117),o=n(r(8274)),s=r(2238),a=r(1613),c=r(9959),l=r(9835),u=r(4195);var h;!function(e){e.Local="Local",e.Cloud="Cloud"}(h||(h={}));class d extends u.BasePlugin{constructor(e){super(e,{pluginFriendlyName:"Remote backup"}),this.storageSettings=new i.StorageSettings(this,{...(0,u.getBaseSettings)({onPluginSwitch:async(e,t)=>{await this.startStop(t)}}),backupService:{title:"Backup service",type:"string",choices:[a.BackupServiceEnum.Samba,a.BackupServiceEnum.SFTP],defaultValue:a.BackupServiceEnum.Samba,immediate:!0},maxBackupsLocal:{title:"Max local backups",description:"Maximum amount of backups to retain on the scrypted' plugin folder",type:"number",defaultValue:7},maxBackupsCloud:{title:"Max cloud backups",description:"Maximum amount of backups to retain on the selected backup service",type:"number",defaultValue:7},filePrefix:{title:'File prefix. Should not contain the character "_"',type:"string",defaultValue:"scrypted-backup"},cronSchedule:{title:"Cron scheduler",type:"string",defaultValue:"0 4 * * *",onPut:async()=>await this.start()},backupNow:{title:"Manual backup",type:"button",onPut:async()=>await this.executeBackup(new Date)},checkFiles:{title:"Check files",description:"Remove all the exceeding files on both local and cloud",type:"button",onPut:async()=>await this.checkMaxFiles()},restoreSource:{title:"Restore source",group:"Restore",type:"string",choices:[h.Local],defaultValue:h.Local,immediate:!0,onPut:async()=>await this.fetchFiles()},backupToRestore:{title:"Backup file",group:"Restore",type:"string",immediate:!0,choices:[]},refreshFiles:{title:"Refresh files",group:"Restore",type:"button",onPut:async()=>await this.fetchFiles()},restore:{title:"Restore backup",group:"Restore",type:"button",onPut:async()=>await this.restoreBackup()},sambaAddress:{title:"Server address",group:a.BackupServiceEnum.Samba,type:"string",hide:!0,placeholder:"//server/share"},sambaTargetDirectory:{title:"Target directory in the share",group:a.BackupServiceEnum.Samba,type:"string",hide:!0},sambaUsername:{title:"Username",group:a.BackupServiceEnum.Samba,type:"string",hide:!0,placeholder:"guest"},sambaPassword:{title:"Password",group:a.BackupServiceEnum.Samba,type:"password"},sambaDomain:{title:"Domain",group:"Samba",placeholder:"WORKGROUP",type:"string",hide:!0},sambaMaxProtocol:{title:"Max protocol",group:a.BackupServiceEnum.Samba,placeholder:"SMB3",type:"string",hide:!0},sambaMaskCmd:{title:"Mask commands",group:a.BackupServiceEnum.Samba,type:"boolean",defaultValue:!1,hide:!0},sftpHost:{title:"Server host",group:a.BackupServiceEnum.SFTP,type:"string",hide:!0,placeholder:"192.168.1.1"},sftpPort:{title:"Server port",group:a.BackupServiceEnum.SFTP,type:"number",hide:!0,placeholder:"22",defaultValue:22},sftpTargetDirectory:{title:"Target directory",group:a.BackupServiceEnum.SFTP,type:"string",hide:!0},sftpUsername:{title:"Username",group:a.BackupServiceEnum.SFTP,type:"string",hide:!0,placeholder:"guest"},sftpPassword:{title:"Password",group:a.BackupServiceEnum.SFTP,type:"password"}}),this.localService=new c.Local(this.getLogger()),this.fetchFiles().then().catch(this.getLogger().log),this.start().then().catch(this.getLogger().log)}async startStop(e){e?await this.start():await this.stop()}async start(){this.storageSettings.getItem("pluginEnabled")?(await this.stop(),await this.initScheduler()):this.getLogger().log("Plugin is disabled")}async stop(){this.cronTask&&(this.getLogger().log("Stopping scheduler"),this.cronTask.stop(),this.cronTask=void 0)}async getSettings(){const e=this.storageSettings.getItem("backupService"),t=this.storageSettings.settings.backupService.choices;Object.entries(this.storageSettings.settings).forEach((([r,n])=>{n.group===e?n.hide=!1:t.includes(n.group)&&(n.hide=!0)}));return await super.getSettings()}async fetchFiles(){const e=this.storageSettings.getItem("filePrefix"),t=this.storageSettings.getItem("restoreSource");this.getLogger().log("Fetching available backups");try{let r=[];if(t===h.Local){const t=await this.getBackupService();r=await t.getBackupsList({filePrefix:e})}else r=await this.localService.getBackupsList({filePrefix:e});this.getLogger().log(`${r.length} backups found.`),this.storageSettings.settings.backupToRestore.choices=r}catch(e){this.getLogger().log("Error fetching available backups",e)}}async initScheduler(){try{const{cronSchedule:e,devNotifier:t,backupService:r}=this.storageSettings.values;if(!e)return void this.getLogger().log("Cron scheduler is not set");this.getLogger().log(`Starting scheduler with ${e}`),this.cronTask=o.default.schedule(e,(async()=>{try{const e=new Date;this.getLogger().log(`Executing scheduled backup at ${e.toLocaleString()}`),await this.executeBackup(e);const{localFilesRemoved:n,serviceFilesRemoved:i}=await this.checkMaxFiles();if(t){let e=`Backup executed on ${r}.\n`;e+=`${i} backups removed on ${r}\n`,e+=`${n} backups removed locally`,await t.sendNotification(this.opts.pluginFriendlyName,{body:e})}}catch(e){this.getLogger().log("Error executing the scheduled backup: ",e),t&&await t.sendNotification(this.opts.pluginFriendlyName,{body:`Error executing backup: ${e}`})}}))}catch(e){this.getLogger().log("Error in initScheduler",e)}}async getBackupService(){try{if(this.storageSettings.values.backupService===a.BackupServiceEnum.Samba){const e=this.storageSettings.getItem("sambaAddress"),t=this.storageSettings.getItem("sambaUsername"),r=this.storageSettings.getItem("sambaPassword"),n=this.storageSettings.getItem("sambaDomain"),i=this.storageSettings.getItem("sambaMaxProtocol"),o=this.storageSettings.getItem("sambaMaskCmd"),a=this.storageSettings.getItem("sambaTargetDirectory");return new s.Samba({address:e,username:t,password:r,domain:n,maxProtocol:i,maskCmd:o,directory:a},this.getLogger())}if(this.storageSettings.values.backupService===a.BackupServiceEnum.SFTP){const e=this.storageSettings.getItem("sftpHost"),t=this.storageSettings.getItem("sftpPort"),r=this.storageSettings.getItem("sftpUsername"),n=this.storageSettings.getItem("sftpPassword"),i=this.storageSettings.getItem("sftpTargetDirectory");return new l.Sftp({host:e,port:t,username:r,password:n},i,this.getLogger())}}catch(e){this.getLogger().log("Error during service init",e)}}async executeBackup(e){const{filePrefix:t,devNotifier:r,backupService:n}=this.storageSettings.values,{fileName:i,filePath:o}=await this.localService.createBackup({date:e,filePrefix:t}),s=this.storageSettings.values.backupService,a=await this.getBackupService();this.getLogger().log(`Starting upload to ${s}.`),await a.uploadBackup({fileName:i,filePath:o}),this.getLogger().log(`Upload to ${s} completed.`)}async checkMaxFiles(){const e=this.storageSettings.getItem("backupService"),t=this.storageSettings.getItem("maxBackupsCloud"),r=this.storageSettings.getItem("maxBackupsLocal"),n=this.storageSettings.getItem("filePrefix"),i=await this.getBackupService();this.getLogger().log(`Starting ${e} max filess cleanup.`);const o=await i.pruneOldBackups({filePrefix:n,maxBackups:t});this.getLogger().log(`${e} max files cleanup completed. Removed ${o} backups.`),this.getLogger().log("Starting local max filess cleanup.");const s=await this.localService.pruneOldBackups({filePrefix:n,maxBackups:r});return this.getLogger().log(`Local max files cleanup completed. Removed ${s} backups.`),{serviceFilesRemoved:o,localFilesRemoved:s}}async restoreBackup(){const e=this.storageSettings.getItem("restoreSource"),t=this.storageSettings.getItem("backupToRestore");let r;if(this.storageSettings.putSetting("backupToRestore",void 0),this.getLogger().log(`Restoring backup ${t} from ${e}`),e===h.Cloud){const e=await this.getBackupService();r=await e.getBackup({fileName:t})}else r=await this.localService.getBackup({fileName:t});await this.localService.uploadBackup({buffer:r})}}t.default=d},2238:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Samba=void 0;const i=n(r(9687)),o=r(1613);class s extends i.default{constructor(e,t){if(!e.address)throw new Error("Address is required");super(e),this.console=t}async getBackup(e){const{fileName:t}=e;throw new Error("Method not implemented. Use Local source")}async getBackupsList(e){const{filePrefix:t}=e,r=await this.listFiles(t,o.fileExtension),{filesOrderedByDate:n}=(0,o.findFilesToRemove)({fileNames:r,filePrefix:t});return n}log(e,...t){this.console.log("[SAMBA] ",e,...t)}async uploadBackup(e){const{fileName:t,filePath:r}=e,n=t;this.log(`Uploading file to SMB. Source path is ${r}, destination is ${n}`);try{await this.sendFile(r,n)}catch(e){this.log("Error uploading backup to SMB",e)}}async pruneOldBackups(e){const{filePrefix:t,maxBackups:r}=e,n=await this.listFiles(t,o.fileExtension),{filesToRemove:i}=(0,o.findFilesToRemove)({fileNames:n,filesToKeep:r,filePrefix:t}),s=i.length;if(s>0){this.log(`Removing ${s} old backups`);for(const e of i)try{await this.deleteFile(e),this.log(`File ${e} removed`)}catch(t){this.log(`Error removing file ${e}`,t)}}return s}}t.Samba=s},9835:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Sftp=void 0;const i=n(r(9706)),o=r(1613);t.Sftp=class{constructor(e,t,r){this.connectOptions=e,this.targetDirectory=t,this.console=r}getBackup(e){throw new Error("Method not implemented. Use Local source")}async getBackupsList(e){const{filePrefix:t}=e,r=await this.getClient(),n=(await r.list(this.targetDirectory,(e=>e.name.endsWith(o.fileExtension)))).map((e=>e.name)),{filesToRemove:i}=(0,o.findFilesToRemove)({fileNames:n,filePrefix:t});return i}log(e,...t){this.console.log("[SFTP] ",e,...t)}async getClient(){return this.client&&(await this.client.end(),this.client=void 0),this.client=new i.default,await this.client.connect(this.connectOptions),this.client}async uploadBackup(e){const{fileName:t,filePath:r}=e,n=`${this.targetDirectory}/${t}`;this.log(`Uploading file to SFTP. Source path is ${r}, destination is ${n}`);const i=await this.getClient();try{await i.put(r,n)}catch(e){this.log("Error uploading backup to SMB",e)}}async pruneOldBackups(e){const{filePrefix:t,maxBackups:r}=e,n=await this.getClient(),i=(await n.list(this.targetDirectory,(e=>e.name.endsWith(o.fileExtension)))).map((e=>e.name)),{filesToRemove:s}=(0,o.findFilesToRemove)({fileNames:i,filesToKeep:r,filePrefix:t}),a=s.length;if(a>0){this.log(`Removing ${a} old backups`);for(const e of s)try{const t=`${this.targetDirectory}/${e}`;await n.delete(t,!0),this.log(`File ${e} removed`)}catch(t){this.log(`Error removing file ${e}`,t)}}return a}}},1613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findFilesToRemove=t.fileExtension=t.BackupServiceEnum=void 0;const n=r(2543);var i;!function(e){e.Samba="Samba",e.SFTP="SFTP"}(i||(t.BackupServiceEnum=i={})),t.fileExtension=".zip";t.findFilesToRemove=e=>{const{fileNames:r,filePrefix:i,filesToKeep:o=0}=e,s={};for(const e of r){const r=e.split(i)[1].replace(t.fileExtension,"").replace("-",""),[n,o,a,c,l,u]=r.split("_"),h=new Date;h.setFullYear(Number(n)),h.setMonth(Number(o)),h.setDate(Number(a)),h.setHours(Number(c)),h.setMinutes(Number(l)),h.setSeconds(Number(u)),h.setMilliseconds(0),s[e]=h.getTime()}const a=(0,n.orderBy)(r,(e=>s[e]),"asc"),c=a.length-o;return{filesOrderedByDate:a,filesToRemove:(0,n.cloneDeep)(a).splice(0,c)}}},8947:(e,t,r)=>{!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function _(e,t,r,n){return g(e,t,r,n,16)}function m(e,t,r,n){return g(e,t,r,n,32)}function y(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,_=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,A=o,v=s,E=a,S=c,I=l,k=u,C=h,R=d,T=f,B=p,O=g,P=_,N=m,x=y,L=b,M=w,D=0;D<20;D+=2)A^=(i=(N^=(i=(T^=(i=(I^=(i=A+N|0)<<7|i>>>25)+A|0)<<9|i>>>23)+I|0)<<13|i>>>19)+T|0)<<18|i>>>14,k^=(i=(v^=(i=(x^=(i=(B^=(i=k+v|0)<<7|i>>>25)+k|0)<<9|i>>>23)+B|0)<<13|i>>>19)+x|0)<<18|i>>>14,O^=(i=(C^=(i=(E^=(i=(L^=(i=O+C|0)<<7|i>>>25)+O|0)<<9|i>>>23)+L|0)<<13|i>>>19)+E|0)<<18|i>>>14,M^=(i=(P^=(i=(R^=(i=(S^=(i=M+P|0)<<7|i>>>25)+M|0)<<9|i>>>23)+S|0)<<13|i>>>19)+R|0)<<18|i>>>14,A^=(i=(S^=(i=(E^=(i=(v^=(i=A+S|0)<<7|i>>>25)+A|0)<<9|i>>>23)+v|0)<<13|i>>>19)+E|0)<<18|i>>>14,k^=(i=(I^=(i=(R^=(i=(C^=(i=k+I|0)<<7|i>>>25)+k|0)<<9|i>>>23)+C|0)<<13|i>>>19)+R|0)<<18|i>>>14,O^=(i=(B^=(i=(T^=(i=(P^=(i=O+B|0)<<7|i>>>25)+O|0)<<9|i>>>23)+P|0)<<13|i>>>19)+T|0)<<18|i>>>14,M^=(i=(L^=(i=(x^=(i=(N^=(i=M+L|0)<<7|i>>>25)+M|0)<<9|i>>>23)+N|0)<<13|i>>>19)+x|0)<<18|i>>>14;A=A+o|0,v=v+s|0,E=E+a|0,S=S+c|0,I=I+l|0,k=k+u|0,C=C+h|0,R=R+d|0,T=T+f|0,B=B+p|0,O=O+g|0,P=P+_|0,N=N+m|0,x=x+y|0,L=L+b|0,M=M+w|0,e[0]=A>>>0&255,e[1]=A>>>8&255,e[2]=A>>>16&255,e[3]=A>>>24&255,e[4]=v>>>0&255,e[5]=v>>>8&255,e[6]=v>>>16&255,e[7]=v>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=I>>>0&255,e[17]=I>>>8&255,e[18]=I>>>16&255,e[19]=I>>>24&255,e[20]=k>>>0&255,e[21]=k>>>8&255,e[22]=k>>>16&255,e[23]=k>>>24&255,e[24]=C>>>0&255,e[25]=C>>>8&255,e[26]=C>>>16&255,e[27]=C>>>24&255,e[28]=R>>>0&255,e[29]=R>>>8&255,e[30]=R>>>16&255,e[31]=R>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=B>>>0&255,e[37]=B>>>8&255,e[38]=B>>>16&255,e[39]=B>>>24&255,e[40]=O>>>0&255,e[41]=O>>>8&255,e[42]=O>>>16&255,e[43]=O>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=x>>>0&255,e[53]=x>>>8&255,e[54]=x>>>16&255,e[55]=x>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,_=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,A=0;A<20;A+=2)o^=(i=(m^=(i=(f^=(i=(l^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+l|0)<<13|i>>>19)+f|0)<<18|i>>>14,u^=(i=(s^=(i=(y^=(i=(p^=(i=u+s|0)<<7|i>>>25)+u|0)<<9|i>>>23)+p|0)<<13|i>>>19)+y|0)<<18|i>>>14,g^=(i=(h^=(i=(a^=(i=(b^=(i=g+h|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,w^=(i=(_^=(i=(d^=(i=(c^=(i=w+_|0)<<7|i>>>25)+w|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,u^=(i=(l^=(i=(d^=(i=(h^=(i=u+l|0)<<7|i>>>25)+u|0)<<9|i>>>23)+h|0)<<13|i>>>19)+d|0)<<18|i>>>14,g^=(i=(p^=(i=(f^=(i=(_^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+_|0)<<13|i>>>19)+f|0)<<18|i>>>14,w^=(i=(b^=(i=(y^=(i=(m^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+m|0)<<13|i>>>19)+y|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function A(e,t,r,n,i,o,s){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=o[c];for(;i>=64;){for(y(u,l,s,w),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(y(u,l,s,w),c=0;c<i;c++)e[t+c]=r[n+c]^u[c];return 0}function v(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(y(c,a,i,w),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(y(c,a,i,w),s=0;s<r;s++)e[t+s]=c[s];return 0}function E(e,t,r,n,i){var o=new Uint8Array(32);b(o,n,i,w);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return v(e,t,r,s,o)}function S(e,t,r,n,i,o,s){var a=new Uint8Array(32);b(a,o,s,w);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=o[l+16];return A(e,t,r,n,i,c,a)}var I=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function k(e,t,r,n,i,o){var s=new I(o);return s.update(r,n,i),s.finish(e,t),0}function C(e,t,r,n,i,o){var s=new Uint8Array(16);return k(s,0,r,n,i,o),_(e,t,s,0)}function R(e,t,r,n,i){var o;if(r<32)return-1;for(S(e,0,t,0,r,n,i),k(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function T(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(E(s,0,32,n,i),0!==C(t,16,t,32,r-32,s))return-1;for(S(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function B(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function P(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function N(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(O(a),O(a),O(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,P(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function x(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return N(r,e),N(n,t),m(r,0,n,0)}function L(e){var t=new Uint8Array(32);return N(t,e),1&t[0]}function M(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function F(e,t,r){var n,i,o=0,s=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,y=0,b=0,w=0,A=0,v=0,E=0,S=0,I=0,k=0,C=0,R=0,T=0,B=0,O=0,P=0,N=0,x=0,L=0,M=r[0],D=r[1],U=r[2],F=r[3],j=r[4],H=r[5],W=r[6],$=r[7],Q=r[8],K=r[9],q=r[10],G=r[11],V=r[12],Y=r[13],z=r[14],X=r[15];o+=(n=t[0])*M,s+=n*D,a+=n*U,c+=n*F,l+=n*j,u+=n*H,h+=n*W,d+=n*$,f+=n*Q,p+=n*K,g+=n*q,_+=n*G,m+=n*V,y+=n*Y,b+=n*z,w+=n*X,s+=(n=t[1])*M,a+=n*D,c+=n*U,l+=n*F,u+=n*j,h+=n*H,d+=n*W,f+=n*$,p+=n*Q,g+=n*K,_+=n*q,m+=n*G,y+=n*V,b+=n*Y,w+=n*z,A+=n*X,a+=(n=t[2])*M,c+=n*D,l+=n*U,u+=n*F,h+=n*j,d+=n*H,f+=n*W,p+=n*$,g+=n*Q,_+=n*K,m+=n*q,y+=n*G,b+=n*V,w+=n*Y,A+=n*z,v+=n*X,c+=(n=t[3])*M,l+=n*D,u+=n*U,h+=n*F,d+=n*j,f+=n*H,p+=n*W,g+=n*$,_+=n*Q,m+=n*K,y+=n*q,b+=n*G,w+=n*V,A+=n*Y,v+=n*z,E+=n*X,l+=(n=t[4])*M,u+=n*D,h+=n*U,d+=n*F,f+=n*j,p+=n*H,g+=n*W,_+=n*$,m+=n*Q,y+=n*K,b+=n*q,w+=n*G,A+=n*V,v+=n*Y,E+=n*z,S+=n*X,u+=(n=t[5])*M,h+=n*D,d+=n*U,f+=n*F,p+=n*j,g+=n*H,_+=n*W,m+=n*$,y+=n*Q,b+=n*K,w+=n*q,A+=n*G,v+=n*V,E+=n*Y,S+=n*z,I+=n*X,h+=(n=t[6])*M,d+=n*D,f+=n*U,p+=n*F,g+=n*j,_+=n*H,m+=n*W,y+=n*$,b+=n*Q,w+=n*K,A+=n*q,v+=n*G,E+=n*V,S+=n*Y,I+=n*z,k+=n*X,d+=(n=t[7])*M,f+=n*D,p+=n*U,g+=n*F,_+=n*j,m+=n*H,y+=n*W,b+=n*$,w+=n*Q,A+=n*K,v+=n*q,E+=n*G,S+=n*V,I+=n*Y,k+=n*z,C+=n*X,f+=(n=t[8])*M,p+=n*D,g+=n*U,_+=n*F,m+=n*j,y+=n*H,b+=n*W,w+=n*$,A+=n*Q,v+=n*K,E+=n*q,S+=n*G,I+=n*V,k+=n*Y,C+=n*z,R+=n*X,p+=(n=t[9])*M,g+=n*D,_+=n*U,m+=n*F,y+=n*j,b+=n*H,w+=n*W,A+=n*$,v+=n*Q,E+=n*K,S+=n*q,I+=n*G,k+=n*V,C+=n*Y,R+=n*z,T+=n*X,g+=(n=t[10])*M,_+=n*D,m+=n*U,y+=n*F,b+=n*j,w+=n*H,A+=n*W,v+=n*$,E+=n*Q,S+=n*K,I+=n*q,k+=n*G,C+=n*V,R+=n*Y,T+=n*z,B+=n*X,_+=(n=t[11])*M,m+=n*D,y+=n*U,b+=n*F,w+=n*j,A+=n*H,v+=n*W,E+=n*$,S+=n*Q,I+=n*K,k+=n*q,C+=n*G,R+=n*V,T+=n*Y,B+=n*z,O+=n*X,m+=(n=t[12])*M,y+=n*D,b+=n*U,w+=n*F,A+=n*j,v+=n*H,E+=n*W,S+=n*$,I+=n*Q,k+=n*K,C+=n*q,R+=n*G,T+=n*V,B+=n*Y,O+=n*z,P+=n*X,y+=(n=t[13])*M,b+=n*D,w+=n*U,A+=n*F,v+=n*j,E+=n*H,S+=n*W,I+=n*$,k+=n*Q,C+=n*K,R+=n*q,T+=n*G,B+=n*V,O+=n*Y,P+=n*z,N+=n*X,b+=(n=t[14])*M,w+=n*D,A+=n*U,v+=n*F,E+=n*j,S+=n*H,I+=n*W,k+=n*$,C+=n*Q,R+=n*K,T+=n*q,B+=n*G,O+=n*V,P+=n*Y,N+=n*z,x+=n*X,w+=(n=t[15])*M,s+=38*(v+=n*U),a+=38*(E+=n*F),c+=38*(S+=n*j),l+=38*(I+=n*H),u+=38*(k+=n*W),h+=38*(C+=n*$),d+=38*(R+=n*Q),f+=38*(T+=n*K),p+=38*(B+=n*q),g+=38*(O+=n*G),_+=38*(P+=n*V),m+=38*(N+=n*Y),y+=38*(x+=n*z),b+=38*(L+=n*X),o=(n=(o+=38*(A+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=_,e[12]=m,e[13]=y,e[14]=b,e[15]=w}function j(e,t){F(e,t,t)}function H(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)j(i,i),2!==n&&4!==n&&F(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function W(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),l=t(),u=t(),h=t(),d=t(),f=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,M(a,n),o=0;o<16;o++)u[o]=a[o],d[o]=l[o]=h[o]=0;for(l[0]=d[0]=1,o=254;o>=0;--o)P(l,u,i=s[o>>>3]>>>(7&o)&1),P(h,d,i),D(f,l,h),U(l,l,h),D(h,u,d),U(u,u,d),j(d,f),j(p,l),F(l,h,l),F(h,u,f),D(f,l,h),U(l,l,h),j(u,l),U(h,d,p),F(l,h,c),D(l,l,d),F(h,h,l),F(l,d,p),F(d,u,a),j(u,f),P(l,u,i),P(h,d,i);for(o=0;o<16;o++)a[o+16]=l[o],a[o+32]=h[o],a[o+48]=u[o],a[o+64]=d[o];var g=a.subarray(32),_=a.subarray(16);return H(g,g),F(_,_,g),N(e,_),0}function $(e,t){return W(e,t,o)}function Q(e,t){return n(t,32),$(e,t)}function K(e,t,r){var n=new Uint8Array(32);return W(n,r,t),b(e,i,n,w)}I.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,l,u,h,d,f,p,g,_,m,y,b,w,A,v=this.fin?0:2048,E=this.h[0],S=this.h[1],I=this.h[2],k=this.h[3],C=this.h[4],R=this.h[5],T=this.h[6],B=this.h[7],O=this.h[8],P=this.h[9],N=this.r[0],x=this.r[1],L=this.r[2],M=this.r[3],D=this.r[4],U=this.r[5],F=this.r[6],j=this.r[7],H=this.r[8],W=this.r[9];r>=16;)d=h=0,d+=(E+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*N,d+=(S+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*W),d+=(I+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*H),d+=(k+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*j),h=(d+=(C+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,d&=8191,d+=(R+=a>>>1&8191)*(5*U),d+=(T+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),d+=(B+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),d+=(O+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),f=h+=(d+=(P+=u>>>5|v)*(5*x))>>>13,f+=E*x,f+=S*N,f+=I*(5*W),f+=k*(5*H),h=(f+=C*(5*j))>>>13,f&=8191,f+=R*(5*F),f+=T*(5*U),f+=B*(5*D),f+=O*(5*M),h+=(f+=P*(5*L))>>>13,f&=8191,p=h,p+=E*L,p+=S*x,p+=I*N,p+=k*(5*W),h=(p+=C*(5*H))>>>13,p&=8191,p+=R*(5*j),p+=T*(5*F),p+=B*(5*U),p+=O*(5*D),g=h+=(p+=P*(5*M))>>>13,g+=E*M,g+=S*L,g+=I*x,g+=k*N,h=(g+=C*(5*W))>>>13,g&=8191,g+=R*(5*H),g+=T*(5*j),g+=B*(5*F),g+=O*(5*U),_=h+=(g+=P*(5*D))>>>13,_+=E*D,_+=S*M,_+=I*L,_+=k*x,h=(_+=C*N)>>>13,_&=8191,_+=R*(5*W),_+=T*(5*H),_+=B*(5*j),_+=O*(5*F),m=h+=(_+=P*(5*U))>>>13,m+=E*U,m+=S*D,m+=I*M,m+=k*L,h=(m+=C*x)>>>13,m&=8191,m+=R*N,m+=T*(5*W),m+=B*(5*H),m+=O*(5*j),y=h+=(m+=P*(5*F))>>>13,y+=E*F,y+=S*U,y+=I*D,y+=k*M,h=(y+=C*L)>>>13,y&=8191,y+=R*x,y+=T*N,y+=B*(5*W),y+=O*(5*H),b=h+=(y+=P*(5*j))>>>13,b+=E*j,b+=S*F,b+=I*U,b+=k*D,h=(b+=C*M)>>>13,b&=8191,b+=R*L,b+=T*x,b+=B*N,b+=O*(5*W),w=h+=(b+=P*(5*H))>>>13,w+=E*H,w+=S*j,w+=I*F,w+=k*U,h=(w+=C*D)>>>13,w&=8191,w+=R*M,w+=T*L,w+=B*x,w+=O*N,A=h+=(w+=P*(5*W))>>>13,A+=E*W,A+=S*H,A+=I*j,A+=k*F,h=(A+=C*U)>>>13,A&=8191,A+=R*D,A+=T*M,A+=B*L,A+=O*x,E=d=8191&(h=(h=((h+=(A+=P*N)>>>13)<<2)+h|0)+(d&=8191)|0),S=f+=h>>>=13,I=p&=8191,k=g&=8191,C=_&=8191,R=m&=8191,T=y&=8191,B=b&=8191,O=w&=8191,P=A&=8191,t+=16,r-=16;this.h[0]=E,this.h[1]=S,this.h[2]=I,this.h[3]=k,this.h[4]=C,this.h[5]=R,this.h[6]=T,this.h[7]=B,this.h[8]=O,this.h[9]=P},I.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},I.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var q=R,G=T;var V=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var i,o,s,a,c,l,u,h,d,f,p,g,_,m,y,b,w,A,v,E,S,I,k,C,R,T,B=new Int32Array(16),O=new Int32Array(16),P=e[0],N=e[1],x=e[2],L=e[3],M=e[4],D=e[5],U=e[6],F=e[7],j=t[0],H=t[1],W=t[2],$=t[3],Q=t[4],K=t[5],q=t[6],G=t[7],Y=0;n>=128;){for(v=0;v<16;v++)E=8*v+Y,B[v]=r[E+0]<<24|r[E+1]<<16|r[E+2]<<8|r[E+3],O[v]=r[E+4]<<24|r[E+5]<<16|r[E+6]<<8|r[E+7];for(v=0;v<80;v++)if(i=P,o=N,s=x,a=L,c=M,l=D,u=U,F,d=j,f=H,p=W,g=$,_=Q,m=K,y=q,G,k=65535&(I=G),C=I>>>16,R=65535&(S=F),T=S>>>16,k+=65535&(I=(Q>>>14|M<<18)^(Q>>>18|M<<14)^(M>>>9|Q<<23)),C+=I>>>16,R+=65535&(S=(M>>>14|Q<<18)^(M>>>18|Q<<14)^(Q>>>9|M<<23)),T+=S>>>16,k+=65535&(I=Q&K^~Q&q),C+=I>>>16,R+=65535&(S=M&D^~M&U),T+=S>>>16,k+=65535&(I=V[2*v+1]),C+=I>>>16,R+=65535&(S=V[2*v]),T+=S>>>16,S=B[v%16],C+=(I=O[v%16])>>>16,R+=65535&S,T+=S>>>16,R+=(C+=(k+=65535&I)>>>16)>>>16,k=65535&(I=A=65535&k|C<<16),C=I>>>16,R=65535&(S=w=65535&R|(T+=R>>>16)<<16),T=S>>>16,k+=65535&(I=(j>>>28|P<<4)^(P>>>2|j<<30)^(P>>>7|j<<25)),C+=I>>>16,R+=65535&(S=(P>>>28|j<<4)^(j>>>2|P<<30)^(j>>>7|P<<25)),T+=S>>>16,C+=(I=j&H^j&W^H&W)>>>16,R+=65535&(S=P&N^P&x^N&x),T+=S>>>16,h=65535&(R+=(C+=(k+=65535&I)>>>16)>>>16)|(T+=R>>>16)<<16,b=65535&k|C<<16,k=65535&(I=g),C=I>>>16,R=65535&(S=a),T=S>>>16,C+=(I=A)>>>16,R+=65535&(S=w),T+=S>>>16,N=i,x=o,L=s,M=a=65535&(R+=(C+=(k+=65535&I)>>>16)>>>16)|(T+=R>>>16)<<16,D=c,U=l,F=u,P=h,H=d,W=f,$=p,Q=g=65535&k|C<<16,K=_,q=m,G=y,j=b,v%16==15)for(E=0;E<16;E++)S=B[E],k=65535&(I=O[E]),C=I>>>16,R=65535&S,T=S>>>16,S=B[(E+9)%16],k+=65535&(I=O[(E+9)%16]),C+=I>>>16,R+=65535&S,T+=S>>>16,w=B[(E+1)%16],k+=65535&(I=((A=O[(E+1)%16])>>>1|w<<31)^(A>>>8|w<<24)^(A>>>7|w<<25)),C+=I>>>16,R+=65535&(S=(w>>>1|A<<31)^(w>>>8|A<<24)^w>>>7),T+=S>>>16,w=B[(E+14)%16],C+=(I=((A=O[(E+14)%16])>>>19|w<<13)^(w>>>29|A<<3)^(A>>>6|w<<26))>>>16,R+=65535&(S=(w>>>19|A<<13)^(A>>>29|w<<3)^w>>>6),T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,B[E]=65535&R|T<<16,O[E]=65535&k|C<<16;k=65535&(I=j),C=I>>>16,R=65535&(S=P),T=S>>>16,S=e[0],C+=(I=t[0])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[0]=P=65535&R|T<<16,t[0]=j=65535&k|C<<16,k=65535&(I=H),C=I>>>16,R=65535&(S=N),T=S>>>16,S=e[1],C+=(I=t[1])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[1]=N=65535&R|T<<16,t[1]=H=65535&k|C<<16,k=65535&(I=W),C=I>>>16,R=65535&(S=x),T=S>>>16,S=e[2],C+=(I=t[2])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[2]=x=65535&R|T<<16,t[2]=W=65535&k|C<<16,k=65535&(I=$),C=I>>>16,R=65535&(S=L),T=S>>>16,S=e[3],C+=(I=t[3])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[3]=L=65535&R|T<<16,t[3]=$=65535&k|C<<16,k=65535&(I=Q),C=I>>>16,R=65535&(S=M),T=S>>>16,S=e[4],C+=(I=t[4])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[4]=M=65535&R|T<<16,t[4]=Q=65535&k|C<<16,k=65535&(I=K),C=I>>>16,R=65535&(S=D),T=S>>>16,S=e[5],C+=(I=t[5])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[5]=D=65535&R|T<<16,t[5]=K=65535&k|C<<16,k=65535&(I=q),C=I>>>16,R=65535&(S=U),T=S>>>16,S=e[6],C+=(I=t[6])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[6]=U=65535&R|T<<16,t[6]=q=65535&k|C<<16,k=65535&(I=G),C=I>>>16,R=65535&(S=F),T=S>>>16,S=e[7],C+=(I=t[7])>>>16,R+=65535&S,T+=S>>>16,T+=(R+=(C+=(k+=65535&I)>>>16)>>>16)>>>16,e[7]=F=65535&R|T<<16,t[7]=G=65535&k|C<<16,Y+=128,n-=128}return n}function z(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Y(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,p(s,r-8,a/536870912|0,a<<3),Y(i,o,s,r),n=0;n<8;n++)p(e,8*n,i[n],o[n]);return 0}function X(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),l=t(),h=t(),d=t();U(n,e[1],e[0]),U(d,r[1],r[0]),F(n,n,d),D(i,e[0],e[1]),D(d,r[0],r[1]),F(i,i,d),F(o,e[3],r[3]),F(o,o,u),F(s,e[2],r[2]),D(s,s,s),U(a,i,n),U(c,s,o),D(l,s,o),D(h,i,n),F(e[0],a,c),F(e[1],h,l),F(e[2],l,c),F(e[3],a,h)}function J(e,t,r){var n;for(n=0;n<4;n++)P(e[n],t[n],r)}function Z(e,r){var n=t(),i=t(),o=t();H(o,r[2]),F(n,r[0],o),F(i,r[1],o),N(e,i),e[31]^=L(n)<<7}function ee(e,t,r){var n,i;for(B(e[0],s),B(e[1],a),B(e[2],a),B(e[3],s),i=255;i>=0;--i)J(e,t,n=r[i/8|0]>>(7&i)&1),X(t,e),X(e,e),J(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];B(n[0],h),B(n[1],d),B(n[2],a),F(n[3],h,d),ee(e,n,r)}function re(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),z(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,te(a,s),Z(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function se(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[t(),t(),t(),t()];z(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(z(l,e.subarray(32),n+32),oe(l),te(h,l),Z(e,h),o=32;o<64;o++)e[o]=i[o];for(z(c,e,n+64),oe(c),o=0;o<64;o++)u[o]=0;for(o=0;o<32;o++)u[o]=l[o];for(o=0;o<32;o++)for(s=0;s<32;s++)u[o+s]+=c[o]*a[s];return ie(e.subarray(32),u),d}function ae(e,r){var n=t(),i=t(),o=t(),c=t(),u=t(),h=t(),d=t();return B(e[2],a),M(e[1],r),j(o,e[1]),F(c,o,l),U(o,o,e[2]),D(c,e[2],c),j(u,c),j(h,u),F(d,h,u),F(n,d,o),F(n,n,c),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)j(i,i),1!==n&&F(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),F(n,n,o),F(n,n,c),F(n,n,c),F(e[0],n,c),j(i,e[0]),F(i,i,c),x(i,o)&&F(e[0],e[0],f),j(i,e[0]),F(i,i,c),x(i,o)?-1:(L(e[0])===r[31]>>7&&U(e[0],s,e[0]),F(e[3],e[0],e[1]),0)}function ce(e,r,n,i){var o,s=new Uint8Array(32),a=new Uint8Array(64),c=[t(),t(),t(),t()],l=[t(),t(),t(),t()];if(n<64)return-1;if(ae(l,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(z(a,e,n),oe(a),ee(c,l,a),te(l,r.subarray(32)),X(c,l),Z(s,c),n-=64,m(r,0,s,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var le=16,ue=64,he=32,de=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:S,crypto_stream:E,crypto_stream_salsa20_xor:A,crypto_stream_salsa20:v,crypto_onetimeauth:k,crypto_onetimeauth_verify:C,crypto_verify_16:_,crypto_verify_32:m,crypto_secretbox:R,crypto_secretbox_open:T,crypto_scalarmult:W,crypto_scalarmult_base:$,crypto_box_beforenm:K,crypto_box_afternm:q,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return K(s,i,o),q(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return K(s,i,o),G(e,t,r,n,s)},crypto_box_keypair:Q,crypto_hash:z,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return R(i,n,n.length,t,r),i.subarray(le)},e.secretbox.open=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(le+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+le]=e[o];return!(n.length<32)&&(0===T(i,n,n.length,t,r)&&i.subarray(32))},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=le,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return W(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return $(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return K(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return Q(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return $(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(pe(e,t),t.length!==he)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(ue),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==he)throw new Error("bad public key size");var n,i=new Uint8Array(ue+e.length),o=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+ue]=e[n];return ce(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(de);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(he),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),r=new Uint8Array(de),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=he,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){pe(e);var t=new Uint8Array(64);return z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}else(t=r(6982))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},9656:(e,t)=>{var r,n,i,o=void 0,s=(r=Object.prototype.toString,n=Object.prototype.hasOwnProperty,{Class:function(e){return r.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return n.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return 0|e},ToUint32:function(e){return e>>>0}}),a=Math.LN2,c=Math.abs,l=Math.floor,u=Math.log,h=Math.min,d=Math.pow,f=Math.round;function p(e){if(g&&i){var t,r=g(e);for(t=0;t<r.length;t+=1)i(e,r[t],{value:e[r[t]],writable:!1,enumerable:!1,configurable:!1})}}i=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,r){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return s.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,r.get),s.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,r.set),s.HasProperty(r,"value")&&(e[t]=r.value),e};var g=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)s.HasOwnProperty(e,t)&&r.push(t);return r};function _(e,t){var r=32-t;return e<<r>>r}function m(e,t){var r=32-t;return e<<r>>>r}function y(e){return[255&e]}function b(e){return _(e[0],8)}function w(e){return[255&e]}function A(e){return m(e[0],8)}function v(e){return[(e=f(Number(e)))<0?0:e>255?255:255&e]}function E(e){return[e>>8&255,255&e]}function S(e){return _(e[0]<<8|e[1],16)}function I(e){return[e>>8&255,255&e]}function k(e){return m(e[0]<<8|e[1],16)}function C(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function R(e){return _(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function T(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function B(e){return m(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function O(e,t,r){var n,i,o,s,f,p,g,_=(1<<t-1)-1;function m(e){var t=l(e),r=e-t;return r<.5?t:r>.5||t%2?t+1:t}for(e!=e?(i=(1<<t)-1,o=d(2,r-1),n=0):e===1/0||e===-1/0?(i=(1<<t)-1,o=0,n=e<0?1:0):0===e?(i=0,o=0,n=1/e==-1/0?1:0):(n=e<0,(e=c(e))>=d(2,1-_)?(i=h(l(u(e)/a),1023),(o=m(e/d(2,i)*d(2,r)))/d(2,r)>=2&&(i+=1,o=1),i>_?(i=(1<<t)-1,o=0):(i+=_,o-=d(2,r))):(i=0,o=m(e/d(2,1-_-r)))),f=[],s=r;s;s-=1)f.push(o%2?1:0),o=l(o/2);for(s=t;s;s-=1)f.push(i%2?1:0),i=l(i/2);for(f.push(n?1:0),f.reverse(),p=f.join(""),g=[];p.length;)g.push(parseInt(p.substring(0,8),2)),p=p.substring(8);return g}function P(e,t,r){var n,i,o,s,a,c,l,u,h=[];for(n=e.length;n;n-=1)for(o=e[n-1],i=8;i;i-=1)h.push(o%2?1:0),o>>=1;return h.reverse(),s=h.join(""),a=(1<<t-1)-1,c=parseInt(s.substring(0,1),2)?-1:1,l=parseInt(s.substring(1,1+t),2),u=parseInt(s.substring(1+t),2),l===(1<<t)-1?0!==u?NaN:c*(1/0):l>0?c*d(2,l-a)*(1+u/d(2,r)):0!==u?c*d(2,-(a-1))*(u/d(2,r)):c<0?-0:0}function N(e){return P(e,11,52)}function x(e){return O(e,11,52)}function L(e){return P(e,8,23)}function M(e){return O(e,8,23)}!function(){var e=function(e){if((e=s.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;p(this)};t.Az=t.Az||e;var r=function(){};function n(t,n,a){var c;return c=function(t,r,n){var o,a,l,u;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===c)for(o=arguments[0],this.length=o.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)this._setter(l,o._getter(l));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===s.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===s.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=s.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=s.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(a=arguments[0],this.length=s.ToUint32(a.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,l=0;l<this.length;l+=1)u=a[l],this._setter(l,Number(u));else{if(this.length=s.ToInt32(arguments[0]),n<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=c,p(this),function(e){if(i){if(e.length>1e5)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)r(t)}function r(t){i(e,t,{get:function(){return e._getter(t)},set:function(r){e._setter(t,r)},enumerable:!0,configurable:!1})}}(this)},c.prototype=new r,c.prototype.BYTES_PER_ELEMENT=t,c.prototype._pack=n,c.prototype._unpack=a,c.BYTES_PER_ELEMENT=t,c.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return o;var t,r,n=[];for(t=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,r+=1)n.push(this.buffer._bytes[r]);return this._unpack(n)},c.prototype.get=c.prototype._getter,c.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return o;var r,n,i=this._pack(t);for(r=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,n+=1)this.buffer._bytes[n]=i[r]},c.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var r,n,i,o,a,c,l,u,h,d;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(r=arguments[0],(i=s.ToUint32(arguments[1]))+r.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(u=this.byteOffset+i*this.BYTES_PER_ELEMENT,h=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(d=[],a=0,c=r.byteOffset;a<h;a+=1,c+=1)d[a]=r.buffer._bytes[c];for(a=0,l=u;a<h;a+=1,l+=1)this.buffer._bytes[l]=d[a]}else for(a=0,c=r.byteOffset,l=u;a<h;a+=1,c+=1,l+=1)this.buffer._bytes[l]=r.buffer._bytes[c]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(n=arguments[0],o=s.ToUint32(n.length),(i=s.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(a=0;a<o;a+=1)c=n[a],this._setter(i+a,Number(c))}},c.prototype.subarray=function(e,t){function r(e,t,r){return e<t?t:e>r?r:e}e=s.ToInt32(e),t=s.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=r(e,0,this.length);var n=(t=r(t,0,this.length))-e;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,n)},c}var a=n(1,y,b),c=n(1,w,A),l=n(1,v,A),u=n(2,E,S),h=n(2,I,k),d=n(4,C,R),f=n(4,T,B),g=n(4,M,L),_=n(8,x,N);t.fo=t.fo||a,t.SE=t.SE||c,t.ER=t.ER||l,t.ss=t.ss||u,t.hR=t.hR||h,t.GM=t.GM||d,t.bt=t.bt||f,t.l6=t.l6||g,t.aQ=t.aQ||_}(),function(){function e(e,t){return s.IsCallable(e.get)?e.get(t):e[t]}var r,n=(r=new t.hR([4660]),18===e(new t.SE(r.buffer),0)),i=function(e,r,n){if(0===arguments.length)e=new t.Az(0);else if(!(e instanceof t.Az||"ArrayBuffer"===s.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new t.Az(0),this.byteOffset=s.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:s.ToUint32(n),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");p(this)};function o(r){return function(i,o){if((i=s.ToUint32(i))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");i+=this.byteOffset;var a,c=new t.SE(this.buffer,i,r.BYTES_PER_ELEMENT),l=[];for(a=0;a<r.BYTES_PER_ELEMENT;a+=1)l.push(e(c,a));return Boolean(o)===Boolean(n)&&l.reverse(),e(new r(new t.SE(l).buffer),0)}}function a(r){return function(i,o,a){if((i=s.ToUint32(i))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c,l=new r([o]),u=new t.SE(l.buffer),h=[];for(c=0;c<r.BYTES_PER_ELEMENT;c+=1)h.push(e(u,c));Boolean(a)===Boolean(n)&&h.reverse(),new t.SE(this.buffer,i,r.BYTES_PER_ELEMENT).set(h)}}i.prototype.getUint8=o(t.SE),i.prototype.getInt8=o(t.fo),i.prototype.getUint16=o(t.hR),i.prototype.getInt16=o(t.ss),i.prototype.getUint32=o(t.bt),i.prototype.getInt32=o(t.GM),i.prototype.getFloat32=o(t.l6),i.prototype.getFloat64=o(t.aQ),i.prototype.setUint8=a(t.SE),i.prototype.setInt8=a(t.fo),i.prototype.setUint16=a(t.hR),i.prototype.setInt16=a(t.ss),i.prototype.setUint32=a(t.bt),i.prototype.setInt32=a(t.GM),i.prototype.setFloat32=a(t.l6),i.prototype.setFloat64=a(t.aQ),t.U$=t.U$||i}()},7983:(e,t,r)=>{e.exports=r(9023).deprecate},2587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>v,parse:()=>m,stringify:()=>h,v1:()=>_,v3:()=>b,v4:()=>w,v5:()=>A,validate:()=>l,version:()=>E});var n=r(6982),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const l=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const h=function(e,t=0){const r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r};let d,f,p=0,g=0;const _=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||d,s=void 0!==e.clockseq?e.clockseq:f;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=d=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:g+1;const u=c-p+(l-g)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),(u<0||c>p)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,g=l,f=s,c+=122192928e5;const _=(1e4*(268435455&c)+l)%4294967296;i[n++]=_>>>24&255,i[n++]=_>>>16&255,i[n++]=_>>>8&255,i[n++]=255&_;const m=c/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||h(i)};const m=function(e){if(!l(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function y(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return h(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const b=y("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()}));const w=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return h(n)};const A=y("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),v="00000000-0000-0000-0000-000000000000";const E=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},6911:(e,t,r)=>{const n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=r(6928),o=n?";":":",s=r(1147),a=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||o,i=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],s=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=n?s.split(r):[""];return n&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:i,pathExt:a,pathExtExe:s}},l=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:o,pathExtExe:l}=c(e,t),u=[],h=r=>new Promise(((o,s)=>{if(r===n.length)return t.all&&u.length?o(u):s(a(e));const c=n[r],l=/^".*"$/.test(c)?c.slice(1,-1):c,h=i.join(l,e),f=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;o(d(f,r,0))})),d=(e,r,n)=>new Promise(((i,a)=>{if(n===o.length)return i(h(r+1));const c=o[n];s(e+c,{pathExt:l},((o,s)=>{if(!o&&s){if(!t.all)return i(e+c);u.push(e+c)}return i(d(e,r,n+1))}))}));return r?h(0).then((e=>r(null,e)),r):h(0)};e.exports=l,l.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:o}=c(e,t),l=[];for(let a=0;a<r.length;a++){const c=r[a],u=/^".*"$/.test(c)?c.slice(1,-1):c,h=i.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;for(let e=0;e<n.length;e++){const r=d+n[e];try{if(s.sync(r,{pathExt:o})){if(!t.all)return r;l.push(r)}}catch(e){}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw a(e)}},2613:e=>{"use strict";e.exports=require("assert")},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},6982:e=>{"use strict";e.exports=require("crypto")},2250:e=>{"use strict";e.exports=require("dns")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},9278:e=>{"use strict";e.exports=require("net")},3024:e=>{"use strict";e.exports=require("node:fs")},6760:e=>{"use strict";e.exports=require("node:path")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},3193:e=>{"use strict";e.exports=require("string_decoder")},4756:e=>{"use strict";e.exports=require("tls")},2018:e=>{"use strict";e.exports=require("tty")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},3106:e=>{"use strict";e.exports=require("zlib")},7265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,n=new Set,i="object"==typeof process&&process?process:{},o=(e,t,r,n)=>{"function"==typeof i.emitWarning?i.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)};let s=globalThis.AbortController,a=globalThis.AbortSignal;if("undefined"==typeof s){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},s=class{constructor(){t()}signal=new a;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==i.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const c=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),l=e=>c(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?u:null:null;class u extends Array{constructor(e){super(e),this.fill(0)}}class h{heap;length;static#e=!1;static create(e){const t=l(e);if(!t)return[];h.#e=!0;const r=new h(e,t);return h.#e=!1,r}constructor(e,t){if(!h.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class d{#t;#r;#n;#i;#o;#s;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#c;#l;#u;#h;#d;#f;#p;#g;#_;#m;#y;#b;#w;#A;#v;#E;static unsafeExposeInternals(e){return{starts:e.#b,ttls:e.#w,sizes:e.#y,keyMap:e.#l,keyList:e.#u,valList:e.#h,next:e.#d,prev:e.#f,get head(){return e.#p},get tail(){return e.#g},free:e.#_,isBackgroundFetch:t=>e.#S(t),backgroundFetch:(t,r,n,i)=>e.#I(t,r,n,i),moveToTail:t=>e.#k(t),indexes:t=>e.#C(t),rindexes:t=>e.#R(t),isStale:t=>e.#T(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#c}get size(){return this.#a}get fetchMethod(){return this.#o}get memoMethod(){return this.#s}get dispose(){return this.#n}get disposeAfter(){return this.#i}constructor(e){const{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:f,dispose:p,disposeAfter:g,noDisposeOnSet:_,noUpdateTTL:m,maxSize:y=0,maxEntrySize:b=0,sizeCalculation:w,fetchMethod:A,memoMethod:v,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:k,ignoreFetchAbort:C}=e;if(0!==t&&!c(t))throw new TypeError("max option must be a nonnegative integer");const R=t?l(t):Array;if(!R)throw new Error("invalid max value: "+t);if(this.#t=t,this.#r=y,this.maxEntrySize=b||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==v&&"function"!=typeof v)throw new TypeError("memoMethod must be a function if defined");if(this.#s=v,void 0!==A&&"function"!=typeof A)throw new TypeError("fetchMethod must be a function if specified");if(this.#o=A,this.#v=!!A,this.#l=new Map,this.#u=new Array(t).fill(void 0),this.#h=new Array(t).fill(void 0),this.#d=new R(t),this.#f=new R(t),this.#p=0,this.#g=0,this.#_=h.create(t),this.#a=0,this.#c=0,"function"==typeof p&&(this.#n=p),"function"==typeof g?(this.#i=g,this.#m=[]):(this.#i=void 0,this.#m=void 0),this.#A=!!this.#n,this.#E=!!this.#i,this.noDisposeOnSet=!!_,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!C,0!==this.maxEntrySize){if(0!==this.#r&&!c(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=c(i)||0===i?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){const e="LRU_CACHE_UNBOUNDED";if((e=>!n.has(e))(e)){n.add(e);o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,d)}}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#O(){const e=new u(this.#t),t=new u(this.#t);this.#w=e,this.#b=t,this.#P=(n,i,o=r.now())=>{if(t[n]=0!==i?o:0,e[n]=i,0!==i&&this.ttlAutopurge){const e=setTimeout((()=>{this.#T(n)&&this.#N(this.#u[n],"expire")}),i+1);e.unref&&e.unref()}},this.#x=n=>{t[n]=0!==e[n]?r.now():0},this.#L=(r,o)=>{if(e[o]){const s=e[o],a=t[o];if(!s||!a)return;r.ttl=s,r.start=a,r.now=n||i();const c=r.now-a;r.remainingTTL=s-c}};let n=0;const i=()=>{const e=r.now();if(this.ttlResolution>0){n=e;const t=setTimeout((()=>n=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{const o=this.#l.get(r);if(void 0===o)return 0;const s=e[o],a=t[o];if(!s||!a)return 1/0;return s-((n||i())-a)},this.#T=r=>{const o=t[r],s=e[r];return!!s&&!!o&&(n||i())-o>s}}#x=()=>{};#L=()=>{};#P=()=>{};#T=()=>!1;#B(){const e=new u(this.#t);this.#c=0,this.#y=e,this.#M=t=>{this.#c-=e[t],e[t]=0},this.#D=(e,t,r,n)=>{if(this.#S(t))return 0;if(!c(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!c(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#U=(t,r,n)=>{if(e[t]=r,this.#r){const r=this.#r-e[t];for(;this.#c>r;)this.#F(!0)}this.#c+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#c)}}#M=e=>{};#U=(e,t,r)=>{};#D=(e,t,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#C({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#g;this.#j(t)&&(!e&&this.#T(t)||(yield t),t!==this.#p);)t=this.#f[t]}*#R({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#p;this.#j(t)&&(!e&&this.#T(t)||(yield t),t!==this.#g);)t=this.#d[t]}#j(e){return void 0!==e&&this.#l.get(this.#u[e])===e}*entries(){for(const e of this.#C())void 0===this.#h[e]||void 0===this.#u[e]||this.#S(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*rentries(){for(const e of this.#R())void 0===this.#h[e]||void 0===this.#u[e]||this.#S(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*keys(){for(const e of this.#C()){const t=this.#u[e];void 0===t||this.#S(this.#h[e])||(yield t)}}*rkeys(){for(const e of this.#R()){const t=this.#u[e];void 0===t||this.#S(this.#h[e])||(yield t)}}*values(){for(const e of this.#C()){void 0===this.#h[e]||this.#S(this.#h[e])||(yield this.#h[e])}}*rvalues(){for(const e of this.#R()){void 0===this.#h[e]||this.#S(this.#h[e])||(yield this.#h[e])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const r of this.#C()){const n=this.#h[r],i=this.#S(n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,this.#u[r],this))return this.get(this.#u[r],t)}}forEach(e,t=this){for(const r of this.#C()){const n=this.#h[r],i=this.#S(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#u[r],this)}}rforEach(e,t=this){for(const r of this.#R()){const n=this.#h[r],i=this.#S(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#u[r],this)}}purgeStale(){let e=!1;for(const t of this.#R({allowStale:!0}))this.#T(t)&&(this.#N(this.#u[t],"expire"),e=!0);return e}info(e){const t=this.#l.get(e);if(void 0===t)return;const n=this.#h[t],i=this.#S(n)?n.__staleWhileFetching:n;if(void 0===i)return;const o={value:i};if(this.#w&&this.#b){const e=this.#w[t],n=this.#b[t];if(e&&n){const t=e-(r.now()-n);o.ttl=t,o.start=Date.now()}}return this.#y&&(o.size=this.#y[t]),o}dump(){const e=[];for(const t of this.#C({allowStale:!0})){const n=this.#u[t],i=this.#h[t],o=this.#S(i)?i.__staleWhileFetching:i;if(void 0===o||void 0===n)continue;const s={value:o};if(this.#w&&this.#b){s.ttl=this.#w[t];const e=r.now()-this.#b[t];s.start=Math.floor(Date.now()-e)}this.#y&&(s.size=this.#y[t]),e.unshift([n,s])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const e=Date.now()-n.start;n.start=r.now()-e}this.set(t,n.value,n)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;const{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const l=this.#D(e,t,r.size||0,s);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#N(e,"set"),this;let u=0===this.#a?void 0:this.#l.get(e);if(void 0===u)u=0===this.#a?this.#g:0!==this.#_.length?this.#_.pop():this.#a===this.#t?this.#F(!1):this.#a,this.#u[u]=e,this.#h[u]=t,this.#l.set(e,u),this.#d[this.#g]=u,this.#f[u]=this.#g,this.#g=u,this.#a++,this.#U(u,l,a),a&&(a.set="add"),c=!1;else{this.#k(u);const r=this.#h[u];if(t!==r){if(this.#v&&this.#S(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=r;void 0===t||o||(this.#A&&this.#n?.(t,e,"set"),this.#E&&this.#m?.push([t,e,"set"]))}else o||(this.#A&&this.#n?.(r,e,"set"),this.#E&&this.#m?.push([r,e,"set"]));if(this.#M(u),this.#U(u,l,a),this.#h[u]=t,a){a.set="replace";const e=r&&this.#S(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===n||this.#w||this.#O(),this.#w&&(c||this.#P(u,n,i),a&&this.#L(a,u)),!o&&this.#E&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#i?.(...t)}return this}pop(){try{for(;this.#a;){const e=this.#h[this.#p];if(this.#F(!0),this.#S(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#E&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#i?.(...t)}}}#F(e){const t=this.#p,r=this.#u[t],n=this.#h[t];return this.#v&&this.#S(n)?n.__abortController.abort(new Error("evicted")):(this.#A||this.#E)&&(this.#A&&this.#n?.(n,r,"evict"),this.#E&&this.#m?.push([n,r,"evict"])),this.#M(t),e&&(this.#u[t]=void 0,this.#h[t]=void 0,this.#_.push(t)),1===this.#a?(this.#p=this.#g=0,this.#_.length=0):this.#p=this.#d[t],this.#l.delete(r),this.#a--,t}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,i=this.#l.get(e);if(void 0!==i){const e=this.#h[i];if(this.#S(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#T(i))return r&&this.#x(i),n&&(n.has="hit",this.#L(n,i)),!0;n&&(n.has="stale",this.#L(n,i))}else n&&(n.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,n=this.#l.get(e);if(void 0===n||!r&&this.#T(n))return;const i=this.#h[n];return this.#S(i)?i.__staleWhileFetching:i}#I(e,t,r,n){const i=void 0===t?void 0:this.#h[t];if(this.#S(i))return i;const o=new s,{signal:a}=r;a?.addEventListener("abort",(()=>o.abort(a.reason)),{signal:o.signal});const c={signal:o.signal,options:r,context:n},l=(n,i=!1)=>{const{aborted:s}=o.signal,a=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(s&&!i?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),s&&!a&&!i)return u(o.signal.reason);const l=h;return this.#h[t]===h&&(void 0===n?l.__staleWhileFetching?this.#h[t]=l.__staleWhileFetching:this.#N(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,c.options))),n},u=n=>{const{aborted:i}=o.signal,s=i&&r.allowStaleOnFetchAbort,a=s||r.allowStaleOnFetchRejection,c=a||r.noDeleteOnFetchRejection,l=h;if(this.#h[t]===h){!c||void 0===l.__staleWhileFetching?this.#N(e,"fetch"):s||(this.#h[t]=l.__staleWhileFetching)}if(a)return r.status&&void 0!==l.__staleWhileFetching&&(r.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw n};r.status&&(r.status.fetchDispatched=!0);const h=new Promise(((t,n)=>{const s=this.#o?.(e,i,c);s&&s instanceof Promise&&s.then((e=>t(void 0===e?void 0:e)),n),o.signal.addEventListener("abort",(()=>{r.ignoreFetchAbort&&!r.allowStaleOnFetchAbort||(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>l(e,!0)))}))})).then(l,(e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e)))),d=Object.assign(h,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,d,{...c.options,status:void 0}),t=this.#l.get(e)):this.#h[t]=d,d}#S(e){if(!this.#v)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof s}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:_,signal:m}=t;if(!this.#v)return _&&(_.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:_});const y={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:_,signal:m};let b=this.#l.get(e);if(void 0===b){_&&(_.fetch="miss");const t=this.#I(e,b,y,p);return t.__returned=t}{const t=this.#h[b];if(this.#S(t)){const e=r&&void 0!==t.__staleWhileFetching;return _&&(_.fetch="inflight",e&&(_.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=this.#T(b);if(!g&&!i)return _&&(_.fetch="hit"),this.#k(b),n&&this.#x(b),_&&this.#L(_,b),t;const o=this.#I(e,b,y,p),s=void 0!==o.__staleWhileFetching&&r;return _&&(_.fetch=i?"stale":"refresh",s&&i&&(_.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=this.#s;if(!r)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:i,...o}=t,s=this.get(e,o);if(!i&&void 0!==s)return s;const a=r(e,s,{options:o,context:n});return this.set(e,a,o),a}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,s=this.#l.get(e);if(void 0!==s){const t=this.#h[s],a=this.#S(t);return o&&this.#L(o,s),this.#T(s)?(o&&(o.get="stale"),a?(o&&r&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),r?t.__staleWhileFetching:void 0):(i||this.#N(e,"expire"),o&&r&&(o.returnedStale=!0),r?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(this.#k(s),n&&this.#x(s),t))}o&&(o.get="miss")}#H(e,t){this.#f[t]=e,this.#d[e]=t}#k(e){e!==this.#g&&(e===this.#p?this.#p=this.#d[e]:this.#H(this.#f[e],this.#d[e]),this.#H(this.#g,e),this.#g=e)}delete(e){return this.#N(e,"delete")}#N(e,t){let r=!1;if(0!==this.#a){const n=this.#l.get(e);if(void 0!==n)if(r=!0,1===this.#a)this.#W(t);else{this.#M(n);const r=this.#h[n];if(this.#S(r)?r.__abortController.abort(new Error("deleted")):(this.#A||this.#E)&&(this.#A&&this.#n?.(r,e,t),this.#E&&this.#m?.push([r,e,t])),this.#l.delete(e),this.#u[n]=void 0,this.#h[n]=void 0,n===this.#g)this.#g=this.#f[n];else if(n===this.#p)this.#p=this.#d[n];else{const e=this.#f[n];this.#d[e]=this.#d[n];const t=this.#d[n];this.#f[t]=this.#f[n]}this.#a--,this.#_.push(n)}}if(this.#E&&this.#m?.length){const e=this.#m;let t;for(;t=e?.shift();)this.#i?.(...t)}return r}clear(){return this.#W("delete")}#W(e){for(const t of this.#R({allowStale:!0})){const r=this.#h[t];if(this.#S(r))r.__abortController.abort(new Error("deleted"));else{const n=this.#u[t];this.#A&&this.#n?.(r,n,e),this.#E&&this.#m?.push([r,n,e])}}if(this.#l.clear(),this.#h.fill(void 0),this.#u.fill(void 0),this.#w&&this.#b&&(this.#w.fill(0),this.#b.fill(0)),this.#y&&this.#y.fill(0),this.#p=0,this.#g=0,this.#_.length=0,this.#c=0,this.#a=0,this.#E&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#i?.(...t)}}}t.LRUCache=d},6845:e=>{"use strict";e.exports={version:"5.10.2"}},8342:e=>{"use strict";e.exports={rE:"1.16.0"}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="";var n=r(7927),i=exports="undefined"==typeof exports?{}:exports;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=main.nodejs.js.map